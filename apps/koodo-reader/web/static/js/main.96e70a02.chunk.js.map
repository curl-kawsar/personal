{"version":3,"sources":["utils/fileUtils/mobiParser.tsx","utils/fileUtils/generateEpub.tsx","constants/mimetype.tsx","utils/fileUtils/xmlUtil.tsx","utils/readUtils/recordLocation.tsx","utils/fileUtils/bookUtil.tsx","utils/readUtils/recordRecent.tsx","utils/otherUtil.tsx","containers/htmlViewer/component.tsx","utils/fileUtils/htmlParser.tsx","utils/readUtils/styleUtil.tsx","i18n.tsx","store/reducers/book.tsx","utils/readUtils/readingTime.tsx","utils/readUtils/sortUtil.tsx","store/reducers/manager.tsx","store/reducers/progressPanel.tsx","store/reducers/reader.tsx","store/reducers/viewArea.tsx","store/reducers/sidebar.tsx","store/reducers/backupPage.tsx","store/index.tsx","utils/readUtils/addTrash.tsx","store/actions/manager.tsx","store/actions/backupPage.tsx","store/actions/reader.tsx","store/actions/book.tsx","store/actions/sidebar.tsx","constants/sideMenu.tsx","containers/sidebar/component.tsx","containers/sidebar/index.tsx","utils/searchUtil.tsx","components/searchBox/component.tsx","components/searchBox/index.tsx","utils/fileUtils/md5Util.tsx","utils/fileUtils/epubUtil.tsx","utils/fileUtils/pdfUtil.tsx","utils/fileUtils/fileUtil.tsx","components/importLocal/component.tsx","components/importLocal/index.tsx","components/dialogs/updateInfo/component.tsx","components/dialogs/updateInfo/index.tsx","utils/syncUtils/restoreUtil.tsx","utils/syncUtils/dropbox.tsx","utils/syncUtils/webdav.tsx","utils/syncUtils/backupUtil.tsx","containers/header/component.tsx","containers/header/index.tsx","utils/readUtils/deleteUtil.tsx","utils/readUtils/shelfUtil.tsx","utils/readUtils/addFavorite.tsx","components/dialogs/deleteDialog/component.tsx","components/dialogs/deleteDialog/index.tsx","components/dialogs/editDialog/component.tsx","components/dialogs/editDialog/index.tsx","components/dialogs/addDialog/component.tsx","components/dialogs/addDialog/index.tsx","components/dialogs/sortDialog/component.tsx","components/dialogs/sortDialog/index.tsx","components/dialogs/aboutDialog/component.tsx","components/dialogs/aboutDialog/index.tsx","containers/messageBox/component.tsx","containers/messageBox/index.tsx","constants/driveList.tsx","components/dialogs/tokenDialog/component.tsx","components/dialogs/tokenDialog/index.tsx","components/dialogs/backupDialog/component.tsx","components/dialogs/backupDialog/index.tsx","constants/dropdownList.tsx","constants/settingList.tsx","constants/themeList.tsx","components/dialogs/settingDialog/component.tsx","components/dialogs/settingDialog/index.tsx","components/dialogs/actionDialog/component.tsx","components/dialogs/actionDialog/index.tsx","components/emptyCover/index.tsx","components/bookCardtem/component.tsx","components/bookCardtem/index.tsx","components/bookListItem/component.tsx","components/bookListItem/index.tsx","components/bookCoverItem/component.tsx","components/bookCoverItem/index.tsx","components/dialogs/deletePopup/component.tsx","components/dialogs/deletePopup/index.tsx","constants/emptyList.tsx","containers/emptyPage/component.tsx","containers/emptyPage/index.tsx","constants/viewMode.tsx","components/viewMode/component.tsx","components/viewMode/index.tsx","containers/lists/bookList/component.tsx","containers/lists/bookList/index.tsx","containers/lists/deletedBookList/component.tsx","containers/lists/deletedBookList/index.tsx","store/actions/viewArea.tsx","utils/readUtils/tagUtil.tsx","components/deleteIcon/component.tsx","components/deleteIcon/index.tsx","components/noteTag/component.tsx","components/noteTag/index.tsx","containers/lists/cardList/component.tsx","containers/lists/cardList/index.tsx","containers/lists/noteList/component.tsx","containers/lists/noteList/index.tsx","containers/lists/digestList/component.tsx","containers/lists/digestList/index.tsx","containers/loadingPage/component.tsx","containers/loadingPage/index.tsx","router/routes.tsx","components/arrow/index.tsx","components/dialogs/loadingDialog/index.tsx","components/dialogs/TipDialog/component.tsx","components/dialogs/TipDialog/index.tsx","pages/manager/component.tsx","pages/manager/index.tsx","store/actions/progressPanel.tsx","model/Note.ts","components/popups/popupNote/component.tsx","components/popups/popupNote/index.tsx","components/colorOption/component.tsx","components/colorOption/index.tsx","constants/popupList.tsx","components/popups/popupOption/component.tsx","components/popups/popupOption/index.tsx","components/popups/popupTrans/component.tsx","components/popups/popupTrans/index.tsx","components/popups/popupMenu/component.tsx","components/popups/popupMenu/index.tsx","components/imageViewer/component.tsx","components/imageViewer/index.tsx","containers/epubViewer/component.tsx","containers/epubViewer/index.tsx","containers/background/component.tsx","containers/background/index.tsx","utils/readUtils/themeUtil.tsx","components/readerSettings/themeList/component.tsx","components/readerSettings/themeList/index.tsx","components/readerSettings/sliderList/component.tsx","components/readerSettings/sliderList/index.tsx","components/readerSettings/dropdownList/component.tsx","components/readerSettings/dropdownList/index.tsx","components/readerSettings/modeControl/component.tsx","components/readerSettings/modeControl/index.tsx","components/textToSpeech/component.tsx","components/textToSpeech/index.tsx","components/readerSettings/settingSwitch/component.tsx","components/readerSettings/settingSwitch/index.tsx","containers/panels/settingPanel/component.tsx","containers/panels/settingPanel/index.tsx","containers/lists/contentList/component.tsx","containers/lists/contentList/index.tsx","containers/lists/navList/component.tsx","containers/lists/navList/index.tsx","containers/panels/navigationPanel/component.tsx","containers/panels/navigationPanel/index.tsx","model/Bookmark.ts","containers/panels/operationPanel/component.tsx","containers/panels/operationPanel/index.tsx","containers/panels/progressPanel/component.tsx","containers/panels/progressPanel/index.tsx","utils/mouseEvent.tsx","containers/epubReader/component.tsx","containers/epubReader/index.tsx","pages/epubPage/component.tsx","pages/epubPage/index.tsx","containers/htmlViewer/index.tsx","pages/htmlReader/component.tsx","pages/htmlReader/index.tsx","pages/djvuReader/component.tsx","pages/djvuReader/index.tsx","pages/comicReader/component.tsx","pages/comicReader/index.tsx","pages/redirect/component.tsx","pages/redirect/index.tsx","router/index.tsx","index.tsx","utils/syncUtils/common.tsx","model/Book.ts"],"names":["ab2str","buf","ArrayBuffer","Uint8Array","TextDecoder","decode","domParser","DOMParser","Buffer","capacity","fragment_list","imageArray","cur_fragment","this","Fragment","push","byte","write","idx","fi","length","frag","size","get","s","i","total_buffer","offset","full","set","buffer","slice","MobiFile","data","view","header","palm_header","mobi_header","reclist","render_image","imgDoms","Promise","resolve","reject","imgDom","getAttribute","blob","read_image","imgReader","FileReader","onload","e","src","target","result","onerror","err","readAsDataURL","DataView","v","getUint8","getUint16","getUint32","_of","flags","pos","extra","res","buffer_get_varlen","l","byte_count","shift","text_end","record_count","buffers","read_text_record","total_size","copagesne_uint8array","extra_flags","begin","end","ex","get_record_extrasize","compression","char","next","distance","lz_length","buffer_size","uncompression_lz77","shrink","first_image_idx","Blob","load_pdbheader","load_reclist","load_record0","name","getStr","attr","version","ctime","mtime","btime","mod_num","appinfo_offset","sortinfo_offset","type","creator","uid","next_rec","record_num","record","load_record0_header","load_mobi_header","p_header","first_record","setoffset","skip","text_length","record_size","encryption_type","start_offset","identifier","header_length","mobi_type","text_encoding","generator_version","first_nonbook_index","full_name_offset","full_name_length","language","input_language","output_language","min_version","huff_rec_index","huff_rec_count","datp_rec_index","datp_rec_count","exth_flags","drm_offset","drm_count","drm_size","drm_flags","span","document","createElement","innerHTML","textContent","innerText","isElectron","load","content","read_text","bookDoc","parseFromString","documentElement","lines","Array","from","querySelectorAll","parseContent","len","getElementsByTagName","a","width","height","join","handleImage","isTitle","line","indexOf","startsWith","test","escapeHTML","str","escapeChars","regexString","key","regex","RegExp","replace","m","generateEpub","file","fs","window","require","path","chardet","readFileSync","iconv","nodepub","remote","configDir","app","getPath","dirPath","bookExtension","split","reverse","bookName","substr","reader","readAsArrayBuffer","event","writeFileSync","metadata","id","Date","getTime","title","author","fileAs","genre","tags","copyright","publisher","published","toLocaleDateString","description","contents","source","images","epub","contentFilter","encoding","detect","lineLength","imgIndex","filter","item","splice","trim","parseInt","analyzeChapter","addSection","writeEPUB","console","log","blobTemp","fileTemp","File","lastModified","remove","mimetype","svg","png","jpg","jpeg","gif","webp","zip","rar","tar","html","htm","xml","xhtml","xmlBookToObj","informBook","objBook","xml2js","Parser","parseString","fictionBook","FictionBook","bookDesc","firstName","lastName","binary","posterSrc","xmlBookTagFilter","bookString","bookStart","match","bookBody","search","txtToHtml","text","RecordLocation","bookKey","cfi","percentage","json","localStorage","getItem","obj","JSON","parse","setItem","stringify","scroll","BookUtil","dataPath","ipcRenderer","sendSync","localforage","removeItem","isArrayBuffer","book","windowWidth","getScrollHeight","OtherUtil","getReaderConfig","windowHeight","ref","format","toLowerCase","location","href","open","navigator","platform","openBook","extension","md5","toUpperCase","BookModel","RecordRecent","bookArr","index","unshift","books","forEach","value","readerConfig","Viewer","props","handleIframeHeight","iFrame","body","contentWindow","Math","max","scrollHeight","offsetHeight","clientHeight","handleRest","docStr","htmlParser","HtmlParser","handleHtmlBook","doc","getAnchoredDoc","chapters","getContentList","subitems","handleRenderHtml","frames","htmlBook","outerHTML","styleUtil","addHtmlCss","setTimeout","getElementsByClassName","scrollTo","state","handleMobi","mobiFile","MobiParser","render","handleTxt","handleMD","evt","marked","readAsText","handleRtf","rtfToHTML","fromString","handleDocx","mammoth","convertToHtml","arrayBuffer","then","handleFb2","fb2Str","bookObj","handleHtml","toLocaleLowerCase","url","setState","_","findIndex","fetchBook","handleReadingBook","handleReadingState","RecentBooks","setRecent","handleRenderFunc","setInterval","handleRecord","addEventListener","handleLeaveReader","setReaderConfig","clientWidth","screenX","screenY","recordScrollHeight","scrollTop","className","style","parseFloat","marginLeft","overflowY","React","Component","withRouter","contentList","contentTitleList","getContent","random","floor","label","iframe","contentDocument","css","getDefaultCss","getElementById","background","querySelector","setAttribute","head","appendChild","getCustomCss","colors","isJSON","color","addStyle","rel","resources","en","translation","zh","cht","ru","i18n","use","initReactI18next","init","lng","fallbackLng","keySeparator","interpolation","escapeValue","initState","isOpenEditDialog","isOpenDeleteDialog","isOpenAddDialog","isOpenActionDialog","isReading","dragItem","currentBook","currentEpub","renderFunc","ReadingTime","time","getBookName","map","getAuthorName","getBookKey","getBookIndex","nameArr","oldNameArr","indexArr","SortUtil","bookSortCode","sort","order","durationKeys","durationObj","getAllTime","sortable","b","Object","keys","getDurationArr","bookKeys","union","oldAuthorArr","authorArr","percentagenKeys","locationObj","getAllCfi","getPercentageArr","notes","noteSortCode","noteArr","clone","dateArr","uniq","date","year","month","day","noteObj","note","findLastIndex","sortCode","orderCode","deletedBooks","searchResults","isSearch","isAboutOpen","isBookSort","isNoteSort","isSettingOpen","viewMode","isSortDisplay","isShowLoading","isTipDialog","isShowNew","getNoteSortCode","isMessage","message","tip","locations","bookmarks","digests","currentChapter","flattenChapters","noteKey","originalText","readerMode","selection","isOpenMenu","menuMode","isChangeDirection","isShowBookmark","mode","shelfIndex","isDragToLove","isDragToDelete","isCollapsed","isBackup","isOpenTokenDialog","rootReducer","combineReducers","action","payload","isRedirect","manager","section","progressPanel","viewArea","isOpenHighlight","dialogLocation","sidebar","backupPage","store","createStore","compose","applyMiddleware","thunk","devToolsExtension","f","AddTrash","handleBooks","handleDeletedBooks","handleSearchResults","handleSearch","handleTipDialog","handleTip","handleSetting","handleAbout","handleMessage","handleMessageBox","isShow","handleSortDisplay","handleLoadingDialog","handleNewDialog","handleBookSortCode","handleFetchBooks","isTrash","dispatch","keyArr","getAllTrash","handleKeyFilter","handleKeyRemove","handleFetchList","items","arr","itemArr","handleBackupDialog","handleTokenDialog","handleBookmarks","handleNoteKey","handleFetchNotes","flatChapter","newChapter","concat","handleFetchChapters","loaded","navigation","handleChapters","toc","catch","handleFetchBookmarks","bookmarkArr","handleEditDialog","handleDeleteDialog","handleAddDialog","handleActionDialog","handleReadingEpub","handleDragItem","handleShelfIndex","handleMode","handleDragToLove","handleDragToDelete","sideMenu","icon","Sidebar","handleSidebar","history","handleHover","hoverIndex","handleCollapse","handleJump","shell","openExternal","URL","onClick","t","position","trigger","alt","onDrop","onMouseEnter","onMouseLeave","display","actionCreator","connect","withTranslation","SearchUtil","arr1","arr2","_arr","flag","list","keyWord","keyword","bookNameArr","AuthorNameArr","bookResults","fuzzyQuery","authorResults","MergeArray","keyCode","textArr","noteResults","textResults","SearchBox","handleMouse","refs","searchBox","isNavSearch","handleSearchState","results","tabMode","MouseNoteSearch","MouseSearch","handleKey","KeyNoteSearch","KeySearch","q","doSearch","searchList","excerpt","handleSearchList","all","spine","spineItems","bind","find","finally","unload","apply","handleCancel","focus","onKeyDown","onFocus","placeholder","paddingRight","right","top","fetchMD5","blobSlice","prototype","mozSlice","webkitSlice","chunkSize","chunks","ceil","currentChunk","spark","SparkMD5","fileReader","Error","appendBinary","loadNext","start","readAsBinaryString","call","addEpub","cover","ePub","coverUrl","fetch","r","onloadend","pdfjsLib","addPdf","getDocument","promise","pdfDoc_","getMetadata","info","Title","Author","fetchMD5FromPath","filePath","crypto","md5sum","createHash","ReadStream","on","d","update","digest","fetchFileFromPath","response","getReader","ReadableStream","controller","pump","read","done","enqueue","close","stream","Response","error","ImportLocal","handleFilePath","isRepeat","repeatBook","isOpenFile","getMd5WithBrowser","RedirectBook","handleAddBook","handleBook","addBook","file_content","generateBook","encode","_result","acceptedFiles","handleDrag","accept","multiple","getRootProps","getInputProps","fontSize","fontWeight","Trans","newOptions","loop","autoplay","animationData","animationNew","rendererSettings","preserveAspectRatio","successOptions","animationSuccess","UpdateInfo","renderList","isUpdated","handleClose","updateLog","axios","newVersion","options","marginTop","marginBottom","copy","new","fix","JSZip","RestoreUtil","restore","handleFinish","isSync","configArr","loadAsync","files","async","Dropbox","DropboxUtil","showMessage","ACCESS_TOKEN","getFullYear","getMonth","getDate","dbx","accessToken","filesUpload","filesCopyV2","from_path","to_path","filesDownload","fileBlob","lastModifiedDate","WebdavUtil","UploadFile","createClient","username","password","client","wfs","exists","createDirectory","writeFile","copyFile","DownloadFile","request","downloadLink","getFileDownloadLink","createWriteStream","pipe","BackupUtil","backup","driveIndex","bookZip","folder","timestamp","toString","generateAsync","FileSaver","saveAs","moveData","SyncUtil","syncData","Header","syncFromLocation","storageLocation","sourcePath","outPath","isdataChange","readFile","lastSyncTime","syncToLocation","isOnlyLocal","isNewVersion","existsSync","mkdirSync","left","DeleteUtil","defaultShelf","New","Study","Work","Entertainment","ShelfUtil","shelfTitle","undefined","currentShelfTitle","shelfList","AddFavorite","DeleteDialog","handleDeleteOther","deleteBookmarks","deleteNotes","handleComfirm","clearShelf","deleteBook","setTrash","clear","deletefromAllShelf","EditDialog","isCheck","nameBox","authorBox","AddDialog","inputElement","getShelf","shelfTitles","isNew","hasOwnProperty","setShelf","handleChange","onChange","renderShelfList","disabled","SortDialog","handleSort","code","isNote","handleNoteSortCode","handleNoteSort","setNoteSortCode","handleBookSort","setBookSortCode","handleOrder","opacity","AboutDialog","MessageBox","config","callback_url","token_url","dropbox_client_id","googledrive_client_id","onedrive_client_id","driveList","TokenDialog","handleTokenComfirm","token","driveName","handleDavComfirm","BackupDialog","currentStep","handleRestoreToLocal","preventDefault","handleDrive","currentDrive","dialogProps","dropdownList","option","speedList","settingList","propName","langList","readerSettingList","htmlSettingList","backgroundList","textList","themeList","SettingDialog","bool","changeLanguage","changeSearch","searchEngine","changeFont","font","stateName","handleChangeLocation","dialog","showOpenDialog","properties","filePaths","changeLocation","handleDisplayDark","isDisplayDark","reload","handleTheme","currentThemeIndex","isTouch","isAutoFullscreen","isOpenBook","isExpandContent","isDisableUpdate","children","transform","transition","backgroundColor","ActionDialog","handleDeleteBook","handleEditBook","handleAddShelf","handleRestoreBook","maxHeight","toLocaleString","getBookPosition","emptyCover","scale","BookCardItem","handleMoreAction","x","clientX","clientY","handleLoveBook","setFavorite","isFavorite","handleCancelLoveBook","getAllFavorite","handleConfig","isOpenConfig","getAllRecent","nextProps","getCfi","actionProps","onMouseOver","onDragStart","onDragEnd","Book","BookListItem","handleResoreBook","isDeleteDialog","round","BookItem","BookCoverItem","bottom","DeletePopup","handleDeletePopup","handleDeleteOpearion","emptyList","main","sub","EmptyPage","visibility","ViewMode","BookList","subItem","handleIndexFilter","renderBookList","handleShelf","sortBooks","zIndex","handleShelfItem","handleDeleteShelf","removeShelf","selected","isOpenDelete","favoriteBooks","to","currentShelfList","BackUtil","deletePopupProps","handleOpenMenu","handleMenuMode","handleChangeDirection","handleShowBookmark","handleSelection","TagUtil","tagName","tagArr","DeleteIcon","handleDelete","deleteItems","getAllTags","deleteFunc","itemKey","handleChangeTag","deleteIndex","NoteTag","tagToIndex","tag","temp","indextoTag","tagIndex","indexResult","handleTag","handleAddTag","isInput","setTags","handleInput","handleShowTags","isShowTags","isCard","onBlur","CardList","handleBookName","handleShowDelete","deleteKey","recordCfi","cards","sortNotes","cardProps","chapter","NoteList","handleFilter","filterTag","j","noteProps","DigestList","LoadingPage","routes","component","DeletedBookList","Arrow","xmlns","viewBox","fill","stroke","strokeWidth","cx","cy","y2","strokeLinecap","defaultOptions","LoadingDialog","downloadOptions","TipDialog","Manager","timer","isDrag","totalBooks","isAuthed","isError","isCopied","handleFetchBookSortCode","isMobileOnly","onDragEnter","ele","getBookSortCode","handlePercentage","handleFetchPercentage","Note","chapterIndex","range","PopupNote","noteIndex","textArea","currentLocation","rendition","chapterHref","charRange","rangy","getSelection","saveCharacterRanges","createNote","ColorOption","handleChangeOptiion","isLine","border","handleColor","borderBottom","About","popupList","sel","PopupOption","handleNote","handleEdge","popupMenu","posX","posY","rightEdge","_layout","handleCopy","execCommand","empty","handleTrans","handleOriginalText","handleDigest","handleSearchInternet","handleSearchBook","leftPanel","clickEvent","MouseEvent","bubbles","cancelable","dispatchEvent","focusEvent","searchIcon","keyEvent","KeyboardEvent","handleSpeak","msg","SpeechSynthesisUtterance","voice","speechSynthesis","getVoices","speak","PopupTrans","translatedText","script","handleCallback","trans_result","dst","PopupMenu","highlighter","showNote","isFirstShow","cfiRange","rect","getHighlighter","createHighlighter","ignoreWhiteSpace","elementTagName","elementProperties","onclick","getRangeAt","getBoundingClientRect","showMenu","handleClickHighlighter","currentTarget","dataset","stopPropagation","onElementCreate","element","applier","createClassApplier","addClassApplier","y","renderHighlighters","highlighters","highlightersByChapter","iWin","defaultView","removeAllHighlights","classes","restoreCharacterRanges","warn","highlightSelection","openMenu","handleHighlight","PopupProps","ImageViewer","showImage","parentNode","showMessageBox","buttons","isShowImage","zoomIndex","rotateIndex","imageRatio","img","Image","direction","naturalWidth","naturalHeight","image","hideImage","handleZoomIn","handleZoomOut","handleSave","handleClock","handleCounterClock","StyleUtil","addDefaultCss","siriOptions","animationSiri","EpubViewer","isFirst","loading","percentageFromCfi","themes","default","popupMenuProps","handleEnterReader","ViewArea","Background","isSingle","prevPage","nextPage","isHideFooter","isHideHeader","isUseBackground","handleFetchLocations","displayed","page","i18nKey","count","boxShadow","generate","ThemeUtil","themeName","themeArr","ThemeList","handleChangeBgColor","currentBackgroundIndex","handleChooseBgColor","handleColorTextPicker","isShowTextPicker","getAllThemes","setThemes","handleColorBgPicker","isShowBgPicker","handleChooseTextColor","currentTextIndex","enableAlpha","margin","animation","SliderList","onValueChange","letterSpacing","paraSpacing","brightness","onValueInput","handleMinus","step","handleAdd","defaultValue","minLabel","maxValue","min","minValue","onInput","onMouseUp","maxLabel","DropdownList","currentFontFamilyIndex","currentLineHeightIndex","currentTextAlignIndex","handleView","ModeControl","handleChangeMode","TextToSpeech","handleChangeAudio","isAudioOn","cancel","synth","clearInterval","voices","handleAudio","cfibase","cfistart","cfiend","getRange","handleSpeech","voiceIndex","speed","rate","onend","isSupported","SettingSwitch","_handleRest","handleBold","isBold","handleItalic","isItalic","handleShadow","isShadow","handleInvert","isInvert","handleUnderline","isUnderline","handleChangeBackground","handleFooter","handleHeader","archived","SettingPanel","handleLock","isSettingLocked","float","ContentList","currentIndex","offsetTop","renderContentList","level","NavList","currentData","currentTab","bookmarkProps","cursor","NavigationPanel","handleChangeTab","isNavLocked","renderSearchList","renderSearchPage","startIndex","pageList","total","searchProps","Bookmark","OperationPanel","timeStamp","isFullScreen","isBookmark","currentPercentage","timeLeft","now","onbeforeunload","handleExit","handleExitFullScreen","handleFullScreen","de","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","bookmark","setTime","abs","handleAddBookmark","handleScreen","ProgressPanel","onProgressChange","cfiFromPercentage","onProgressInput","displayPercentage","previourChapter","currentChapterIndex","nextChapter","handleJumpChapter","handleJumpPage","currentPage","totalPage","onTouchEnd","Hammer","isFirefox","userAgent","lock","arrowKeys","prev","mouseFirefox","detail","mouseChrome","wheelDelta","gesture","bindEvent","Reader","messageTimer","tickTimer","handleRenderBook","renderTo","flow","snap","spread","isOpenRightPanel","isOpenLeftPanel","isOpenTopPanel","isOpenBottomPanel","renderedBook","removeChild","renditionProps","EpubReader","handleDjvu","ViewerInstance","DjVu","loadDocument","Unrar","handleRender","handleCbr","handleCbz","handleCbt","base64ArrayBuffer","chunk","base64","encodings","bytes","byteLength","byteRemainder","mainLength","addImage","imageDom","scrollingElement","filename","unrar","entries","getEntries","fileData","decompress","untar","extractedFiles","extractedFile","comicScale","Redirect","alert","hash","params","getParamsFromUrl","access_token","Router","useEffect","DjvuReader","HtmlReader","ComicReader","_Redirect","coverLoading","ReactDOM","ebtRenderer","appVersion","invoke","applyTheme","hashParams","substring","exec","decodeURIComponent","AdmZip","extractAllTo","deleteBooks","oldPath","newPath","readdir","isConfiged","emptyDirSync"],"mappings":"+JAAA,SAASA,EAAOC,GAId,OAHIA,aAAeC,cACjBD,EAAM,IAAIE,WAAWF,IAEhB,IAAIG,YAAY,SAASC,OAAOJ,GAGzC,IAAIK,EAAY,IAAIC,UAEdC,E,WAKJ,WAAYC,GAAW,yBAJvBA,cAIsB,OAHtBC,mBAGsB,OAFtBC,gBAEsB,OADtBC,kBACsB,EACpBC,KAAKJ,SAAWA,EAChBI,KAAKH,cAAgB,GACrBG,KAAKF,WAAa,GAClBE,KAAKD,aAAe,IAAIE,EAASL,GACjCI,KAAKH,cAAcK,KAAKF,KAAKD,c,yCAE/B,SAAMI,GACSH,KAAKD,aAAaK,MAAMD,KAEnCH,KAAKD,aAAe,IAAIE,EAASD,KAAKJ,UACtCI,KAAKH,cAAcK,KAAKF,KAAKD,cAC7BC,KAAKD,aAAaK,MAAMD,M,iBAG5B,SAAIE,GAEF,IADA,IAAIC,EAAK,EACFA,EAAKN,KAAKH,cAAcU,QAAQ,CACrC,IAAIC,EAAOR,KAAKH,cAAcS,GAC9B,GAAID,EAAMG,EAAKC,KACb,OAAOD,EAAKE,IAAIL,GAElBA,GAAOG,EAAKC,KACZH,GAAM,EAER,OAAO,O,kBAET,WAEE,IADA,IAAIK,EAAI,EACCC,EAAI,EAAGA,EAAIZ,KAAKH,cAAcU,OAAQK,IAC7CD,GAAKX,KAAKH,cAAce,GAAGH,KAE7B,OAAOE,I,oBAET,WAGE,IAFA,IAAIE,EAAe,IAAIvB,WAAWU,KAAKS,QACnCK,EAAS,EACJF,EAAI,EAAGA,EAAIZ,KAAKH,cAAcU,OAAQK,IAAK,CAClD,IAAIJ,EAAOR,KAAKH,cAAce,GAC1BJ,EAAKO,OACPF,EAAaG,IAAIR,EAAKS,OAAQH,GAE9BD,EAAaG,IAAIR,EAAKS,OAAOC,MAAM,EAAGV,EAAKC,MAAOK,GAEpDA,GAAUN,EAAKC,KAEjB,OAAOI,M,KAoBLZ,E,WAIJ,WAAYL,GAAW,yBAHvBqB,YAGsB,OAFtBrB,cAEsB,OADtBa,UACsB,EACpBT,KAAKiB,OAAS,IAAI3B,WAAWM,GAC7BI,KAAKJ,SAAWA,EAChBI,KAAKS,KAAO,E,yCAGd,SAAMN,GACJ,QAAIH,KAAKS,MAAQT,KAAKJ,YAGtBI,KAAKiB,OAAOjB,KAAKS,MAAQN,EACzBH,KAAKS,MAAQ,GACN,K,kBAET,WACE,OAAOT,KAAKS,OAAST,KAAKJ,W,iBAE5B,SAAIS,GACF,OAAOL,KAAKiB,OAAOZ,O,KAyCjBc,E,WAQJ,WAAYC,GAAO,IAAD,gCAPlBC,UAOkB,OANlBJ,YAMkB,OALlBH,YAKkB,OAJlBQ,YAIkB,OAHlBC,iBAGkB,OAFlBC,iBAEkB,OADlBC,aACkB,OAmRlBC,aAAe,SAACC,EAASf,GACvB,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GAC3B,IAAIC,EAASJ,EAAQf,GACjBP,GAAO0B,EAAOC,aAAa,YAC3BC,EAAO,EAAKC,WAAW7B,EAAM,GAC7B8B,EAAY,IAAIC,WACpBD,EAAUE,OAAS,SAACC,GAAO,IAAD,IACxBP,EAAOQ,IAAP,UAAaD,EAAEE,cAAf,aAAa,EAAUC,OACvBZ,EAAO,UAACS,EAAEE,cAAH,aAAC,EAAUC,SAEpBN,EAAUO,QAAU,SAAUC,GAC5Bb,EAAOa,IAETR,EAAUS,cAAcX,OA/R1BjC,KAAKqB,KAAO,IAAIwB,SAASzB,GACzBpB,KAAKiB,OAASjB,KAAKqB,KAAKJ,OACxBjB,KAAKc,OAAS,EACdd,KAAKsB,OAAS,K,yCAGhB,c,sBAEA,WACE,IAAIwB,EAAI9C,KAAKqB,KAAK0B,SAAS/C,KAAKc,QAEhC,OADAd,KAAKc,QAAU,EACRgC,I,uBAGT,WACE,IAAIA,EAAI9C,KAAKqB,KAAK2B,UAAUhD,KAAKc,QAEjC,OADAd,KAAKc,QAAU,EACRgC,I,uBAGT,WACE,IAAIA,EAAI9C,KAAKqB,KAAK4B,UAAUjD,KAAKc,QAEjC,OADAd,KAAKc,QAAU,EACRgC,I,oBAGT,SAAOrC,GACL,IAAIqC,EAAI3D,EAAOa,KAAKiB,OAAOC,MAAMlB,KAAKc,OAAQd,KAAKc,OAASL,IAE5D,OADAT,KAAKc,QAAUL,EACRqC,I,kBAGT,SAAKrC,GACHT,KAAKc,QAAUL,I,uBAGjB,SAAUyC,GACRlD,KAAKc,OAASoC,I,kCAGhB,SAAqB9B,EAAM+B,GAGzB,IAFA,IAAIC,EAAMhC,EAAKb,OAAS,EACpB8C,EAAQ,EACHzC,EAAI,GAAIA,EAAI,EAAGA,IACtB,GAAIuC,EAAS,GAAKvC,EAAI,CACpB,IAAI0C,EAAMtD,KAAKuD,kBAAkBnC,EAAMgC,GACnC3C,EAAO6C,EAAI,GACXE,EAAIF,EAAI,GACZF,EAAME,EAAI,GACVF,GAAO3C,EAAO+C,EACdH,GAAS5C,EAGD,EAAR0C,IAEFE,GAAqB,GAAP,EADNjC,EAAKgC,KAGf,OAAOC,I,+BAIT,SAAkBjC,EAAMgC,GAOtB,IANA,IAAII,EAAI,EACJ/C,EAAO,EACPgD,EAAa,EAGbC,EAAQ,EACH9C,EAAI,GAAKA,IAAK,CACrB,IAAIT,EAAOiB,EAAKgC,GAQhB,GAPA3C,IALS,IAKAN,IAAgBuD,EACzBA,GAAS,EACTF,GAAK,EAELJ,GAAO,GADPK,GAAc,IAII,IAXJ,IAUAtD,GACmB,EAC/B,MAGJ,MAAO,CAACM,EAAM+C,EAAGJ,K,uBAGnB,WAGE,IAFA,IAAIO,EAAW3D,KAAKuB,YAAYqC,aAC5BC,EAAe,GACVjD,EAAI,EAAGA,GAAK+C,EAAU/C,IAC7BiD,EAAQ3D,KAAKF,KAAK8D,iBAAiBlD,IAGrC,OAAOzB,EAnLgB,SAAU0E,GAEnC,IADA,IAAIE,EAAa,EACRnD,EAAI,EAAGA,EAAIiD,EAAQtD,OAAQK,IAAK,CACvC,IAAIK,EAAS4C,EAAQjD,GACrBmD,GAAc9C,EAAOV,OAIvB,IAFA,IAAIM,EAAe,IAAIvB,WAAWyE,GAC9BjD,EAAS,EACJF,EAAI,EAAGA,EAAIiD,EAAQtD,OAAQK,IAClCK,EAAS4C,EAAQjD,GACjBC,EAAaG,IAAIC,EAAQH,GACzBA,GAAUG,EAAOV,OAEnB,OAAOM,EAqKKmD,CAAqBH,M,8BAIjC,SAAiBjD,GACf,IAAIuC,EAAQnD,KAAKwB,YAAYyC,YACzBC,EAAQlE,KAAKyB,QAAQb,GAAGE,OACxBqD,EAAMnE,KAAKyB,QAAQb,EAAI,GAAGE,OAE1BM,EAAO,IAAI9B,WAAWU,KAAKiB,OAAOC,MAAMgD,EAAOC,IAC/CC,EAAKpE,KAAKqE,qBAAqBjD,EAAM+B,GAGzC,OADA/B,EAAO,IAAI9B,WAAWU,KAAKiB,OAAOC,MAAMgD,EAAOC,EAAMC,IAChB,IAAjCpE,KAAKuB,YAAY+C,YArJA,SAAUlD,GAKjC,IAJA,IAAIb,EAASa,EAAKb,OACdO,EAAS,EACTG,EAAS,IAAItB,EAAOyB,EAAKb,QAEtBO,EAASP,GAAQ,CACtB,IAAIgE,EAAOnD,EAAKN,GAGhB,GAFAA,GAAU,EAEG,IAATyD,EACFtD,EAAOb,MAAMmE,QACR,GAAIA,GAAQ,EAAG,CACpB,IAAK,IAAI3D,EAAIE,EAAQF,EAAIE,EAASyD,EAAM3D,IACtCK,EAAOb,MAAMgB,EAAKR,IAEpBE,GAAUyD,OACL,GAAIA,GAAQ,IACjBtD,EAAOb,MAAMmE,QACR,GAAIA,GAAQ,IAAM,CACvB,IAAIC,EAAOpD,EAAKN,GAChBA,GAAU,EAKV,IAJA,IAAI2D,GAAcF,GAAQ,EAAKC,IAAS,EAAK,KACzCE,EAA2B,GAAP,EAAPF,GAEbG,EAAc1D,EAAOR,OAChBG,EAAI,EAAGA,EAAI8D,EAAW9D,IAC7BK,EAAOb,MAAMa,EAAOP,IAAIiE,EAAcF,IACtCE,GAAe,OAGjB1D,EAAOb,MAAM,IACba,EAAOb,MAAa,IAAPmE,GAGjB,OAAOtD,EAoHU2D,CAAmBxD,GAClByD,SAEPzD,I,wBAIX,SAAWf,GACT,IAAIyE,EAAkB9E,KAAKwB,YAAYsD,gBACnCZ,EAAQlE,KAAKyB,QAAQqD,EAAkBzE,GAAKS,OAC5CqD,EAAMnE,KAAKyB,QAAQqD,EAAkBzE,EAAM,GAAGS,OAC9CM,EAAO,IAAI9B,WAAWU,KAAKiB,OAAOC,MAAMgD,EAAOC,IACnD,OAAO,IAAIY,KAAK,CAAC3D,EAAKH,W,kBAGxB,WACEjB,KAAKsB,OAAStB,KAAKgF,iBACnBhF,KAAKyB,QAAUzB,KAAKiF,eACpBjF,KAAKkF,iB,4BAGP,WACE,IAAI5D,EAAc,GAelB,OAdAA,EAAO6D,KAAOnF,KAAKoF,OAAO,IAC1B9D,EAAO+D,KAAOrF,KAAKgD,YACnB1B,EAAOgE,QAAUtF,KAAKgD,YACtB1B,EAAOiE,MAAQvF,KAAKiD,YACpB3B,EAAOkE,MAAQxF,KAAKiD,YACpB3B,EAAOmE,MAAQzF,KAAKiD,YACpB3B,EAAOoE,QAAU1F,KAAKiD,YACtB3B,EAAOqE,eAAiB3F,KAAKiD,YAC7B3B,EAAOsE,gBAAkB5F,KAAKiD,YAC9B3B,EAAOuE,KAAO7F,KAAKoF,OAAO,GAC1B9D,EAAOwE,QAAU9F,KAAKoF,OAAO,GAC7B9D,EAAOyE,IAAM/F,KAAKiD,YAClB3B,EAAO0E,SAAWhG,KAAKiD,YACvB3B,EAAO2E,WAAajG,KAAKgD,YAClB1B,I,0BAGT,WAEE,IADA,IAAIG,EAAe,GACVb,EAAI,EAAGA,EAAIZ,KAAKsB,OAAO2E,WAAYrF,IAAK,CAC/C,IAAIsF,EAAc,GAClBA,EAAOpF,OAASd,KAAKiD,YAErBiD,EAAOb,KAAOrF,KAAKiD,YACnBxB,EAAQvB,KAAKgG,GAEf,OAAOzE,I,0BAET,WACEzB,KAAKuB,YAAcvB,KAAKmG,sBACxBnG,KAAKwB,YAAcxB,KAAKoG,qB,iCAG1B,WACE,IAAIC,EAAgB,GAChBC,EAAetG,KAAKyB,QAAQ,GAWhC,OAVAzB,KAAKuG,UAAUD,EAAaxF,QAE5BuF,EAAS/B,YAActE,KAAKgD,YAC5BhD,KAAKwG,KAAK,GACVH,EAASI,YAAczG,KAAKiD,YAC5BoD,EAASzC,aAAe5D,KAAKgD,YAC7BqD,EAASK,YAAc1G,KAAKgD,YAC5BqD,EAASM,gBAAkB3G,KAAKgD,YAChChD,KAAKwG,KAAK,GAEHH,I,8BAGT,WACE,IAAI7E,EAAmB,GAEnBoF,EAAe5G,KAAKc,OA8CxB,OA5CAU,EAAYqF,WAAa7G,KAAKiD,YAC9BzB,EAAYsF,cAAgB9G,KAAKiD,YACjCzB,EAAYuF,UAAY/G,KAAKiD,YAC7BzB,EAAYwF,cAAgBhH,KAAKiD,YACjCzB,EAAYuE,IAAM/F,KAAKiD,YACvBzB,EAAYyF,kBAAoBjH,KAAKiD,YAErCjD,KAAKwG,KAAK,IAEVhF,EAAY0F,oBAAsBlH,KAAKiD,YACvCzB,EAAY2F,iBAAmBnH,KAAKiD,YACpCzB,EAAY4F,iBAAmBpH,KAAKiD,YAEpCzB,EAAY6F,SAAWrH,KAAKiD,YAC5BzB,EAAY8F,eAAiBtH,KAAKiD,YAClCzB,EAAY+F,gBAAkBvH,KAAKiD,YACnCzB,EAAYgG,YAAcxH,KAAKiD,YAC/BzB,EAAYsD,gBAAkB9E,KAAKiD,YAEnCzB,EAAYiG,eAAiBzH,KAAKiD,YAClCzB,EAAYkG,eAAiB1H,KAAKiD,YAClCzB,EAAYmG,eAAiB3H,KAAKiD,YAClCzB,EAAYoG,eAAiB5H,KAAKiD,YAElCzB,EAAYqG,WAAa7H,KAAKiD,YAE9BjD,KAAKwG,KAAK,IAEVhF,EAAYsG,WAAa9H,KAAKiD,YAC9BzB,EAAYuG,UAAY/H,KAAKiD,YAC7BzB,EAAYwG,SAAWhI,KAAKiD,YAC5BzB,EAAYyG,UAAYjI,KAAKiD,YAE7BjD,KAAKwG,KAAK,GAGVxG,KAAKwG,KAAK,GAEVxG,KAAKwG,KAAK,IAEVhF,EAAYyC,YAAcjE,KAAKgD,YAE/BhD,KAAKuG,UAAUK,EAAepF,EAAYsF,eAEnCtF,I,8BAET,WAEE,MAAO,K,4BAET,SAAeb,GACb,IAAIuH,EAAOC,SAASC,cAAc,QAElC,OADAF,EAAKG,UAAY1H,EACVuH,EAAKI,aAAeJ,EAAKK,Y,oBAElC,WAAqC,IAAD,OAA7BC,EAA6B,wDAClC,OAAO,IAAI5G,SAAQ,SAACC,EAASC,GAC3B,EAAK2G,OAML,IALA,IAAIC,EAAU,EAAKC,YACfC,EAAUnJ,EAAUoJ,gBAAgBH,EAAS,aAC9CI,gBACCC,EAAaC,MAAMC,KAAKL,EAAQM,iBAAiB,mBACjDC,EAAoB,GACfvI,EAAI,EAAGwI,EAAML,EAAMxI,OAAQK,EAAIwI,EAAM,EAAGxI,IAAK,CACpDmI,EAAMnI,GAAG2H,WACPQ,EAAMnI,GAAG2H,YAAcY,EAAaA,EAAa5I,OAAS,IAC1D4I,EAAajJ,KAAK6I,EAAMnI,GAAG2H,WAC7B,IAAI5G,EAAUoH,EAAMnI,GAAGyI,qBAAqB,OAC5C,GAAI1H,EAAQpB,OAAS,EACnB,IAAK,IAAIK,EAAI,EAAGA,EAAIe,EAAQpB,OAAQK,IAClCuI,EAAajJ,KAAK,WAIP,uCAAG,gCAAAoJ,EAAA,sDACd3H,EAAUiH,EAAQS,qBAAqB,OAE3CF,EAAajJ,KAAK,UACTU,EAAI,EAJK,YAIFA,EAAIe,EAAQpB,QAJV,iCAKE,EAAKmB,aAAaC,EAASf,GAL7B,OAKV2B,EALU,OAMhB4G,EAAajJ,KACXqC,EAAM,IAAMZ,EAAQf,GAAG2I,MAAQ,IAAM5H,EAAQf,GAAG4I,QAPlC,OAIkB5I,IAJlB,uBAUde,EAAQpB,OAAS,MAAQiI,EAC3B3G,EAAQ+G,GAER/G,EAAQsH,EAAaM,KAAK,aAbV,4CAAH,qDAgBjBC,U,KAqBSvI,O,8HC5bFwI,EAAU,SAACC,GACtB,OACEA,EAAKrJ,OAAS,KACS,IAAvBqJ,EAAKC,QAAQ,OACU,IAAvBD,EAAKC,QAAQ,OACZD,EAAKE,WAAW,aACfF,EAAKE,WAAW,aAChBF,EAAKE,WAAW,iBAChBF,EAAKE,WAAW,iBAChBF,EAAKE,WAAW,yCAChBF,EAAKE,WAAW,iBAChBF,EAAKE,WAAW,iBAChBF,EAAKE,WAAW,iBAChBF,EAAKE,WAAW,iBACfF,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WAClCD,EAAKC,QAAQ,WAAQ,GACpBD,EAAKC,QAAQ,WAAQ,GACrBD,EAAKC,QAAQ,UAAOD,EAAKC,QAAQ,WACnC,sFAAsFE,KACpFH,IAEF,QAAQG,KAAKH,KAGbI,EAAa,SAACC,GAClB,IAAIC,EAAc,CAChB,OAAK,OACL,OAAK,QACL,OAAK,MACL,SAAK,OACL,OAAK,OACL,OAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,OACL,IAAK,MACL,IAAK,OAGHC,EAAc,IAClB,IAAK,IAAIC,KAAOF,EACdC,GAAeC,EAEjBD,GAAe,IAEf,IAAIE,EAAQ,IAAIC,OAAOH,EAAa,KACpC,OAAOF,EAAIM,QAAQF,GAAO,SAAUG,GAClC,MAAO,IAAMN,EAAYM,GAAK,QAGrBC,EAAe,SAACC,GAC3B,OAAO,IAAI9I,SAAwB,SAACC,EAASC,GAC3C,IAAM6I,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACtBE,EAAUH,OAAOC,QAAQ,WACvBG,EAAiBJ,OAAOC,QAAQ,MAAhCG,aACFC,EAAQL,OAAOC,QAAQ,cACvBK,EAAUN,OAAOC,QAAQ,WAC/B,EAAwBD,OAAOC,QAAQ,YAA/BM,EAAR,EAAQA,OACFC,GADN,EAAgBC,KACUF,EAAOE,KAAKC,QAAQ,YACxCC,EAAUT,EAAKrB,KAAK2B,EAAW,WAC/BjG,EAAOuF,EAAKvF,KACdqG,EACFrG,EAAK0E,QAAQ,SAAW,EACpB,OACA1E,EAAK0E,QAAQ,SAAW,EACxB,OACA1E,EAAKsG,MAAM,KAAKC,UAAU,GAC5BC,EAAWxG,EAAKyG,OAClB,EACAzG,EAAK5E,QAA4B,QAAlBiL,EAA0B,EAAI,GAAK,GAEhDK,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkBpB,GACzBmB,EAAOxJ,OAAS,SAAC0J,GACfpB,EAAGqB,cACDlB,EAAKrB,KAAK8B,EAASb,EAAKvF,MACxBxF,EAAOsJ,KAAK8C,EAAMvJ,OAAQC,SAG5B,IAAIwJ,EAAW,CACbC,IAAI,IAAIC,MAAOC,UACfC,MAAOV,EACPW,OAAQ,iBACRC,OAAQ,YACRC,MAAO,cACPC,KAAM,sBACNC,UAAW,kBACXC,UAAWnB,EACXoB,WAAW,IAAIT,MAAOU,qBACtBxF,SAAU,KACVyF,YAAa,mCACbC,SAAU,UACVC,OAAQ,2BACRC,OAAQ,CAACnC,EAAKrB,KAAK8B,EAAV,eAIP2B,EAAOhC,EAAQ/C,SAAS8D,EAAUnB,EAAKrB,KAAK8B,EAAV,cAClC7C,EAAe,GACfyE,EAAqB,IACF,WACrB,IAAM/L,EAAO4J,EAAaF,EAAKrB,KAAK8B,EAASb,EAAKvF,MAAO,CACvDiI,SAAU,WAENhO,EAAM,IAAIO,EAAOyB,EAAM,UACvB2H,EAAQkC,EAAMzL,OAAOJ,EAAK2L,EAAQsC,OAAOjO,IAAMqM,MAAM,MACrD6B,EAAavE,EAAMxI,OACnBgN,EAAWxE,EAAMc,QAAQ,UACzBoD,EAASlE,EAAM7H,MAAMqM,GAAUC,QAAO,SAACC,GAC3C,OAAOA,EAAK3D,WAAW,WAEzBf,EAAM2E,OAAOH,EAAUD,EAAaC,GAXT,oBAYVxE,GAZU,IAY3B,2BAAwB,CAAC,IAAhB0E,EAAe,QAChB7D,EAAOI,EAAWyD,GAAME,OAC1BhE,EAAQC,GACVlB,EAAQxI,KAAK,CACXmM,MAAOzC,EACPxI,KAAM,KAECwI,IACJlB,EAAQA,EAAQnI,OAAS,IAC5BmI,EAAQxI,KAAK,CACXmM,MAAO,UACPjL,KAAM,KAGG,WAATwI,EACEqD,EAAO1M,OAAS,GAClBmI,EAAQA,EAAQnI,OAAS,GAAGa,MAA5B,oBACE6L,EAAO,GAAGxB,MAAM,KAAK,GADvB,4CAIEmC,SAASX,EAAO,GAAGxB,MAAM,KAAK,IAAM,EAAS,KAJ/C,sBAKcwB,EAAO,GAAGxB,MAAM,KAAK,GALnC,wBAMEwB,EAAO,GAAGxB,MAAM,KAAK,GANvB,SAQAwB,EAAOvJ,SAEPgF,EAAQA,EAAQnI,OAAS,GAAGa,MAA5B,iBAEQwI,EAAKE,WAAW,OAC1BpB,EACEA,EAAQnI,OAAS,GACjBa,MAFF,qCAEwCwI,EAFxC,WAzCqB,8BA+C3BuD,EAAgBzE,EAAQ8E,QAAO,SAACC,GAC9B,OAAOA,EAAKrM,KAAKuM,QAAUF,EAAKrM,KAAKuM,OAAOpN,OAAS,MAGzDsN,GA9EyB,oBA+ERV,GA/EQ,IA+EzB,2BAAgC,CAAC,IAAxBM,EAAuB,QAC9BP,EAAKY,WAAWL,EAAKpB,MAAO,cAAOoB,EAAKpB,MAAZ,SAA2BoB,EAAKrM,OAhFrC,8BAmFzB8L,EAAKa,WACH,SAAUzL,GACR0L,QAAQC,IAAI,SAAU3L,GACtBR,GAAO,KAETyJ,EACAI,GACA,WACE,IAAIvK,EAAOuJ,EAAGK,aAAaF,EAAKrB,KAAK8B,EAAV,UAAsBI,EAAtB,WACvBuC,EAAW,IAAInJ,KAAK,CAAC3D,GAAO,CAAEyE,KAAM,yBACpCsI,EAAW,IAAIC,KAAK,CAACF,GAAV,UAAwBvC,EAAxB,SAAyC,CACtD0C,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAGjB,IACE,IAAM8E,EAAKC,OAAOC,QAAQ,YAC1BF,EAAG2D,OAAOxD,EAAKrB,KAAK8B,EAAV,UAAsBI,EAAtB,WAAwC,SAAChJ,GACjD,GAAIA,EAAK,MAAMA,EACfqL,QAAQC,IAAI,gCAEdtD,EAAG2D,OAAOxD,EAAKrB,KAAK8B,EAASb,EAAKvF,OAAO,SAACxC,GACxC,GAAIA,EAAK,MAAMA,EACfqL,QAAQC,IAAI,gCAGdpM,EAAQsM,GACR,MAAO7L,GACP0L,QAAQC,IAAI,mBACZnM,GAAO,c,0DCjNnB,kCAAO,IAAMyM,EAAW,CACtBC,IAAK,gBACLC,IAAK,YACLC,IAAK,aACLC,KAAM,aACNC,IAAK,YACLC,KAAM,aACNC,IAAK,kBACLC,IAAK,+BACL,KAAM,8BACNC,IAAK,oBACLC,KAAM,YACNC,IAAK,YACLC,IAAK,WACLC,MAAO,0B,8KCZIC,EAAe,SAACF,GAC3B,IACIG,EADAC,EAAe,GA+BnB,OA7Ba,IAAIC,IAAOC,QACjBC,YAAYP,GAAK,SAAUxM,EAAKF,GACjCE,GACFqL,QAAQC,IAAI,yBAA2BtL,GAGzC,IAAIgN,EAAclN,EAAOmN,YACrBC,EAAWF,EAAY7C,YAAY,GAAG,cAAc,GAExDyC,EAAQlD,MAAQwD,EAAS,cAAc,GACvCP,EAAa,OAASC,EAAQlD,MAAQ,QAElCwD,EAAQ,OAAW,GAAG,gBACxBN,EAAQO,UAAYD,EAAQ,OAAW,GAAG,cAAc,GACxDP,GAAc,OAASC,EAAQO,UAC3BD,EAAQ,OAAW,GAAG,eACxBN,EAAQQ,SAAWF,EAAQ,OAAW,GAAG,aAAa,GACtDP,GAAc,IAAMC,EAAQQ,UAE9BT,GAAc,SAGZK,EAAYK,SACdT,EAAQU,UACN,0BAA4BN,EAAYK,OAAO,GAAnB,EAC9BV,GAAc,0BAA4BC,EAAQU,UAAY,SAI3DX,GAGIY,EAAmB,SAACC,GAC/B,IAGIC,EAAYD,EAAWE,MAAM,cAC7BC,EAAWH,EAAWjP,MACxBiP,EAAWI,OAAO,cAAgBH,EAAU,GAAG7P,OAC/C4P,EAAWI,OAAO,cAOpB,OAFAD,GADAA,GADAA,EAAWA,EAAS/F,QATE,4CASuB,KACzBA,QATE,YASuB,SACzBA,QATG,cASuB,UAInCiG,EAAY,SAACC,GACxB,IADyC,EACnC1H,EAAQ0H,EAAKhF,MAAM,MACrBwD,EAAe,GAFsB,cAGxBlG,GAHwB,IAGzC,2BAAwB,CAAC,IAAhB0E,EAAe,QAClBA,EAAKE,SACHhE,YAAQ8D,EAAKE,QACfsB,GAAI,cAAWxB,EAAX,SAEJwB,GAAI,aAAUxB,EAAV,UAR+B,8BAYzC,OAAOwB,I,kDChEHyB,E,8FACJ,SAAiBC,EAAiBC,EAAaC,GAC7C,IAAIC,EAAOC,aAAaC,QAAQ,kBAC5BC,EAAMC,KAAKC,MAAML,IAAU,GAC/BG,EAAIN,GAAW,CAAEC,IAAKA,EAAKC,WAAYA,GACvCE,aAAaK,QAAQ,iBAAkBF,KAAKG,UAAUJ,M,oBAGxD,SAAcN,GACZ,IAAIG,EAAOC,aAAaC,QAAQ,kBAEhC,OADUE,KAAKC,MAAML,IAAU,IACpBH,IAAY,K,gCAEzB,SACEA,EACApH,EACAC,EACA8H,EACA/Q,GAEA,IAAIuQ,EAAOC,aAAaC,QAAQ,kBAC5BC,EAAMC,KAAKC,MAAML,IAAU,GAC/BG,EAAIN,GAAW,CAAEpH,QAAOC,SAAQ8H,SAAQ/Q,UACxCwQ,aAAaK,QAAQ,iBAAkBF,KAAKG,UAAUJ,M,6BAGxD,SAAuBN,GACrB,IAAIG,EAAOC,aAAaC,QAAQ,kBAEhC,OADUE,KAAKC,MAAML,IAAU,IACpBH,IAAY,K,uBAEzB,WACE,IAAIG,EAAOC,aAAaC,QAAQ,kBAEhC,OADUE,KAAKC,MAAML,IAAU,K,mBAGjC,SAAaH,GACX,IAAIG,EAAOC,aAAaC,QAAQ,kBAC5BC,EAAMC,KAAKC,MAAML,IAAU,UACxBG,EAAIN,GACXI,aAAaK,QAAQ,iBAAkBF,KAAKG,UAAUJ,Q,KAI3CP,O,0MCvCTa,E,4FACJ,SAAenH,EAAanJ,GAC1B,GAAIuH,aAAY,CACd,IAAMmC,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACtB2G,EAAWT,aAAaC,QAAQ,mBAClCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAChD,OAAO,IAAI9P,SAAc,SAACC,EAASC,GACjC,IAAI+J,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkB,IAAI/G,KAAK,CAAC9D,KACnC4K,EAAOxJ,OAAP,uCAAgB,WAAO0J,GAAP,SAAAzC,EAAA,+DAEZqB,EAAGqB,cACDlB,EAAKrB,KAAK+H,EAAU,OAAQpH,GAC5BzK,EAAOsJ,KAAK8C,EAAMvJ,OAAQC,SAE5BZ,IANY,qDAQZC,IARY,6DAAhB,sDAYA+J,EAAOnJ,QAAU,WACfZ,QAIJ,OAAO6P,IAAYP,QAAQhH,EAAKnJ,K,wBAGpC,SAAkBmJ,GAChB,GAAI5B,aAAY,CACd,IAAMmC,EAAKC,OAAOC,QAAQ,YACpBC,EAAOF,OAAOC,QAAQ,QACtB2G,EAAWT,aAAaC,QAAQ,mBAClCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAChD,OAAO,IAAI9P,SAAc,SAACC,EAASC,GACjC,IACE6I,EAAG2D,OAAOxD,EAAKrB,KAAK+H,EAAV,OAA4BpH,IAAM,SAACzH,GAC3C,GAAIA,EAAK,MAAMA,EACfd,OAEF,MAAOS,GACPR,QAIJ,OAAO6P,IAAYC,WAAWxH,K,uBAGlC,SAAiBA,GAA8C,IAAjCyH,EAAgC,wDAC5D,OAAIrJ,aACK,IAAI5G,SAA4B,SAACC,EAASC,GAC/C,IAAI6I,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACtBzJ,EAAOuJ,EAAGK,aACZF,EAAKrB,KACHsH,aAAaC,QAAQ,mBACjBD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QALlD,OAOEtH,IAGA8D,EAAW,IAAInJ,KAAK,CAAC3D,IACrB+M,EAAW,IAAIC,KAAK,CAACF,GAAW,OAAQ,CAC1CG,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAGfhE,EADEgQ,EACM,IAAIvS,WAAW8B,GAAMH,OAErBkN,MAILwD,IAAYX,QAAQ5G,K,sBAI/B,SAAgB0H,GACd,IAAMC,EAAcrB,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OACzDZ,IAAesB,gBAAgBF,EAAK1H,KAAKb,MACzC0I,IAAUC,gBAAgB,eACxBC,EAAezB,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OAC1DZ,IAAesB,gBAAgBF,EAAK1H,KAAKZ,OACzCyI,IAAUC,gBAAgB,gBAC1BE,EACmB,aAArBN,EAAKhF,YAA6BgF,EAAKO,OAAOC,cAAgB,OACV,QAAlDL,IAAUC,gBAAgB,oBACxB1J,aACsBoC,OAAOC,QAAQ,YAA/B4G,YACIC,SACV,YADF,UAEK9G,OAAO2H,SAASC,KAAK/G,MAAM,KAAK,GAFrC,aAE4C2G,EAF5C,YAEmDN,EAAK1H,IAFxD,gBAKAQ,OAAO6H,KAAP,UACK7H,OAAO2H,SAASC,KAAK/G,MAAM,KAAK,GADrC,aAC4C2G,EAD5C,YACmDN,EAAK1H,IADxD,gBAKE5B,aACsBoC,OAAOC,QAAQ,YAA/B4G,YACIC,SACV,YADF,UAEK9G,OAAO2H,SAASC,KAAK/G,MAAM,KAAK,GAFrC,aAE4C2G,EAF5C,YAGIN,EAAK1H,IAHT,kBAIY2H,EAJZ,mBAIkCI,EAJlC,cAIoDF,IAAUC,gBAC1D,WALJ,cAMSD,IAAUC,gBAAgB,aAGnCtH,OAAO6H,KAAP,UACK7H,OAAO2H,SAASC,KAAK/G,MAAM,KAAK,GADrC,aAC4C2G,EAD5C,YAEIN,EAAK1H,IAFT,kBAGY2H,EAHZ,mBAGkCI,EAHlC,cAGoDF,IAAUC,gBAC1D,WAJJ,cAKSD,IAAUC,gBAAgB,e,iEAKzC,WAA0BJ,GAA1B,6EACQC,EAAcrB,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OACzDZ,IAAesB,gBAAgBF,EAAK1H,KAAKb,MACzC0I,IAAUC,gBAAgB,eACxBC,EAAezB,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OAC1DZ,IAAesB,gBAAgBF,EAAK1H,KAAKZ,OACzCyI,IAAUC,gBAAgB,gBACL,QAArBJ,EAAKhF,YACHtE,cAAa,EACSoC,OAAOC,QAAQ,YAA/B4G,EADM,EACNA,YAC8C,QAAlDQ,IAAUC,gBAAgB,oBAC5BT,EAAYC,SACV,YADF,UAGI9G,OAAO8H,UAAUC,SAAS9I,QAAQ,QAAU,EACxC,eACA,kBALR,4BAMsBiI,EAAK1H,IAN3B,gBASAqH,EAAYC,SACV,YADF,UAGI9G,OAAO8H,UAAUC,SAAS9I,QAAQ,QAAU,EACxC,eACA,kBALR,4BAOIiI,EAAK1H,IAPT,kBAQY2H,EARZ,mBAQkCI,EARlC,cAQoDF,IAAUC,gBAC1D,WATJ,cAUSD,IAAUC,gBAAgB,cAIrCtH,OAAO6H,KAAP,yCAA8CX,EAAK1H,MAGrDpK,KAAK4S,SAASd,GArClB,gD,iFAwCA,SACEnG,EACAkH,EACAC,EACArS,GAEA,IACI2J,EACFjF,EAIDA,EACCwG,EAKF,IAAI0G,EAASQ,EAAUE,cAEvB,OADA3I,GAAM,IAAI+B,MAAOC,UAAY,GACtB,IAAI4G,IACT5I,EACAjF,EARA,iBACA,WAUA2N,EAnBe,UAqBfT,EAXA,GAaA5R,O,KAKS8Q,Q,iGCjNT0B,E,8FACJ,SAAiBtC,GACf,IAAIuC,EACsC,OAAxCnC,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GACtBD,EAAQE,QAAQzC,IAEhBuC,EAAQE,QAAQzC,GAGlBI,aAAaK,QAAQ,cAAeF,KAAKG,UAAU6B,M,0BAErD,SAAoBG,GAClB,IAAIH,EAAoB,GACxBG,EAAMC,SAAQ,SAAC7F,GACbyF,EAAQhT,KAAKuN,EAAKrD,QAEpB2G,aAAaK,QAAQ,cAAeF,KAAKG,UAAU6B,M,mBAGrD,SAAavC,GACX,IAAIuC,EACsC,OAAxCnC,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GAExBpC,aAAaK,QAAQ,cAAeF,KAAKG,UAAU6B,M,0BAErD,WAME,OAJ0C,OAAxCnC,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,KACY,O,KAIPiC,O,iDCjDThB,E,oGACJ,SAAuB7H,GAErB,OADmB8G,KAAKC,MAAMJ,aAAaC,QAAQ,kBAAqB,IACpD5G,K,6BAEtB,SAAuBA,EAAamJ,GAClC,IAAIC,EAAetC,KAAKC,MAAMJ,aAAaC,QAAQ,kBAAqB,GACxEwC,EAAapJ,GAAOmJ,EACpBxC,aAAaK,QAAQ,eAAgBF,KAAKG,UAAUmC,Q,KAIzCvB,O,wnhoBCeTwB,E,kDAEJ,WAAYC,GAAqB,IAAD,8BAC9B,cAAMA,IAFRxG,UACgC,IAgDhCyG,mBAAqB,WACnB,IAAIC,EAAczL,SAASkB,qBAAqB,UAAU,GACtDwK,EAAOD,EAAOE,cAAc3L,SAAS0L,KACvC5E,EAAO2E,EAAOE,cAAc3L,SAASW,gBACvC8K,EAAOpK,OAASuK,KAAKC,IACnBH,EAAKI,aACLJ,EAAKK,aACLjF,EAAKkF,aACLlF,EAAKgF,aACLhF,EAAKiF,eAzDuB,EAyEhCE,WAAa,SAACC,GACZ,IAAIC,EAAa,IAAIC,KACnB,IAAI7U,WAAYmJ,gBAAgBwL,EAAQ,cAE1C,EAAKX,MAAMc,eAAe,CACxBC,IAAKH,EAAWI,iBAChBC,SAAUL,EAAWM,iBACrBC,SAAU,KAEZ,EAAKC,oBAlFyB,EAoFhCA,iBAAmB,WACjBlK,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAKxL,UAAY,GAC3CuC,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAKxL,UAAa,EAAKqL,MAAMsB,SACpDP,IAAY3L,gBAAgBmM,UAC/BC,IAAUC,aACVC,YAAW,WACTjN,SACGkN,uBAAuB,gBAAgB,GACvCC,SAAS,EAAG5E,IAAesB,gBAAgB,EAAKuD,MAAMnL,KAAKkH,UAC7D,GACH,EAAKqC,sBA9FyB,EAgGhC6B,WAhGgC,uCAgGnB,WAAO/S,GAAP,iBAAA6G,EAAA,6DACPmM,EAAW,IAAIC,IAAWjT,GADnB,SAEcgT,EAASE,SAFvB,OAEPjN,EAFO,OAGX,EAAK0L,WAAW1L,EAAQuM,WAHb,2CAhGmB,wDAqGhCW,UAAY,SAACnT,GACX,IAAIgO,EAAOxF,IAAMzL,OACfG,EAAOsJ,KAAKxG,GACZsI,IAAQsC,OAAO1N,EAAOsJ,KAAKxG,KAE7B,EAAK2R,WAAW5D,YAAUC,KA1GI,EA4GhCoF,SAAW,SAACpT,GACV,IAAIR,EAAO,IAAI8C,KAAK,CAACtC,GAAS,CAAEoD,KAAM,eAClCgG,EAAS,IAAIzJ,WACjByJ,EAAOxJ,OAAS,SAACyT,GAAS,IAAD,EACvB,EAAK1B,WAAW2B,IAAM,UAACD,EAAItT,cAAL,aAAC,EAAYC,UAErCoJ,EAAOmK,WAAW/T,EAAM,UAlHM,EAoHhCgU,UAAY,SAACxT,GACX,IAAIgO,EAAOxF,IAAMzL,OACfG,EAAOsJ,KAAKxG,GACZsI,IAAQsC,OAAO1N,EAAOsJ,KAAKxG,KAE7ByT,IAAUC,WAAW1F,GAAM,SAAC9N,EAAUsM,GACpC,EAAKmF,WAAWnF,OA1HY,EA6HhCmH,WAAa,SAAC3T,GACZmI,OAAOyL,QAAQC,cAAc,CAAEC,YAAa9T,IAAU+T,MAAK,SAAClT,GAC1D,EAAK8Q,WAAW9Q,EAAIiQ,WA/HQ,EAkIhCkD,UAAY,SAAChU,GACX,IAAIiU,EAASzL,IAAMzL,OACjBG,EAAOsJ,KAAKxG,GACZsI,IAAQsC,OAAO1N,EAAOsJ,KAAKxG,KAEzBkU,EAAUtH,YAAa1P,EAAOsJ,KAAKxG,IACvCkU,GAAWzG,YAAiBwG,GAC5B,EAAKtC,WAAWuC,IAzIc,EA2IhCC,WAAa,SAACnU,EAAqB4P,GACjC,IAAIpQ,EAAO,IAAI8C,KAAK,CAACtC,GAAS,CAC5BoD,KAAM0I,IAAS8D,EAAOwE,uBAEpBhL,EAAS,IAAIzJ,WACjByJ,EAAOxJ,OAAS,SAACyT,GAAS,IAAD,EACjB7G,EAAI,UAAG6G,EAAItT,cAAP,aAAG,EAAYC,OACzB,EAAK2R,WAAWnF,IAElBpD,EAAOmK,WAAW/T,EAAM,UAlJxB,EAAKsT,MAAQ,CAAEnL,IAAK,IAFU,E,qDAKhC,WAAqB,IAAD,OACd0M,EAAM3O,SAASoK,SAASC,KAAK/G,MAAM,KACnCrB,EAAM0M,EAAIA,EAAIvW,OAAS,GAAGkL,MAAM,KAAK,GACzCzL,KAAK+W,SAAS,CAAE3M,QAChBuH,IAAYX,QAAQ,SAASwF,MAAK,SAAC/T,GACjC,IAAIqP,EAAOrP,EAAOuU,IAAEC,UAAUxU,EAAQ,CAAE2H,SACxCmH,IAAS2F,UAAU9M,GAAK,GAAMoM,MAAK,SAAC/T,GAClC,EAAKiR,MAAMyD,kBAAkBrF,GACT,SAAhBA,EAAKO,QAAqC,SAAhBP,EAAKO,OACjC,EAAKmD,WAAW/S,GACS,QAAhBqP,EAAKO,OACd,EAAKuD,UAAUnT,GACU,OAAhBqP,EAAKO,OACd,EAAKwD,SAASpT,GACW,QAAhBqP,EAAKO,OACd,EAAKoE,UAAUhU,GACU,QAAhBqP,EAAKO,OACd,EAAK4D,UAAUxT,GACU,SAAhBqP,EAAKO,OACd,EAAK+D,WAAW3T,GAEA,SAAhBqP,EAAKO,QACW,UAAhBP,EAAKO,QACW,QAAhBP,EAAKO,QACW,QAAhBP,EAAKO,QAEL,EAAKuE,WAAWnU,EAAuBqP,EAAKO,QAE9C,EAAKqB,MAAM0D,oBAAmB,GAC9BC,IAAYC,UAAUlN,SAG1BpK,KAAK0T,MAAM6D,iBAAiBvX,KAAK8U,kBACjC0C,uBAAY,WACV,EAAKC,iBACJ,KACH7M,OAAOmK,OAAO,GAAG5M,SAASuP,iBAAiB,SAAS,SAAC3L,GACnD,EAAK2H,MAAMiE,kBAAkB,QAC7B,EAAKjE,MAAMiE,kBAAkB,SAC7B,EAAKjE,MAAMiE,kBAAkB,OAC7B,EAAKjE,MAAMiE,kBAAkB,e,0BAejC,WACE1F,IAAU2F,gBAAgB,cAAezP,SAAS0L,KAAKgE,YAAc,IACrE5F,IAAU2F,gBAAgB,eAAgBzP,SAAS0L,KAAKM,aAAe,IACvElC,IAAU2F,gBAAgB,UAAWhN,OAAOkN,QAAU,IACtD7F,IAAU2F,gBAAgB,UAAWhN,OAAOmN,QAAU,IACtDrH,IAAesH,mBACbhY,KAAKuV,MAAMnL,IACXjC,SAAS0L,KAAKgE,YACd1P,SAAS0L,KAAKM,aACdhM,SAASkN,uBAAuB,gBAAgB,GAAG4C,UACnD9P,SAASkN,uBAAuB,gBAAgB,GAAGpB,gB,oBAgFvD,WACE,OACE,qBACEiE,UAAU,eACVC,MAAO,CACL5O,MAAM,GAAD,OACF,IAAM6O,WAAWnG,IAAUC,gBAAgB,UAAY,KAAQ,EAD7D,KAGL1I,OAAQ,OACR6O,WAAW,GAAD,OACP,KACE,EAAID,WAAWnG,IAAUC,gBAAgB,UAAY,MACxD,EAHQ,KAKVoG,UAAW,UAZf,SAeE,wBAAQjM,MAAM,cAAc9C,MAAM,OAAlC,2B,GAzKagP,IAAMC,WAgLZC,gBAAWhF,K,4EC3MpBc,E,WAIJ,WAAY3L,GAAe,yBAH3BA,aAG0B,OAF1B8P,iBAE0B,OAD1BC,sBAC0B,EACxB3Y,KAAK4I,QAAUA,EACf5I,KAAK0Y,YAAc,GACnB1Y,KAAK2Y,iBAAmB,GACxB3Y,KAAK4Y,WAAWhQ,G,8CAElB,SAAWA,GACT5I,KAAK0Y,YAAc1P,MAAMC,KACvBL,EAAQM,iBAAiB,wBAE3B,IAAK,IAAItI,EAAI,EAAGA,EAAIZ,KAAK0Y,YAAYnY,OAAQK,IAAK,CAChD,IAAIiY,EAAS9E,KAAK+E,MAAsB,IAAhB/E,KAAK8E,UAAkB,IAC/C7Y,KAAK2Y,iBAAiBzY,KAAK,CACzB6Y,MAAO/Y,KAAK0Y,YAAY9X,GAAG2H,UAC3B2D,GAAIlM,KAAK0Y,YAAY9X,GAAG2H,UAAUgC,QAAQ,KAAM,KAAOsO,EACvDrG,KAAM,IAAMxS,KAAK0Y,YAAY9X,GAAG2H,UAAUgC,QAAQ,KAAM,KAAOsO,EAC/DhE,SAAU,KAGd,IAAK,IAAIjU,EAAI,EAAGA,EAAIZ,KAAK0Y,YAAYnY,OAAQK,IAC3CZ,KAAK0Y,YAAY9X,GAAGsL,GAAKlM,KAAK2Y,iBAAiB/X,GAAGsL,K,4BAGtD,WACE,OAAOlM,KAAK4I,U,4BAEd,WACE,OAAO5I,KAAK2Y,qB,KAIDpE,O,2sBCjCTW,E,kGAEJ,WACE,IAAI8D,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,IAAIyE,EAAMlZ,KAAKmZ,gBACXhB,EAAQ1D,EAAI2E,eAAe,iBAC3BC,EAAalR,SAASmR,cAAc,eACxC,GAAKD,IACLA,EAAYE,aACV,QADF,2BAEsBtH,IAAUC,gBAC5B,mBAHJ,+BAKID,IAAUC,gBAAgB,eAAiB,EAL/C,oBAMwD,QAA1CD,IAAUC,gBAAgB,YAAwB,EAAI,EANpE,MAQKuC,EAAI+E,MAGT,OAAKrB,OAOLA,EAAM7P,YAAc4Q,KANlBf,EAAQ1D,EAAIrM,cAAc,UACpB8D,GAAK,gBACXiM,EAAM7P,YAAc4Q,OACpBzE,EAAI+E,KAAKC,YAAYtB,Q,wBAKzB,WACE,IAAIa,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,IAAIyE,EAAMlZ,KAAKmZ,gBACXhB,EAAQ1D,EAAI2E,eAAe,iBAC3BC,EAAalR,SAASmR,cAAc,WACxC,GAAKD,EAAL,CAaA,GAZAA,EAAYE,aACV,QADF,2BAEsBtH,IAAUC,gBAC5B,mBAHJ,+BAKID,IAAUC,gBAAgB,eAAiB,EAL/C,oBAMwD,QAA1CD,IAAUC,gBAAgB,YAAwB,EAAI,EANpE,MAQAtH,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAK0F,aAC7B,QACAvZ,KAAK0Z,iBAEFvB,EAKH,OAJAA,EAAQ1D,EAAIrM,cAAc,UACpB8D,GAAK,gBACXiM,EAAM7P,YAAc4Q,OACpBzE,EAAI+E,KAAKC,YAAYtB,GAGvBA,EAAM7P,YAAc4Q,O,2BAGtB,WACE,IAAIS,EAAS,CAAC,UAAW,UAAW,UAAW,WAC3C5Q,EAAQ,CAAC,UAAW,UAAW,UAAW,WAE9C,MAAM,+MAAN,OAAsN4Q,EAAO,GAA7N,sCAA6PA,EAAO,GAApQ,sCAAoSA,EAAO,GAA3S,sCAA2UA,EAAO,GAAlV,4CAAwX5Q,EAAM,GAA9X,4CAAoaA,EAAM,GAA1a,4CAAgdA,EAAM,GAAtd,4CAA4fA,EAAM,GAAlgB,2B,0BAEF,WAA6C,IAAzB6Q,IAAwB,yDAC1C,OAAIA,EACI,cAAN,OACE3H,IAAUC,gBAAgB,aAAe,GAD3C,sCAGED,IAAUC,gBAAgB,eAAiB,OAH7C,oCAKED,IAAUC,gBAAgB,eAAiB,YAL7C,8BAOED,IAAUC,gBAAgB,aACtBD,IAAUC,gBAAgB,aAExB,qBADFD,IAAUC,gBAAgB,oBAEqB,QAA/CD,IAAUC,gBAAgB,iBAC1B,QACA,GAbN,uCAeED,IAAUC,gBAAgB,iBACtBD,IAAUC,gBAAgB,iBAC1B,GAjBN,qCAmBED,IAAUC,gBAAgB,aACtBD,IAAUC,gBAAgB,aAC1B,GArBN,4CAwB0C,QAAxCD,IAAUC,gBAAgB,UAAsB,kBAAoB,GAxBtE,wBA0B4C,QAA1CD,IAAUC,gBAAgB,YACtB,oBACA,GA5BN,yBA8B4C,QAA1CD,IAAUC,gBAAgB,YACtB,iCACA,GAhCN,6BAkC+C,QAA7CD,IAAUC,gBAAgB,eACtB,uBACA,GApCN,2BAsCED,IAAUC,gBAAgB,gBAAkB,EAtC9C,2BAyCO,CACL,uDAAwD,CACtD,YAAY,GAAZ,OACED,IAAUC,gBAAgB,aAAe,GAD3C,iBAGA,cAAc,GAAd,OACED,IAAUC,gBAAgB,eAAiB,OAD7C,eAGA,cAAc,GAAd,OACED,IAAUC,gBAAgB,eAAiB,YAD7C,eAGA2H,MAAM,GAAD,OACH5H,IAAUC,gBAAgB,aACtBD,IAAUC,gBAAgB,aAExB,qBADFD,IAAUC,gBAAgB,oBAEqB,QAA/CD,IAAUC,gBAAgB,iBAC1B,QACA,GAPD,eASL,iBAAiB,GAAjB,OACED,IAAUC,gBAAgB,iBAA1B,UACOD,IAAUC,gBAAgB,iBADjC,MAEI,GAHN,eAKA,aAAa,GAAb,OACED,IAAUC,gBAAgB,aAA1B,UACOD,IAAUC,gBAAgB,cAC7B,GAHN,eAKA,cAAc,GAAd,OAC0C,QAAxCD,IAAUC,gBAAgB,UACtB,kBACA,IAEN,aAAa,GAAb,OAC4C,QAA1CD,IAAUC,gBAAgB,YACtB,oBACA,IAEN,cAAc,GAAd,OAC4C,QAA1CD,IAAUC,gBAAgB,YACtB,iCACA,IAEN,kBAAkB,GAAlB,OAC+C,QAA7CD,IAAUC,gBAAgB,eACtB,uBACA,IAEN,gBAAgB,GAAhB,OACED,IAAUC,gBAAgB,gBAAkB,EAD9C,qB,wBAcR,WACED,IAAUC,gBAAgB,eACoB,YAA5CD,IAAUC,gBAAgB,eAC1BlS,KAAK8Z,SACH,mBAAqB7H,IAAUC,gBAAgB,cAAgB,Y,KAnLjEgD,EAwKG4E,SAAW,SAAChD,GACjB,IAAMqB,EAAQhQ,SAASC,cAAc,QACrC+P,EAAM3F,KAAOsE,EACbqB,EAAM4B,IAAM,aACZ5R,SAASqR,KAAKC,YAAYtB,IAYfjD,O,6sBClLT8E,EAAY,CAChBC,GAAI,CACFC,Y,QAEFC,GAAI,CACFD,Y,QAEFE,IAAK,CACHF,Y,QAEFG,GAAI,CACFH,Y,SAIJI,IACGC,IAAIC,KACJC,KAAK,CACJT,YACAU,IAAK,KACLC,YAAa,KACbC,cAAc,EACdC,cAAe,CACbC,aAAa,KAIJR,QAAf,E,wBCnCMS,EAAY,CAChBC,kBAAkB,EAClBC,oBAAoB,EACpBC,iBAAiB,EACjBC,oBAAoB,EACpBC,WAAW,EACXC,SAAU,GACVC,YAAa,GACbC,YAAa,GACbC,WAAY,c,kBCkBCC,E,4FAzBb,SAAe9K,EAAiB+K,GAC9B,IAAI5K,EAAOC,aAAaC,QAAQ,eAC5BC,EAAMC,KAAKC,MAAML,IAAU,GAC/BG,EAAIN,GAAW+K,EACf3K,aAAaK,QAAQ,cAAeF,KAAKG,UAAUJ,M,qBAGrD,SAAeN,GACb,IAAIG,EAAOC,aAAaC,QAAQ,eAEhC,OADUE,KAAKC,MAAML,IAAU,IACpBH,IAAY,I,wBAEzB,WACE,IAAIG,EAAOC,aAAaC,QAAQ,eAEhC,OADUE,KAAKC,MAAML,IAAU,IACjB,K,uBAEhB,SAAiBH,GACf,IAAIG,EAAOC,aAAaC,QAAQ,eAC5BC,EAAMC,KAAKC,MAAML,IAAU,UACxBG,EAAIN,GACXI,aAAaK,QAAQ,cAAeF,KAAKG,UAAUJ,Q,qBCjBjD0K,EAAc,SAACtI,GACnB,OAAOA,EAAMuI,KAAI,SAACnO,GAAD,OAAUA,EAAKtI,SAG5B0W,EAAgB,SAACxI,GACrB,OAAOA,EAAMuI,KAAI,SAACnO,GAAD,OAAUA,EAAKnB,WAG5BwP,EAAa,SAACzI,GAClB,OAAOA,EAAMuI,KAAI,SAACnO,GAAD,OAAUA,EAAKrD,QAG5B2R,EAAe,SAACC,EAAmBC,GAEvC,IADA,IAAIC,EAAqB,GAChBtb,EAAI,EAAGA,EAAIob,EAAQzb,OAAQK,IAC9Bqb,EAAWpS,QAAQmS,EAAQpb,KAAO,GAEpCsb,EAAShc,KACPgc,EAASrS,QAAQoS,EAAWpS,QAAQmS,EAAQpb,MAAQ,EAChDsb,EAAS3b,OACT0b,EAAWpS,QAAQmS,EAAQpb,KAIrC,OAAOsb,GAoMMC,E,8FA1Kb,SACE9I,EACA+I,GAEA,GAA0B,IAAtBA,EAAaC,KAAY,CAC3B,IAAIJ,EAAaN,EAAYtI,GACzB2I,EAAUL,EAAYtI,GAAOgJ,OACjC,OAA2B,IAAvBD,EAAaE,MACRP,EAAaC,EAASC,GAEtBF,EAAaC,EAASC,GAAYvQ,UAG7C,GAA0B,IAAtB0Q,EAAaC,KAAY,CAE3B,IADA,IAAIL,EAAoB,GACfpb,EAAI,EAAGA,EAAIyS,EAAM9S,OAAQK,IAChCob,EAAQ9b,KAAKU,GAEf,OAA2B,IAAvBwb,EAAaE,MACRN,EAEAA,EAAQtQ,UAGnB,GAA0B,IAAtB0Q,EAAaC,KAAY,CAC3B,IAAIE,EAhDa,WACrB,IAAIC,EAAcf,EAAYgB,aAC1BC,EAAkB,GACtB,IAAK,IAAIzL,KAAOuL,EACdE,EAASxc,KAAK,CAAC+Q,EAAKuL,EAAYvL,KAKlC,OAHAyL,EAASL,MAAK,SAAU/S,EAAGqT,GACzB,OAAOrT,EAAE,GAAKqT,EAAE,MAEXC,OAAOC,KAAKL,GAuCIM,GACfC,EAAWjB,EAAWzI,GAC1B,OAA2B,IAAvB+I,EAAaE,MACRP,EAAa/E,IAAEgG,MAAMT,EAAcQ,GAAWA,GAE9ChB,EACL/E,IAAEgG,MAAMT,EAAcQ,GACtBA,GACArR,UAGN,GAA0B,IAAtB0Q,EAAaC,KAAY,CAC3B,IAAIY,EAAepB,EAAcxI,GAC7B6J,EAAYrB,EAAcxI,GAAOgJ,OACrC,OAA2B,IAAvBD,EAAaE,MACRP,EAAamB,EAAWD,GAExBlB,EAAamB,EAAWD,GAAcvR,UAGjD,GAA0B,IAAtB0Q,EAAaC,KAAY,CAC3B,IAAIc,EA1De,WACvB,IAAIC,EAAc1M,IAAe2M,YAC7BX,EAAgB,GACpB,IAAK,IAAIzL,KAAOmM,EACdV,EAASxc,KAAK,CAAC+Q,EAAKmM,EAAYnM,GAAKJ,aAKvC,OAHA6L,EAASL,MAAK,SAAU/S,EAAGqT,GACzB,OAAOrT,EAAE,GAAKqT,EAAE,MAEXC,OAAOC,KAAKO,GAiDOE,GAClBP,EAAWjB,EAAWzI,GAC1B,OAA2B,IAAvB+I,EAAaE,MACRP,EACL/E,IAAEgG,MAAMG,EAAiBJ,GACzBA,GACArR,UAEKqQ,EAAa/E,IAAEgG,MAAMG,EAAiBJ,GAAWA,M,uBAI9D,SACEQ,EACAC,GAEC,IADDnK,EACA,uDADqB,GAErB,GAA0B,IAAtBmK,EAAanB,KAAY,CAE3B,IAAIoB,EAAUzG,IAAE0G,MAAMH,GAAO7R,UACzBiS,EAAU3G,IAAE4G,KACdL,EAAM3B,KACJ,SAACnO,GAAD,OACOA,EAAKoQ,KAAKC,KAAO,IAAMrQ,EAAKoQ,KAAKE,MAAQ,IAAMtQ,EAAKoQ,KAAKG,QAGzC,IAAvBR,EAAalB,MACfqB,EAAQtB,OAERsB,EAAQtB,OAAO3Q,UAGjB,IAAIuS,EAAkC,GActC,OAbAN,EAAQrK,SAAQ,SAACuK,GACfI,EAAQJ,GAAQ,MAElBJ,EAAQnK,SAAQ,SAAC4K,GACfP,EAAQrK,SAAQ,SAACuK,GAEbA,IACKK,EAAKL,KAAKC,KAAO,IAAMI,EAAKL,KAAKE,MAAQ,IAAMG,EAAKL,KAAKG,KAE9DC,EAAQJ,GAAM3d,KAAKge,SAIlBD,GAAW,GAEpB,GAA0B,IAAtBT,EAAanB,KAAY,CAE3B,IAAIoB,EAAUzG,IAAE0G,MAAMH,GAAO7R,UACzBsQ,EAAUhF,IAAE4G,KACdL,EAAM3B,KACJ,SAACnO,GAAD,OACE4F,EACE2D,IAAEmH,cAAc9K,EAAO,CACrBjJ,IAAKqD,EAAKkD,WAEZxL,SAGmB,IAAvBqY,EAAalB,MACfN,EAAQK,OAERL,EAAQK,OAAO3Q,UAGjB,IAAIuS,EAAkC,GAkBtC,OAjBAjC,EAAQ1I,SAAQ,SAACnO,GACf8Y,EAAQ9Y,GAAQ,MAElBsY,EAAQnK,SAAQ,SAAC4K,GACflC,EAAQ1I,SAAQ,SAACnO,GAEbA,IACAkO,EACE2D,IAAEmH,cAAc9K,EAAO,CACrBjJ,IAAK8T,EAAKvN,WAEZxL,MAEF8Y,EAAQ9Y,GAAMjF,KAAKge,SAIlBD,GAAW,M,6BAGtB,SAAuBG,EAAkBC,GACvC,IAAIvN,EACFC,aAAaC,QAAQ,iBACrBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,IAC/BrL,EAAMH,EAAOI,KAAKC,MAAML,GAAQ,CAAEuL,KAAM,EAAGC,MAAO,GACtDrL,EAAIoL,KAAO+B,EACXnN,EAAIqL,MAAQ+B,EACZtN,aAAaK,QAAQ,eAAgBF,KAAKG,UAAUJ,M,6BAGtD,WACE,IAAIH,EACFC,aAAaC,QAAQ,iBACrBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,IAEnC,OADUpL,KAAKC,MAAML,IAAS,CAAEuL,KAAM,EAAGC,MAAO,IAClC,O,6BAEhB,SAAuBD,EAAcC,GACnC,IAAIxL,EACFC,aAAaC,QAAQ,iBACrBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,IAC/BrL,EAAMH,EAAOI,KAAKC,MAAML,GAAQ,CAAEuL,KAAM,EAAGC,MAAO,GACtDrL,EAAIoL,KAAOA,EACXpL,EAAIqL,MAAQA,EACZvL,aAAaK,QAAQ,eAAgBF,KAAKG,UAAUJ,M,6BAGtD,WACE,IAAIH,EACFC,aAAaC,QAAQ,iBACrBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,IAEnC,OADUpL,KAAKC,MAAML,IAAS,CAAEuL,KAAM,EAAGC,MAAO,IAClC,S,KC7NZvB,EAAY,CAChB1H,MAAO,KACPiL,aAAc,GACdC,cAAe,GACfC,UAAU,EACVC,aAAa,EACbC,YAAY,EACZC,YAAY,EACZC,eAAe,EACfC,SAAU,OACVC,eAAe,EACfC,eAAe,EACfC,aAAa,EACbC,WAAW,EACX7C,aAAc,CAAEC,KAAM,EAAGC,MAAO,GAChCkB,aAAcrB,EAAS+C,kBACvBC,WAAW,EACXC,QAAS,mBACTC,IAAK,ICnBP,IAAMtE,EAAY,CAChBlK,WAAY,KACZyO,UAAW,M,WCDPvE,EAAY,CAChBwE,UAAW,GACXhC,MAAO,GACPiC,QAAS,GACT7K,SAAU,KACV8K,eAAgB,GAChBC,gBAAiB,KACjB7F,MAAsD,QAA/C5H,IAAUC,gBAAgB,iBAA6B,EAAI,EAClEyN,QAAS,GACTC,aAAc,GACd5K,SAAU,KACV6K,WAAY5N,IAAUC,gBAAgB,eAAiB,UCZzD,IAAM6I,EAAY,CAChB+E,UAAW,KACXC,YAAY,EACZC,SAAU,OACVC,mBAAmB,EACnBC,gBAAgB,GCJlB,IAAMnF,EAAY,CAChBoF,KAAM,OACNC,YAAa,EACbC,cAAc,EACdC,gBAAgB,EAChBC,YAA0D,QAA7CtO,IAAUC,gBAAgB,gBCNzC,IAAM6I,EAAY,CAChByF,UAAU,EACVC,mBAAmB,GCWrB,IAAMC,EAAcC,YAAgB,CAClC7O,KTHK,WAGJ,IAFDyD,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,qBACH,OAAO,2BACF0P,GADL,IAEEyF,iBAAkB4F,EAAOC,UAE7B,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEE0F,mBAAoB2F,EAAOC,UAE/B,IAAK,qBACH,OAAO,2BACFtL,GADL,IAEEiG,WAAYoF,EAAOC,UAEvB,IAAK,oBACH,OAAO,2BACFtL,GADL,IAEE2F,gBAAiB0F,EAAOC,UAE5B,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEE4F,mBAAoByF,EAAOC,UAE/B,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEE6F,UAAWwF,EAAOC,UAEtB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEE+F,YAAasF,EAAOC,UAGxB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEEgG,YAAaqF,EAAOC,UAExB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEE8F,SAAUuF,EAAOC,UAErB,IAAK,kBACH,OAAO,2BACFtL,GADL,IAEEuL,YAAY,IAEhB,QACE,OAAOvL,ISrDXwL,QNMK,WAGJ,IAFDxL,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,eACH,OAAO,2BACF0P,GADL,IAEElC,MAAOuN,EAAOC,UAElB,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEE+I,aAAcsC,EAAOC,UAEzB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEEgJ,cAAeqC,EAAOC,UAE1B,IAAK,oBACH,OAAO,2BACFtL,GADL,IAEEyJ,YAAa4B,EAAOC,UAExB,IAAK,aACH,OAAO,2BACFtL,GADL,IAEE8J,IAAKuB,EAAOC,UAEhB,IAAK,gBACH,OAAO,2BACFtL,GADL,IAEEiJ,SAAUoC,EAAOC,UAGrB,IAAK,iBACH,OAAO,2BACFtL,GADL,IAEEqJ,cAAegC,EAAOC,UAE1B,IAAK,eACH,OAAO,2BACFtL,GADL,IAEEkJ,YAAamC,EAAOC,UAExB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEmJ,WAAYkC,EAAOC,UAEvB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEoJ,WAAYiC,EAAOC,UAGvB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEsJ,SAAU+B,EAAOC,UAErB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEEuJ,cAAe8B,EAAOC,UAE1B,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEEwJ,cAAe6B,EAAOC,UAE1B,IAAK,kBACH,OAAO,2BACFtL,GADL,IAEE0J,UAAW2B,EAAOC,UAEtB,IAAK,iBACH,OAAO,2BACFtL,GADL,IAEE6J,QAASwB,EAAOC,UAEpB,IAAK,qBACH,OAAO,2BACFtL,GADL,IAEE4J,UAAWyB,EAAOC,UAEtB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEE6G,aAAc,CACZC,KAAMuE,EAAOC,QAAQxE,KACrBC,MAAOsE,EAAOC,QAAQvE,SAG5B,IAAK,wBACH,OAAO,2BACF/G,GADL,IAEEiI,aAAc,CACZnB,KAAMuE,EAAOC,QAAQxE,KACrBC,MAAOsE,EAAOC,QAAQvE,SAG5B,IAAK,eACH,OAAO,2BACF/G,GADL,IAEEgI,MAAOqD,EAAOC,UAElB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEgK,UAAWqB,EAAOC,UAGtB,QACE,OAAOtL,IMxHX1J,OJFK,WAGJ,IAFD0J,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,mBACH,OAAO,2BACF0P,GADL,IAEEgK,UAAWqB,EAAOC,UAEtB,IAAK,eACH,OAAO,2BACFtL,GADL,IAEEgI,MAAOqD,EAAOC,UAElB,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEEqK,aAAcgB,EAAOC,UAEzB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEP,SAAU4L,EAAOC,UAErB,IAAK,eACH,OAAO,2BACFtL,GADL,IAEEsE,MAAO+G,EAAOC,UAElB,IAAK,kBACH,OAAO,2BACFtL,GADL,IAEEoK,QAASiB,EAAOC,UAEpB,IAAK,iBACH,OAAO,2BACFtL,GADL,IAEEiK,QAASoB,EAAOC,UAEpB,IAAK,iBACH,OAAO,2BACFtL,GADL,IAEEyL,QAASJ,EAAOC,UAEpB,IAAK,kBACH,OAAO,2BACFtL,GADL,IAEEZ,SAAUiM,EAAOC,UAErB,IAAK,0BACH,OAAO,2BACFtL,GADL,IAEEmK,gBAAiBkB,EAAOC,UAE5B,QACE,OAAOtL,IIrDX0L,cLbK,WAGJ,IAFD1L,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,oBACH,OAAO,2BACF0P,GADL,IAEE1E,WAAY+P,EAAOC,UAGvB,IAAK,iBACH,OAAO,2BACFtL,GADL,IAEEyL,QAASJ,EAAOC,UAEpB,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEE+J,UAAWsB,EAAOC,UAEtB,QACE,OAAOtL,IKRX2L,SHXK,WAGJ,IAFD3L,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,mBACH,OAAO,2BACF0P,GADL,IAEEwK,WAAYa,EAAOC,UAEvB,IAAK,wBACH,OAAO,2BACFtL,GADL,IAEE4L,gBAAiBP,EAAOC,UAG5B,IAAK,uBACH,OAAO,2BACFtL,GADL,IAEE2K,eAAgBU,EAAOC,UAE3B,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEuK,UAAWc,EAAOC,UAEtB,IAAK,yBACH,OAAO,2BACFtL,GADL,IAEE6L,eAAgBR,EAAOC,UAE3B,IAAK,mBACH,OAAO,2BACFtL,GADL,IAEEyK,SAAUY,EAAOC,UAErB,IAAK,0BACH,OAAO,2BACFtL,GADL,IAEE0K,kBAAmBW,EAAOC,UAE9B,QACE,OAAOtL,IG9BX8L,QFXK,WAGJ,IAFD9L,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,cACH,OAAO,2BACF0P,GADL,IAEE4K,KAAMS,EAAOC,UAEjB,IAAK,qBACH,OAAO,2BACFtL,GADL,IAEE6K,WAAYQ,EAAOC,UAEvB,IAAK,kBACH,OAAO,2BACFtL,GADL,IAEEgL,YAAaK,EAAOC,UAExB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEE8K,aAAcO,EAAOC,UAEzB,IAAK,wBACH,OAAO,2BACFtL,GADL,IAEE+K,eAAgBM,EAAOC,UAE3B,QACE,OAAOtL,IEnBX+L,WDhBK,WAGJ,IAFD/L,EAEA,uDAFQwF,EACR6F,EACA,uCACA,OAAQA,EAAO/a,MACb,IAAK,gBACH,OAAO,2BACF0P,GADL,IAEEiL,SAAUI,EAAOC,UAErB,IAAK,sBACH,OAAO,2BACFtL,GADL,IAEEkL,kBAAmBG,EAAOC,UAE9B,QACE,OAAOtL,MCWEgM,EATDC,YACZd,EACAe,YACEC,YAAgBC,KACf/W,OAAegX,kBACXhX,OAAegX,oBAChB,SAACC,GAAD,OAAYA,K,kECoBLC,E,6FA7Cb,SAAgBnR,GACd,IAAIuC,EACuC,OAAzCnC,aAAaC,QAAQ,iBACrBD,aAAaC,QAAQ,gBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,iBAAmB,IACnD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GACtBD,EAAQE,QAAQzC,IAEhBuC,EAAQE,QAAQzC,GAGlBI,aAAaK,QAAQ,eAAgBF,KAAKG,UAAU6B,M,yBAEtD,SAAmBG,GACjB,IAAIH,EAAoB,GACxBG,EAAMC,SAAQ,SAAC7F,GACbyF,EAAQhT,KAAKuN,EAAKrD,QAEpB2G,aAAaK,QAAQ,eAAgBF,KAAKG,UAAU6B,M,mBAEtD,SAAavC,GACX,IAAIuC,EACuC,OAAzCnC,aAAaC,QAAQ,iBACrBD,aAAaC,QAAQ,gBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,iBAAmB,IACnD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GAExBpC,aAAaK,QAAQ,eAAgBF,KAAKG,UAAU6B,M,yBAEtD,WAME,OAJ2C,OAAzCnC,aAAaC,QAAQ,iBACrBD,aAAaC,QAAQ,gBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,iBAAmB,IACnD,KACY,O,KChCf,SAAS+Q,EAAY1O,GAC1B,MAAO,CAAExN,KAAM,eAAgBgb,QAASxN,GAEnC,SAAS2O,EAAmB1D,GACjC,MAAO,CAAEzY,KAAM,uBAAwBgb,QAASvC,GAE3C,SAAS2D,EAAoB1D,GAClC,MAAO,CAAE1Y,KAAM,sBAAuBgb,QAAStC,GAE1C,SAAS2D,EAAa1D,GAC3B,MAAO,CAAE3Y,KAAM,gBAAiBgb,QAASrC,GAEpC,SAAS2D,EAAgBnD,GAC9B,MAAO,CAAEnZ,KAAM,oBAAqBgb,QAAS7B,GAExC,SAASoD,EAAU/C,GACxB,MAAO,CAAExZ,KAAM,aAAcgb,QAASxB,GAEjC,SAASgD,EAAczD,GAC5B,MAAO,CAAE/Y,KAAM,iBAAkBgb,QAASjC,GAErC,SAAS0D,EAAY7D,GAC1B,MAAO,CAAE5Y,KAAM,eAAgBgb,QAASpC,GAKnC,SAAS8D,EAAcnD,GAC5B,MAAO,CAAEvZ,KAAM,iBAAkBgb,QAASzB,GAGrC,SAASoD,EAAiBC,GAC/B,MAAO,CAAE5c,KAAM,qBAAsBgb,QAAS4B,GAEzC,SAASC,GAAkB5D,GAChC,MAAO,CAAEjZ,KAAM,sBAAuBgb,QAAS/B,GAE1C,SAAS6D,GAAoB5D,GAClC,MAAO,CAAElZ,KAAM,sBAAuBgb,QAAS9B,GAE1C,SAAS6D,GAAgB3D,GAC9B,MAAO,CAAEpZ,KAAM,kBAAmBgb,QAAS5B,GAQtC,SAAS4D,GAAmBzG,GAIjC,MAAO,CAAEvW,KAAM,mBAAoBgb,QAASzE,GAYvC,SAAS0G,KAAmC,IAAlBC,EAAiB,wDAChD,OAAO,SAACC,GACNrR,IAAYX,QAAQ,QAApB,uCAA6B,WAAOrO,EAAK4Q,GAAZ,iBAAAjK,EAAA,sDACvB4J,EAAeK,EACf0P,EAASnB,EAASoB,cAEpBF,EADED,EACOf,EAAmBmB,GAAgBjQ,EAAS+P,IAE5ClB,EAAYqB,GAAgBlQ,EAAS+P,KANrB,2CAA7B,0DAiBG,SAASI,KACd,OAAO,SAACL,GACN,IAAInE,EAAW5M,IAAUC,gBAAgB,aAAe,OACxD8Q,EA9DK,CAAEnd,KAAM,mBAAoBgb,QA8DThC,KAG5B,IAAMuE,GAAkB,SAACE,EAAcC,GACrC,IAAKD,EAAO,MAAO,GACnB,IAAIE,EAAiB,GACrB,IAAKD,EAAI,GACP,OAAOD,EAJ8C,oBAMtCA,GANsC,IAMvD,2BAAwB,CAAC,IAAhB7V,EAAe,SACS,IAA3B8V,EAAI1Z,QAAQ4D,EAAKrD,MACnBoZ,EAAQtjB,KAAKuN,IARsC,8BAYvD,OAAO+V,GAEHL,GAAkB,SAACG,EAAcC,GACrC,IAAKD,EACH,MAAO,GAET,IAJuD,EAInDE,EAAiB,GAJkC,cAKtCF,GALsC,IAKvD,2BAAwB,CAAC,IAAhB7V,EAAe,QAClB8V,EAAI1Z,QAAQ4D,EAAKrD,MAAQ,GAC3BoZ,EAAQtjB,KAAKuN,IAPsC,8BAUvD,OAAO+V,GC9HF,SAASC,GAAmBtD,GACjC,MAAO,CAAEta,KAAM,gBAAiBgb,QAASV,GAEpC,SAASuD,GAAkBvD,GAChC,MAAO,CAAEta,KAAM,sBAAuBgb,QAASV,GCU1C,SAASwD,GAAgBpE,GAC9B,MAAO,CAAE1Z,KAAM,mBAAoBgb,QAAStB,GAiBvC,SAASqE,GAAcxZ,GAC5B,MAAO,CAAEvE,KAAM,kBAAmBgb,QAASzW,GAEtC,SAASyZ,KACd,OAAO,SAACb,GACNrR,IAAYX,QAAQ,SAAS,SAACrO,EAAK4Q,GACjC,IAAIkK,EAEFA,EADY,OAAVlK,GAAkBA,IAAU,GACpB,GAEAA,EAEZ,IAAI0P,EAASnB,EAASoB,cACtBF,EAvCG,CAAEnd,KAAM,eAAgBgb,QAuCNuC,GAAgB3F,EAASwF,KAC9CD,EA5BG,CAAEnd,KAAM,iBAAkBgb,QA8BzBuC,GACE3F,EAAQjQ,QAAO,SAACC,GACd,MAAsB,KAAfA,EAAK8P,SAEd0F,SAOL,SAASa,GAAYnP,GAE1B,IADA,IAAIoP,EAAkB,GACbnjB,EAAI,EAAGA,EAAI+T,EAASpU,OAAQK,IAC/B+T,EAAS/T,GAAGiU,SAAS,IACvBkP,EAAW7jB,KAAKyU,EAAS/T,IACzBmjB,EAAaA,EAAWC,OAAOF,GAAYnP,EAAS/T,GAAGiU,YAEvDkP,EAAW7jB,KAAKyU,EAAS/T,IAG7B,OAAOmjB,EAGF,SAASE,GAAoB/W,GAClC,OAAO,SAAC8V,GACN9V,EAAKgX,OAAOC,WACT3N,MAAK,SAAC7B,GACLqO,EAlDD,SAAwBrO,GAC7B,MAAO,CAAE9O,KAAM,kBAAmBgb,QAASlM,GAiD5ByP,CAAezP,EAAS0P,MACjCrB,EA/CC,CAAEnd,KAAM,0BAA2Bgb,QA+CLiD,GAAYnP,EAAS0P,UAErDC,OAAM,WACLtW,QAAQC,IAAI,oBAIb,SAASsW,KACd,OAAO,SACLvB,GAEArR,IAAYX,QAAQ,aAAa,SAACrO,EAAK4Q,GACrC,IAAIiR,EAEFA,EADY,OAAVjR,GAAkBA,IAAU,GAChB,GAEAA,EAEhB,IAAI0P,EAASnB,EAASoB,cACtBF,EAASW,GAAgBP,GAAgBoB,EAAavB,SAI5D,IAAMG,GAAkB,SAACE,EAAcC,GACrC,IAAIC,EAAiB,GACrB,IAAKD,EAAI,GACP,OAAOD,EAET,IAAK,IAAI1iB,EAAI,EAAGA,EAAI0iB,EAAM/iB,OAAQK,KACO,IAAnC2iB,EAAI1Z,QAAQyZ,EAAM1iB,GAAG+P,UACvB6S,EAAQtjB,KAAKojB,EAAM1iB,IAGvB,OAAO4iB,GC7GF,SAASiB,GAAiBtE,GAC/B,MAAO,CAAEta,KAAM,qBAAsBgb,QAASV,GAEzC,SAASuE,GAAmBvE,GACjC,MAAO,CAAEta,KAAM,uBAAwBgb,QAASV,GAE3C,SAASwE,GAAgBxE,GAC9B,MAAO,CAAEta,KAAM,oBAAqBgb,QAASV,GAExC,SAAS5I,GAAiBiE,GAC/B,MAAO,CAAE3V,KAAM,qBAAsBgb,QAASrF,GAEzC,SAASoJ,GAAmBzE,GACjC,MAAO,CAAEta,KAAM,uBAAwBgb,QAASV,GAE3C,SAAS/I,GAAmB7B,GACjC,MAAO,CAAE1P,KAAM,uBAAwBgb,QAAStL,GAE3C,SAAS4B,GAAkBrF,GAChC,MAAO,CAAEjM,KAAM,sBAAuBgb,QAAS/O,GAE1C,SAAS+S,GAAkB3X,GAChC,MAAO,CAAErH,KAAM,sBAAuBgb,QAAS3T,GAE1C,SAAS4X,GAAe1a,GAC7B,MAAO,CAAEvE,KAAM,mBAAoBgb,QAASzW,G,2BC1BvC,SAAS2a,GAAiB3E,GAC/B,MAAO,CAAEva,KAAM,qBAAsBgb,QAAST,GAKzC,SAAS4E,GAAW7E,GACzB,MAAO,CAAEta,KAAM,cAAegb,QAASV,GAElC,SAAS8E,GAAiB5E,GAC/B,MAAO,CAAExa,KAAM,sBAAuBgb,QAASR,GAE1C,SAAS6E,GAAmB5E,GACjC,MAAO,CAAEza,KAAM,wBAAyBgb,QAASP,G,cCbtC6E,I,OAAW,CACtB,CACEhgB,KAAM,YACNigB,KAAM,OACNjF,KAAM,QAER,CACEhb,KAAM,eACNigB,KAAM,OACNjF,KAAM,YAGR,CACEhb,KAAM,WACNigB,KAAM,OACNjF,KAAM,QAER,CACEhb,KAAM,aACNigB,KAAM,SACNjF,KAAM,UAER,CACEhb,KAAM,gBACNigB,KAAM,QACNjF,KAAM,W,0BChBJkF,G,oDACJ,WAAY3R,GAAsB,IAAD,8BAC/B,cAAMA,IAcR4R,cAAgB,SAACnF,EAAchN,GAC7B,EAAK4D,SAAS,CAAE5D,MAAOA,IACvB,EAAKO,MAAM6R,QAAQrlB,KAAnB,mBAAoCigB,IACpC,EAAKzM,MAAMsR,WAAW7E,GACtB,EAAKzM,MAAMwO,cAAa,GACxB,EAAKxO,MAAMgP,mBAAkB,IApBE,EAsBjC8C,YAAc,SAACrS,GACb,EAAK4D,SAAS,CAAE0O,WAAYtS,KAvBG,EAyBjCuS,eAAiB,SAACnF,GAChB,EAAKxJ,SAAS,CAAEwJ,gBAChB,EAAK7M,MAAMgS,eAAenF,GAC1BtO,IAAU2F,gBAAgB,cAAe2I,EAAc,MAAQ,OA5BhC,EA8BjCoF,WAAa,SAAC7O,GACZtO,cACIoC,OAAOC,QAAQ,YAAY+a,MAAMC,aAAa/O,GAC9ClM,OAAO6H,KAAKqE,IA/BhB,EAAKvB,MAAQ,CACXpC,MAAO,EACPsS,YAAa,EACblF,YAA0D,QAA7CtO,IAAUC,gBAAgB,iBAA4B,GALtC,E,qDAQjC,WACElS,KAAK0T,MAAMsR,WACgC,UAAzC7c,SAAS2d,IAAIra,MAAM,KAAKC,UAAU,GAC9B,OACAvD,SAAS2d,IAAIra,MAAM,KAAKC,UAAU,M,oBAuB1C,WAAU,IAAD,OAqEP,OACE,uBAAKwM,UAAU,UAAf,UACE,sBACEA,UAAU,oBACV6N,QAAS,WACP,EAAKL,gBAAgB,EAAKnQ,MAAMgL,cAHpC,SAME,eAAC,WAAD,CACElU,MAAOrM,KAAK0T,MAAMsS,EAChBhmB,KAAK0T,MAAM6M,YAAc,eAAiB,oBAE5C0F,SAAS,MACTC,QAAQ,aALV,SAOE,uBAAMhO,UAAU,+BAIpB,sBACE3V,IACiD,QAA/C0P,IAAUC,gBAAgB,iBACtB,2BACA,qBAENiU,IAAI,GACJJ,QAAS,WACP,EAAKJ,WAAW,6BAElBzN,UAAU,SAEZ,sBAAKA,UAAU,6BAAf,SACE,qBAAIA,UAAU,sBAAd,SAnGGiN,GAASvJ,KAAI,SAACnO,EAAM0F,GACzB,OACE,sBAEE+E,UACE,EAAK3C,MAAMpC,QAAUA,EACjB,wBACA,iBAENjH,GAAE,kBAAauB,EAAK2X,MACpBW,QAAS,WACP,EAAKT,cAAc7X,EAAK0S,KAAMhN,IAEhCiT,OAAQ,WACI,IAAVjT,GAAe,EAAKO,MAAMuR,kBAAiB,GACjC,IAAV9R,GAAe,EAAKO,MAAMwR,oBAAmB,IAE/CmB,aAAc,WACZ,EAAKb,YAAYrS,IAEnBmT,aAAc,WACZ,EAAKd,aAAa,IAEpBrN,MAAO,EAAKzE,MAAM6M,YAAc,CAAEhX,MAAO,GAAI8O,WAAY,IAAO,GArBlE,UAuBG,EAAK9C,MAAMpC,QAAUA,EACpB,sBAAK+E,UAAU,iCACb,KACH,EAAK3C,MAAMkQ,aAAetS,EACzB,sBAAK+E,UAAU,8BACb,KACJ,uBACEA,UACE,EAAK3C,MAAMpC,QAAUA,EACjB,qCACA,sBAJR,UAOE,eAAC,WAAD,CACE9G,MAAO,EAAKqH,MAAMsS,EAAEvY,EAAKtI,MACzB8gB,SAAS,MACTC,QAAQ,aAHV,SAKE,sBACEhO,UAAU,iBACVC,MAAO,EAAKzE,MAAM6M,YAAc,GAAK,CAAElI,WAAY,QAFrD,SAIE,uBACEH,UACE,EAAK3C,MAAMpC,QAAUA,EAArB,eACY1F,EAAK2X,KADjB,gCAEY3X,EAAK2X,MAEnBjN,MACE,EAAKzE,MAAM6M,YAAc,CAAElI,WAAY,SAAY,SAK3D,uBAAMF,MAAO,EAAKzE,MAAM6M,YAAc,CAAEgG,QAAS,QAAW,GAA5D,SACG,EAAK7S,MAAMsS,EAAEvY,EAAKtI,aAzDlBsI,EAAKtI,oB,GAzCAoT,IAAMC,WAgJbC,eAAW4M,IC1IpBmB,GAAgB,CACpBxB,cACA9C,eACA+C,oBACAC,sBACAxC,qBACAgD,eHlBK,SAAwBnF,GAC7B,MAAO,CAAE1a,KAAM,kBAAmBgb,QAASN,KGoB9BkG,gBAZS,SAAClR,GACvB,MAAO,CAAE4K,KAAM5K,EAAM8L,QAAQlB,KAAMI,YAAahL,EAAM8L,QAAQd,eAa9DiG,GAFaC,CAGbC,eAAkBrB,KC4ELsB,I,6GApGb,SAAkBC,EAAgBC,GAChC,IADgD,EAC5CC,EAAiB,GAD2B,cAE/BF,GAF+B,IAEhD,2BAAuB,CAAC,IAAfnZ,EAAc,QACrBqZ,EAAK5mB,KAAKuN,IAHoC,kDAK/BoZ,GAL+B,IAKhD,2BAAuB,CAAC,IAAD,EAAdpZ,EAAc,QACjBsZ,GAAO,EADU,cAEDH,GAFC,IAErB,2BAA0B,CACxB,GAAInZ,IADoB,QACF,CACpBsZ,GAAO,EACP,QALiB,8BAQjBA,GACFD,EAAK5mB,KAAKuN,IAdkC,8BAiBhD,OAAOqZ,I,wBAET,SAAkBE,EAAgBC,GAEhC,IADA,IAAI1D,EAAgB,GACX3iB,EAAI,EAAGA,EAAIomB,EAAKzmB,OAAQK,IAC3BomB,EAAKpmB,GAAGiJ,QAAQod,IAAY,GAC9B1D,EAAIrjB,KAAKU,GAGb,OAAO2iB,I,yBAET,SAAmBlQ,GACjB,IAAI6T,EAAW/e,SAASmR,cACtB,sBACqB/F,MAAMjB,cACzB6U,EAAwB,GACxBC,EAA0B,GAC9B,IAAK/T,EAAO,MAAO,GACnBA,EAAMC,SAAQ,SAAC7F,GACb0Z,EAAYjnB,KAAKuN,EAAKtI,KAAKmN,eAC3B8U,EAAclnB,KAAKuN,EAAKnB,OAAOgG,kBAEjC,IAAI+U,EAAcrnB,KAAKsnB,WAAWH,EAAaD,GAC3CK,EAAgBvnB,KAAKsnB,WAAWF,EAAeF,GAEnD,OAAOlnB,KAAKwnB,WAAWH,EAAaE,K,uBAEtC,SAAiBxb,EAAYsH,GAC3B,GAAItH,GAA2B,KAAlBA,EAAM0b,QAAgB,CACjC,IAAIN,EAAwB,GACxBC,EAA0B,GAC9B,IAAK/T,EAAO,MAAO,GAEnBA,EAAMC,SAAQ,SAAC7F,GACb0Z,EAAYjnB,KAAKuN,EAAKtI,KAAKmN,eAC3B8U,EAAclnB,KAAKuN,EAAKnB,OAAOgG,kBAEjC,IAAI+U,EAAcrnB,KAAKsnB,WACrBH,EACApb,EAAMvJ,OAAO+Q,MAAMjB,eAEjBiV,EAAgBvnB,KAAKsnB,WACvBF,EACArb,EAAMvJ,OAAO+Q,MAAMjB,eAGrB,OAAOtS,KAAKwnB,WAAWH,EAAaE,M,6BAGxC,SAAuBhK,GACrB,IAAI2J,EAAW/e,SAASmR,cACtB,sBACqB/F,MAAMjB,cACzBmL,EAAoB,GACpBiK,EAAoB,GACxBnK,EAAMjK,SAAQ,SAAC7F,GACbgQ,EAAQvd,KAAKuN,EAAK8P,MAAMjL,eACxBoV,EAAQxnB,KAAKuN,EAAKgD,KAAK6B,kBAEzB,IAAIqV,EAAc3nB,KAAKsnB,WAAW7J,EAASyJ,GACvCU,EAAc5nB,KAAKsnB,WAAWI,EAASR,GAC3C,OAAOlnB,KAAKwnB,WAAWG,EAAaC,K,2BAEtC,SAAqB7b,EAAYwR,GAC/B,GAAIxR,GAA2B,KAAlBA,EAAM0b,QAAgB,CACjC,IAAIhK,EAAoB,GACpBiK,EAAoB,GACxBnK,EAAMjK,SAAQ,SAAC7F,GACbgQ,EAAQvd,KAAKuN,EAAK8P,MAAMjL,eACxBoV,EAAQxnB,KAAKuN,EAAKgD,KAAK6B,kBAEzB,IAAIqV,EAAc3nB,KAAKsnB,WACrB7J,EACA1R,EAAMvJ,OAAO+Q,MAAMjB,eAEjBsV,EAAc5nB,KAAKsnB,WACrBI,EACA3b,EAAMvJ,OAAO+Q,MAAMjB,eAErB,OAAOtS,KAAKwnB,WAAWG,EAAaC,Q,MCyC3BC,G,8MAhIbC,YAAc,WACZ,IAAIvU,EAAS,EAAKwU,KAAKC,UAAkBzU,MACrC,EAAKG,MAAMuU,aACb1U,GAAS,EAAKhD,OAAOgD,GAEC,QAApB,EAAKG,MAAMyM,MACb,EAAKzM,MAAMwU,mBAAkB,GAE/B,IAAIC,EACqB,SAAvB,EAAKzU,MAAM0U,QACPzB,GAAW0B,gBACT,EAAK3U,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,UAElB,WAAvB,EAAK7J,MAAM0U,QACXzB,GAAW0B,gBAAgB,EAAK3U,MAAM8L,SACtCmH,GAAW2B,YAAY,EAAK5U,MAAML,OACpC8U,IACF,EAAKzU,MAAMuO,oBAAoBkG,GAC/B,EAAKzU,MAAMwO,cAAa,K,EAG5BqG,UAAY,SAACxc,GACX,GAAsB,KAAlBA,EAAM0b,QAAV,CAGA,IAAIlU,EAAS,EAAKwU,KAAKC,UAAkBzU,MAAMjB,eAC3C,EAAKoB,MAAMuU,aAAe,EAAKvU,MAAM0H,YACvC7H,GAAS,EAAKhD,OAAOgD,GAEvB,IAAI4U,EACqB,SAAvB,EAAKzU,MAAM0U,QACPzB,GAAW6B,cACTzc,EACA,EAAK2H,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,UAElB,WAAvB,EAAK7J,MAAM0U,QACXzB,GAAW6B,cAAczc,EAAO,EAAK2H,MAAM8L,SAC3CmH,GAAW8B,UAAU1c,EAAO,EAAK2H,MAAML,OACzC8U,IACF,EAAKzU,MAAMuO,oBAAoBkG,GAC/B,EAAKzU,MAAMwO,cAAa,M,EAG5B3R,OAAS,SAACmY,GACR,EAAKC,SAASD,GAAGlS,MAAK,SAAC/T,GACrB,IAAImmB,EAAanmB,EAAOmZ,KAAI,SAACnO,GAK3B,OAJAA,EAAKob,QAAUpb,EAAKob,QAAQte,QAC1Bme,EADa,4CAEwBA,EAFxB,YAIRjb,KAET,EAAKiG,MAAMoV,iBAAiBF,O,EAGhCD,SAAW,SAACD,GACV,OAAO9mB,QAAQmnB,IACb,EAAKrV,MAAM6H,YAAYyN,MAAMC,WAAWrN,KAAI,SAACnO,GAAD,OAC1CA,EACGhF,KAAK,EAAKiL,MAAM6H,YAAY9S,KAAKygB,KAAK,EAAKxV,MAAM6H,cACjD/E,KAAK/I,EAAK0b,KAAKD,KAAKzb,EAAMib,IAC1BU,QAAQ3b,EAAK4b,OAAOH,KAAKzb,QAE9B+I,MAAK,SAAC2R,GAAD,OAAkBvmB,QAAQC,QAAQ,GAAGmiB,OAAOsF,MAAM,GAAInB,Q,EAE/DoB,aAAe,WACT,EAAK7V,MAAMuU,aACb,EAAKvU,MAAMoV,iBAAiB,MAE9B,EAAKpV,MAAMwO,cAAa,GACvB/Z,SAASmR,cAAc,sBAA2C/F,MACjE,I,uDA7EJ,WACE,GAAIvT,KAAK0T,MAAMuU,YAAa,CAC1B,IAAID,EAAiB7f,SAASmR,cAAc,sBAC5C0O,GAAaA,EAAUwB,W,oBA6E3B,WAAU,IAAD,OACP,OACE,uBAAKrR,MAAO,CAAE8N,SAAU,YAAxB,UACE,wBACEpgB,KAAK,OACLuM,IAAI,YACJ8F,UAAU,oBACVuR,UAAW,SAAC1d,GACV,EAAKwc,UAAUxc,IAEjB2d,QAAS,WACa,QAApB,EAAKhW,MAAMyM,MAAkB,EAAKzM,MAAMwU,mBAAkB,IAE5DyB,YACE3pB,KAAK0T,MAAMuU,aAAmC,QAApBjoB,KAAK0T,MAAMyM,KACjCngB,KAAK0T,MAAMsS,EAAE,mBACU,SAAvBhmB,KAAK0T,MAAM0U,QACXpoB,KAAK0T,MAAMsS,EAAE,mBACU,WAAvBhmB,KAAK0T,MAAM0U,QACXpoB,KAAK0T,MAAMsS,EAAE,qBACbhmB,KAAK0T,MAAMsS,EAAE,qBAEnB7N,MACsB,QAApBnY,KAAK0T,MAAMyM,KACP,CAAE5W,MAAOvJ,KAAK0T,MAAMnK,MAAOC,OAAQxJ,KAAK0T,MAAMlK,QAC9C,CAAEogB,aAAc,UAGvB5pB,KAAK0T,MAAM8K,SACV,uBACEtG,UAAU,qBACV6N,QAAS,WACP,EAAKwD,gBAEPpR,MACsB,QAApBnY,KAAK0T,MAAMyM,KAAiB,CAAE0J,MAAO,OAAQC,IAAK,QAAW,GANjE,SASE,uBAAM5R,UAAU,iBAGlB,uBACEA,UAAU,iCACV6N,QAAS,WACP,EAAK+B,eAEP3P,MAA2B,QAApBnY,KAAK0T,MAAMyM,KAAiB,CAAE0J,MAAO,OAAU,Y,GA/H1CtR,IAAMC,WCYxBgO,GAAgB,CACpBvE,sBACAC,gBAEauE,gBAhBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrBkK,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,QACtBhB,SAAUjJ,EAAMwL,QAAQvC,SACxBpD,UAAW7F,EAAMzD,KAAKsJ,UACtBG,YAAahG,EAAMzD,KAAKyJ,YACxB6M,QAAS7S,EAAM8L,QAAQlB,KACvBC,WAAY7K,EAAM8L,QAAQjB,cAS5BoG,GAFaC,CAGbC,eAAkBmB,K,uCCvBPkC,GAAW,SAACrf,GACvB,OAAO,IAAI9I,SAAgB,SAACC,EAASC,GACnC,IAAIkoB,EACC5b,KAAa6b,UAAU/oB,OACvBkN,KAAa6b,UAAUC,UACvB9b,KAAa6b,UAAUE,YAC1BC,EAAY,QACZC,EAAStW,KAAKuW,KAAK5f,EAAKjK,KAAO2pB,GAC/BG,EAAe,EACfC,EAAQ,IAAIC,KACZC,EAAa,IAAItoB,WACnBsoB,EAAWroB,OAAX,uCAAoB,WAAOC,GAAP,SAAAgH,EAAA,yDACbhH,EAAEE,OADW,sBAEhBV,EAAO,IAED,IAAI6oB,MAJM,OAMlBH,EAAMI,aAAatoB,EAAEE,OAAOC,SAC5B8nB,GAAgB,GACGF,EACjBQ,IAEAhpB,EAAQ2oB,EAAMrmB,OAXE,2CAApB,sDAeA,IAAM0mB,EAAW,WACf,IAAIC,EAAQP,EAAeH,EACzBjmB,EAAM2mB,EAAQV,GAAa1f,EAAKjK,KAAOiK,EAAKjK,KAAOqqB,EAAQV,EAE7DM,EAAWK,mBAAmBf,EAAUgB,KAAKtgB,EAAMogB,EAAO3mB,KAG5D0mB,Q,SC/BSI,GAAU,SAACvgB,EAAWoI,GACjC,OAAO,IAAIlR,SAA6B,SAACC,EAASC,GAChD,IAAI+J,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkBpB,GACzBmB,EAAOxJ,OAAP,uCAAgB,WAAOC,GAAP,iBAAAgH,EAAA,yDACThH,EAAEE,OADO,sBAEZV,GAAO,GACD,IAAI6oB,MAHE,OAMVO,EAAa,IACXhe,EAAOtC,OAAOugB,KAAK7oB,EAAEE,OAAOC,SAC7ByhB,OAAOjY,SACTuK,MAAK,SAACvK,GACL,IAAK3J,EAAEE,OAEL,MADAV,GAAO,GACD,IAAI6oB,MAEZzd,EACGke,WACA5U,KAFH,uCAEQ,WAAOM,GAAP,iCAAAxN,EAAA,0DACAwN,EADA,uBAEEjL,EAAS,IAAIzJ,WAFf,SAGeipB,MAAMvU,GAAKN,MAAK,SAAC8U,GAAD,OAAOA,EAAErpB,UAHxC,OAGEA,EAHF,OAIF4J,EAAOjJ,cAAcX,GACrB4J,EAAO0f,UAAP,sBAAmB,0CAAAjiB,EAAA,sDACjB4hB,EAAQrf,EAAOpJ,OADE,EAOwB,CACvCwJ,EAASI,MACTJ,EAASnG,QACTmG,EAASa,YACTb,EAASU,WAJVxH,EAPgB,KAOVmH,EAPU,KAOFQ,EAPE,KAabuF,EACY,UAPY1F,EAPX,MAeX,OACc,SAAdA,EACA,OACc,QAAdA,EACA,MACA,OACNvC,GAAM,IAAI+B,MAAOC,UAAY,GACzB0F,EAAO,IAAIkB,KACb5I,EACAjF,EACAmH,EACAQ,EACAgG,EACAoY,EACA7Y,EACA1F,EACAjC,EAAKjK,MAEPoB,EAAQiQ,GAjCS,4CALjB,uBAyCFoZ,EAAQ,UAzCN,EA+CuC,CACvCjf,EAASI,MACTJ,EAASnG,QACTmG,EAASa,YACTb,EAASU,WAJVxH,EA/CC,KA+CKmH,EA/CL,KA+CaQ,EA/Cb,KAqDEuF,EACY,UAPY1F,EA/C1B,MAuDI,OACc,SAAdA,EACA,OACc,QAAdA,EACA,MACA,OACNvC,GAAM,IAAI+B,MAAOC,UAAY,GACzB0F,EAAO,IAAIkB,KACb5I,EACAjF,EACAmH,EACAQ,EACAgG,EACAoY,EACA7Y,EACA1F,EACAjC,EAAKjK,MAGPoB,EAAQiQ,GA1EN,4CAFR,uDA+EGwS,OAAM,SAAC3hB,GACNb,GAAO,SAGZwiB,OAAM,WACLxiB,GAAO,MAlGG,2CAAhB,0D,8ECJA0pB,GAAW5gB,OAAO,wBACT6gB,GAAS,SACpBrqB,EACA0R,EACAnH,EACAlL,GAEA,OAAO,IAAImB,SAA6B,SAACC,EAASC,GAChD0pB,GACGE,YAAY,CAAEtqB,KAAMA,IACpBuqB,QAAQnV,MAAK,SAACoV,GACAA,EACNC,cAAcrV,KAArB,uCAA0B,WAAOvK,GAAP,2BAAA3C,EAAA,sDACP,UADO,EAOiB,CACvC2C,EAAS6f,KAAKC,OAASpgB,EACvBM,EAAS6f,KAAKE,QAAU,iBACxB,MACA/f,EAAS6f,KAAKnf,WAJfxH,EAPuB,KAOjBmH,EAPiB,KAOTQ,EAPS,KAOIH,EAPJ,KAaX,MACbvC,GAAM,IAAI+B,MAAOC,UAAY,GACzB0F,EAAO,IAAIkB,KACb5I,EACAjF,EACAmH,EACAQ,EACAgG,EAnBe,UAYJ,MAUXnG,EACAlM,GAEFoB,EAAQiQ,GA1BgB,4CAA1B,0DA6BDwS,OAAM,SAAC3hB,GACNb,GAAO,UC7CFmqB,GAAmB,SAACC,GAC/B,OAAO,IAAItqB,SAAgB,SAACC,EAASC,GACnC,IAAIqqB,EAASvhB,OAAOC,QAAQ,UACxBF,EAAKC,OAAOC,QAAQ,MAEpBuhB,EAASD,EAAOE,WAAW,OAC3B1rB,EAAIgK,EAAG2hB,WAAWJ,GACtBvrB,EAAE4rB,GAAG,QAAQ,SAAUC,GACrBJ,EAAOK,OAAOD,MAGhB7rB,EAAE4rB,GAAG,OAAO,WACV1qB,EAAQuqB,EAAOM,OAAO,WAExB/rB,EAAE4rB,GAAG,SAAS,WACZzqB,EAAO,WAIA6qB,GAAoB,SAACT,GAChC,OAAO,IAAItqB,SAAc,SAACC,EAASC,GACjCupB,MAAMa,GACH1V,MAAK,SAACoW,GAAD,OAAcA,EAAS/Y,QAC5B2C,MAAK,SAAC3C,GACL,IAAMhI,EAASgI,EAAMgZ,YACrB,OAAO,IAAIC,eAAe,CACxBhC,MADwB,SAClBiC,GACJ,OACA,SAASC,IACP,OAAOnhB,EAAOohB,OAAOzW,MAAK,YAAsB,IAAnB0W,EAAkB,EAAlBA,KAAM3Z,EAAY,EAAZA,MACjC,IAAI2Z,EAKJ,OADAH,EAAWI,QAAQ5Z,GACZyZ,IAJLD,EAAWK,WAJVJ,SAcZxW,MAAK,SAAC6W,GAAD,OAAY,IAAIC,SAASD,MAC9B7W,MAAK,SAACoW,GAAD,OAAcA,EAAS3qB,UAC5BuU,MAAK,SAACvU,GACL,IAAIkM,EAAW,IAAIC,KACjB,CAACnM,GACD2I,OAAO8H,UAAUC,SAAS9I,QAAQ,QAAU,EACxCqiB,EAASzgB,MAAM,MAAMC,UAAU,GAC/BwgB,EAASzgB,MAAM,KAAKC,UAAU,GAClC,CACE2C,cAAc,IAAIlC,MAAOC,UACzBvG,KAAM5D,EAAK4D,OAGfhE,EAAQsM,MAETmW,OAAM,SAAC3hB,GACNqL,QAAQuf,MAAM5qB,GACdb,WC/BF0rB,G,oDACJ,WAAY9Z,GAA0B,IAAD,8BACnC,cAAMA,IAwBR+Z,eAzBqC,uCAyBpB,WAAOvB,GAAP,qBAAA5iB,EAAA,sEACC2iB,GAAiBC,GADlB,UACXpZ,EADW,SAEX,uBAAI,EAAKY,MAAML,OAAf,aAAyB,EAAKK,MAAM4K,eAAc/d,OAAS,GAFhD,oBAGTmtB,GAAW,EACXC,EAA+B,KACnC,uBAAI,EAAKja,MAAML,OAAf,aAAyB,EAAKK,MAAM4K,eAAchL,SAAQ,SAAC7F,GACrDA,EAAKqF,MAAQA,IACf4a,GAAW,EACXC,EAAalgB,OAGbigB,IAAYC,EAXH,wBAYX,EAAKhI,WAAWgI,GAZL,4CAgBQhB,GAAkBT,GAhB1B,QAgBT/d,EAhBS,OAiBf,EAAK4I,SAAS,CAAE6W,YAAY,GAA5B,sBAAoC,sBAAAtkB,EAAA,sEAC5B,EAAKukB,kBAAkB1f,GADK,4CAjBrB,4CAzBoB,wDA8CrCwX,WAAa,SAAC7T,GACZuF,KAAYC,UAAUxF,EAAK1H,KAC3BmH,KAASuc,aAAahc,IAhDa,EAkDrCic,cAAgB,SAACjc,GACf,OAAO,IAAIlQ,SAAc,SAACC,EAASC,GACjC,IAAIoR,EAAO,uBAAO,EAAKQ,MAAML,OAAlB,aAA4B,EAAKK,MAAM4K,eACnC,MAAXpL,IACFA,EAAU,IAEZA,EAAQhT,KAAK4R,GACb,EAAK4B,MAAMyD,kBAAkBrF,GAC7BmB,KAAaqE,UAAUxF,EAAK1H,KAC5BuH,IACGP,QAAQ,QAAS8B,GACjBsD,MAAK,WACJ,EAAK9C,MAAMoP,mBACX,EAAKpP,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5BpN,YAAW,WACT,EAAKG,MAAMqY,YAAc,EAAKjI,WAAW7T,GACzC,EAAKiF,SAAS,CAAE6W,YAAY,IAC5B,EAAKla,MAAM6R,QAAQrlB,KAAK,mBACvB,KACH2B,OAEDyiB,OAAM,WACLxiB,WAzE6B,EA+ErC+rB,kBA/EqC,uCA+EjB,WAAOnjB,GAAP,SAAApB,EAAA,+EACX,IAAI1H,QAAJ,uCAAkB,WAAOC,EAASC,GAAhB,eAAAwH,EAAA,sEACLygB,GAASrf,GADJ,UACjBoI,EADiB,uBAGrBhR,IAHqB,uCAKf,EAAKksB,WAAWtjB,EAAMoI,GALP,OAMrBjR,IANqB,4CAAlB,0DADW,2CA/EiB,wDA2FrCmsB,WAAa,SAACtjB,EAAWoI,GACvB,IAEIrQ,EAFAoQ,EAAYnI,EAAKvF,KAAKsG,MAAM,KAAKC,UAAU,GAC3CC,EAAWjB,EAAKvF,KAAKyG,OAAO,EAAGlB,EAAKvF,KAAK5E,OAASsS,EAAUtS,OAAS,GAEzE,OAAO,IAAIqB,SAAc,SAACC,EAASC,GAEjC,IAAI4rB,GAAW,EAYf,GAXI,uBAAI,EAAKha,MAAML,OAAf,aAAyB,EAAKK,MAAM4K,eAAc/d,OAAS,GAC7D,uBAAI,EAAKmT,MAAML,OAAf,aAAyB,EAAKK,MAAM4K,eAAchL,SAAQ,SAAC7F,GACrDA,EAAKqF,MAAQA,IACf4a,GAAW,EACX,EAAKha,MAAM6O,cAAc,kBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B3gB,SAKD6rB,EAAU,CACb,IAAI7hB,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkBpB,GACzBmB,EAAOxJ,OAAP,uCAAgB,WAAOC,GAAP,qBAAAgH,EAAA,yDACThH,EAAEE,OADO,sBAEZ,EAAKkR,MAAM6O,cAAc,iBACzB,EAAK7O,MAAM8O,kBAAiB,GAE5B1gB,IACM,IAAI6oB,MANE,UASI,QAAd9X,EATU,iCAUG4Y,GACbnpB,EAAEE,OAAOC,OACTqQ,EACAnH,EACAjB,EAAKjK,MAdK,UAUZgC,EAVY,8BAiBV,EAAKiR,MAAM6O,cAAc,iBACzB,EAAK7O,MAAM8O,kBAAiB,GAE5B1gB,IACM,IAAI6oB,MArBA,yBAuBJ,EAAKoD,cAActrB,GAvBf,QAwBV8O,KAAS0c,QACNxrB,EAAqB2H,IACtB9H,EAAEE,OAAQC,QAEZZ,IA5BU,mCA8BW,SAAdgR,GAAsC,SAAdA,EA9BrB,kBA+BRhH,EAAS,IAAIzJ,YACVC,OAAP,uCAAgB,WAAO0J,GAAP,yBAAAzC,EAAA,6DACR4kB,EAAgBniB,EAAMvJ,OAAeC,OACvCgT,EAAW,IAAIC,KAAWwY,GAFhB,SAGWzY,EAASE,OAAOnN,eAH3B,UAIS,kBADnBE,EAHU,gCAKZjG,EAAS8O,KAAS4c,aAChBxiB,EACAkH,EACAC,EACApI,EAAKjK,MATK,SAWN,EAAKstB,cAActrB,GAXb,OAYZ8O,KAAS0c,QAAQxrB,EAAO2H,IAAK8jB,GAC7BrsB,IAbY,+BAeRzC,EAAM6L,KAAMmjB,OAAO1lB,EAAS,SAC5BwF,EAAgB,IAAInJ,KAAK,CAAC3F,GAAM,CAAEyG,KAAM,eACxCsI,EAAW,IAAIC,KAAK,CAACF,GAAWxD,EAAKvF,KAAO,OAAQ,CACtDkJ,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAnBL,UAqBN,EAAKgoB,kBAAkB1f,GArBjB,QAsBZtM,IAtBY,4CAAhB,sDAyBAgK,EAAOC,kBAAkBpB,GAzDb,2BA0DW,QAAdmI,EA1DG,qBA2DRrK,cA3DQ,kCA4DUiC,aAAaC,GA5DvB,aA4DN2jB,EA5DM,0CA8DF,EAAKR,kBAAkBQ,GA9DrB,QA+DRxsB,IA/DQ,wBAiER,EAAK6R,MAAM6O,cAAc,iBACzB,EAAK7O,MAAM8O,kBAAiB,GAE5B1gB,IApEQ,iCAuEN+J,EAAS,IAAIzJ,YACV0J,kBAAkBpB,GACzBmB,EAAOxJ,OAAP,uCAAgB,WAAO0J,GAAP,SAAAzC,EAAA,6DACd7G,EAAS8O,KAAS4c,aAChBxiB,EACAkH,EACAC,EACApI,EAAKjK,MALO,SAOR,EAAKstB,cAActrB,GAPX,OAQd8O,KAAS0c,QAAQxrB,EAAO2H,IAAM2B,EAAMvJ,OAAeC,QACnDZ,IATc,2CAAhB,sDAzEU,mCAsFE,SAAdgR,GACc,SAAdA,GACc,OAAdA,GACc,QAAdA,GACc,QAAdA,GACc,SAAdA,GACc,QAAdA,GACc,UAAdA,GACc,QAAdA,GACc,QAAdA,GACc,QAAdA,GACc,QAAdA,EAjGY,kBAmGRhH,EAAS,IAAIzJ,YACVC,OAAP,uCAAgB,WAAO0J,GAAP,eAAAzC,EAAA,6DACR4kB,EAAgBniB,EAAMvJ,OAAeC,OAC3CA,EAAS8O,KAAS4c,aAChBxiB,EACAkH,EACAC,EACApI,EAAKjK,MANO,SAQR,EAAKstB,cAActrB,GARX,OASd8O,KAAS0c,QAAQxrB,EAAO2H,IAAK8jB,GAC7BrsB,IAVc,2CAAhB,sDAYAgK,EAAOC,kBAAkBpB,GAhHb,yCAkHGugB,GAAQvgB,EAAMoI,GAlHjB,WAkHZrQ,EAlHY,8BAoHV,EAAKiR,MAAM6O,cAAc,iBACzB,EAAK7O,MAAM8O,kBAAiB,GAE5B1gB,IACM,IAAI6oB,MAxHA,yBA0HJ,EAAKoD,cAActrB,GA1Hf,QA2HV8O,KAAS0c,QACNxrB,EAAqB2H,IACtB9H,EAAEE,OAAQC,QAEZZ,IA/HU,4CAAhB,2DA9GJ,EAAK0T,MAAQ,CACXqY,YAAY,EACZrkB,MAAOpB,SAAS0L,KAAKgE,aAJY,E,qDAOrC,WAAqB,IAAD,OAClB,GAAIrP,cAAY,CACd,IAAQiJ,EAAgB7G,OAAOC,QAAQ,YAA/B4G,YACHV,aAAaC,QAAQ,oBACxBD,aAAaK,QACX,kBACAK,EAAYC,SAAS,mBAAoB,SAG7C,IAAIwa,EAAWza,EAAYC,SAAS,iBAChCwa,GAAyB,MAAbA,GACdlsB,KAAKytB,eAAevB,GAGxBthB,OAAO8M,iBAAiB,UAAU,WAChC,EAAKX,SAAS,CAAExN,MAAOpB,SAAS0L,KAAKgE,mB,oBAiOzC,WAAU,IAAD,OACP,OACE,eAAC,KAAD,CACEuO,OAAM,uCAAE,WAAOkI,GAAP,mBAAAhlB,EAAA,sDACN,EAAKoK,MAAM6a,YAAW,GADhB,cAEWD,GAFX,gEAEG7gB,EAFH,iBAGE,EAAKogB,kBAAkBpgB,GAHzB,sMAAF,sDAMN+gB,OAAQ,CACN,QACA,OACA,OACA,QACA,QACA,QACA,OACA,QACA,OACA,SACA,QACA,OACA,MACA,OACA,OACA,OACA,QAEFC,UAAU,EA1BZ,SA4BG,gBAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAjB,OACC,+CACEzW,UAAU,qBACNwW,KAFN,IAGEvW,MACE,EAAKzE,MAAM6M,aAAepY,SAAS0L,KAAKgE,YAAc,IAClD,CAAEtO,MAAO,QACT,GANR,UASE,sBAAK2O,UAAU,yBACd,EAAKxE,MAAM6M,aAAe,EAAKhL,MAAMhM,MAAQ,IAC5C,eAAC,WAAD,CACE8C,MAAO,EAAKqH,MAAMsS,EAAE,qBACpBC,SAAS,MACT9N,MAAO,CAAE3O,OAAQ,QACjB0c,QAAQ,aAJV,SAME,uBACEhO,UAAU,cACVC,MAAO,CAAEyW,SAAU,OAAQC,WAAY,SAI3C,gCACE,eAACC,GAAA,EAAD,kCAIJ,oCACEjpB,KAAK,OACLqG,GAAG,kBACHgM,UAAU,kBACV/S,KAAK,QACDwpB,iB,GAxTQpW,IAAMC,WAiUjBC,eAAW+U,ICrUpBhH,GAAgB,CACpBhE,mBACAD,gBACAO,oBACA3L,qBACAwL,wBAEa8D,gBAhBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrBkK,MAAOhI,EAAM1J,OAAO0R,MACpBgC,UAAWhK,EAAM1J,OAAO0T,UACxBgB,YAAahL,EAAM8L,QAAQd,YAC3BjC,aAAc/I,EAAMwL,QAAQzC,gBAY9BkI,GAFaC,CAGbC,eAAkB8G,K,kGCpBduB,GAAa,CACjBC,MAAM,EACNC,UAAU,EACVC,cAAeC,GACfC,iBAAkB,CAChBC,oBAAqB,mBAGnBC,GAAiB,CACrBN,MAAM,EACNC,UAAU,EACVC,cAAeK,GACfH,iBAAkB,CAChBC,oBAAqB,mBAoKVG,G,oDA9Jb,WAAY9b,GAAyB,IAAD,8BAClC,cAAMA,IAgCR+b,WAAa,SAAClM,GACZ,OAAOA,EAAI3H,KAAI,SAACnO,EAAM0F,GACpB,OACE,sBAAI+E,UAAU,qBAAd,UACE,gCAAO/E,EAAQ,EAAI,OACnB,gCAAO1F,MAF+B0F,OApCV,EA2CpCwS,WAAa,WACXnd,eACEoC,OACGC,QAAQ,YACR+a,MAAMC,aACL,EAAKtQ,MAAMma,UACP,+BACA,sCAlDwB,EAqDpCC,YAAc,WACZ,EAAK5Y,SAAS,CAAE6Y,UAAW,GAAIF,WAAW,IAC1C,EAAKhc,MAAMkP,iBAAgB,IArD3B,EAAKrN,MAAQ,CACXqa,UAAW,GACXF,WAAW,GAJqB,E,qDAOpC,WAAqB,IAAD,QACjB1vB,KAAK0T,MAAM4H,YAAYlR,KACtBylB,KACGnvB,IADH,mDACmDgS,UAAUrL,WAC1DmP,MAAK,SAAClT,GACL0K,QAAQC,IAAI3K,GACZ,IAAMwsB,EAAaxsB,EAAIlC,KAAK6M,IAAI3I,QAChC8P,YAAW,WACL9P,OAAYwqB,GACd,EAAK/Y,SAAS,CAAE6Y,UAAWtsB,EAAIlC,KAAK6M,MAEpC,EAAKyF,MAAMkP,iBAAgB,IAE3B3Q,IAAUC,gBAAgB,aAAe4d,GACzC7d,IAAUC,gBAAgB,aAE1B,EAAK6E,SAAS,CAAE2Y,WAAW,IAC3B,EAAKhc,MAAMkP,iBAAgB,GAC3B3Q,IAAU2F,gBAAgB,UAAWkY,MAEtC,QAEJxL,OAAM,SAAC3hB,GACNqL,QAAQC,IAAItL,Q,oBA4BpB,WAAU,IAAD,OACP,OACE,sCACI3C,KAAKuV,MAAMqa,WAAa5vB,KAAKuV,MAAMma,YACnC1vB,KAAK0T,MAAMuL,WACT,uBACE/G,UAAU,cACVC,MACEnY,KAAKuV,MAAMma,UACP,CAAElmB,OAAQ,QAASsgB,IAAK,sBACxB,GALR,UAQE,sBAAK5R,UAAU,oBAAf,SACGlY,KAAKuV,MAAMma,UACV,eAACZ,GAAA,EAAD,8BAEA,uCACE,eAACA,GAAA,EAAD,wBACC,IAAM9uB,KAAKuV,MAAMqa,UAAUtqB,aAIlC,sBACE4S,UAAU,0BACV6N,QAAS,WACP,EAAK4J,eAHT,SAME,uBAAMzX,UAAU,+BAEjBlY,KAAKuV,MAAMma,WACV,uBAAKxX,UAAU,mBAAf,UACE,eAAC4W,GAAA,EAAD,yCACC,IAAMxpB,QAGX,uBAAK4S,UAAU,qBAAqBC,MAAO,CAAE3O,OAAQ,KAArD,UACE,sBAAK0O,UAAU,wBAAf,SACGlY,KAAKuV,MAAMma,UACV,eAAC,KAAD,CACEK,QAAST,GACT9lB,OAAQ,GACRD,MAAO,GACP4O,MAAO,CAAE6X,UAAW,OAAQC,aAAc,UAG5C,eAAC,KAAD,CAAQF,QAAShB,GAAYvlB,OAAQ,IAAKD,MAAO,QAGrD,sBACE2O,UAAU,mBACV6N,QAAS,WACP,EAAKJ,cAEPxN,MAAOnY,KAAKuV,MAAMma,UAAY,CAAEM,UAAW,QAAW,GALxD,SAOGhwB,KAAKuV,MAAMma,UACV,qCACE,eAACZ,GAAA,EAAD,0BAGF,eAACA,GAAA,EAAD,qCAGH9uB,KAAKuV,MAAMqa,WACV,uCACE,sBACE1X,UAAU,mBACV6N,QAAS,WACPmK,KAAK,qCACL,EAAKxc,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,IALhC,SAQE,eAACsM,GAAA,EAAD,0BAGF,oBAAG5W,UAAU,0BAAb,SACE,eAAC4W,GAAA,EAAD,2BAEF,qBAAI5W,UAAU,8BAAd,SACGlY,KAAKyvB,WAAWzvB,KAAKuV,MAAMqa,UAAUO,OAExC,oBAAGjY,UAAU,0BAAb,SACE,eAAC4W,GAAA,EAAD,kCAEF,qBAAI5W,UAAU,8BAAd,SACGlY,KAAKyvB,WAAWzvB,KAAKuV,MAAMqa,UAAUQ,sB,GAnJnC7X,IAAMC,WCbzBgO,GAAgB,CACpBhE,mBACAD,gBACAK,oBAEa6D,gBAZS,SAAClR,GACvB,MAAO,CACL+F,YAAa/F,EAAMzD,KAAKwJ,YACxBjI,MAAOkC,EAAMwL,QAAQ1N,MACrB4L,UAAW1J,EAAMwL,QAAQ9B,aAU3BuH,GAFaC,CAGbC,eAAkB8I,KCvBhBa,GAASzlB,OAAeylB,MAEtBC,G,kCAAAA,GACGC,QAAU,SAAC7lB,EAAW8lB,GAA8C,IAApBC,EAAmB,wDACpEC,EAAY,CACd,QACA,QACA,YACA,eACA,WACA,cACA,eACA,eACA,cACA,cACA,gBACA,gBACA,YACA,gBACA,kBAEE5hB,EAAM,IAAIuhB,GAGdK,EAAUpd,SAAQ,SAAC7F,GACjBqB,EACG6hB,UAAUjmB,GACV8L,MAAK,SAAC9N,GAEL,OAAOA,EAAQkoB,MACbloB,EAAQkoB,MAAR,UAAiBnjB,EAAjB,oBACOA,EADP,0BAEcA,EAFd,UAGAojB,MAAM,WAETra,MAAK,SAAC/F,GACDA,IACW,UAAThD,GAA6B,UAATA,GAA6B,cAATA,EAC1CkE,IAAYP,QAAQ3D,EAAMyD,KAAKC,MAAMV,IAErCM,aAAaK,QAAQ3D,EAAMgD,OAIhC+F,MAAK,WACS,UAAT/I,GAAqBgjB,GACvB9e,IAAYX,QAAQ,SAASwF,MAAK,SAACjD,GACjC,IAAIzE,EAAM,IAAIuhB,GACd9c,GACEA,EAAMhT,OAAS,GACfgT,EAAMD,SAAQ,SAAC7F,GACbqB,EACG6hB,UAAUjmB,GACV8L,MAAK,SAAC9N,GACL,OAAIA,EAAQkoB,MAAR,eAAsBnjB,EAAKrD,MACtB1B,EAAQkoB,MAAR,eAAsBnjB,EAAKrD,MAAOymB,MACvC,eAKFnoB,EAAQkoB,MAAR,eAAsBnjB,EAAKtI,KAA3B,UACqB,QAArBsI,EAAKX,YAEEpE,EAAQkoB,MAAR,eAAsBnjB,EAAKtI,KAA3B,SAAuC0rB,MAC5C,eAEOnoB,EAAQkoB,MAAR,eAAsBnjB,EAAKtI,KAA3B,UACFuD,EAAQkoB,MAAR,eAAsBnjB,EAAKtI,KAA3B,UAAwC0rB,MAC7C,oBAFG,KAMRra,KAtBH,uCAsBQ,WAAO1E,GAAP,SAAAxI,EAAA,sEACEiI,KAAS0c,QAAQxgB,EAAKrD,IAAK0H,GAD7B,2CAtBR,uDAyBGwS,OAAM,SAAC3hB,GACNqL,QAAQC,IAAItL,EAAK,4BAM9B2hB,OAAM,SAAC3hB,GACNqL,QAAQC,IAAItL,EAAK,sBAGvByS,YAAW,WACTob,MACC,MAIQF,U,oBC7FXQ,GAAWlmB,OAAekmB,QAyEfC,G,+FAtEb,SACE9uB,EACAuuB,EACAQ,GAEA,IAAIC,EAAehf,IAAUC,gBAAgB,kBAAoB,GAC7D4L,GAAO,IAAI3R,MAAO+kB,cACpBnT,GAAQ,IAAI5R,MAAOglB,WAAa,EAChCnT,GAAM,IAAI7R,MAAOilB,UACfC,EAAM,IAAIP,GAAQA,QAAQ,CAAEQ,YAAaL,IACvCvmB,EAAO,IAAI0D,KAAK,CAACnM,GAAO,YA+B9B,OA7BAovB,EACGE,YAAY,CACXzmB,KAAM,YACNiC,SAAUrC,IAEX8L,MAAK,SAAUoW,GACd5e,QAAQC,IAAI2e,EAAU,4BACtByE,EACGG,YAAY,CACXC,UAAW,YACXC,QACE,cACG5T,EADH,YACWC,GAAS,EAAI,IAAMA,EAAQA,EADtC,YAEEC,GAAO,EAAI,IAAMA,EAAMA,EAFzB,UAKHxH,MAAK,SAAUoW,GACd5e,QAAQC,IAAI2e,EAAU,4BACtB4D,OAEDlM,OAAM,SAAUiJ,GACfvf,QAAQuf,MAAMA,EAAO,4BACrByD,EAAY,8CAGjB1M,OAAM,SAAUiJ,GACfvf,QAAQuf,MAAMA,EAAO,4BACrByD,EAAY,4CAET,I,0BAET,SACER,EACAQ,GAEC,IADDP,EACA,wDACIQ,EAAehf,IAAUC,gBAAgB,kBAAoB,GAC7Dmf,EAAM,IAAIP,GAAQA,QAAQ,CAAEQ,YAAaL,IAiB7C,OAhBAI,EACGM,cAAc,CACb7mB,KAAM2lB,EAAS,cAAgB,cAEhCja,MAAK,SAAUpV,GACd,IAAIsJ,EAAOtJ,EAAKqB,OAAOmvB,SACvBlnB,EAAKmnB,iBAAmB,IAAI1lB,KAC5BzB,EAAKvF,KAAO,WACZmrB,GAAYC,QAAQ7lB,EAAM8lB,EAAcC,MAEzCnM,OAAM,SAAUiJ,GACfyD,EAAY,gDAEZhjB,QAAQuf,MAAMA,OAGX,M,KCrELuE,G,kCAAAA,GACGC,W,uCAAa,WAClBrnB,EACA8lB,EACAQ,GAHkB,6BAAA1nB,EAAA,+DAKOsB,OAAOC,QAAQ,UAAhCmnB,EALU,EAKVA,aALU,EAMgB9gB,KAAKC,MACrCc,IAAUC,gBAAgB,iBAAmB,IADzC4E,EANY,EAMZA,IAAKmb,EANO,EAMPA,SAAUC,EANH,EAMGA,SAGfC,EAASH,EAAalb,EAAK,CAC/Bmb,WACAC,aAEEE,EAAMxnB,OAAOC,QAAQ,YAAfD,CAA4BkM,EAAK,CACzCmb,SAAUA,EACVC,SAAUA,IAfM,SAiBPC,EAAOE,OAAO,gBAjBP,uBAiB4B,IAjB5B,uCAkBVF,EAAOG,gBAAgB,gBAlBb,eAoBlBF,EAAIG,UAAU,wBAAyB7nB,EAAM,UAAU,SAAU/H,GAC/DqL,QAAQC,IAAItL,GACRA,GAAKquB,EAAY,wCACrB,IAAIlT,GAAO,IAAI3R,MAAO+kB,cACpBnT,GAAQ,IAAI5R,MAAOglB,WAAa,EAChCnT,GAAM,IAAI7R,MAAOilB,UACnBe,EACGK,SACC,wBACA,0BACK1U,EADL,YACaC,GAAS,EAAI,IAAMA,EAAQA,EADxC,YAEIC,GAAO,EAAI,IAAMA,EAAMA,EAF3B,SAKDxH,MAAK,WACJga,OAEDlM,OAAM,WACL0M,EAAY,8CAtCA,mBA0CX,GA1CW,4C,0DADhBc,GA6CGW,a,uCAAe,WACpBjC,EACAQ,GAFoB,+CAAA1nB,EAAA,6DAIdqB,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QALR,EAMKD,OAAOC,QAAQ,UAAhCmnB,EANY,EAMZA,aANY,EAOIpnB,OAAOC,QAAQ,YAA/BM,EAPY,EAOZA,OAAQE,EAPI,EAOJA,IACVD,GAAaC,GAAOF,EAAOE,KAAKC,QAAQ,YACxCC,EAAUT,EAAKrB,KAAK2B,EAAW,WAC/BsnB,EAAU9nB,OAAOC,QAAQ,WAVX,EAWcqG,KAAKC,MACrCc,IAAUC,gBAAgB,iBAAmB,IADzC4E,EAXc,EAWdA,IAAKmb,EAXS,EAWTA,SAAUC,EAXD,EAWCA,SAGfC,EAASH,EAAalb,EAAK,CAC/Bmb,WACAC,aAhBkB,UAkBTC,EAAOE,OAAO,yBAlBL,wBAkBmC,IAlBnC,sBAmBlBrB,EAAY,gDAnBM,eAqBd2B,EAAuBR,EAAOS,oBAClC,yBAEEvF,EAAS1iB,EAAGkoB,kBAAkB/nB,EAAKrB,KAAK8B,EAAV,aAClCmnB,EAAQC,GACLG,KAAKzF,GACLd,GAAG,SAAS,SAAU5pB,GACrB,GAAIA,EACFqL,QAAQC,IAAItL,OACP,CACL,IAAIvB,EAAOuJ,EAAGK,aAAaF,EAAKrB,KAAK8B,EAAV,aACvB2C,EAAgB,IAAInJ,KAAK,CAAC3D,GAAO,CAAEyE,KAAM,oBACzCsI,EAAW,IAAIC,KAAK,CAACF,GAAW,WAAY,CAC9CG,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAEjByqB,GAAYC,QAAQpiB,EAAUqiB,GAC9B,IACmB5lB,OAAOC,QAAQ,YACvByD,OAAOxD,EAAKrB,KAAK8B,EAAV,aAAgC,SAACgiB,GAC/C,GAAIA,EAAO,MAAMA,KAEnB,MAAOjrB,GACP0L,QAAQC,IAAI,kBAAmBnD,EAAKrB,KAAK8B,EAAV,kBA5CnB,mBAiDb,GAjDa,4C,wDAqDTumB,U,SC1FXzB,GAASzlB,OAAeylB,MAEtB0C,G,kCAAAA,GACGC,O,uCAAS,WACd9f,EACAqK,EACAgC,EACAiR,EACAyC,EACAjC,GANc,iCAAA1nB,EAAA,yDAQVwF,EAAM,IAAIuhB,GACVhd,EAAQH,EAEO,IAAf+f,EAXU,wBAYRC,EAAUpkB,EAAIqkB,OAAO,QACrB/xB,EAAY,GAChBiS,GACEA,EAAMC,SAAQ,SAAC7F,GACbrM,EAAKlB,KACY,IAAf+yB,EACIthB,IAAYX,QAAQvD,EAAKrD,KACzBmH,KAAS2F,UAAUzJ,EAAKrD,SAnBtB,SAsBQxI,QAAQmnB,IAAI3nB,GAtBpB,OAuBZ,IADI+mB,EAtBQ,OAuBHvnB,EAAI,EAAGA,EAAIyS,EAAM9S,OAAQK,IAChCsyB,EAAQxoB,KAAR,UAAgB2I,EAAMzS,GAAGwJ,KAAO+d,EAAQvnB,IAxB9B,wBA2BRwyB,GAAY,IAAIjnB,MAAOC,UAAUinB,WACrCphB,IAAU2F,gBAAgB,eAAgBwb,GAE1CriB,aAAaK,QAAQ,eAAgBgiB,GA9BzB,QAgCEtkB,EAAIqkB,OAAO,UAExBzoB,KAAK,aAAcwG,KAAKG,UAAUkM,IAClC7S,KAAK,aAAcwG,KAAKG,UAAUgC,IAClC3I,KAAK,iBAAkBwG,KAAKG,UAAUkO,IACtC7U,KAAK,oBAAqBqG,aAAaC,QAAQ,iBAAmB,IAClEtG,KAAK,mBAAoBqG,aAAaC,QAAQ,gBAAkB,IAChEtG,KACC,oBACAqG,aAAaC,QAAQ,iBACnBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,KAEpC5R,KACC,oBACAqG,aAAaC,QAAQ,iBACnBE,KAAKG,UAAU,CAAEgL,KAAM,EAAGC,MAAO,KAEpC5R,KAAK,mBAAoBqG,aAAaC,QAAQ,gBAAkB,IAChEtG,KAAK,mBAAoBqG,aAAaC,QAAQ,gBAAkB,IAChEtG,KAAK,qBAAsBqG,aAAaC,QAAQ,kBAAoB,IACpEtG,KAAK,iBAAkBqG,aAAaC,QAAQ,cAAgB,IAC5DtG,KAAK,gBAAiBqG,aAAaC,QAAQ,aAAe,IAC1DtG,KAAK,qBAAsBqG,aAAaC,QAAQ,kBAAoB,IACpEtG,KACC,sBACAqG,aAAaC,QAAQ,mBAAqB,IAE1C8M,GAAO,IAAI3R,MAAO+kB,cACpBnT,GAAQ,IAAI5R,MAAOglB,WAAa,EAChCnT,GAAM,IAAI7R,MAAOilB,UAEnBtiB,EACGwkB,cAAc,CAAEztB,KAAM,SACtB2Q,MAAK,SAACvU,GACL,OAAQgxB,GACN,KAAK,EACHzC,IACA+C,KAAUC,OACRvxB,EADF,UAEK6b,EAFL,YAEaC,GAAS,EAAI,IAAMA,EAAQA,EAFxC,YAGIC,GAAO,EAAI,IAAMA,EAAMA,EAH3B,SAMA,MACF,KAAK,EACH+S,GAAYgB,WAAW9vB,EAAMuuB,EAAcQ,GAC3C,MACF,KAAK,EACH,MACF,KAAK,EACHc,GAAWC,WACT,IAAI3jB,KAAK,CAACnM,GAAO,WAAY,CAC3BoM,cAAc,IAAIlC,MAAOC,UACzBvG,KAAM5D,EAAK4D,OAEb2qB,EACAQ,GAEF,MACF,KAAK,EACHyC,aAASxxB,EAAM,EAAGoR,GAElB,MACF,KAAK,EACHmd,IACAkD,KAASC,SAAS1xB,EAAM,EAAG,GAAIuuB,OAOpClM,OAAM,SAAC3hB,GACNqL,QAAQC,IAAItL,MAzGF,4C,gEA8GHowB,UCuMAa,G,oDArTb,WAAYlgB,GAAqB,IAAD,8BAC9B,cAAMA,IAiFRmgB,iBAlFgC,sBAkFb,8CAAAvqB,EAAA,6DACXqB,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QAFX,EAGDD,OAAOC,QAAQ,gBAAvBiE,EAHS,EAGTA,IACJglB,EAAkB/iB,aAAaC,QAAQ,mBACvCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5CqiB,EAAajpB,EAAKrB,KAAKqqB,EAAiB,UACxCE,EAAUlpB,EAAKrB,KAAKqqB,EAAiB,cAVxB,SAWXhlB,EAAIilB,EAAYC,GAXL,OAab5yB,EAAOuJ,EAAGK,aAAagpB,GAEvB9lB,EAAW,IAAInJ,KAAK,CAAC3D,GAAO,CAAEyE,KAAM,yBACpCsI,EAAW,IAAIC,KAAK,CAACF,GAAW,aAAc,CAChDG,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAEjByqB,GAAYC,QACVpiB,GACA,WACE,EAAK4I,SAAS,CAAEkd,cAAc,IAE9B,IAAIH,EAAkB/iB,aAAaC,QAAQ,mBACvCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5CqiB,EAAajpB,EAAKrB,KACpBqqB,EACA,SACA,qBAGFnpB,EAAGupB,SAASH,EAAY,QAAQ,SAACpxB,EAAKvB,GACpC,GAAIuB,EACFqL,QAAQuf,MAAM5qB,OADhB,CAIA,IAAM6Q,EAAetC,KAAKC,MAAM/P,GAE9B2P,aAAaC,QAAQ,iBACrBwC,EAAa2gB,cAEbpjB,aAAaK,QAAQ,eAAgBoC,EAAa2gB,qBAIxD,GAlDe,4CAlFa,EAuIhCC,eAAiB,WACf,GAA6C,OAAzCniB,IAAUC,gBAAgB,WAM5B,OALA,EAAKwB,MAAMyO,iBAAgB,GAC3B,EAAKzO,MAAM0O,UACT,+OAEFnQ,IAAU2F,gBAAgB,UAAW,MAGvC,IAAMjN,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACxBipB,EAAkB/iB,aAAaC,QAAQ,mBACvCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5CqiB,EAAajpB,EAAKrB,KAAKqqB,EAAiB,SAAU,qBACtDnpB,EAAGupB,SAASH,EAAY,QAAQ,SAACpxB,EAAKvB,GACpC,GAAIuB,EAaF,OAZAowB,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,WACX,WACE,EAAK7L,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,KAE9B,GACA,oBAEFxU,QAAQC,IAAItL,GAGd,IAAM6Q,EAAetC,KAAKC,MAAM/P,GAG9BoS,GACAzC,aAAaC,QAAQ,iBACrBpD,SAAS4F,EAAa2gB,cACpBvmB,SAASmD,aAAaC,QAAQ,iBAEhC,EAAK6iB,mBAGLd,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,WACX,WACE,EAAK7L,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,KAE9B,GACA,mBAzLN,EAAKjN,MAAQ,CACX8e,aAAa,EACbhtB,SAAU4K,IAAUC,gBAAgB,QACpCoiB,cAAc,EACd/qB,MAAOpB,SAAS0L,KAAKgE,YACrBoc,cAAc,GARc,E,qDAWhC,WAAqB,IAAD,OAClB,GAAIzrB,cAAY,CACd,IAAMmC,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACtB6nB,EAAU9nB,OAAOC,QAAQ,WAC/B,EAAwBD,OAAOC,QAAQ,YAA/BM,EAAR,EAAQA,OACFC,GADN,EAAgBC,KACUF,EAAOE,KAAKC,QAAQ,YACxCC,EAAUT,EAAKrB,KAAK2B,EAAW,WAmBrC,GAlBKT,EAAG4pB,WAAWhpB,GAMjByC,QAAQC,IAAI,yCALZtD,EAAG6pB,UAAUjpB,GACbZ,EAAG6pB,UAAU1pB,EAAKrB,KAAK8B,EAAS,SAChCZ,EAAG6pB,UAAU1pB,EAAKrB,KAAK8B,EAAS,OAAQ,SACxCyC,QAAQC,IAAI,+CAMZgE,IAAUC,gBAAgB,qBACzBnB,aAAaC,QAAQ,oBAEtBD,aAAaK,QACX,kBACAa,IAAUC,gBAAgB,qBAGzBvH,EAAG4pB,WAAWzpB,EAAKrB,KAAK8B,EAAV,cAAkC,CACnD,IAAI8hB,EAAS1iB,EAAGkoB,kBAAkB/nB,EAAKrB,KAAK8B,EAAV,cAClCmnB,EAAQ,8CACLI,KAAKzF,GACLd,GAAG,SAAS,SAAU5pB,GACjBA,EACFqL,QAAQC,IAAItL,GAEZqL,QAAQC,IAAI,2CAKpB,IAAI6lB,EAAkB/iB,aAAaC,QAAQ,mBACvCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5CqiB,EAAajpB,EAAKrB,KACpBqqB,EACA,SACA,qBAGFnpB,EAAGupB,SAASH,EAAY,QAAQ,SAACpxB,EAAKvB,GACpC,GAAIuB,EACFqL,QAAQuf,MAAM5qB,OADhB,CAIA,IAAM6Q,EAAetC,KAAKC,MAAM/P,GAE9B2P,aAAaC,QAAQ,iBACrBpD,SAAS4F,EAAa2gB,cACpBvmB,SAASmD,aAAaC,QAAQ,kBAEhC,EAAK+F,SAAS,CAAEkd,cAAc,QAKpCrpB,OAAO8M,iBAAiB,UAAU,WAChC,EAAKX,SAAS,CAAExN,MAAOpB,SAAS0L,KAAKgE,mB,oBAoHzC,WAAU,IAAD,OACP,OACE,uBAAKK,UAAU,SAAf,UACE,sBAAKA,UAAU,0BAAf,SACE,eAAC,GAAD,MAGF,uCACE,sBACEA,UAAU,yBACV6N,QAAS,WACP,EAAKrS,MAAMgP,mBAAmB,EAAKhP,MAAMoL,gBAE3CwH,aAAc,WACZ,EAAK5S,MAAMgP,mBAAkB,IAE/BvK,MAAO,CAAEsc,KAAM,QAAS3K,IAAK,QAR/B,SAUE,eAAC,WAAD,CACEzd,MAAOrM,KAAK0T,MAAMsS,EAAE,QACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,uBAAMhO,UAAU,wCAGpB,sBACEA,UAAU,yBACV6N,QAAS,WACP,EAAKrS,MAAM4O,aAAa,EAAK5O,MAAM+K,cAErC6H,aAAc,WACZ,EAAK5S,MAAM4O,aAAY,IAN3B,SASE,eAAC,WAAD,CACEjW,MAAOrM,KAAK0T,MAAMsS,EAAE,WACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,uBAAMhO,UAAU,kCAGnB1P,eACC,sBACE0P,UAAU,yBACV6N,QAAS,WAEP,EAAKqO,kBAEPjc,MAAO,CAAEsc,KAAM,SANjB,SAQE,eAAC,WAAD,CACEpoB,MAAOrM,KAAK0T,MAAMsS,EAChBhmB,KAAKuV,MAAM0e,aACP,2CACA,QAENhO,SAAS,MACTC,QAAQ,aAPV,SASE,uBACEhO,UAAU,yBACVC,MACEnY,KAAKuV,MAAM0e,aACP,CAAEpa,MAAO,qBACT,YAQhB,uBACE3B,UAAU,oBACV6N,QAAS,WACP,EAAKrS,MAAM+P,oBAAmB,IAEhCtL,MACEnY,KAAK0T,MAAM6M,aAAepY,SAAS0L,KAAKgE,YAAc,IAClD,CAAEtO,MAAO,QACT,GARR,UAWE,sBAAK2O,UAAU,mBACdlY,KAAK0T,MAAM6M,aAAevgB,KAAKuV,MAAMhM,MAAQ,IAC5C,eAAC,WAAD,CACE8C,MAAOrM,KAAK0T,MAAMsS,EAAE,sBACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,uBACEhO,UAAU,aACVC,MAAO,CAAEyW,SAAU,OAAQC,WAAY,SAI3C,eAACC,GAAA,EAAD,oCAGJ,eAAC,GAAD,CAEIP,WAAYvuB,KAAK0T,MAAM6a,aAG1B/lB,eACkD,QAAjDyJ,IAAUC,gBAAgB,oBACxB,eAAC,GAAD,W,GA/SSqG,IAAMC,WCerBgO,GAAgB,CACpB9D,qBACAF,mBACAD,gBACAkB,sBACApB,gBACAC,cACAH,kBACAC,aAEaqE,gBAtBS,SAAClR,GACvB,MAAO,CACLiJ,SAAUjJ,EAAMwL,QAAQvC,SACxBC,YAAalJ,EAAMwL,QAAQtC,YAC3Bc,UAAWhK,EAAM1J,OAAO0T,UACxBlM,MAAOkC,EAAMwL,QAAQ1N,MACrBkK,MAAOhI,EAAM1J,OAAO0R,MACpBgD,YAAahL,EAAM8L,QAAQd,YAE3BzB,cAAevJ,EAAMwL,QAAQjC,iBAe/B0H,GAFaC,CAGbC,eAAkBkN,KCvBLc,I,sGAdb,SAAkBrhB,EAAoB1C,GAEpC,OADA0C,EAAQA,EAAM7F,QAAO,SAACC,GAAD,OAAUA,EAAKrD,MAAQuG,O,6BAG9C,SAAuB4O,EAA4B5O,GAEjD,OADA4O,EAAYA,EAAU/R,QAAO,SAACC,GAAD,OAAUA,EAAKkD,UAAYA,O,yBAG1D,SAAmB4M,EAAoB5M,GAErC,OADA4M,EAAQA,EAAM/P,QAAO,SAACC,GAAD,OAAUA,EAAKkD,UAAYA,S,MCZ9CgkB,GAAe,CACnBC,IAAK,KACLC,MAAO,GACPC,KAAM,GACNC,cAAe,IA6DFC,G,6FA1Db,SAAgBC,EAAoBtkB,GAClC,IAAIG,EAAOC,aAAaC,QAAQ,aAC5BC,EAAMC,KAAKC,MAAML,IAAU6jB,QACPO,IAApBjkB,EAAIgkB,KACNhkB,EAAIgkB,GAAc,KAEsB,IAAtChkB,EAAIgkB,GAAYprB,QAAQ8G,IAC1BM,EAAIgkB,GAAY7hB,QAAQzC,GAE1BI,aAAaK,QAAQ,YAAaF,KAAKG,UAAUJ,M,sBAGnD,WACE,IAAIH,EAAOC,aAAaC,QAAQ,aAEhC,OADUE,KAAKC,MAAML,IAAU6jB,K,wBAGjC,SAAkBvU,EAAoBzP,GACpC,IAAIG,EAAOC,aAAaC,QAAQ,aAC5BC,EAAMC,KAAKC,MAAML,IAAU6jB,GAE3BQ,EADavY,OAAOC,KAAK5L,GACMmP,GAC/BjN,EAAQlC,EAAIkkB,GAAmBtrB,QAAQ8G,GAC3CM,EAAIkkB,GAAmBznB,OAAOyF,EAAO,GACrCpC,aAAaK,QAAQ,YAAaF,KAAKG,UAAUJ,M,gCAEnD,SAA0BN,GACxB,IAAIG,EAAOC,aAAaC,QAAQ,aAC5BC,EAAMC,KAAKC,MAAML,IAAU6jB,GAC3BM,EAAarY,OAAOC,KAAK5L,GAC7BgkB,EAAWvnB,OAAO,EAAG,GACrBunB,EAAW3hB,SAAQ,SAAC7F,GAClB,IAAI0F,EAAQlC,EAAIxD,GAAM5D,QAAQ8G,GAC1BwC,GAAS,GACXlC,EAAIxD,GAAMC,OAAOyF,EAAO,MAG5BpC,aAAaK,QAAQ,YAAaF,KAAKG,UAAUJ,M,yBAEnD,SAAmBgkB,GACjB,IAAInkB,EAAOC,aAAaC,QAAQ,aAC5BC,EAAMC,KAAKC,MAAML,IAAU6jB,UACxB1jB,EAAIgkB,GACXlkB,aAAaK,QAAQ,YAAaF,KAAKG,UAAUJ,M,6BAEnD,SAAuBN,GACrB,IAAIG,EAAOC,aAAaC,QAAQ,aAC5BC,EAAMC,KAAKC,MAAML,IAAU6jB,GAC3BS,EAAsB,GAC1B,IAAK,IAAI3nB,KAAQwD,EACXA,EAAIxD,IAASwD,EAAIxD,GAAM5D,QAAQ8G,IAAY,GAC7CykB,EAAUl1B,KAAKuN,GAGnB,OAAO2nB,M,KCdIC,G,gGA7Cb,SAAmB1kB,GACjB,IAAIuC,EACwC,OAA1CnC,aAAaC,QAAQ,kBACrBD,aAAaC,QAAQ,iBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,kBAAoB,IACpD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GACtBD,EAAQE,QAAQzC,IAEhBuC,EAAQE,QAAQzC,GAGlBI,aAAaK,QAAQ,gBAAiBF,KAAKG,UAAU6B,M,4BAEvD,SAAsBG,GACpB,IAAIH,EAAoB,GACxBG,EAAMC,SAAQ,SAAC7F,GACbyF,EAAQhT,KAAKuN,EAAKrD,QAEpB2G,aAAaK,QAAQ,gBAAiBF,KAAKG,UAAU6B,M,mBAEvD,SAAavC,GACX,IAAIuC,EACwC,OAA1CnC,aAAaC,QAAQ,kBACrBD,aAAaC,QAAQ,iBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,kBAAoB,IACpD,GACAmC,EAAQD,EAAQrJ,QAAQ8G,GAC1BwC,GAAS,GACXD,EAAQxF,OAAOyF,EAAO,GAExBpC,aAAaK,QAAQ,gBAAiBF,KAAKG,UAAU6B,M,4BAEvD,WAME,OAJ4C,OAA1CnC,aAAaC,QAAQ,kBACrBD,aAAaC,QAAQ,iBACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,kBAAoB,IACpD,KACY,O,KC9BhBskB,G,8MACJ/L,aAAe,WACb,EAAK7V,MAAMgR,oBAAmB,I,EAEhC6Q,kBAAoB,SAACnrB,GACnB,OAAO,IAAIxI,QAAJ,uCAAkB,WAAOC,EAASC,GAAhB,iBAAAwH,EAAA,0DACnB,EAAKoK,MAAM6L,UAAU,GADF,mBAGM,KADvBiF,EAAckQ,GAAWc,gBAAgB,EAAK9hB,MAAM6L,UAAWnV,IACnD7J,OAHK,gCAIboR,IAAYC,WAAW,aAJV,6CAMbD,IAAYP,QAAQ,YAAaoT,GANpB,WASnB,EAAK9Q,MAAM6J,MATQ,oBAWE,KADnBE,EAAUiX,GAAWe,YAAY,EAAK/hB,MAAM6J,MAAOnT,IAC3C7J,OAXS,kCAYboR,IAAYC,WAAW,SAZV,QAanB/P,IAbmB,yCAeb8P,IAAYP,QAAQ,QAASqM,GAfhB,QAgBnB5b,IAhBmB,4CAAlB,0D,EAqBT6zB,c,sBAAgB,kCAAApsB,EAAA,yDAEU,UAApB,EAAKoK,MAAMyM,KAFD,gBAGZ6U,GAAUW,WAAW,EAAKjiB,MAAM0M,WAAY,EAAK1M,MAAM4H,YAAYlR,KAHvD,0BAIiB,UAApB,EAAKsJ,MAAMyM,KAJR,iBAKR8C,EAASnB,EAASoB,cALV,cAMKD,GANL,gEAMHxV,EANG,kBAOJ,EAAKmoB,WAAWnoB,GAPZ,+IAUoB,IAA5B,EAAKiG,MAAML,MAAM9S,QACnB,EAAKmT,MAAM6R,QAAQrlB,KAAK,kBAE1B,EAAKwT,MAAMoP,kBAAiB,GAC5B,EAAKpP,MAAMoP,kBAAiB,GAC5B,EAAKpP,MAAM6Q,uBACX,EAAK7Q,MAAMmQ,mBAhBC,wBAkBZ/B,EAAS+T,SAAS,EAAKniB,MAAM4H,YAAYlR,KAEzCirB,GAAYS,MAAM,EAAKpiB,MAAM4H,YAAYlR,KACzC,EAAKsJ,MAAMoP,kBAAiB,GArBhB,QAwBd,EAAKpP,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,GA1Bd,gE,EA4BhBoT,WAAa,SAACxrB,GACZ,OAAO,IAAIxI,SAAc,SAACC,EAASC,GACjC,EAAK4R,MAAML,OACT1B,IACGP,QAAQ,QAASsjB,GAAWkB,WAAW,EAAKliB,MAAML,MAAOjJ,IACzDoM,KAFH,sBAEQ,sBAAAlN,EAAA,sEACEiI,KAASqkB,WAAWxrB,GADtB,cAGJirB,GAAYS,MAAM1rB,GAElB0X,EAASgU,MAAM1rB,GAEf4qB,GAAUe,mBAAmB3rB,GAE7B6I,KAAa6iB,MAAM1rB,GAEnBsG,IAAeolB,MAAM1rB,GAXjB,SAaE,EAAKmrB,kBAAkBnrB,GAbzB,OAcJvI,IAdI,6CAgBLyiB,OAAM,WACLxiB,W,4CAIV,WAAU,IAAD,OACP,OACE,uBAAKoW,UAAU,0BAAf,UACuB,UAApBlY,KAAK0T,MAAMyM,KACV,sBAAKjI,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,kCAEoB,UAApB9uB,KAAK0T,MAAMyM,KACb,sBAAKjI,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,iCAGF,sBAAK5W,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,iCAGiB,UAApB9uB,KAAK0T,MAAMyM,KAAmB,KAC7B,sBAAKjI,UAAU,qBAAf,SACE,sBAAKA,UAAU,2BAAf,SACGlY,KAAK0T,MAAM4H,YAAYnW,SAKT,UAApBnF,KAAK0T,MAAMyM,KACV,sBAAKjI,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,2DAEoB,UAApB9uB,KAAK0T,MAAMyM,KACb,sBAAKjI,UAAU,6BAA6BC,MAAO,CAAE2R,IAAK,QAA1D,SACE,eAACgF,GAAA,EAAD,sHAMF,sBAAK5W,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,yHAMJ,sBACE5W,UAAU,uBACV6N,QAAS,WACP,EAAKwD,gBAHT,SAME,eAACuF,GAAA,EAAD,uBAEF,sBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAK2P,iBAHT,SAME,eAAC5G,GAAA,EAAD,8B,GAzIiBvW,IAAMC,WAgJlBC,eAAW6c,ICjIpB9O,GAAgB,CACpB1D,oBACA4B,sBACAH,wBACAV,oBACArB,mBACAD,gBACAqC,uBAEa6B,gBArBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrB4H,mBAAoB1F,EAAMzD,KAAKmJ,mBAC/BK,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,QACtBW,KAAM5K,EAAM8L,QAAQlB,KACpBC,WAAY7K,EAAM8L,QAAQjB,cAYUoG,GAAzBC,CAAwC6O,ICoDxCU,I,2DAlFb,WAAYtiB,GAAyB,IAAD,8BAClC,cAAMA,IAcR6V,aAAe,WACb,EAAK7V,MAAM+Q,kBAAiB,IAhBM,EAkBpCiR,cAAgB,WACd,IAGIvwB,EAH8BgD,SAASmR,cACzC,8BAEiB/F,MAIfjH,EAHgCnE,SAASmR,cAC3C,gCAEqB/F,MACjBF,EAAU,EAAKK,MAAfL,MACNA,EAAMC,SAAQ,SAAC7F,GACb,GAAIA,EAAKrD,MAAQ,EAAKsJ,MAAM4H,YAAYlR,IAGtC,OAFAqD,EAAKtI,KAAOA,EACZsI,EAAKnB,OAASA,GACP,KAGXqF,IAAYP,QAAQ,QAASiC,GAAOmD,MAAK,WACvC,EAAK9C,MAAM+Q,kBAAiB,GAC5B,EAAK/Q,MAAMoP,sBAEb,EAAKpP,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMkR,oBAAmB,IAvC9B,EAAKrP,MAAQ,CAAE0gB,SAAS,GAFU,E,qDAIpC,WACE,IAAMC,EAA4B/tB,SAASmR,cACzC,8BAEI6c,EAA8BhuB,SAASmR,cAC3C,gCAEF4c,EAAQ3iB,MAAQvT,KAAK0T,MAAM4H,YAAYnW,KACvCgxB,EAAU5iB,MAAQvT,KAAK0T,MAAM4H,YAAYhP,S,oBA+B3C,WAAU,IAAD,OACP,OACE,uBAAK4L,UAAU,wBAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,eAAC4W,GAAA,EAAD,0BAEF,uBAAK5W,UAAU,kCAAf,UACE,sBAAKA,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,0BAEF,wBAAO5W,UAAU,iCAEnB,uBAAKA,UAAU,oCAAf,UACE,sBAAKA,UAAU,+BAAf,SACE,eAAC4W,GAAA,EAAD,uBAEF,wBAAO5W,UAAU,mCAEnB,sBACEA,UAAU,qBACV6N,QAAS,WACP,EAAKwD,gBAHT,SAME,eAACuF,GAAA,EAAD,uBAEF,sBACE5W,UAAU,sBACV6N,QAAS,WACP,EAAK2P,iBAHT,SAME,eAAC5G,GAAA,EAAD,+B,GA5EevW,IAAMC,YCkBzBgO,GAAgB,CACpB1D,oBACA2B,oBACAG,sBACApC,mBACAD,iBAEakE,gBAjBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrB4H,mBAAoB1F,EAAMzD,KAAKmJ,mBAC/BK,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,WAUcgH,GAAzBC,CAAwCuP,ICmGxCI,I,2DA3Hb,WAAY1iB,GAAwB,IAAD,8BACjC,cAAMA,IAIR6V,aAAe,WACb,EAAK7V,MAAMiR,iBAAgB,IANM,EAQnC+Q,cAAgB,WACd,IAAMW,EAAiCluB,SAASmR,cAC9C,6BAEE2b,EAAqB,EAAK1f,MAAM0f,WAChCG,EAAYJ,GAAUsB,WACtBC,EAAc3Z,OAAOC,KAAKmY,GAAUsB,YACpClW,EAAa,EAAK7K,MAAMihB,MACxBD,EAAYh2B,OACZg2B,EAAY1sB,QAAQwsB,EAAa9iB,OACrC,OAAI,EAAKgC,MAAMihB,QACbvB,EAAaoB,EAAa9iB,MACtB6hB,EAAUqB,eAAexB,KAC3B,EAAKvhB,MAAM6O,cAAc,wBACzB,EAAK7O,MAAM8O,kBAAiB,IAK3ByS,EAOHG,EAAU,GAAD,OAAIH,KACbG,EAAU,GAAD,OAAIH,IAAcprB,QAAQ,EAAK6J,MAAM4H,YAAYlR,MAAQ,GAElE,EAAKsJ,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,KAI9BwS,GAAU0B,SAASzB,EAAY,EAAKvhB,MAAM4H,YAAYlR,KACtD,EAAKsJ,MAAMiR,iBAAgB,GAC3B,EAAKjR,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMkR,oBAAmB,GAC9B,EAAKlR,MAAMsR,WAAW,cACtB,EAAKtR,MAAMqR,iBAAiB3E,KApB1B,EAAK1M,MAAM6O,cAAc,0BACzB,EAAK7O,MAAM8O,kBAAiB,KA7BG,EAmDnCmU,aAAe,SAAC1B,GACK,QAAfA,EACF,EAAKle,SAAS,CAAEyf,OAAO,KAEvB,EAAKzf,SAAS,CAAEke,eAChB,EAAKle,SAAS,CAAEyf,OAAO,MAtDzB,EAAKjhB,MAAQ,CAAEihB,OAAO,EAAMvB,WAAY,IAFP,E,0CA2DnC,WAAU,IAAD,OAgBP,OACE,uBAAK/c,UAAU,uBAAf,UACE,sBAAKA,UAAU,mBAAf,SACE,eAAC4W,GAAA,EAAD,6BAEF,uBAAK5W,UAAU,kCAAf,UACE,sBAAKA,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,uBAEF,yBACE5W,UAAU,4BACV0e,SAAU,SAAC7qB,GACT,EAAK4qB,aAAa5qB,EAAMvJ,OAAO+Q,QAHnC,SAxBkB,WACtB,IAAI6hB,EAAYJ,GAAUsB,WAE1B,OADiB1Z,OAAOC,KAAKuY,GACXxZ,KAAI,SAACnO,GACrB,OACE,yBACE8F,MAAO9F,EAEPyK,UAAU,+BAHZ,SAKG,EAAKxE,MAAMsS,EAAEvY,IAHTA,MAuBJopB,QAGL,uBAAK3e,UAAU,iCAAf,UACE,sBAAKA,UAAU,4BAAf,SACE,eAAC4W,GAAA,EAAD,0BAEF,wBACE5W,UAAU,2BACV4e,UAAW92B,KAAKuV,MAAMihB,WAG1B,sBACEte,UAAU,oBACV6N,QAAS,WACP,EAAKwD,gBAHT,SAME,eAACuF,GAAA,EAAD,uBAEF,sBACE5W,UAAU,qBACV6N,QAAS,WACP,EAAK2P,iBAHT,SAME,eAAC5G,GAAA,EAAD,+B,GArHctW,cCkBlBgO,GAAgB,CACpB7B,mBACAC,sBACApC,mBACAD,gBACAyC,cACAD,qBAEa0B,gBAlBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrB4H,mBAAoB1F,EAAMzD,KAAKmJ,mBAC/BK,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,WAaxBgH,GAFaC,CAGbC,eAAkB0P,KCiHLW,I,2DA7Ib,WAAYrjB,GAAyB,IAAD,8BAClC,cAAMA,IAMRsjB,WAAa,SAACC,GACZ,GAAI,EAAK1hB,MAAM2hB,OAAQ,CACrB,IAAI1Z,EAAe,EAAK9J,MAAM8J,aAC9BA,EAAanB,KAAO4a,EACpB,EAAKvjB,MAAMyjB,mBAAmB3Z,GAC9B,EAAK9J,MAAM0jB,gBAAe,GAC1Bjb,EAASkb,gBAAgBJ,EAAM,EAAKvjB,MAAM8J,aAAalB,WAClD,CACL,IAAIF,EAAe,EAAK1I,MAAM0I,aAC9BA,EAAaC,KAAO4a,EACpB,EAAKvjB,MAAMmP,mBAAmBzG,GAC9B,EAAK1I,MAAM4jB,gBAAe,GAC1Bnb,EAASob,gBAAgBN,EAAM,EAAKvjB,MAAM0I,aAAaE,SAnBvB,EAsBpCkb,YAAc,SAACP,GACb,GAAI,EAAK1hB,MAAM2hB,OAAQ,CACrB,IAAI1Z,EAAe,EAAK9J,MAAM8J,aAC9BA,EAAalB,MAAQ2a,EACrB,EAAKvjB,MAAM0jB,gBAAe,GAC1Bjb,EAASkb,gBAAgB,EAAK3jB,MAAM8J,aAAanB,KAAM4a,GACvD,EAAKvjB,MAAMyjB,mBAAmB3Z,OACzB,CACL,IAAIpB,EAAe,EAAK1I,MAAM0I,aAC9BA,EAAaE,MAAQ2a,EACrB,EAAKvjB,MAAM4jB,gBAAe,GAC1Bnb,EAASob,gBAAgB,EAAK7jB,MAAM0I,aAAaC,KAAM4a,GACvD,EAAKvjB,MAAMmP,mBAAmBzG,KAhChC,EAAK7G,MAAQ,CACX2hB,OAA4B,SAApB,EAAKxjB,MAAMyM,MAAuC,WAApB,EAAKzM,MAAMyM,MAHjB,E,0CAsCpC,WAAU,IAAD,OACH/B,EAAWpe,KAAKuV,MAAM2hB,OACtBl3B,KAAK0T,MAAM8J,aACXxd,KAAK0T,MAAM0I,aACf,OACE,uBACElE,UAAU,wBACVoO,aAAc,WACZ,EAAK5S,MAAMgP,mBAAkB,IAE/B2D,aAAc,WACZ,EAAK3S,MAAMgP,mBAAkB,IAE/BvK,MAAOnY,KAAKuV,MAAM2hB,OAAS,CAAE1tB,OAAQ,SAAY,GARnD,UAUGxJ,KAAKuV,MAAM2hB,OACV,qBAAIhf,UAAU,mBAAd,SACG,CAAC,eAAgB,gBAAgB0D,KAAI,SAACnO,EAAM0F,GAC3C,OACE,sBACE+E,UAAU,wBACV6N,QAAS,WACP,EAAKiR,WAAW7jB,EAAQ,IAE1BgF,MAAOiG,EAAS/B,OAASlJ,EAAQ,EAAI,GAAK,CAAEskB,QAAS,KALvD,UAOE,eAAC3I,GAAA,EAAD,UAAQrhB,IACP2Q,EAAS/B,OAASlJ,EAAQ,GACzB,uBAAM+E,UAAU,uBAO1B,qBAAIA,UAAU,mBAAd,SACG,CACC,iBACA,eACA,eACA,mBACA,iBACA,sBACA0D,KAAI,SAACnO,EAAM0F,GACX,OACE,sBACE+E,UAAU,wBACV6N,QAAS,WACP,EAAKiR,WAAW7jB,IAElBgF,MAAOiG,EAAS/B,OAASlJ,EAAQ,GAAK,CAAEskB,QAAS,KALnD,UAQE,eAAC3I,GAAA,EAAD,UAAQrhB,IACP2Q,EAAS/B,OAASlJ,GACjB,uBACE+E,UAAU,aACVC,MAAO,CAAE0W,WAAY,YANpB1b,QAcf,sBAAK+E,UAAU,0BACf,sBAAIA,UAAU,gBAAd,UACE,sBACEA,UAAU,qBACV6N,QAAS,WACP,EAAKyR,YAAY,IAEnBrf,MAA0B,IAAnBiG,EAAS9B,MAAc,GAAK,CAAEmb,QAAS,KALhD,UAOE,eAAC3I,GAAA,EAAD,8BACoB,IAAnB1Q,EAAS9B,OACR,uBACEpE,UAAU,aACVC,MAAO,CAAE0W,WAAY,aAI3B,sBACE3W,UAAU,qBACV6N,QAAS,WACP,EAAKyR,YAAY,IAEnBrf,MAA0B,IAAnBiG,EAAS9B,MAAc,GAAK,CAAEmb,QAAS,KALhD,UAOE,eAAC3I,GAAA,EAAD,+BACoB,IAAnB1Q,EAAS9B,OACR,uBACEpE,UAAU,aACVC,MAAO,CAAE0W,WAAY,uB,GApIZtW,IAAMC,YCYzBgO,GAAgB,CACpB3D,sBACAH,qBACAyU,mBnC8CK,SAA4B3Z,GAIjC,MAAO,CAAE3X,KAAM,wBAAyBgb,QAASrD,ImCjDjD8Z,enCgCK,SAAwB5Y,GAC7B,MAAO,CAAE7Y,KAAM,mBAAoBgb,QAASnC,ImChC5C0Y,enCkCK,SAAwBzY,GAC7B,MAAO,CAAE9Y,KAAM,mBAAoBgb,QAASlC,KmCjC/B8H,gBAfS,SAAClR,GACvB,MAAO,CACL6G,aAAc7G,EAAMwL,QAAQ3E,aAC5BoB,aAAcjI,EAAMwL,QAAQvD,aAC5B2C,KAAM5K,EAAM8L,QAAQlB,KACpBrB,cAAevJ,EAAMwL,QAAQjC,iBAUO0H,GAAzBC,CAAwCsQ,ICyFxCW,G,oDA5Gb,WAAYhkB,GAA0B,IAAD,8BACnC,cAAMA,IAGRiS,WAAa,SAAC7O,GACZtO,cACIoC,OAAOC,QAAQ,YAAY+a,MAAMC,aAAa/O,GAC9ClM,OAAO6H,KAAKqE,GAChB,EAAKpD,MAAM4O,aAAY,IANvB,EAAK/M,MAAQ,GAFsB,E,0CAWrC,WAAU,IAAD,OACP,OACE,sBACE2C,UAAU,wBACVoO,aAAc,WACZ,EAAK5S,MAAM4O,aAAY,IAEzB+D,aAAc,WACZ,EAAK3S,MAAM4O,aAAY,IAEzBnK,MAAO,CACLsc,KAAM,QACNjrB,OAAQ,QACRD,MAAO,SAXX,SAcE,sBAAI2O,UAAU,mBAAd,UACE,qBACEA,UAAU,wBACV6N,QAAS,WACP,EAAKrS,MAAM2O,eAAc,GACzB,EAAK3O,MAAM4O,aAAY,IAJ3B,SAOE,eAACwM,GAAA,EAAD,wBAGF,qBACE5W,UAAU,wBACV6N,QAAS,WACHrT,UAAUrL,SAASwC,QAAQ,OAAS,EACtC,EAAK8b,WACH,sGAGF,EAAKA,WACH,uGATR,SAcE,eAACmJ,GAAA,EAAD,qBAEF,qBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAKJ,WAAW,qCAHpB,SAME,eAACmJ,GAAA,EAAD,yBAEF,qBACE5W,UAAU,wBACV6N,QAAS,WACHrT,UAAUrL,SAASwC,QAAQ,OAAS,EACtC,EAAK8b,WACH,sGAGF,EAAKA,WACH,uGATR,SAcE,eAACmJ,GAAA,EAAD,wBAEF,qBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAKJ,WAAW,6BAHpB,SAME,eAACmJ,GAAA,EAAD,4BAEF,qBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAKJ,WAAW,uBAHpB,SAME,eAACmJ,GAAA,EAAD,gCAEF,qBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAKJ,WAAW,6CAHpB,SAME,eAACmJ,GAAA,EAAD,qC,GArGcvW,IAAMC,WCK1BgO,GAAgB,CACpBnE,gBACAC,eAEamE,gBAVS,SAAClR,GACvB,MAAO,CACLqJ,cAAerJ,EAAMwL,QAAQnC,cAC7BH,YAAalJ,EAAMwL,QAAQtC,eAOS+H,GAAzBC,CAAwCiR,ICMxCC,I,qKAdb,WACE,OACE,sBAAKzf,UAAU,+BAAf,SACE,uBAAKA,UAAU,wBAAf,UACE,uBAAMA,UAAU,mCAChB,sBAAKA,UAAU,kBAAf,SACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM0L,qB,GAPN7G,IAAMC,YCKhBiO,gBANS,SAAClR,GACvB,MAAO,CACL6J,QAAS7J,EAAMwL,QAAQ3B,WAGL,GACPqH,CAAwCkR,ICX1CC,I,OAAS,CACpBC,aAEM,4BAENC,UAEM,wBAENC,kBAAmB,kBACnBC,sBACE,0EACFC,mBAAoB,yCAETC,GAAY,CACvB,CACEhsB,GAAI,EACJ/G,KAAM,QACNigB,KAAM,QACNtO,IAAK,IAEP,CACE5K,GAAI,EACJ/G,KAAM,UACNigB,KAAM,UACNtO,IAAI,0EAAD,OAA4E8gB,GAAOG,kBAAnF,yBAAqHH,GAAOC,eAGjI,CACE3rB,GAAI,EACJ/G,KAAM,eACNigB,KAAM,cACNtO,IAAK,IAQP,CACE5K,GAAI,EACJ/G,KAAM,SACNigB,KAAM,SACNtO,IAAK,KCgGMqhB,I,2DAnIb,WAAYzkB,GAA0B,IAAD,8BACnC,cAAMA,IAIR6V,aAAe,WACb,EAAK7V,MAAMgQ,mBAAkB,IANM,EAQrC0U,mBAAqB,WACnB,IAAIC,EAAiBlwB,SAASmR,cAC5B,2BACwB/F,MAC1BtB,IAAU2F,gBAAV,UAA6B,EAAKlE,MAAM4kB,UAAxC,UAA2DD,GAC3D,EAAK3kB,MAAMgQ,mBAAkB,GAC7B,EAAKhQ,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,IAfO,EAiBrC+V,iBAAmB,WACjB,IAAIzhB,EAAe3O,SAASmR,cAC1B,yBACwB/F,MACtB0e,EAAoB9pB,SAASmR,cAC/B,8BACwB/F,MACtB2e,EAAoB/pB,SAASmR,cAC/B,8BACwB/F,MAC1BtB,IAAU2F,gBAAV,UACK,EAAKlE,MAAM4kB,UADhB,UAEEpnB,KAAKG,UAAU,CAAEyF,MAAKmb,WAAUC,cAElC,EAAKxe,MAAMgQ,mBAAkB,GAC7B,EAAKhQ,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,IA/B5B,EAAKjN,MAAQ,CAAEihB,OAAO,GAFa,E,0CAmCrC,WAAU,IAAD,OACP,OACE,sBAAKte,UAAU,yBAAf,SACE,uBAAKA,UAAU,mBAAf,UACE,uBAAKA,UAAU,qBAAf,UACE,eAAC4W,GAAA,EAAD,mBADF,OAGG9uB,KAAK0T,MAAM4kB,UAHd,OAIE,eAACxJ,GAAA,EAAD,uBAEwB,WAAzB9uB,KAAK0T,MAAM4kB,UACV,uCACE,sBACEpgB,UAAU,yBACVC,MACwC,OAAtClG,IAAUC,gBAAgB,QACtB,CAAE0c,SAAU,QACZ,GALR,SAQE,eAACE,GAAA,EAAD,4BAEF,wBACEjpB,KAAK,OACLV,KAAK,WACLwkB,YAAa3pB,KAAK0T,MAAMsS,EAAE,kBAC1B9Z,GAAG,uBACHgM,UAAU,yBAEZ,wBACErS,KAAK,OACLV,KAAK,WACLwkB,YAAa3pB,KAAK0T,MAAMsS,EAAE,YAC1B9Z,GAAG,4BACHgM,UAAU,8BAEZ,wBACErS,KAAK,OACLV,KAAK,WACLwkB,YAAa3pB,KAAK0T,MAAMsS,EAAE,YAC1B9Z,GAAG,4BACHgM,UAAU,iCAId,uCACE,sBACEA,UAAU,yBACVC,MACwC,OAAtClG,IAAUC,gBAAgB,QACtB,CAAE0c,SAAU,QACZ,GALR,SAQE,eAACE,GAAA,EAAD,2BAEF,sBACE5W,UAAU,yBACV6N,QAAS,WACPmK,KAAK,EAAKxc,MAAMoD,KAChB,EAAKpD,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,IALhC,SAQE,eAACsM,GAAA,EAAD,0BAEF,2BAAU5W,UAAU,8BAIxB,sBACEA,UAAU,sBACV6N,QAAS,WACP,EAAKwD,gBAHT,SAME,eAACuF,GAAA,EAAD,uBAEF,sBACE5W,UAAU,uBACV6N,QAAS,WACsB,WAAzB,EAAKrS,MAAM4kB,UACb,EAAKC,mBAEL,EAAKH,sBANX,SAUE,eAACtJ,GAAA,EAAD,iC,GA5HctW,cCYpBgO,GAAgB,CACpB9C,qBACAlB,mBACAD,iBAEakE,gBAfS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrB4H,mBAAoB1F,EAAMzD,KAAKmJ,mBAC/BK,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,WAUxBgH,GAFaC,CAGbC,eAAkByR,KCbd7I,GAAiB,CACrBN,MAAM,EACNC,UAAU,EACVC,cAAeK,GACfH,iBAAkB,CAChBC,oBAAqB,mBAkSVmJ,G,oDA3Rb,WAAY9kB,GAA2B,IAAD,8BACpC,cAAMA,IAORic,YAAc,WACZ,EAAKjc,MAAM+P,oBAAmB,IATM,EAYtC+M,aAAe,WACb,EAAKzZ,SAAS,CAAE0hB,YAAa,IAC7B,EAAK/kB,MAAMiP,qBAAoB,GAC/B,EAAKqO,YAAY,sBAfmB,EAiBtC0H,qBAAuB,SAAC3sB,GACtBA,EAAM4sB,iBACNrI,GAAYC,QAAQxkB,EAAMvJ,OAAOouB,MAAM,GAAI,EAAKJ,eAnBZ,EAqBtCQ,YAAc,SAAC5R,GACb,EAAK1L,MAAM6O,cAAcnD,GACzB,EAAK1L,MAAM8O,kBAAiB,IAvBQ,EAyBtCoW,YAAc,SAACzlB,GACb,EAAK4D,SAAS,CAAE8hB,aAAc1lB,IAAS,WACrC,OAAQA,GACN,KAAK,EACH4f,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,UACX,EAAKiR,aACL,EACA,EAAKQ,aAEP,MACF,KAAK,EACH,IAAK/e,IAAUC,gBAAgB,iBAAkB,CAC/C,EAAKwB,MAAMgQ,mBAAkB,GAC7B,MAG0B,QAAxB,EAAKnO,MAAMiL,UACb,EAAKwQ,YAAY,aACjB,EAAKtd,MAAMiP,qBAAoB,GAE/BoQ,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,UACX,EAAKiR,aACL,EACA,EAAKQ,eAGP,EAAKtd,MAAMiP,qBAAoB,GAC/B,EAAKqO,YAAY,eACjBD,GAAY0B,aAAa,EAAKjC,aAAc,EAAKQ,cAGnD,MACF,KAAK,EACH,EAAKA,YAAY,eACjB,MAEF,KAAK,EACH,IAAK/e,IAAUC,gBAAgB,gBAAiB,CAC9C,EAAKwB,MAAMgQ,mBAAkB,GAC7B,MAE0B,QAAxB,EAAKnO,MAAMiL,UACb,EAAKwQ,YAAY,aACjB,EAAKtd,MAAMiP,qBAAoB,GAE/BoQ,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,UACX,EAAKiR,aACL,EACA,EAAKQ,eAGP,EAAKA,YAAY,eACjB,EAAKtd,MAAMiP,qBAAoB,GAE/BmP,GAAWW,aAAa,EAAKjC,aAAc,EAAKQ,mBAtFxD,EAAKzb,MAAQ,CACXkjB,YAAa,EACbjY,SAAU,GACVqY,aAAc,GALoB,E,0CAgGtC,WAAU,IAAD,OAgDP7qB,QAAQC,IACNiqB,GACAl4B,KAAKuV,MAAMsjB,aACXX,GAAUl4B,KAAKuV,MAAMsjB,eAEvB,IAAMC,EAAc,CAClBR,UAAWJ,GAAUl4B,KAAKuV,MAAMsjB,cAAezT,KAC/CtO,IAAKohB,GAAUl4B,KAAKuV,MAAMsjB,cAAe/hB,KAG3C,OACE,uBAAKoB,UAAU,wBAAf,UACGlY,KAAK0T,MAAM+M,kBAAoB,eAAC,GAAD,eAAiBqY,IAAkB,KACvC,IAA3B94B,KAAKuV,MAAMkjB,YACV,sBAAKvgB,UAAU,oBAAf,SACE,eAAC4W,GAAA,EAAD,kDAE2B,IAA3B9uB,KAAKuV,MAAMkjB,aAA6C,QAAxBz4B,KAAKuV,MAAMiL,SAC7C,sBAAKtI,UAAU,oBAAf,SACE,eAAC4W,GAAA,EAAD,yCAE2B,IAA3B9uB,KAAKuV,MAAMkjB,aAA6C,OAAxBz4B,KAAKuV,MAAMiL,SAC7C,sBAAKtI,UAAU,oBAAf,SACE,eAAC4W,GAAA,EAAD,oCAEA,KACwB,IAA3B9uB,KAAKuV,MAAMkjB,YACV,uBAAKvgB,UAAU,qBAAf,UACE,uBACEA,UAC0B,QAAxBlY,KAAKuV,MAAMiL,SACP,4BACA,qBAENuF,QAAS,WACP,EAAKhP,SAAS,CAAEyJ,SAAU,SAP9B,UAUE,uBAAMtI,UAAU,gBAChB,+BACE,eAAC4W,GAAA,EAAD,oCAIJ,uBACE5W,UAC0B,OAAxBlY,KAAKuV,MAAMiL,SACP,4BACA,qBAENuF,QAAS,WACP,EAAKhP,SAAS,CAAEyJ,SAAU,QAP9B,UAUE,uBAAMtI,UAAU,iBAChB,+BACE,eAAC4W,GAAA,EAAD,wCAIuB,IAA3B9uB,KAAKuV,MAAMkjB,YACb,uBAAKvgB,UAAU,8BAAf,UACE,+BA5GCggB,GAAUtc,KAAI,SAACnO,EAAM0F,GAC1B,OACE,qBAEE+E,UAAU,wBACV6N,QAAS,WACP,EAAK6S,YAAYzlB,IAEnBgF,MAAiB,IAAVhF,EAAc,CAAEskB,QAAS,GAAM,GANxC,SAQE,uBAAKvf,UAAU,kCAAf,UACE,uBACEA,UAAS,eAAUzK,EAAK2X,KAAf,4BAEVnT,IAAUC,gBAAgB,kBAA8B,IAAViB,EAC7C,sBACE+E,UAAU,yBACV6N,QAAS,WACP9T,IAAU2F,gBAAgB,gBAAiB,IAC3C,EAAKoZ,YAAY,6BAEnB7Y,MAAO,CAAE0B,MAAO,oBANlB,SAQE,eAACiV,GAAA,EAAD,4BAEA7c,IAAUC,gBAAgB,iBAA6B,IAAViB,EAC/C,sBACE+E,UAAU,yBACV6N,QAAS,WACP9T,IAAU2F,gBAAgB,eAAgB,IAC1C,EAAKoZ,YAAY,6BAEnB7Y,MAAO,CAAE0B,MAAO,oBANlB,SAQE,eAACiV,GAAA,EAAD,4BAGF,sBAAK5W,UAAU,yBAAf,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKtI,aAnCdsI,EAAKvB,SA0Ge,OAAxBlM,KAAKuV,MAAMiL,SACV,wBACE3a,KAAK,OACLqG,GAAG,eACHsiB,OAAO,kBACPtW,UAAU,eACV/S,KAAK,OACLspB,UAAU,EACVmI,SAAU,SAAC7qB,GACT,EAAK2sB,qBAAqB3sB,MAG5B,QAGN,sBAAKmM,UAAU,+BAAf,SACE,uBAAKA,UAAU,qBAAf,UACE,eAAC,KAAD,CAAQ6X,QAAST,GAAgB9lB,OAAQ,GAAID,MAAO,KACpD,sBAAK2O,UAAU,0BAAf,SACE,eAAC4W,GAAA,EAAD,UAC2B,QAAxB9uB,KAAKuV,MAAMiL,SACR,sBACA,2BAGPxgB,KAAKuV,MAAMiL,SAAW,KACrB,sBAAKrI,MAAO,CAAEsf,QAAS,IAAvB,SACE,eAAC3I,GAAA,EAAD,4CAMe,QAAxB9uB,KAAKuV,MAAMiL,UAAiD,IAA3BxgB,KAAKuV,MAAMkjB,YAC3C,sBAAKvgB,UAAU,gCACb,KACqB,OAAxBlY,KAAKuV,MAAMiL,UAAgD,IAA3BxgB,KAAKuV,MAAMkjB,YAC1C,sBACEvgB,UAAU,8BACVC,MAAO,CAAEE,WAAY,WAErB,KACJ,sBACEH,UAAU,yBACV6N,QAAS,WACP,EAAK4J,eAHT,SAME,uBAAMzX,UAAU,mCAGU,IAA3BlY,KAAKuV,MAAMkjB,YACV,sBACEvgB,UAAU,mBACV6N,QAAS,WACP,EAAKhP,SAAS,CAAE0hB,YAAa,KAHjC,SAME,eAAC3J,GAAA,EAAD,0BAE2B,IAA3B9uB,KAAKuV,MAAMkjB,YACb,sBACEvgB,UAAU,mBACV6N,QAAS,WACP,EAAKhP,SAAS,CAAE0hB,YAAa,KAE/BtgB,MAAOnY,KAAKuV,MAAMiL,SAAW,GAAK,CAAE+F,QAAS,QAL/C,SAOE,eAACuI,GAAA,EAAD,0BAEA,Y,GAzRevW,IAAMC,WCC3BgO,GAAgB,CACpB/C,sBACAjB,mBACAD,gBACAmB,qBACAf,uBACAR,mBAEasE,gBAjBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrBkM,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,QACtBiB,kBAAmBlL,EAAM+L,WAAWb,qBAWA+F,GAAzBC,CAAwC+R,I,UChC1CO,I,OAAe,CAC1B,CACE7sB,GAAI,EACJG,MAAO,cACPkH,MAAO,aACPylB,OAAQ,CACN,gBACA,YACA,kBACA,kBACA,SACA,SACA,UAGJ,CACE9sB,GAAI,EACJG,MAAO,cACPkH,MAAO,aACPylB,OAAQ,CAAC,IAAK,OAAQ,MAAO,OAAQ,MAEvC,CACE9sB,GAAI,EACJG,MAAO,aACPkH,MAAO,YACPylB,OAAQ,CAAC,OAAQ,UAAW,YAGnBC,GAAY,CACvB/sB,GAAI,EACJG,MAAO,QACPkH,MAAO,QACPylB,OAAQ,CAAC,MAAO,OAAQ,IAAK,OAAQ,MAAO,OAAQ,MChCzCE,GAAc,CACzB,CACE1wB,YAAY,EACZ6D,MAAO,4BACP8sB,SAAU,WAEZ,CACE3wB,YAAY,EACZ6D,MAAO,wBACP8sB,SAAU,cAEZ,CACE3wB,YAAY,EACZ6D,MAAO,+BACP8sB,SAAU,oBAEZ,CACE3wB,YAAY,EACZ6D,MAAO,6BACP8sB,SAAU,mBAEZ,CACE3wB,YAAY,EACZ6D,MAAO,8BACP8sB,SAAU,mBAEZ,CACE3wB,YAAY,EACZ6D,MAAO,qBACP8sB,SAAU,kBAGDC,GAAW,CACtB,CAAErgB,MAAO,2BAAQxF,MAAO,MACxB,CAAEwF,MAAO,2BAAQxF,MAAO,OACxB,CAAEwF,MAAO,UAAWxF,MAAO,MAC3B,CAAEwF,MAAO,6CAAWxF,MAAO,OAEhBqV,GAAa,CACxB,CAAE7P,MAAO,SAAUxF,MAAO,UAC1B,CAAEwF,MAAO,QAASxF,MAAO,SACzB,CAAEwF,MAAO,OAAQxF,MAAO,QACxB,CAAEwF,MAAO,aAAcxF,MAAO,cAC9B,CAAEwF,MAAO,SAAUxF,MAAO,UAC1B,CAAEwF,MAAO,QAASxF,MAAO,UAEd8lB,GAAoB,CAC/B,CACEhtB,MAAO,YACP8sB,SAAU,UAEZ,CACE9sB,MAAO,SACP8sB,SAAU,YAEZ,CACE9sB,MAAO,iBACP8sB,SAAU,eAEZ,CACE9sB,MAAO,cACP8sB,SAAU,YAEZ,CACE9sB,MAAO,eACP8sB,SAAU,YAEZ,CACE9sB,MAAO,oBACP8sB,SAAU,gBAEZ,CACE9sB,MAAO,oBACP8sB,SAAU,gBAEZ,CACE9sB,MAAO,gCACP8sB,SAAU,oBAGDG,GAAkB,CAC7B,CACEjtB,MAAO,YACP8sB,SAAU,UAEZ,CACE9sB,MAAO,SACP8sB,SAAU,YAEZ,CACE9sB,MAAO,iBACP8sB,SAAU,eAEZ,CACE9sB,MAAO,cACP8sB,SAAU,aC/FDI,GAAiB,CAC5B,sBACA,mBACA,wBACA,yBAEWC,GAAW,CACtB,gBACA,sBACA,qBACA,sBAEWC,GAAY,CACvB,CACEvtB,GAAI,EACJ2N,MAAO,sBACP1U,KAAM,UACNkH,MAAO,WAET,CACEH,GAAI,EACJ2N,MAAO,uBACP1U,KAAM,OACNkH,MAAO,QAET,CACEH,GAAI,EACJ2N,MAAO,uBACP1U,KAAM,QACNkH,MAAO,SAGT,CACEH,GAAI,EACJ2N,MAAO,yBACP1U,KAAM,MACNkH,MAAO,OAET,CACEH,GAAI,EACJ2N,MAAO,yBACP1U,KAAM,SACNkH,MAAO,WCgUIqtB,G,oDAjVb,WAAYhmB,GAA0B,IAAD,8BACnC,cAAMA,IAuCRU,WAAa,SAACulB,GACZA,EACI,EAAKjmB,MAAM6O,cAAc,yBACzB,EAAK7O,MAAM6O,cAAc,wBAC7B,EAAK7O,MAAM8O,kBAAiB,IA5CO,EA8CrCoX,eAAiB,SAAClf,GAChBJ,EAAKsf,eAAelf,GACpBzI,IAAU2F,gBAAgB,OAAQ8C,IAhDC,EAkDrCmf,aAAe,SAACC,GACd7nB,IAAU2F,gBAAgB,eAAgBkiB,IAnDP,EAqDrCC,WAAa,SAACC,GACD7xB,SAASkB,qBAAqB,QAAQ,GAC5CkQ,aAAa,QAAS,eAAiBygB,EAAO,cACnD/nB,IAAU2F,gBAAgB,aAAcoiB,IAxDL,EA0DrCrU,WAAa,SAAC7O,GACZtO,cACIoC,OAAOC,QAAQ,YAAY+a,MAAMC,aAAa/O,GAC9ClM,OAAO6H,KAAKqE,IA7DmB,EA+DrCuL,cAAgB,SAAC4X,GACf,EAAKljB,SAAL,gBAAiBkjB,GAAa,EAAK1kB,MAAM0kB,KACzChoB,IAAU2F,gBAAgBqiB,EAAW,EAAK1kB,MAAM0kB,GAAa,KAAO,OACpE,EAAK7lB,WAAW,EAAKmB,MAAM0kB,KAlEQ,EAoErCpG,iBApEqC,sBAoElB,8CAAAvqB,EAAA,6DACXqB,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QAFX,EAGDD,OAAOC,QAAQ,gBAAvBiE,EAHS,EAGTA,IACJglB,EAAkB/iB,aAAaC,QAAQ,mBACvCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5CqiB,EAAajpB,EAAKrB,KAAKqqB,EAAiB,UACxCE,EAAUlpB,EAAKrB,KAAKqqB,EAAiB,cAVxB,SAWXhlB,EAAIilB,EAAYC,GAXL,OAab5yB,EAAOuJ,EAAGK,aAAagpB,GAEvB9lB,EAAW,IAAInJ,KAAK,CAAC3D,GAAO,CAAEyE,KAAM,yBACpCsI,EAAW,IAAIC,KAAK,CAACF,GAAW,aAAc,CAChDG,cAAc,IAAIlC,MAAOC,UACzBvG,KAAMqI,EAASrI,OAGjByqB,GAAYC,QACVpiB,GACA,WACE4kB,GAAWC,OACT,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,WACX,WACE,EAAK7L,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,KAE9B,GACA,kBAGJ,GApCe,4CApEkB,EA2GrC0X,qBA3GqC,sBA2Gd,kCAAA5wB,EAAA,6DACb6wB,EAAWvvB,OAAOC,QAAQ,YAAYM,OAAtCgvB,OADa,SAEJA,EAAOC,eAAe,CACrCC,WAAY,CAAC,mBAHM,UAEjBvvB,EAFiB,SAKGF,OAAOC,QAAQ,YAA/B4G,EALa,EAKbA,YACH3G,EAAKwvB,UAAU,GANC,iDASrB5G,KAAS6G,eACPxpB,aAAaC,QAAQ,mBACjBD,aAAaC,QAAQ,mBACrBS,EAAYC,SAAS,mBAAoB,QAC7C5G,EAAKwvB,UAAU,GACf,EAAK5mB,MAAM6O,cACX,EAAK7O,MAAM8O,iBACX,EAAKqR,kBAEP9iB,aAAaK,QAAQ,kBAAmBtG,EAAKwvB,UAAU,IACvDnyB,SAASkN,uBACP,iCACA,GAAGhN,UACHyC,EAAKwvB,UAAU,IACfvpB,aAAaC,QAAQ,oBACrBS,EAAYC,SAAS,mBAAoB,QAxBtB,4CA3Gc,EAqIrC8oB,kBAAoB,WAClB,EAAKzjB,SAAS,CAAE0jB,eAAgB,EAAKllB,MAAMklB,gBAC3CxoB,IAAU2F,gBACR,gBACA,EAAKrC,MAAMklB,cAAgB,KAAO,OAEhCjyB,eACF,EAAKkL,MAAM6O,cAAc,0BACzB,EAAK7O,MAAM8O,kBAAiB,IAE5B5X,OAAO2H,SAASmoB,UA/IiB,EAmJrCC,YAAc,SAACx1B,EAAcgO,GAC3B,EAAK4D,SAAS,CAAE6jB,kBAAmBznB,IACnClB,IAAU2F,gBAAgB,aAAczS,GACpCqD,eACF,EAAKkL,MAAM6O,cAAc,0BACzB,EAAK7O,MAAM8O,kBAAiB,IAE5B5X,OAAO2H,SAASmoB,UAxJlB,EAAKnlB,MAAQ,CACXslB,QAAkD,QAAzC5oB,IAAUC,gBAAgB,WACnC4oB,iBAAoE,QAAlD7oB,IAAUC,gBAAgB,oBAC5C6oB,WAAwD,QAA5C9oB,IAAUC,gBAAgB,cACtC8oB,gBAAkE,QAAjD/oB,IAAUC,gBAAgB,mBAC3C+oB,gBAAkE,QAAjDhpB,IAAUC,gBAAgB,mBAC3CuoB,cAA8D,QAA/CxoB,IAAUC,gBAAgB,iBAEzC0oB,kBAAmB5jB,IAAEmH,cAAcsb,GAAW,CAC5Ct0B,KAAM8M,IAAUC,gBAAgB,iBAXD,E,qDAerC,WAAqB,IAAD,MAClBD,IAAUC,gBAAgB,gBAA1B,UACE/J,SACGkN,uBAAuB,yBAAyB,UAFrD,OACE,EAEI6lB,SACAnC,GAAa,GAAGC,OAAOnvB,QACrBoI,IAAUC,gBAAgB,gBAE5BqH,aAAa,WAAY,aAC/B,UAAApR,SACGkN,uBAAuB,yBAAyB,UADnD,SAEI6lB,SACA,CAAC,KAAM,MAAO,KAAM,MAAMrxB,QACxBoI,IAAUC,gBAAgB,UACvBQ,UAAUrL,SAASwC,QAAQ,OAAS,EAAI,KAAO,QAEpD0P,aAAa,WAAY,YAC7B,UAAApR,SAASkN,uBAAuB,yBAAyB,UAAzD,SAA6D6lB,SAC3DlkB,IAAEmH,cAAcyK,GAAY,CAC1BrV,MACEtB,IAAUC,gBAAgB,kBACF,UAAvBQ,UAAUrL,SAAuB,QAAU,aAEhDkS,aAAa,WAAY,c,oBAuH7B,WAAU,IAAD,OACP,OACE,uBAAKrB,UAAU,2BAAf,UACE,oBAAGA,UAAU,uBAAb,SACE,eAAC4W,GAAA,EAAD,wBAEF,qBAAG5W,UAAU,mBAAb,UACE,eAAC4W,GAAA,EAAD,sBACCxpB,QAEH,sBACE4S,UAAU,0BACV6N,QAAS,WACP,EAAKrS,MAAM2O,eAAc,IAH7B,SAME,uBAAMnK,UAAU,+BAGlB,uBAAKA,UAAU,sBAAf,UACGghB,GAAYtd,KAAI,SAACnO,EAAM0F,GACtB,OACE,uBACE+E,UAAU,2BAEVC,MACE1K,EAAKjF,WAAcA,cAAa,GAAK,CAAE+d,QAAS,QAAY,GAJhE,UAOE,eAACuI,GAAA,EAAD,UAAQrhB,EAAKpB,QACb,uBACE6L,UAAU,wBACV6N,QAAS,WACP,OAAQ5S,GACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACH,EAAKkP,cAAc5U,EAAK0rB,UACxB,MACF,KAAK,EACH,EAAKqB,sBAMXriB,MAAO,EAAK5C,MAAM9H,EAAK0rB,UAAY,GAAK,CAAE1B,QAAS,IAlBrD,SAoBE,uBACEvf,UAAU,wBACVC,MACE,EAAK5C,MAAM9H,EAAK0rB,UACZ,CACEgC,UAAW,mBACXC,WAAY,uBAEd,CACED,UAAW,kBACXC,WAAY,6BApCnB3tB,EAAKpB,UA4ChB,uBAAK6L,UAAU,2BAAf,UACE,eAAC4W,GAAA,EAAD,0BACA,qBAAI5W,UAAU,0BAAd,SACGuhB,GAAU7d,KAAI,SAACnO,EAAM0F,GAAP,OACb,eAAC,WAAD,CAEE9G,MAAO,EAAKqH,MAAMsS,EAAEvY,EAAKpB,OACzB4Z,SAAS,MACTC,QAAQ,aAJV,SAME,qBACEhO,UACE/E,IAAU,EAAKoC,MAAMqlB,kBACjB,kCACA,qBAEN7U,QAAS,WACP,EAAK4U,YAAYltB,EAAKtI,KAAMgO,IAE9BgF,MAAO,CAAEkjB,gBAAiB5tB,EAAKoM,UAd5BpM,EAAKvB,YAqBjB1D,eACC,uCACE,uBAAK0P,UAAU,2BAAf,UACE,eAAC4W,GAAA,EAAD,sCAEA,uBACE5W,UAAU,yBACV6N,QAAS,WACP,EAAKmU,wBAHT,SAME,eAACpL,GAAA,EAAD,mCAGJ,sBAAK5W,UAAU,gCAAf,SACGnH,aAAaC,QAAQ,mBAClBD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,aAItD,uBAAKwG,UAAU,2BAAf,UACE,eAAC4W,GAAA,EAAD,0BACA,yBACE3pB,KAAK,GACL+S,UAAU,wBACV0e,SAAU,SAAC7qB,GACT,EAAKguB,WAAWhuB,EAAMvJ,OAAO+Q,QAJjC,SAOGwlB,GAAa,GAAGC,OAAOpd,KAAI,SAACnO,GAAD,OAC1B,yBAAQ8F,MAAO9F,EAAiByK,UAAU,sBAA1C,SACG,EAAKxE,MAAMsS,EAAEvY,IADUA,WAOhC,uBAAKyK,UAAU,2BAAf,UACE,eAAC4W,GAAA,EAAD,uBACA,yBACE3pB,KAAK,GACL+S,UAAU,wBACV0e,SAAU,SAAC7qB,GACT,EAAK6tB,eAAe7tB,EAAMvJ,OAAO+Q,QAJrC,SAOG6lB,GAASxd,KAAI,SAACnO,GAAD,OACZ,yBACE8F,MAAO9F,EAAK8F,MAEZ2E,UAAU,sBAHZ,SAKGzK,EAAKsL,OAHDtL,EAAK8F,eAQlB,uBAAK2E,UAAU,2BAAf,UACE,eAAC4W,GAAA,EAAD,oCACA,yBACE3pB,KAAK,GACL+S,UAAU,wBACV0e,SAAU,SAAC7qB,GACT,EAAK8tB,aAAa9tB,EAAMvJ,OAAO+Q,QAJnC,SAOGqV,GAAWhN,KAAI,SAACnO,GAAD,OACd,yBACE8F,MAAO9F,EAAK8F,MAEZ2E,UAAU,sBAHZ,SAKGzK,EAAKsL,OAHDtL,EAAK8F,yB,GAvUAgF,IAAMC,WCD5BgO,GAAgB,CACpBnE,gBACAF,kBACAC,YACAI,mBACAD,iBAEakE,gBAdS,SAAClR,GACvB,MAAO,CACLgK,UAAWhK,EAAM1J,OAAO0T,UACxBlM,MAAOkC,EAAMwL,QAAQ1N,MACrBkK,MAAOhI,EAAM1J,OAAO0R,SAYtBiJ,GAFaC,CAGbC,eAAkBgT,K,2CCgLL4B,G,8MAnMbC,iBAAmB,WACjB,EAAK7nB,MAAMyD,kBAAkB,EAAKzD,MAAM4H,aACxC,EAAK5H,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAMkR,oBAAmB,I,EAEhC4W,eAAiB,WACf,EAAK9nB,MAAM+Q,kBAAiB,GAC5B,EAAK/Q,MAAMyD,kBAAkB,EAAKzD,MAAM4H,aACxC,EAAK5H,MAAMkR,oBAAmB,I,EAEhC6W,eAAiB,WACf,EAAK/nB,MAAMiR,iBAAgB,GAC3B,EAAKjR,MAAMyD,kBAAkB,EAAKzD,MAAM4H,aACxC,EAAK5H,MAAMkR,oBAAmB,I,EAEhC8W,kBAAoB,WAClB5Z,EAASgU,MAAM,EAAKpiB,MAAM4H,YAAYlR,KACtC,EAAKsJ,MAAMkR,oBAAmB,GAC9B,EAAKlR,MAAM6O,cAAc,wBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMoP,oB,4CAEb,WAAU,IAAD,OACP,MAAwB,UAApB9iB,KAAK0T,MAAMyM,KAEX,sBACEjI,UAAU,0BACVoO,aAAc,WACZ,EAAK5S,MAAMkR,oBAAmB,IAEhCzM,MAAO,CACLsc,KAAMz0B,KAAK0T,MAAM+gB,KACjB3K,IAAK9pB,KAAK0T,MAAMoW,IAChB6R,UAAW,QARf,SAWE,sBAAKzjB,UAAU,kCAAf,SACE,uBACEA,UAAU,oBACV6N,QAAS,WACP,EAAK2V,qBAHT,UAME,uBAAMxjB,UAAU,6BAChB,uBAAMA,UAAU,cAAhB,SACE,eAAC4W,GAAA,EAAD,wBAEF,oBAAG5W,UAAU,uBAOrB,uBACEA,UAAU,0BACVoO,aAAc,WACZ,EAAK5S,MAAMkR,oBAAmB,IAEhCzM,MAAO,CAAEsc,KAAMz0B,KAAK0T,MAAM+gB,KAAM3K,IAAK9pB,KAAK0T,MAAMoW,KALlD,UAOE,uBAAK5R,UAAU,kCAAf,UACE,uBACEA,UAAU,oBACV6N,QAAS,WACP,EAAK0V,kBAHT,UAME,uBAAMvjB,UAAU,yBAChB,oBAAGA,UAAU,cAAb,SACE,eAAC4W,GAAA,EAAD,6BAEF,oBAAG5W,UAAU,mBAEf,uBACEA,UAAU,uBACV6N,QAAS,WACP,EAAKwV,oBAHT,UAME,uBAAMrjB,UAAU,yBAChB,oBAAGA,UAAU,cAAb,SACE,eAAC4W,GAAA,EAAD,uBAEF,oBAAG5W,UAAU,mBAEf,uBACEA,UAAU,qBACV6N,QAAS,WACP,EAAKyV,kBAHT,UAME,uBAAMtjB,UAAU,wBAChB,oBAAGA,UAAU,cAAb,SACE,eAAC4W,GAAA,EAAD,qBAEF,oBAAG5W,UAAU,mBAEf,uBACEA,UAAU,qBACV6N,QAAS,WACPpU,IACGX,QAAQ,EAAK0C,MAAM4H,YAAYlR,KAC/BoM,MAAK,SAAC/T,GACL,EAAKiR,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B+Q,KAAUC,OACR,IAAIzuB,KAAK,CAACtC,IACV,EAAKiR,MAAM4H,YAAYnW,KAAvB,WACM,EAAKuO,MAAM4H,YAAYjJ,OAAOwE,0BAX9C,UAgBE,uBAAMqB,UAAU,0BAChB,oBAAGA,UAAU,cAAb,SACE,eAAC4W,GAAA,EAAD,uBAEF,oBAAG5W,UAAU,sBAGjB,sBAAKA,UAAU,0BAEf,uBAAKA,UAAU,0BAAf,UACE,iCACE,qBAAGA,UAAU,+BAAb,UACE,eAAC4W,GAAA,EAAD,wBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACGlY,KAAK0T,MAAM4H,YAAYnW,OAE1B,qBAAG+S,UAAU,+BAAb,UACE,eAAC4W,GAAA,EAAD,qBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM4H,YAAYhP,cAGnC,iCACE,qBAAG4L,UAAU,+BAAb,UACE,eAAC4W,GAAA,EAAD,wBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACGlY,KAAK0T,MAAM4H,YAAY3O,eAG5B,iCACE,qBAAGuL,UAAU,+BAAb,UACE,eAAC4W,GAAA,EAAD,wBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACGlY,KAAK0T,MAAM4H,YAAY7a,KACpBmN,SAAS5N,KAAK0T,MAAM4H,YAAY7a,KAAO,KAAO,IAAM,KAEpD,WAGR,iCACE,qBAAGyX,UAAU,2BAAb,UACE,eAAC4W,GAAA,EAAD,uBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACG,IAAI/L,KAAKyB,SAAS5N,KAAK0T,MAAM4H,YAAYlR,MACvCwxB,iBACArxB,QAAQ,YAAa,UAG5B,iCACE,qBAAG2N,UAAU,+BAAb,UACE,eAAC4W,GAAA,EAAD,yBADF,OAGA,oBAAG5W,UAAU,2BAAb,SACG8c,GAAU6G,gBAAgB77B,KAAK0T,MAAM4H,YAAYlR,KAAKwR,KACrD,SAACnO,GAAD,OACE,uCACE,eAACqhB,GAAA,EAAD,UAAQrhB,IADV,kBAOR,iCACE,qBAAGyK,UAAU,0BAAb,UACE,eAAC4W,GAAA,EAAD,0BADF,OAGA,sBAAK5W,UAAU,4BAAf,SACGzI,KAAOzP,KAAK0T,MAAM4H,YAAYxO,aAAe,oB,GA3LjCyL,IAAMC,WCc3BgO,GAAgB,CACpB/B,oBACAE,mBACAD,sBACAvN,qBACAyN,sBACApC,mBACAD,gBACAO,qBAEa2D,gBAjBS,SAAClR,GACvB,MAAO,CACL4K,KAAM5K,EAAM8L,QAAQlB,KACpB5E,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,eAe1BkL,GAFaC,CAGbC,eAAkB4U,KCFLQ,I,OAhCI,SAACpoB,GAClB,OACE,uBAAKwE,UAAU,cAAcC,MAAO,CAAEgjB,UAAU,SAAD,OAAWznB,EAAMqoB,MAAjB,MAA/C,UACE,sBACE7jB,UAAU,eACVC,MAAO,CACLkjB,gBACmB,QAAjB3nB,EAAMrB,OACF,yBACiB,QAAjBqB,EAAMrB,OACN,uBACiB,SAAjBqB,EAAMrB,OACN,uBACiB,SAAjBqB,EAAMrB,OACN,wBACiB,SAAjBqB,EAAMrB,OACN,uBACA,yBAdV,SAiBGqB,EAAMrB,QAAU,SAEnB,sBACE6F,UAAU,cACVC,MAAO,CAAEyW,SAA0B,OAAhBlb,EAAMqoB,MAAiB,OAAS,IAFrD,SAIGroB,EAAMrH,QAET,sBAAK6L,UAAU,eAAf,+BChBA8jB,G,oDAEJ,WAAYtoB,GAAuB,IAAD,8BAChC,cAAMA,IAFRxG,UACkC,IAiDlC+uB,iBAAmB,SAAClwB,GAClB,IAAMzJ,EAAIyJ,GAASnB,OAAOmB,MACtBmwB,EAAI55B,EAAE65B,QACND,EAAI/zB,SAAS0L,KAAKgE,YAAc,MAClCqkB,GAAQ,KAEV,EAAKnlB,SACH,CACE0d,KAAMyH,EACNpS,IACE3hB,SAAS0L,KAAKM,aAAe7R,EAAE85B,QAAU,IACrC95B,EAAE85B,QACF95B,EAAE85B,QAAU,MAEpB,WACE,EAAK1oB,MAAMkR,oBAAmB,GAC9B,EAAKlR,MAAMyD,kBAAkB,EAAKzD,MAAM5B,UAjEZ,EAqElCypB,iBAAmB,WACjB,EAAK7nB,MAAMyD,kBAAkB,EAAKzD,MAAM5B,MACxC,EAAK4B,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAMkR,oBAAmB,IAxEE,EA0ElCyX,eAAiB,WACfhH,GAAYiH,YAAY,EAAK5oB,MAAM5B,KAAK1H,KACxC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC5B,EAAK7oB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,IA9EI,EAgFlCga,qBAAuB,WACrBnH,GAAYS,MAAM,EAAKpiB,MAAM5B,KAAK1H,KAClC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC6B,IAArD3f,OAAOC,KAAKwY,GAAYoH,kBAAkBl8B,QAC5C,EAAKmT,MAAM6R,QAAQrlB,KAAK,kBAE1B,EAAKwT,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,IAvFI,EA0FlCka,aAAe,SAACvc,GACd,EAAKpJ,SAAS,CAAE4lB,aAAcxc,KA3FE,EA6FlCwF,WAAa,WACXtO,KAAYC,UAAU,EAAK5D,MAAM5B,KAAK1H,KACtCmH,KAASuc,aAAa,EAAKpa,MAAM5B,OA7FjC,EAAKyD,MAAQ,CACXonB,cAAc,EACdJ,WACElH,GAAYoH,iBAAiB5yB,QAAQ,EAAK6J,MAAM5B,KAAK1H,MAAQ,EAC/DqqB,KAAM,EACN3K,IAAK,GAPyB,E,4FAWlC,gCAAAxgB,EAAA,yDACM4iB,EAAW,IAEX1jB,cAHN,yBAI4BoC,OAAOC,QAAQ,YAA/B4G,EAJZ,EAIYA,YAJZ,SAKqBA,EAAYC,SAAS,iBAL1C,OAKIwa,EALJ,cASgD,QAA5Cja,IAAUC,gBAAgB,eAC1BmF,KAAYulB,eAAe,KAAO58B,KAAK0T,MAAM5B,KAAK1H,KACjDpK,KAAK0T,MAAM4H,YAAYlR,KACvB8hB,GAED3a,KAASuc,aAAa9tB,KAAK0T,MAAM5B,MAEnC9R,KAAK0T,MAAMyD,kBAAkBnX,KAAK0T,MAAM5B,MAhB1C,gD,6FAkBA,SAA0B+qB,GACpBA,EAAUxc,eAAiBrgB,KAAK0T,MAAM2M,cAEtCwc,EAAUxc,cACVrgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKq8B,iBACLr8B,KAAK0T,MAAMuR,kBAAiB,IAG5B4X,EAAUvc,iBAAmBtgB,KAAK0T,MAAM4M,gBAExCuc,EAAUvc,gBACVtgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKu7B,mBACLv7B,KAAK0T,MAAMwR,oBAAmB,M,oBAoDpC,WAAU,IAAD,OACHrU,EAAaH,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KACnDsG,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KAAKyG,WAC3C,EACEksB,EAAc,CAAEtI,KAAMz0B,KAAKuV,MAAMkf,KAAM3K,IAAK9pB,KAAKuV,MAAMuU,KAC7D,OACE,uCACE,uBACE5R,UAAU,iBACV8kB,YAAa,WACX,EAAKN,cAAa,IAEpBpW,aAAc,WACZ,EAAKoW,cAAa,IANtB,UASG18B,KAAK0T,MAAM5B,KAAKoZ,OACS,YAA1BlrB,KAAK0T,MAAM5B,KAAKoZ,OACc,SAA9BlrB,KAAK0T,MAAM5B,KAAKnF,WACc,SAA9B3M,KAAK0T,MAAM5B,KAAKnF,WACc,QAA9B3M,KAAK0T,MAAM5B,KAAKnF,UACd,sBACEuL,UAAU,kBACV3V,IAAKvC,KAAK0T,MAAM5B,KAAKoZ,MACrB/E,IAAI,GACJJ,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,OAI9B,sBACE5M,UAAU,kBACV6N,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,KAT9B,SAYE,eAAC,GAAD,CAEIzS,OAAQrS,KAAK0T,MAAM5B,KAAKO,OACxBhG,MAAOrM,KAAK0T,MAAM5B,KAAK3M,KACvB42B,MAAO,MAMf,oBAAG7jB,UAAU,kBAAb,SAAgClY,KAAK0T,MAAM5B,KAAK3M,OAE/CnF,KAAKuV,MAAMgnB,WACV,uBACErkB,UAAU,4BACV6N,QAAS,WACP,EAAKyW,0BAGP,KAEHx8B,KAAKuV,MAAMonB,aACV,uCAC8B,QAA3B38B,KAAK0T,MAAM5B,KAAKO,QACf,sBAAK6F,UAAU,wBAAf,SACE,uBAAKC,MAAO,CAAE8N,SAAU,WAAYwO,KAAM,OAA1C,UACG5jB,EACGkD,KAAK+E,MAAmB,IAAbjI,GAAoB,GAC7B,IAAMkD,KAAK+E,MAAmB,IAAbjI,GACgB,MAAjCkD,KAAK+E,MAAmB,IAAbjI,GACX,SACAkD,KAAK+E,MAAmB,IAAbjI,GACb,KACJ,uBAAMqH,UAAU,0BAAhB,oBAIN,uBACEA,UAAU,6BACV6N,QAAS,SAACha,GACR,EAAKkwB,iBAAiBlwB,MAG1B,uBACEmM,UAAU,2BACV6N,QAAS,WACP,EAAKsW,uBAIT,QAGLr8B,KAAK0T,MAAMyH,oBACZnb,KAAK0T,MAAM5B,KAAK1H,MAAQpK,KAAK0T,MAAM4H,YAAYlR,IAC7C,sBAAK8N,UAAU,uBAAf,SACE,eAAC,GAAD,eAAkB6kB,MAElB,Y,GA7MexkB,IAAMC,WAkNlBC,eAAWujB,ICxMpBxV,GAAgB,CACpBrP,qBACAyN,sBACApC,mBACAD,gBACAuC,kBACAG,oBACAC,sBACAR,uBAEa+B,gBAnBS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BkF,aAAc9K,EAAM8L,QAAQhB,aAC5BC,eAAgB/K,EAAM8L,QAAQf,eAC9BjF,SAAU9F,EAAMzD,KAAKuJ,SACrBC,YAAa/F,EAAMzD,KAAKwJ,eAaYkL,GAAzBC,CAAwC0W,ICrBjDC,I,2DAEJ,WAAY1pB,GAAuB,IAAD,8BAChC,cAAMA,IAFRxG,UACkC,IAsClCquB,iBAAmB,WACjB,EAAK7nB,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAMyD,kBAAkB,EAAKzD,MAAM5B,OAxCR,EA0ClC0pB,eAAiB,WACf,EAAK9nB,MAAM+Q,kBAAiB,GAC5B,EAAK/Q,MAAMyD,kBAAkB,EAAKzD,MAAM5B,OA5CR,EA8ClC2pB,eAAiB,WACf,EAAK/nB,MAAMiR,iBAAgB,GAC3B,EAAKjR,MAAMyD,kBAAkB,EAAKzD,MAAM5B,OAhDR,EAkDlCuqB,eAAiB,WACfhH,GAAYiH,YAAY,EAAK5oB,MAAM5B,KAAK1H,KACxC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC5B,EAAK7oB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,IAtDI,EAwDlCga,qBAAuB,WACrBnH,GAAYS,MAAM,EAAKpiB,MAAM5B,KAAK1H,KAClC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC5B,EAAK7oB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,IA5DI,EA8DlC6a,iBAAmB,WACjBvb,EAASgU,MAAM,EAAKpiB,MAAM4H,YAAYlR,KACtC,EAAKsJ,MAAM6O,cAAc,wBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMoP,oBAlEqB,EAoElC6C,WAAa,WACXtO,KAAYC,UAAU,EAAK5D,MAAM5B,KAAK1H,KACtCmH,KAASuc,aAAa,EAAKpa,MAAM5B,OApEjC,EAAKyD,MAAQ,CACX+nB,gBAAgB,EAChBf,WAAYlH,GAAYoH,iBAAiB5yB,QAAQ,EAAK6J,MAAM5B,KAAK1H,KAAO,GAJ1C,E,qDAOlC,WAGgD,QAA5C6H,IAAUC,gBAAgB,eAC1BmF,KAAYulB,eAAe,KAAO58B,KAAK0T,MAAM5B,KAAK1H,KACjDpK,KAAK0T,MAAM4H,YAAYlR,KAExBmH,KAASuc,aAAa9tB,KAAK0T,MAAM5B,MAEnC9R,KAAK0T,MAAMyD,kBAAkBnX,KAAK0T,MAAM5B,Q,uCAE1C,SAA0B+qB,GACpBA,EAAUxc,eAAiBrgB,KAAK0T,MAAM2M,cAEtCwc,EAAUxc,cACVrgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKq8B,iBACLr8B,KAAK0T,MAAMuR,kBAAiB,IAG5B4X,EAAUvc,iBAAmBtgB,KAAK0T,MAAM4M,gBAExCuc,EAAUvc,gBACVtgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKu7B,mBACLv7B,KAAK0T,MAAMwR,oBAAmB,M,oBAsCpC,WAAU,IAAD,OACHrU,EAAaH,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KACnDsG,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KAAKyG,WAC3C,EAEJ,OACE,uBAAKqH,UAAU,2BAAf,UACGlY,KAAK0T,MAAM5B,KAAKoZ,OACS,YAA1BlrB,KAAK0T,MAAM5B,KAAKoZ,OACc,SAA9BlrB,KAAK0T,MAAM5B,KAAKnF,WACc,SAA9B3M,KAAK0T,MAAM5B,KAAKnF,WACc,QAA9B3M,KAAK0T,MAAM5B,KAAKnF,UACd,sBACEuL,UAAU,uBACV3V,IAAKvC,KAAK0T,MAAM5B,KAAKoZ,MACrB/E,IAAI,GACJJ,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,OAI9B,sBACE5M,UAAU,uBACV6N,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,KAT9B,SAYE,eAAC,GAAD,CAEIzS,OAAQrS,KAAK0T,MAAM5B,KAAKO,OACxBhG,MAAOrM,KAAK0T,MAAM5B,KAAK3M,KACvB42B,MAAO,QAKf,oBACE7jB,UAAU,uBACV6N,QAAS,WACP,EAAKJ,cAHT,SAMG3lB,KAAK0T,MAAM5B,KAAK3M,OAGnB,oBAAG+S,UAAU,wBAAb,SACE,eAAC4W,GAAA,EAAD,UACG9uB,KAAK0T,MAAM5B,KAAKxF,OAAStM,KAAK0T,MAAM5B,KAAKxF,OAAS,qBAGvD,qBAAG4L,UAAU,4BAAb,UACGrH,EAAakD,KAAKwpB,MAAmB,IAAb1sB,GAAoB,EAD/C,OAGqB,UAApB7Q,KAAK0T,MAAMyM,KACV,sBAAKjI,UAAU,wBAAf,SACE,uBACEA,UAAU,2BACV6N,QAAS,WACP,EAAKsX,wBAKX,uBAAKnlB,UAAU,wBAAf,UACGlY,KAAKuV,MAAMgnB,WACV,uBACErkB,UAAU,sBACV6N,QAAS,WACP,EAAKyW,wBAEPrkB,MAAO,CAAE0B,MAAO,aAGlB,uBACE3B,UAAU,sBACV6N,QAAS,WACP,EAAKsW,oBAKX,uBACEnkB,UAAU,uBACV6N,QAAS,WACP,EAAK0V,oBAGT,uBACEvjB,UAAU,uBACV6N,QAAS,WACP,EAAKwV,sBAGT,uBACErjB,UAAU,sBACV6N,QAAS,WACP,EAAKyV,8B,GAtLMjjB,IAAMC,YAgMlBC,eAAW2kB,IC9KpB5W,GAAgB,CACpBrP,qBACAsN,oBACAC,sBACAC,mBACAnC,mBACAD,gBACAuC,kBACAG,oBACAC,sBACApC,qBAEa2D,gBAvBS,SAAClR,GACvB,MAAO,CACL6F,UAAW7F,EAAMzD,KAAKsJ,UACtBvK,WAAY0E,EAAM0L,cAAcpQ,WAChCyK,YAAa/F,EAAMzD,KAAKwJ,YACxB+E,aAAc9K,EAAM8L,QAAQhB,aAC5BC,eAAgB/K,EAAM8L,QAAQf,eAC9BjF,SAAU9F,EAAMzD,KAAKuJ,SACrB8E,KAAM5K,EAAM8L,QAAQlB,QAiBtBqG,GAFaC,CAGbC,eAAkB8W,KC7BdC,I,2DAEJ,WAAY/pB,GAAwB,IAAD,8BACjC,cAAMA,IAFRxG,UACmC,IAiDnC+uB,iBAAmB,SAAClwB,GAClB,IAAMzJ,EAAIyJ,GAASnB,OAAOmB,MACtBmwB,EAAI55B,EAAE65B,QACND,EAAI/zB,SAAS0L,KAAKgE,YAAc,MAAQ,EAAKnE,MAAM6M,cACrD2b,GAAQ,KAEV,EAAKnlB,SACH,CACE0d,KAAMyH,EACNpS,IACE3hB,SAAS0L,KAAKM,aAAe7R,EAAE85B,QAAU,IACrC95B,EAAE85B,QACF95B,EAAE85B,QAAU,MAEpB,WACE,EAAK1oB,MAAMkR,oBAAmB,GAC9B,EAAKlR,MAAMyD,kBAAkB,EAAKzD,MAAM5B,UAjEX,EAqEnCypB,iBAAmB,WACjB,EAAK7nB,MAAMyD,kBAAkB,EAAKzD,MAAM5B,MACxC,EAAK4B,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAMkR,oBAAmB,IAxEG,EA0EnCyX,eAAiB,WACfhH,GAAYiH,YAAY,EAAK5oB,MAAM5B,KAAK1H,KACxC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC5B,EAAK7oB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,IA9EK,EAgFnCga,qBAAuB,WACrBnH,GAAYS,MAAM,EAAKpiB,MAAM5B,KAAK1H,KAClC,EAAK2M,SAAS,CAAEwlB,YAAY,IAC5B,EAAK7oB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,IApFK,EAuFnCka,aAAe,SAACvc,GACd,EAAKpJ,SAAS,CAAE4lB,aAAcxc,KAxFG,EA0FnCwF,WAAa,WACXtO,KAAYC,UAAU,EAAK5D,MAAM5B,KAAK1H,KAEtCmH,KAASuc,aAAa,EAAKpa,MAAM5B,OA3FjC,EAAKyD,MAAQ,CACXonB,cAAc,EACdJ,WACElH,GAAYoH,iBAAiB5yB,QAAQ,EAAK6J,MAAM5B,KAAK1H,MAAQ,EAC/DqqB,KAAM,EACN3K,IAAK,GAP0B,E,qDAWnC,WACE,IAAIoC,EAAW,GAEX1jB,gBAEF0jB,EADwBthB,OAAOC,QAAQ,YAA/B4G,YACeC,SAAS,kBAIY,QAA5CO,IAAUC,gBAAgB,eAC1BmF,KAAYulB,eAAe,KAAO58B,KAAK0T,MAAM5B,KAAK1H,KACjDpK,KAAK0T,MAAM4H,YAAYlR,KACvB8hB,GAED3a,KAASuc,aAAa9tB,KAAK0T,MAAM5B,MAEnC9R,KAAK0T,MAAMyD,kBAAkBnX,KAAK0T,MAAM5B,Q,uCAE1C,SAA0B+qB,GACpBA,EAAUxc,eAAiBrgB,KAAK0T,MAAM2M,cAEtCwc,EAAUxc,cACVrgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKq8B,iBACLr8B,KAAK0T,MAAMuR,kBAAiB,IAG5B4X,EAAUvc,iBAAmBtgB,KAAK0T,MAAM4M,gBAExCuc,EAAUvc,gBACVtgB,KAAK0T,MAAM2H,WAAarb,KAAK0T,MAAM5B,KAAK1H,MAExCpK,KAAKu7B,mBACLv7B,KAAK0T,MAAMwR,oBAAmB,M,oBAkDpC,WAAU,IAAD,OACHrU,EAAaH,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KACnDsG,IAAeosB,OAAO98B,KAAK0T,MAAM5B,KAAK1H,KAAKyG,WAC3C,EACEksB,EAAc,CAAEtI,KAAMz0B,KAAKuV,MAAMkf,KAAM3K,IAAK9pB,KAAKuV,MAAMuU,KAC7D,OACE,uCACE,uBACE5R,UAAU,uBACV8kB,YAAa,WACX,EAAKN,cAAa,IAEpBpW,aAAc,WACZ,EAAKoW,cAAa,IANtB,UASG18B,KAAK0T,MAAM5B,KAAKoZ,OACS,YAA1BlrB,KAAK0T,MAAM5B,KAAKoZ,OACc,SAA9BlrB,KAAK0T,MAAM5B,KAAKnF,WACc,SAA9B3M,KAAK0T,MAAM5B,KAAKnF,WACc,QAA9B3M,KAAK0T,MAAM5B,KAAKnF,UACd,sBACEuL,UAAU,wBACV3V,IAAKvC,KAAK0T,MAAM5B,KAAKoZ,MACrB/E,IAAI,GACJJ,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,OAI9B,sBACE5M,UAAU,wBACV6N,QAAS,WACP,EAAKJ,cAEPsX,YAAa,WACX,EAAKvpB,MAAMoR,eAAe,EAAKpR,MAAM5B,KAAK1H,MAE5C8yB,UAAW,WACT,EAAKxpB,MAAMoR,eAAe,KAT9B,SAYE,eAAC,GAAD,CAEIzS,OAAQrS,KAAK0T,MAAM5B,KAAKO,OACxBhG,MAAOrM,KAAK0T,MAAM5B,KAAK3M,KACvB42B,MAAO,SAMf,oBAAG7jB,UAAU,wBAAb,SAAsClY,KAAK0T,MAAM5B,KAAK3M,OACtD,qBAAG+S,UAAU,yBAAb,UACE,eAAC4W,GAAA,EAAD,qBADF,QAEE,eAACA,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM5B,KAAKxF,YAE1B,qBAAG4L,UAAU,yBAAb,UACE,eAAC4W,GAAA,EAAD,wBADF,QAEE,eAACA,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM5B,KAAKnF,eAE1B,uBAAKuL,UAAU,uBAAf,UACE,eAAC4W,GAAA,EAAD,0BADF,QAEG9uB,KAAK0T,MAAM5B,KAAKhF,YACf2C,KAAOzP,KAAK0T,MAAM5B,KAAKhF,aAEvB,eAACgiB,GAAA,EAAD,uBAGH9uB,KAAKuV,MAAMgnB,WACV,uBACErkB,UAAU,4BACV6N,QAAS,WACP,EAAKyW,wBAEPrkB,MAAO,CAAE0R,MAAO,QAAS6T,OAAQ,UAEjC,KAEH19B,KAAKuV,MAAMonB,aACV,uCAC8B,QAA3B38B,KAAK0T,MAAM5B,KAAKO,QACf,sBACE6F,UAAU,wBACVC,MAAO,CAAE0R,MAAO,SAFlB,SAIE,uBAAK1R,MAAO,CAAE8N,SAAU,WAAYwO,KAAM,OAA1C,UACG5jB,EACGkD,KAAK+E,MAAmB,IAAbjI,GAAoB,GAC7B,IAAMkD,KAAK+E,MAAmB,IAAbjI,GACgB,MAAjCkD,KAAK+E,MAAmB,IAAbjI,GACX,SACAkD,KAAK+E,MAAmB,IAAbjI,GACb,KACJ,uBAAMqH,UAAU,0BAAhB,oBAIN,uBACEA,UAAU,6BACV6N,QAAS,SAACha,GACR,EAAKkwB,iBAAiBlwB,IAExBoM,MAAO,CAAE0R,MAAO,WAElB,uBACE3R,UAAU,2BACV6N,QAAS,WACP,EAAKsW,kBAEPlkB,MAAO,CAAE0R,MAAO,QAAS6T,OAAQ,aAGnC,QAEL19B,KAAK0T,MAAMyH,oBACZnb,KAAK0T,MAAM5B,KAAK1H,MAAQpK,KAAK0T,MAAM4H,YAAYlR,IAC7C,eAAC,GAAD,eAAkB2yB,IAChB,Y,GA7NgBxkB,IAAMC,YAkOnBC,eAAWglB,IC1NpBjX,GAAgB,CACpBrP,qBACAyN,sBACApC,mBACAD,gBACAuC,kBACAG,oBACAC,sBACAR,uBAEa+B,gBApBS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BkF,aAAc9K,EAAM8L,QAAQhB,aAC5BC,eAAgB/K,EAAM8L,QAAQf,eAC9BC,YAAahL,EAAM8L,QAAQd,YAC3BlF,SAAU9F,EAAMzD,KAAKuJ,SACrBC,YAAa/F,EAAMzD,KAAKwJ,eAaYkL,GAAzBC,CAAwCgX,ICexCE,G,8MA9CbpU,aAAe,WACb,EAAK7V,MAAMkqB,mBAAkB,I,EAE/BlI,cAAgB,WAEd,EAAKhiB,MAAMkqB,mBAAkB,GAC7B,EAAKlqB,MAAMmqB,uBACX,EAAKnqB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,I,4CAE9B,WAAU,IAAD,OACP,OACE,uBAAKtK,UAAU,0BAAf,UACE,sBAAKA,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAMrH,UAGrB,sBAAK6L,UAAU,qBAAf,SACE,sBAAKA,UAAU,2BAAf,SAA2ClY,KAAK0T,MAAMvO,SAGxD,sBAAK+S,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM5G,gBAGrB,sBACEoL,UAAU,uBACV6N,QAAS,WACP,EAAKwD,gBAHT,SAME,eAACuF,GAAA,EAAD,uBAEF,sBACE5W,UAAU,wBACV6N,QAAS,WACP,EAAK2P,iBAHT,SAME,eAAC5G,GAAA,EAAD,8B,GAxCgBvW,IAAMC,WCS1BgO,GAAgB,CACpB1D,oBACAN,mBACAD,iBAEakE,gBARS,SAAClR,GACvB,MAAO,KASPiR,GAFaC,CAGbC,eAAkBiX,KCrBPG,I,OAAY,CACvB,CACE3d,KAAM,OACN4d,KAAM,gBACNC,IAAK,2CAEP,CACE7d,KAAM,WACN4d,KAAM,oBACNC,IACE,iGAEJ,CACE7d,KAAM,WACN4d,KAAM,iBACNC,IAAK,iDAEP,CACE7d,KAAM,OACN4d,KAAM,aACNC,IAAK,mEAEP,CACE7d,KAAM,SACN4d,KAAM,eACNC,IAAK,oEAEP,CACE7d,KAAM,QACN4d,KAAM,cACNC,IAAK,0CAGP,CACE7d,KAAM,QACN4d,KAAM,oBACNC,IAAK,yCCwBMC,G,8JAnDb,WAAU,IAAD,OAqBP,OACE,uBACE/lB,UAAU,uBACVC,MACEnY,KAAK0T,MAAM6M,YACP,CAAEhX,MAAO,sBAAuBkrB,KAAM,SACtC,GALR,UAQE,sBACEvc,UAAU,+BACVC,MAAO,CAAE5O,MAAO,qBAFlB,SAIE,sBACEhH,IACiD,QAA/C0P,IAAUC,gBAAgB,iBACtB,2BACA,qBAENiU,IAAI,GACJjO,UAAU,8BAvCT4lB,GAAUliB,KAAI,SAACnO,GACpB,OACE,uBACEyK,UAAU,4BAEVC,MACE,EAAKzE,MAAMyM,OAAS1S,EAAK0S,KAAO,GAAK,CAAE+d,WAAY,UAJvD,UAOE,sBAAKhmB,UAAU,uBAAf,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKswB,SAEf,sBAAK7lB,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKuwB,UATVvwB,EAAK0S,gB,GAPE5H,IAAMC,WCKfiO,gBAPS,SAAClR,GACvB,MAAO,CACL4K,KAAM5K,EAAM8L,QAAQlB,KACpBI,YAAahL,EAAM8L,QAAQd,eAGT,GACPkG,CAGbC,eAAkBuX,KChBPpf,I,OAAW,CACtB,CACE1Z,KAAM,YACNigB,KAAM,OACNjF,KAAM,QAER,CACEhb,KAAM,YACNigB,KAAM,OACNjF,KAAM,QAGR,CACEhb,KAAM,aACNigB,KAAM,QACNjF,KAAM,WC4BKge,G,oDAlCb,WAAYzqB,GAAuB,IAAD,8BAChC,cAAMA,IAGRijB,aAAe,SAACxW,GACdlO,IAAU2F,gBAAgB,WAAYuI,GACtC,EAAKzM,MAAM2P,mBAJX,EAAK9N,MAAQ,GAFmB,E,0CAQlC,WAAU,IAAD,OACP,OACE,sBAAK2C,UAAU,iBAAf,SACG2G,GAASjD,KAAI,SAACnO,GAAD,OACZ,eAAC,WAAD,CAEEpB,MAAO,EAAKqH,MAAMsS,EAAEvY,EAAKtI,MACzB8gB,SAAS,MACTC,QAAQ,aAJV,SAME,sBACEhO,UAAU,iBACV6N,QAAS,WACP,EAAK4Q,aAAalpB,EAAK0S,OAEzBhI,MAAO,EAAKzE,MAAMmL,WAAapR,EAAK0S,KAAO,CAAEsX,QAAS,IAAQ,GALhE,SAOE,uBAAMvf,UAAS,eAAUzK,EAAK2X,WAZ3B3X,EAAKtI,e,GAdCoT,IAAMC,WCGvBgO,GAAgB,CAAEnD,oBACToD,gBANS,SAAClR,GACvB,MAAO,CACLsJ,SAAUtJ,EAAMwL,QAAQlC,YAM1B2H,GAFaC,CAGbC,eAAkByX,KCOdC,G,oDACJ,WAAY1qB,GAAuB,IAAD,8BAChC,cAAMA,IAoBRyP,gBAAkB,SAACG,EAAcC,GAC/B,IAAIC,EAAiB,GAQrB,OAPAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAMhQ,SAAQ,SAAC+qB,GACTA,EAAQj0B,MAAQqD,GAClB+V,EAAQtjB,KAAKm+B,SAIZ7a,GA9ByB,EAkDlCmT,aAAe,SAACxW,GACdlO,IAAU2F,gBAAgB,WAAYuI,GACtC,EAAKzM,MAAM2P,mBApDqB,EAuDlCib,kBAAoB,SAAChb,EAAYC,GAC/B,IAAIC,EAAiB,GAKrB,OAJAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAM7V,IAAS+V,EAAQtjB,KAAKojB,EAAM7V,OAG7B+V,GA7DyB,EA+DlC+a,eAAiB,WAEf,IAAIlrB,EAAQ,EAAKK,MAAM8K,SACnB,EAAK8f,kBAAkB,EAAK5qB,MAAML,MAAO,EAAKK,MAAM6K,eACpD,EAAK7K,MAAM0M,WAAa,EACxB,EAAKoe,YAAY,EAAK9qB,MAAML,MAAO,EAAKK,MAAM0M,YAC1B,aAApB,EAAK1M,MAAMyM,MAAwB,EAAKzM,MAAMgL,WAE1B,aAApB,EAAKhL,MAAMyM,MAAuB,EAAKzM,MAAMgL,WAC7C,EAAK4f,kBACH,EAAKnb,gBAAgB,EAAKzP,MAAML,MAAOgiB,GAAYoH,kBAEnDtgB,EAASsiB,UAAU,EAAK/qB,MAAML,MAAO,EAAKK,MAAM0I,eAAiB,IAEnE,EAAK1I,MAAMgL,YAA+C,IAAjC,EAAKhL,MAAM0I,aAAaC,KACjD,EAAKiiB,kBACH,EAAK5qB,MAAML,MAEX8I,EAASsiB,UAAU,EAAK/qB,MAAML,MAAO,EAAKK,MAAM0I,eAAiB,IAEnE,EAAK+G,gBACH,EAAKzP,MAAML,MACuB,IAAlC,EAAKK,MAAM0I,aAAaE,MACpBrJ,KAAa2pB,eACb3pB,KAAa2pB,eAAelxB,WAjBlC,EAAKyX,gBAAgB,EAAKzP,MAAML,MAAOgiB,GAAYoH,kBAmBvD,MAAwB,UAApB,EAAK/oB,MAAMyM,MAAqC,IAAjB9M,EAAM9S,OAErC,sBACE4X,MAAO,CACL8N,SAAU,QACVwO,KAAM,EACN3K,IAAK,EACLvgB,MAAO,OACPC,OAAQ,OACRk1B,QAAS,GAPb,SAUE,eAAC,GAAD,MAKCrrB,EAAMuI,KAAI,SAACnO,EAAiB0F,GACjC,MAA+B,SAAxB,EAAKO,MAAMmL,SAChB,eAAC,GAAD,CAEIzU,IAAKqD,EAAKrD,IACV0H,KAAMrE,IAGgB,SAAxB,EAAKiG,MAAMmL,SACb,eAAC,GAAD,CAA6B/M,KAAMrE,GAAhBA,EAAKrD,KAExB,eAAC,GAAD,CAEIA,IAAKqD,EAAKrD,IACV0H,KAAMrE,QAxHkB,EA+HlCkxB,gBAAkB,SAAC5yB,GACjB,IAAIoH,EAAQpH,EAAMvJ,OAAO+Q,MAAM9H,MAAM,KAAK,GAC1C,EAAKsL,SAAS,CAAEqJ,WAAYjN,IAC5B,EAAKO,MAAMqR,iBAAiB5R,GACxBA,EAAQ,EACV,EAAKO,MAAMsR,WAAW,SAEtB,EAAKtR,MAAMsR,WAAW,SAtIQ,EAyIlC4Z,kBAAoB,WAClB,KAAI,EAAKrpB,MAAM6K,WAAa,GAA5B,CACA,IAEI+U,EAFcvY,OAAOC,KAAKmY,GAAUsB,YAEJ,EAAK/gB,MAAM6K,YAC/C4U,GAAU6J,YAAY1J,GACtB,EAAKpe,SAAS,CAAEqJ,WAAY,IAAK,WAC/B,EAAK1M,MAAMqR,iBAAiB,GAC5B,EAAKrR,MAAMsR,WAAW,cAjJQ,EAoJlC6R,gBAAkB,WAChB,IAAIzB,EAAYJ,GAAUsB,WAE1B,OADiB1Z,OAAOC,KAAKuY,GACXxZ,KAAI,SAACnO,EAAM0F,GAC3B,OACE,yBACEI,MAAO,CAAC9F,EAAM0F,EAAMkgB,YAEpBnb,UAAU,+BACV4mB,SAAU,EAAKprB,MAAM0M,aAAejN,EAJtC,SAMG,EAAKO,MAAMsS,EAAW,QAATvY,EAAiB,YAAcA,IAJxC0F,OA3JqB,EAoKlCyqB,kBAAoB,SAACmB,GACnB,EAAKhoB,SAAS,CAAEgoB,kBAnKhB,EAAKxpB,MAAQ,CACX6K,WAAY,EACZ2e,cAAc,EACdC,cAAepiB,OAAOC,KAAKwY,GAAYoH,kBAAkBl8B,QAL3B,E,sDAQlC,WAC0B,UAApBP,KAAK0T,MAAMyM,KACbngB,KAAK0T,MAAMoP,kBAAiB,GAE5B9iB,KAAK0T,MAAMoP,kBAAiB,K,+BAGhC,WACE,IAAK9iB,KAAK0T,MAAML,QAAUrT,KAAK0T,MAAML,MAAM,GACzC,OAAO,eAAC,IAAD,CAAU4rB,GAAG,oB,yBAiBxB,SAAY3b,EAAYnQ,GAEtB,GAAIA,EAAQ,EAAG,OAAOmQ,EACtB,IAEI6R,EAFavY,OAAOC,KAAKmY,GAAUsB,YAEJnjB,GACnC,IAAKgiB,EAAmB,OAAO7R,EAE/B,IAAI4b,EAAmBlK,GAAUsB,WAAWnB,GAK5C,OAHiB7R,EAAM9V,QAAO,SAACC,GAC7B,OAAOyxB,EAAiBr1B,QAAQ4D,EAAKrD,MAAQ,O,oBA0HjD,WAAU,IAAD,OACP,GACgC,IAA7BpK,KAAKuV,MAAMypB,eAA2C,aAApBh/B,KAAK0T,MAAMyM,OAC7CngB,KAAK0T,MAAML,QACXrT,KAAK0T,MAAML,MAAM,GAElB,OAAO,eAAC,IAAD,CAAU4rB,GAAG,mBAElBz2B,eAEFmJ,IAAYX,QAAQhR,KAAK0T,MAAML,MAAM,GAAGjJ,KAAKoM,MAAK,SAAC/T,GAC7CA,GACF08B,GAASnM,OACP,EAAKtf,MAAML,MACX,EAAKK,MAAM6J,MACX,EAAK7J,MAAM6L,WACX,cACA,GACA,kBAKR,IAAM6f,EAAmB,CACvBjf,KAAM,QACNhb,KAAMyX,OAAOC,KAAKmY,GAAUsB,YAAYt2B,KAAKuV,MAAM6K,YACnD/T,MAAO,oBACPS,YAAa,+CACb8wB,kBAAmB59B,KAAK49B,kBACxBC,qBAAsB79B,KAAK4+B,mBAG7B,OADA3sB,IAAU2F,gBAAgB,aAAc5X,KAAK0T,MAAML,MAAM9S,OAAO8yB,YAE9D,uCACGrzB,KAAKuV,MAAMwpB,cAAgB,eAAC,GAAD,eAAiBK,IAC7C,eAAC,GAAD,IAEA,uBAAKlnB,UAAU,2BAAf,UACE,oBAAGA,UAAU,wBAAwBC,MAAO,CAAEoO,QAAS,UAAvD,SACE,eAACuI,GAAA,EAAD,2BAEF,yBACE5W,UAAU,sBACV0e,SAAU,SAAC7qB,GACT,EAAK4yB,gBAAgB5yB,IAHzB,SAMG/L,KAAK62B,oBAEP72B,KAAKuV,MAAM6K,WAAa,EACvB,uBACElI,UAAU,+BACV6N,QAAS,WACP,EAAK6X,mBAAkB,MAGzB,QAGN,sBACE1lB,UAAU,6BACVC,MACEnY,KAAK0T,MAAM6M,YACP,CAAEhX,MAAO,qBAAsBkrB,KAAM,QACrC,GALR,SAQE,sBAAKvc,UAAU,sBAAf,SACE,qBAAIA,UAAU,qBAAd,SAAoClY,KAAKu+B,8B,GA5O9BhmB,IAAMC,WAoPdC,eAAW2lB,IC7OpB5X,GAAgB,CACpBnD,mBACA2B,cACAD,oBACAL,sBACA5B,qBAEa2D,gBAxBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrB8M,KAAM5K,EAAM8L,QAAQlB,KACpBZ,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MAEpB6C,WAAY7K,EAAM8L,QAAQjB,WAC1BG,YAAahL,EAAM8L,QAAQd,YAC3BhC,cAAehJ,EAAMwL,QAAQxC,cAC7BC,SAAUjJ,EAAMwL,QAAQvC,SACxBE,WAAYnJ,EAAMwL,QAAQrC,WAC1BG,SAAUtJ,EAAMwL,QAAQlC,SACxBzC,aAAc7G,EAAMwL,QAAQ3E,aAC5BoB,aAAcjI,EAAMwL,QAAQvD,gBAY9BgJ,GAFaC,CAGbC,eAAkB0X,KCxBdA,I,2DACJ,WAAY1qB,GAAuB,IAAD,8BAChC,cAAMA,IAMRyP,gBAAkB,SAACG,EAAcC,GAC/B,IAAIC,EAAiB,GASrB,OARAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAMhQ,SAAQ,SAAC+qB,GACTA,EAAQj0B,MAAQqD,GAClB+V,EAAQtjB,KAAKm+B,SAKZ7a,GAjByB,EAqBlC8a,kBAAoB,SAAChb,EAAYC,GAC/B,IAAIC,EAAiB,GAKrB,OAJAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAM7V,IAAS+V,EAAQtjB,KAAKojB,EAAM7V,OAG7B+V,GA3ByB,EA6BlC+a,eAAiB,WAEf,IAAIlrB,EAAS,EAAKK,MAAMgL,WAEpB,EAAKhL,MAAMgL,WACX,EAAK4f,kBACH,EAAKnb,gBAAgB,EAAKzP,MAAM4K,aAAcwD,EAASoB,eAEvD/G,EAASsiB,UACP,EAAK/qB,MAAM4K,aACX,EAAK5K,MAAM0I,eACR,IAEP,EAAK1I,MAAMgL,WACX,EAAK4f,kBACH,EAAK5qB,MAAM4K,aAEXnC,EAASsiB,UACP,EAAK/qB,MAAM4K,aACX,EAAK5K,MAAM0I,eACR,IAEP,EAAK+G,gBACH,EAAKzP,MAAM4K,aACXrL,KAAa2pB,gBArBf,EAAKzZ,gBAAgB,EAAKzP,MAAM4K,aAAcwD,EAASoB,eAuB3D,OAAqB,IAAjB7P,EAAM9S,OAEN,sBACE4X,MAAO,CACL8N,SAAU,QACVwO,KAAM,EACN3K,IAAK,EACLvgB,MAAO,OACPC,OAAQ,OACRk1B,QAAS,GAPb,SAUE,eAAC,GAAD,MAKCrrB,EAAMuI,KAAI,SAACnO,EAAiB0F,GACjC,MAA+B,SAAxB,EAAKO,MAAMmL,SAChB,eAAC,GAAD,CAEIzU,IAAKqD,EAAKrD,IACV0H,KAAMrE,IAIV,eAAC,GAAD,CAAqBqE,KAAMrE,GAAhBA,EAAKrD,SA/EpB,EAAKmL,MAAQ,GAFmB,E,sDAIlC,WACEvV,KAAK0T,MAAMoP,kBAAiB,K,oBAiF9B,WAAU,IAAD,OACP,OACE,uCACE,eAAC,GAAD,IACA,sBACE5K,UAAU,4BACV6N,QAAS,WACP,EAAKrS,MAAMgR,oBAAmB,IAHlC,SAME,eAACoK,GAAA,EAAD,iCAGF,sBACE5W,UAAU,6BACVC,MACEnY,KAAK0T,MAAM6M,YACP,CAAEhX,MAAO,qBAAsBkrB,KAAM,QACrC,GALR,SAQE,sBAAKvc,UAAU,sBAAf,SACE,qBAAIA,UAAU,qBAAd,SAAoClY,KAAKu+B,8B,GA7G9BhmB,IAAMC,YAqHdC,eAAW2lB,IC7GpB5X,GAAgB,CACpBnD,mBACA2B,cACAD,oBACAL,sBACA5B,qBAEa2D,gBAnBS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrBiL,aAAc/I,EAAMwL,QAAQzC,aAC5B6B,KAAM5K,EAAM8L,QAAQlB,KACpBzB,WAAYnJ,EAAMwL,QAAQrC,WAC1B6B,YAAahL,EAAM8L,QAAQd,YAC3B1B,SAAUtJ,EAAMwL,QAAQlC,SACxBzC,aAAc7G,EAAMwL,QAAQ3E,aAC5BoB,aAAcjI,EAAMwL,QAAQvD,gBAUQgJ,GAAzBC,CAAwC2X,I,cC9BhD,SAASiB,GAAetf,GAC7B,MAAO,CAAEla,KAAM,mBAAoBgb,QAASd,GAEvC,SAASuf,GAAetf,GAC7B,MAAO,CAAEna,KAAM,mBAAoBgb,QAASb,GAKvC,SAASuf,GAAsBtf,GACpC,MAAO,CAAEpa,KAAM,0BAA2Bgb,QAASZ,GAE9C,SAASuf,GAAmBtf,GACjC,MAAO,CAAEra,KAAM,uBAAwBgb,QAASX,GAE3C,SAASuf,GAAgB3f,GAC9B,MAAO,CAAEja,KAAM,mBAAoBgb,QAASf,G,WCwB/B4f,G,4FAvCb,SAAeC,GACb,IAAIC,EACmC,OAArC7uB,aAAaC,QAAQ,aACrBD,aAAaC,QAAQ,YACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,aAAe,IAC/C,GACAmC,EAAQysB,EAAO/1B,QAAQ81B,GACzBxsB,GAAS,GACXysB,EAAOlyB,OAAOyF,EAAO,GACrBysB,EAAOxsB,QAAQusB,IAEfC,EAAOxsB,QAAQusB,GAGjB5uB,aAAaK,QAAQ,WAAYF,KAAKG,UAAUuuB,M,mBAGlD,SAAaD,GACX,IAAIC,EACmC,OAArC7uB,aAAaC,QAAQ,aACrBD,aAAaC,QAAQ,YACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,aAAe,IAC/C,GACAmC,EAAQysB,EAAO/1B,QAAQ81B,GACzBxsB,GAAS,GACXysB,EAAOlyB,OAAOyF,EAAO,GAEvBpC,aAAaK,QAAQ,WAAYF,KAAKG,UAAUuuB,M,wBAElD,WAME,OAJuC,OAArC7uB,aAAaC,QAAQ,aACrBD,aAAaC,QAAQ,YACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,aAAe,IAC/C,KACW,O,KCyDN6uB,G,oDApFb,WAAYnsB,GAAyB,IAAD,8BAClC,cAAMA,IAORosB,aAAe,WACb,IAAIC,EACkB,UAApB,EAAKrsB,MAAMyM,KACP,EAAKzM,MAAM6J,MACS,SAApB,EAAK7J,MAAMyM,KACXuf,GAAQM,aACR,EAAKtsB,MAAM6L,UACb0gB,EACkB,UAApB,EAAKvsB,MAAMyM,KACP,EAAKzM,MAAMmQ,iBACX,EAAKnQ,MAAM6Q,qBACjBwb,EAAYzsB,SAAQ,SAAC7F,EAAW0F,GACN,SAApB,EAAKO,MAAMyM,KAIX1S,EAAKrD,MAAQ,EAAKsJ,MAAMwsB,UAC1BH,EAAYryB,OAAOyF,EAAO,GACC,IAAvB4sB,EAAYx/B,OACdoR,IACGC,WAAW,EAAK8B,MAAMyM,MACtB3J,MAAK,WACJypB,IACA,EAAKvsB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,MAE7B8B,OAAM,WACLtW,QAAQC,IAAI,+BAGhB0D,IACGP,QAAQ,EAAKsC,MAAMyM,KAAM4f,GACzBvpB,MAAK,WACJypB,IACA,EAAKvsB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,MAE7B8B,OAAM,WACLtW,QAAQC,IAAI,gCAzBlBR,IAAS,EAAKiG,MAAMisB,SAAWD,GAAQ5J,MAAMroB,OArBf,EAoDpCmwB,kBAAoB,SAACmB,GACnB,EAAKhoB,SAAS,CAAEgoB,iBACXA,GACH,EAAKrrB,MAAMysB,gBAAgB,EAAKzsB,MAAMP,QArDxC,EAAKoC,MAAQ,CACX6qB,aAAc,EACdrB,cAAc,GAJkB,E,0CA0DpC,WAAU,IAAD,OACDK,EAAmB,CACvBj6B,KAAMnF,KAAK0T,MAAMisB,QACjBtzB,MAAO,kBACPS,YAAa,6CACb8wB,kBAAmB59B,KAAK49B,kBACxBC,qBAAsB79B,KAAK8/B,cAE7B,OACE,uCACG9/B,KAAKuV,MAAMwpB,cAAgB,eAAC,GAAD,eAAiBK,IAC7C,sBACElnB,UAAU,uBACV6N,QAAS,WACa,SAApB,EAAKrS,MAAMyM,KACP,EAAKyd,mBAAkB,GACvB,EAAKkC,gBALb,SAQE,uBAAM5nB,UAAU,2C,GA9EDK,IAAMC,WCUzBgO,GAAgB,CACpBjC,wBACAV,oBACArB,mBACAD,gBACAid,uBAEa/Y,gBAfS,SAAClR,GACvB,MAAO,CACLiK,QAASjK,EAAM1J,OAAO2T,QACtBD,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBnC,UAAW7F,EAAMzD,KAAKsJ,aAUcoL,GAAzBC,CAAwCoZ,ICiJxCQ,I,2DAjKb,WAAY3sB,GAAsB,IAAD,8BAC/B,cAAMA,IAuBR4sB,WAAa,SAACC,GACZ,IAAIC,EAAiB,GACrB,IAAKD,EAAK,MAAO,GACjB,IAAK,IAAI3/B,EAAI,EAAGA,EAAI8+B,GAAQM,aAAaz/B,OAAQK,IAC3C2/B,EAAI12B,QAAQ61B,GAAQM,aAAap/B,KAAO,GAC1C4/B,EAAKtgC,KAAKU,GAGd,OAAO4/B,GAhCwB,EAkCjCC,WAAa,SAACC,GAEZ,IADA,IAAIF,EAAY,GACP5/B,EAAI,EAAGA,EAAI8/B,EAASngC,OAAQK,IACnC4/B,EAAKtgC,KAAKw/B,GAAQM,aAAaU,EAAS9/B,KAE1C,OAAO4/B,GAvCwB,EAyCjCL,gBAAkB,SAAChtB,GACjB,IAAIqtB,EAAc,aAAO,EAAKjrB,MAAMmrB,UACpC,GAAI,EAAKnrB,MAAMmrB,SAAS72B,QAAQsJ,IAAU,EAAG,CAE3C,IAAIwtB,GADJH,EAAI,aAAO,EAAKjrB,MAAMmrB,WACC72B,QAAQsJ,GAC/BqtB,EAAK9yB,OAAOizB,EAAa,GACzB,EAAK5pB,SAAS,CAAE2pB,SAAUF,IAC1B,EAAK9sB,MAAMktB,UAAU,EAAKH,WAAWD,SAErCA,EAAKtgC,KAAKiT,GACV,EAAK4D,SAAS,CAAE2pB,SAAUF,IAC1B,EAAK9sB,MAAMktB,UAAU,EAAKH,WAAWD,KApDR,EAuDjCK,aAAe,SAAC90B,GACd,EAAKgL,SAAS,CAAE+pB,SAAS,IACpB/0B,EAAMvJ,OAAO+Q,QAGlBmsB,GAAQqB,QAAQh1B,EAAMvJ,OAAO+Q,OAC7B,EAAKwD,SAAS,CAAE2pB,SAAU,KAC1B,EAAKhtB,MAAMktB,UAAU,EAAKH,WAAW,OA9DN,EAgEjCO,YAAc,WACZ,EAAKjqB,SAAS,CAAE+pB,SAAS,IAAQ,WAAO,IAAD,EACrC,UAAA34B,SAASiR,eAAe,iBAAxB,SAAmCoQ,YAlEN,EAqEjCyX,eAAiB,SAACtH,GAChB,EAAK5iB,SAAS,CAAEmqB,WAAYvH,KApE5B,EAAKpkB,MAAQ,CACXmrB,SAAU,GACVI,SAAS,EACTV,aAAc,EACdc,YAAY,GANiB,E,qDASjC,WACMlhC,KAAK0T,MAAM0H,WACbpb,KAAK+W,SAAS,CAAE2pB,SAAU1gC,KAAKsgC,WAAWtgC,KAAK0T,MAAM6sB,S,uCAGzD,SAA0B1D,GAEtB78B,KAAK0T,MAAM0H,WACXyhB,EAAU0D,KACV1D,EAAU0D,IAAIhgC,OAAS,GACvBP,KAAK0T,MAAM6sB,MAAQ1D,EAAU0D,KAE7BvgC,KAAK+W,SAAS,CAAE2pB,SAAU1gC,KAAKsgC,WAAWzD,EAAU0D,S,oBAmDxD,WAAU,IAAD,OAuCP,OACE,uBACEroB,UAAU,qBACVC,MAAOnY,KAAK0T,MAAM0H,UAAY,CAAE7R,MAAO,UAAa,GAFtD,UAIGvJ,KAAK0T,MAAM0H,WAAapb,KAAK0T,MAAMytB,OAAS,KAC3C,uBAAKjpB,UAAU,YAAf,UACE,eAAC4W,GAAA,EAAD,uBACA,uBACE5W,UAAU,kCACV6N,QAAS,WACP,EAAKkb,gBAAgB,EAAK1rB,MAAM2rB,mBAMtClhC,KAAKuV,MAAM2rB,YAAclhC,KAAK0T,MAAM0H,YACpC,sBAAIlD,UAAU,gBAAd,WACIlY,KAAK0T,MAAMytB,QACX,qBACEjpB,UAAU,oBACV6N,QAAS,WACP,EAAKib,eAEP7oB,MAAOnY,KAAKuV,MAAMurB,QAAU,CAAEv3B,MAAO,QAAW,GALlD,SAOE,sBAAK2O,UAAU,SAAf,SACGlY,KAAKuV,MAAMurB,QACV,wBACEj7B,KAAK,OACLV,KAAK,SACL+G,GAAG,SACHk1B,OAAQ,SAACr1B,GACP,EAAK80B,aAAa90B,MAItB,uBAAMmM,UAAU,kBA3Ef,EAAKxE,MAAMytB,OAAS,EAAKztB,MAAM6sB,IAAMb,GAAQM,cAC5CpkB,KAAI,SAACnO,EAAW0F,GAC9B,OACE,sBAEE+E,UACE,EAAK3C,MAAMmrB,SAAS72B,QAAQsJ,IAAU,IAAM,EAAKO,MAAMytB,OACnD,4BACA,gBALR,UAQE,sBAAKjpB,UAAU,uBAAf,SACG,EAAK3C,MAAMmrB,SAAS72B,QAAQsJ,IAAU,IACtC,EAAKO,MAAM0H,YACX,EAAK1H,MAAMytB,OACV,eAAC,GAAD,CAEIxB,QAASlyB,EACT0S,KAAM,OACNhN,MAAOA,EACPgtB,gBAAiB,EAAKA,kBAGxB,OAEN,sBACEjoB,UAAU,SACV6N,QAAS,WACP,EAAKoa,gBAAgBhtB,IAHzB,SAME,eAAC2b,GAAA,EAAD,UAAQrhB,QA3BLA,gB,GA/EK8K,IAAMC,YCGtBgO,GAAgB,CACpBvE,sBACAC,gBAEauE,gBAVS,SAAClR,GACvB,MAAO,CACL6F,UAAW7F,EAAMzD,KAAKsJ,UACtBuE,QAASpK,EAAM1J,OAAO8T,WASxB6G,GAFaC,CAGbC,eAAkB2Z,KCJdgB,G,oDACJ,WAAY3tB,GAAuB,IAAD,8BAChC,cAAMA,IAIR4tB,eAAiB,SAAC3wB,GAGhB,IAFA,IAAM0C,EAAU,EAAKK,MAAfL,MACF1H,EAAW,GACN/K,EAAI,EAAGA,EAAI,EAAK8S,MAAML,MAAM9S,OAAQK,IAC3C,GAAIyS,EAAMzS,GAAGwJ,MAAQuG,EAAS,CAC5BhF,EAAW0H,EAAMzS,GAAGuE,KACpB,MAGJ,OAAOwG,GAdyB,EAgBlC41B,iBAAmB,SAACC,GAClB,EAAKzqB,SAAS,CAAEyqB,eAjBgB,EAmBlC7b,WAAa,SAAC/U,EAAaD,EAAiBE,GAI1C,IAHA,IACIiB,EADEuB,EAAU,EAAKK,MAAfL,MAGGzS,EAAI,EAAGA,EAAIyS,EAAM9S,OAAQK,IAChC,GAAIyS,EAAMzS,GAAGwJ,MAAQuG,EAAS,CAC5BmB,EAAOuB,EAAMzS,GACb,MAGJ,IAAKkR,EAGH,OAFA,EAAK4B,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,GAG9B9R,IAAe+wB,UAAU9wB,EAASC,EAAKC,GACvCU,KAASuc,aAAahc,IAjCtB,EAAKyD,MAAQ,CAAEisB,UAAW,IAFM,E,0CAqClC,WAAU,IAAD,OACDE,EAAU1hC,KAAK0T,MAAfguB,MACN,GAAqB,IAAjBA,EAAMnhC,OACR,OAAO,eAAC,IAAD,CAAU0+B,GAAG,mBAGtB,IAAIhhB,EAAU9B,EAASwlB,UACrBD,EACA1hC,KAAK0T,MAAM8J,aACXxd,KAAK0T,MAAML,OA2Gb,OAAO,sBAAK6E,UAAU,sBAAf,SAXE0E,OAAOC,KAAKoB,GAAUrC,KAAI,SAACnO,EAAM0F,GACtC,OACE,sBAAI+E,UAAU,iBAAd,UACE,sBAAKA,UAAU,sBAAf,SAAsCzK,IACtC,qBAAIyK,UAAU,0BAAd,UAlGoB7L,EAmGEoB,EAlGrBwQ,EAAS5R,GAAOuP,KAAI,SAACnO,EAAiB0F,GAC3C,IAAMyuB,EAAY,CAChB1B,QAASzyB,EAAKrD,IACd+V,KAAM,SAER,OACE,qBACEjI,UAAU,iBAEV8kB,YAAa,WACX,EAAKuE,iBAAiB9zB,EAAKrD,MAE7Bkc,aAAc,WACZ,EAAKib,iBAAiB,KAExBppB,MACsB,SAApB,EAAKzE,MAAMyM,MAAoB,EAAKzM,MAAM6M,YAElB,SAApB,EAAK7M,MAAMyM,MAAmB,EAAKzM,MAAM6M,YACzC,CAAE/W,OAAQ,QAASD,MAAO,qBAC1B,EAAKmK,MAAM6M,YACX,CAAEhX,MAAO,qBACT,GALA,CAAEC,OAAQ,SAXlB,SAmBE,uBAAK0O,UAAU,sBAAf,UACE,sBAAKC,MAAO,CAAE8N,SAAU,WAAYyX,OAAQ,QAA5C,SACG,EAAKnoB,MAAMisB,YAAc/zB,EAAKrD,IAC7B,eAAC,GAAD,eAAgBw3B,IACd,OAEN,sBAAK1pB,UAAU,6BAAf,SACE,sBAAKA,UAAU,sBAAf,SACuB,SAApB,EAAKxE,MAAMyM,KAAkB1S,EAAK8P,MAAQ9P,EAAKgD,SAG/B,SAApB,EAAKiD,MAAMyM,KACV,sBAAKjI,UAAU,2BAAf,SACE,sBAAKA,UAAU,sBAAf,SAAsCzK,EAAKgD,SAE3C,KAEJ,uBAAKyH,UAAU,0BAAf,UACE,uBAAKA,UAAU,uBAAf,UACE,eAAC4W,GAAA,EAAD,mBADF,YAGA,sBAAK5W,UAAU,8CAAf,SACG,EAAKopB,eAAe7zB,EAAKkD,WAE5B,uBAAKuH,UAAU,8CAAf,mBACG,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKo0B,gBAGlB,sBACE3pB,UAAU,YACVC,MAAO,CACL8N,SAAU,WACVyX,OAAQ,OACRl0B,OAAQ,QALZ,SAQE,eAAC,GAAD,CAEIo3B,UAAW,aACXL,IAAK9yB,EAAK8yB,KAAO,GACjBY,QAAQ,MAId,sBACEpb,QAAS,WACP,EAAKJ,WAAWlY,EAAKmD,IAAKnD,EAAKkD,QAASlD,EAAKoD,aAFjD,SAKE,uBACEqH,UAAU,2BACVC,MAAO,CAAEulB,OAAQ,QAFnB,UAIuB,SAApB,EAAKhqB,MAAMyM,KACV,eAAC2O,GAAA,EAAD,UAAQ,eAER,eAACA,GAAA,EAAD,UAAQ,iBAGV,uBAAM5W,UAAU,2CA5EjB/E,WAuF6BA,GAhGf,IAAC9G,W,GAjDTkM,IAAMC,WA8JdC,eAAW4oB,ICrJpB7a,GAAgB,CACpBrP,qBACAqL,mBACAD,iBAEakE,gBAjBS,SAAClR,GACvB,MAAO,CACLiK,QAASjK,EAAM1J,OAAO2T,QACtBe,YAAahL,EAAM8L,QAAQd,YAC3BhF,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxB5K,SAAUY,EAAM1J,OAAO8I,SACvBtB,MAAOkC,EAAMwL,QAAQ1N,MACrBmK,aAAcjI,EAAMwL,QAAQvD,gBAU9BgJ,GAFaC,CAGbC,eAAkB2a,KC2DLS,G,oDAhFb,WAAYpuB,GAAuB,IAAD,8BAChC,cAAMA,IAQRktB,UAAY,SAACL,GACX,EAAKxpB,SAAS,CAAEwpB,SAVgB,EAYlCwB,aAAe,SAACze,EAAYC,GAC1B,IAAIC,EAAiB,GAIrB,OAHAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAM7V,IAAS+V,EAAQtjB,KAAKojB,EAAM7V,OAE7B+V,GAjByB,EAmBlCwe,UAAY,SAACzkB,GAEX,IADA,IAAIijB,EAAoB,GACf5/B,EAAI,EAAGA,EAAI2c,EAAMhd,OAAQK,IAAK,CAErC,IADA,IAAImmB,GAAO,EACFkb,EAAI,EAAGA,EAAI,EAAK1sB,MAAMgrB,IAAIhgC,OAAQ0hC,IACzC,GAAI1kB,EAAM3c,GAAG2/B,KAAOhjB,EAAM3c,GAAG2/B,IAAI12B,QAAQ,EAAK0L,MAAMgrB,IAAI0B,KAAO,EAAG,CAChElb,GAAO,EACP,MAGAA,GACFyZ,EAAKtgC,KAAKqd,EAAM3c,IAGpB,OAAO4/B,GA/BP,EAAKjrB,MAAQ,CACXgrB,IAAK,IAHyB,E,sDAMlC,WACEvgC,KAAK0T,MAAMmQ,qB,oBA4Bb,WACE,IAAMqe,EAAY,CAChBR,MAAO1hC,KAAK0T,MAAM8K,SACdxe,KAAK+hC,aACH/hC,KAAK0T,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,SACvCvd,KAAK0T,MAAM6K,eAEbve,KAAKuV,MAAMgrB,IAAIhgC,OAAS,EACxBP,KAAKgiC,UAAUhiC,KAAK0T,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,UACtDvd,KAAK0T,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,SAC3C4C,KAAM,QAER,OACE,uBACEjI,UAAU,6BACVC,MACEnY,KAAK0T,MAAM6M,YACP,CAAEhX,MAAO,qBAAsBkrB,KAAM,QACrC,GALR,UAQE,sBAAKvc,UAAU,YAAf,SACE,eAAC,GAAD,CAAe0oB,UAAW5gC,KAAK4gC,cAEL,IAA3BsB,EAAUR,MAAMnhC,OACf,sBACE4X,MAAO,CACL8N,SAAU,QACVwO,KAAM,EACN3K,IAAK,EACLvgB,MAAO,OACPC,OAAQ,OACRk1B,QAAS,GAPb,SAU6B,IAA1B1+B,KAAKuV,MAAMgrB,IAAIhgC,QAAgB,eAAC,GAAD,MAGlC,eAAC,GAAD,eAAc2hC,W,GA1ED3pB,IAAMC,WCKvBgO,GAAgB,CAAE3C,qBACT4C,gBATS,SAAClR,GACvB,MAAO,CACLgI,MAAOhI,EAAM1J,OAAO0R,MACpBiB,SAAUjJ,EAAMwL,QAAQvC,SACxB+B,YAAahL,EAAM8L,QAAQd,YAC3BhC,cAAehJ,EAAMwL,QAAQxC,iBAIOiI,GAAzBC,CAAwCqb,ICyExCK,I,2DA9Eb,WAAYzuB,GAAyB,IAAD,8BAClC,cAAMA,IAQRquB,aAAe,SAACze,EAAYC,GAC1B,IAAIC,EAAiB,GAIrB,OAHAD,EAAIjQ,SAAQ,SAAC7F,GACX6V,EAAM7V,IAAS+V,EAAQtjB,KAAKojB,EAAM7V,OAE7B+V,GAd2B,EAgBpCod,UAAY,SAACL,GACX,EAAKxpB,SAAS,CAAEwpB,SAjBkB,EAmBpCyB,UAAY,SAACxiB,GAEX,IADA,IAAIghB,EAAoB,GACf5/B,EAAI,EAAGA,EAAI4e,EAAQjf,OAAQK,IAAK,CAEvC,IADA,IAAImmB,GAAO,EACFkb,EAAI,EAAGA,EAAI,EAAK1sB,MAAMgrB,IAAIhgC,OAAQ0hC,IACzC,GAAIziB,EAAQ5e,GAAG2/B,KAAO/gB,EAAQ5e,GAAG2/B,IAAI12B,QAAQ,EAAK0L,MAAMgrB,IAAI0B,KAAO,EAAG,CACpElb,GAAO,EACP,MAGAA,GACFyZ,EAAKtgC,KAAKsf,EAAQ5e,IAGtB,OAAO4/B,GA/BP,EAAKjrB,MAAQ,CACXgrB,IAAK,IAH2B,E,sDAMpC,WACEvgC,KAAK0T,MAAMmQ,qB,oBA4Bb,WACE,IAAMqe,EAAY,CAChBR,MAAO1hC,KAAK0T,MAAM8K,SACdxe,KAAK+hC,aAAa/hC,KAAK0T,MAAM8L,QAASxf,KAAK0T,MAAM6K,eACjDve,KAAKuV,MAAMgrB,IAAIhgC,OAAS,EACxBP,KAAKgiC,UAAUhiC,KAAK0T,MAAM8L,SAC1Bxf,KAAK0T,MAAM8L,QACfW,KAAM,UAGR,OACE,uBACEjI,UAAU,+BACVC,MACEnY,KAAK0T,MAAM6M,YACP,CAAEhX,MAAO,qBAAsBkrB,KAAM,QACrC,GALR,UAQE,sBAAKvc,UAAU,YAAf,SACE,eAAC,GAAD,CAAe0oB,UAAW5gC,KAAK4gC,cAEL,IAA3BsB,EAAUR,MAAMnhC,OACf,sBACE4X,MAAO,CACL8N,SAAU,QACVwO,KAAM,EACN3K,IAAK,EACLvgB,MAAO,OACPC,OAAQ,OACRk1B,QAAS,GAPb,SAU6B,IAA1B1+B,KAAKuV,MAAMgrB,IAAIhgC,QAAgB,eAAC,GAAD,MAGlC,eAAC,GAAD,eAAc2hC,W,GAxEC3pB,IAAMC,YCKzBgO,GAAgB,CAAE3C,qBACT4C,gBATS,SAAClR,GACvB,MAAO,CACLiK,QAASjK,EAAM1J,OAAO2T,QACtBhB,SAAUjJ,EAAMwL,QAAQvC,SACxB+B,YAAahL,EAAM8L,QAAQd,YAC3BhC,cAAehJ,EAAMwL,QAAQxC,iBAIOiI,GAAzBC,CAAwC0b,ICiDxCC,I,qKAxDb,WACE,GAAIpiC,KAAK0T,MAAML,MACb,OAAO,eAAC,IAAD,CAAU4rB,GAAG,kBAGtB,IADA,IAAI1b,EAAgB,GAEd3iB,EAAI,EACRA,EAAIgN,SAASqE,IAAUC,gBAAgB,eAAiB,KACxDtR,IAEA2iB,EAAIrjB,KAAKU,GAEX,GAA8C,SAA1CqR,IAAUC,gBAAgB,YAAwB,CAapD,OACE,sBAAKgG,UAAU,gCAAf,SACE,sBAAKA,UAAU,yBAAf,SAbKqL,EAAI3H,KAAI,SAACnO,EAAM0F,GACpB,OACE,sBAAK+E,UAAU,oBAAf,SACE,sBACEA,UAAU,qBACVC,MAAO,CAAEsf,QAAQ,GAAD,OAAMtkB,EAAQ,EAAK,QAHC1F,UA6B9C,OACE,sBAAKyK,UAAU,gCAAf,SACE,sBAAKA,UAAU,yBAAyBC,MAAO,CAAE6X,UAAW,OAA5D,SAfKzM,EAAI3H,KAAI,SAACnO,EAAM0F,GACpB,OACE,uBAAK+E,UAAU,oBAAf,UACE,sBAAKA,UAAU,4BACf,uBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,sBACf,sBAAKA,UAAU,sBACf,sBAAKA,UAAU,2BALqBzK,c,GAnC1B8K,IAAMC,YCIjBiO,gBANS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,SAGH,GACPoT,CAAwC2b,ICJ1CC,GAAS,CACpB,CAAEv3B,KAAM,iBAAkBw3B,UAAWrE,IACrC,CAAEnzB,KAAM,mBAAoBw3B,UAAWF,IACvC,CAAEt3B,KAAM,gBAAiBw3B,UAAWR,IACpC,CAAEh3B,KAAM,kBAAmBw3B,UAAWH,IACtC,CAAEr3B,KAAM,gBAAiBw3B,UAAWlE,IACpC,CAAEtzB,KAAM,oBAAqBw3B,UAAWlE,IACxC,CAAEtzB,KAAM,iBAAkBw3B,UAAWC,KCmCxBC,I,OA/CD,WACZ,OACE,uBAAKtqB,UAAU,kBAAf,UACE,sBACEuqB,MAAM,6BACNl5B,MAAM,KACNC,OAAO,KACPk5B,QAAQ,YACRxqB,UAAU,SALZ,SAOE,qBACEijB,UAAU,+BACVwH,KAAK,OACLC,OAAO,iBACPC,YAAY,MAJd,UAME,yBAAQC,GAAG,KAAKC,GAAG,KAAKzX,EAAE,KAAKsX,OAAO,SACtC,yBAAQE,GAAG,KAAKC,GAAG,KAAKzX,EAAE,QAAQqX,KAAK,cAG3C,sBACEF,MAAM,6BACNl5B,MAAM,IACNC,OAAO,OACPk5B,QAAQ,aACRxqB,UAAU,QALZ,SAOE,qBAAGijB,UAAU,yBAAb,UACE,uBACE6H,GAAG,KACH7H,UAAU,mCACVwH,KAAK,OACLC,OAAO,iBACPK,cAAc,QACdJ,YAAY,MAEd,uBACErW,EAAE,gBACF2O,UAAU,uBACVwH,KAAK,6BCpCXO,I,OAAiB,CACrBlU,MAAM,EACNC,UAAU,EACVC,c,OACAE,iBAAkB,CAChBC,oBAAqB,oBAeV8T,GAZO,SAACzvB,GACrB,OACE,uBAAKwE,UAAU,iBAAf,UACE,sBAAKA,UAAU,uBAAf,SACE,eAAC4W,GAAA,EAAD,qCAEF,sBAAK5W,UAAU,oBAAf,SACE,eAAC,KAAD,CAAQ6X,QAASmT,GAAgB15B,OAAQ,IAAKD,MAAO,YCZvD65B,I,OAAkB,CACtBpU,MAAM,EACNC,UAAU,EACVC,c,OACAE,iBAAkB,CAChBC,oBAAqB,oBAmDVgU,G,oDA9Cb,WAAY3vB,GAAwB,IAAD,8BACjC,cAAMA,IAIRic,YAAc,WACZ,EAAKjc,MAAMyO,iBAAgB,IAJ3B,EAAK5M,MAAQ,GAFoB,E,0CAQnC,WAAU,IAAD,OACP,OACE,uBAAK2C,UAAU,0BAAf,UACE,sBACEA,UAAU,0BACV6N,QAAS,WACP,EAAK4J,eAHT,SAME,uBAAMzX,UAAU,gCAGlB,sBAAKA,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,qBAGF,sBAAK5W,UAAU,kCAAf,SACE,sBAAKA,UAAU,6BAAf,SACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM2L,UAGvB,sBACEnH,UAAU,mBACV6N,QAAS,WACP,EAAK4J,eAEPxX,MAAO,CAAE6X,UAAW,QALtB,SAOE,eAAClB,GAAA,EAAD,2BAEF,sBAAK5W,UAAU,0BAAf,SACE,eAAC,KAAD,CAAQ6X,QAASqT,GAAiB55B,OAAQ,IAAKD,MAAO,e,GAxCxCgP,IAAMC,WCRxBgO,GAAgB,CACpBrE,mBAEasE,gBANS,SAAClR,GACvB,MAAO,CAAE8J,IAAK9J,EAAMwL,QAAQ1B,OAKUmH,GAAzBC,CAAwC4c,ICsLxCC,G,oDApKb,WAAY5vB,GAAsB,IAAD,8BAC/B,cAAMA,IAFR6vB,WACiC,IAqDjChV,WAAa,SAACiV,GACZ,EAAKzsB,SAAS,CAAEysB,YApDhB,EAAKjuB,MAAQ,CACXkuB,WAAY71B,SAASqE,IAAUC,gBAAgB,eAAiB,MAAQ,EACxE8sB,cAAepiB,OAAOC,KAAKwY,GAAYoH,kBAAkBl8B,OACzDmjC,UAAU,EACVC,SAAS,EACTC,UAAU,EACVlU,WAAW,EACX8T,QAAQ,EACRnL,MAAO,IAVsB,E,oEAcjC,SAAiCwE,GAA0B,IAAD,OACpDA,EAAUxpB,OAASrT,KAAKuV,MAAMkuB,aAAe5G,EAAUxpB,MAAM9S,QAC/DP,KAAK+W,SACH,CACE0sB,WAAY5G,EAAUxpB,MAAM9S,SAE9B,WACE0R,IAAU2F,gBACR,aACA,EAAKrC,MAAMkuB,WAAWpQ,eAK1BwJ,EAAUxpB,OAAoC,IAA3BwpB,EAAUxpB,MAAM9S,SAAiBP,KAAK0T,MAAML,OACjErT,KAAK0T,MAAM6R,QAAQrlB,KAAK,iBAEtBF,KAAK0T,MAAMyM,OAAS0c,EAAU1c,MAChCngB,KAAK+W,SAAS,CACZioB,cAAepiB,OAAOC,KAAKwY,GAAYoH,kBAAkBl8B,SAGzDs8B,EAAU1d,YACZnf,KAAKujC,MAAQnuB,YAAW,WACtB,EAAK1B,MAAM8O,kBAAiB,KAC3B,Q,+BAGP,WA/CO,iBAAkB5X,SAgDGqH,IAAUC,gBAAgB,YAClDD,IAAU2F,gBAAgB,UAAW,OAEvC5X,KAAK0T,MAAMoP,mBACX9iB,KAAK0T,MAAMmQ,mBACX7jB,KAAK0T,MAAM6Q,uBACXvkB,KAAK0T,MAAMmwB,0BACX7jC,KAAK0T,MAAM2P,oB,oBAMb,WAAU,IAAD,OACDhQ,EAAUrT,KAAK0T,MAAfL,MACN,OAAIywB,gBAEA,uCACE,oBAAG5rB,UAAU,eAAb,SACE,eAAC4W,GAAA,EAAD,wBAEF,sBAAK5W,UAAU,iBAAf,SACE,gCACE,eAAC4W,GAAA,EAAD,kFAKJ,+BACE,sBACEvsB,IACiD,QAA/C0P,IAAUC,gBAAgB,iBACtB,2BACA,qBAENiU,IAAI,GACJjO,UAAU,oBAOlB,uBACEA,UAAU,UACV6rB,YAAa,YACV,EAAKrwB,MAAM2H,UAAY,EAAKkT,YAAW,GACvCpmB,SAASkN,uBACR,qBACA,GAAW8C,MAAMumB,OAAS,MANhC,UASG1+B,KAAKuV,MAAMiuB,SAAWxjC,KAAK0T,MAAM2H,UAChC,sBAAKnD,UAAU,kBAAf,SACE,uBAAKA,UAAU,YAAf,UACE,eAAC,GAAD,IACA,oBAAGA,UAAU,aAAb,SACE,eAAC4W,GAAA,EAAD,0CAKR,eAAC,GAAD,IACA,eAAC,GAAD,CAAcP,WAAYvuB,KAAKuuB,aAC9BvuB,KAAK0T,MAAMuH,oBAAsB,eAAC,GAAD,IACjCjb,KAAK0T,MAAMsH,kBAAoB,eAAC,GAAD,IAC/Bhb,KAAK0T,MAAMwH,iBAAmB,eAAC,GAAD,IAC9Blb,KAAK0T,MAAMqL,eAAiB,eAAC,GAAD,IAE3B,sBACE7G,UAAU,kBACV6N,QAAS,WACP,EAAKrS,MAAM+Q,kBAAiB,GAC5B,EAAK/Q,MAAMgR,oBAAmB,GAC9B,EAAKhR,MAAMiR,iBAAgB,GAC3B,EAAKjR,MAAMyO,iBAAgB,GAC3B,EAAKzO,MAAMiP,qBAAoB,GAC/B,EAAKjP,MAAMkP,iBAAgB,GAC3B,EAAKlP,MAAM+P,oBAAmB,GAC9B,EAAK/P,MAAM2O,eAAc,IAE3BlK,MACEnY,KAAK0T,MAAMkL,eACX5e,KAAK0T,MAAM8M,UACXxgB,KAAK0T,MAAMuL,WACXjf,KAAK0T,MAAMuH,oBACXjb,KAAK0T,MAAMsH,kBACXhb,KAAK0T,MAAMwH,iBACXlb,KAAK0T,MAAMsL,aACXhf,KAAK0T,MAAMqL,cACP,GACA,CACEwH,QAAS,UAMpBvmB,KAAK0T,MAAMyL,WAAa,eAAC,GAAD,IACxBnf,KAAK0T,MAAMoL,eAAiB,eAAC,GAAD,IAC5B9e,KAAK0T,MAAM+K,aAAe,eAAC,GAAD,IAC1Bze,KAAK0T,MAAM8M,UAAY,eAAC,GAAD,IACvBxgB,KAAK0T,MAAMkL,eAAiB,eAAC,GAAD,IAC5B5e,KAAK0T,MAAMsL,aAAe,eAAC,GAAD,IACxB3L,GAA0B,IAAjBA,EAAM9S,SAAiBP,KAAKuV,MAAMkuB,WAG5C,eAAC,IAAD,UACGpB,GAAOzmB,KAAI,SAACooB,GAAD,OACV,eAAC,IAAD,CACEruB,OAAQ,kBAAM,eAACquB,EAAI1B,UAAL,KAEdx3B,KAAMk5B,EAAIl5B,MADLk5B,EAAIl5B,WANf,eAAC,IAAD,CAAUm0B,GAAG,4B,GAtJD1mB,IAAMC,WCqBtBgO,GAAgB,CACpB1D,oBACAe,oBACAxB,gBACAkC,wBACAsf,wB3FoCK,WACL,OAAO,SAAC7gB,GAENA,EAASH,GADU1G,EAAS8nB,sB2FrC9B5gB,mBACAb,mBACAiC,oBACAC,sBACAC,mBACAxC,kBACAQ,uBACAC,mBACAa,uBAEagD,gBAxCS,SAAClR,GACvB,MAAO,CACLlC,MAAOkC,EAAMwL,QAAQ1N,MACrBkK,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,QACtBD,UAAWhK,EAAM1J,OAAO0T,UACxBnE,UAAW7F,EAAMzD,KAAKsJ,UACtB+E,KAAM5K,EAAM8L,QAAQlB,KACpB9E,SAAU9F,EAAMzD,KAAKuJ,SACrB+E,WAAY7K,EAAM8L,QAAQjB,WAC1BpF,iBAAkBzF,EAAMzD,KAAKkJ,iBAC7BC,mBAAoB1F,EAAMzD,KAAKmJ,mBAC/BC,gBAAiB3F,EAAMzD,KAAKoJ,gBAC5B0D,cAAerJ,EAAMwL,QAAQnC,cAC7BH,YAAalJ,EAAMwL,QAAQtC,YAC3BC,WAAYnJ,EAAMwL,QAAQrC,WAC1BI,cAAevJ,EAAMwL,QAAQjC,cAC7BC,cAAexJ,EAAMwL,QAAQhC,cAC7BE,UAAW1J,EAAMwL,QAAQ9B,UACzBD,YAAazJ,EAAMwL,QAAQ/B,YAC3BG,UAAW5J,EAAMwL,QAAQ5B,UACzBqB,SAAUjL,EAAM+L,WAAWd,YAmBSgG,GAAzBC,CAAwChO,YAAW6qB,KC7D3D,SAASY,GAAiBrzB,GAC/B,MAAO,CAAEhL,KAAM,oBAAqBgb,QAAShQ,GAExC,SAASszB,GAAsBryB,GACpC,OAAO,SAACkR,GASNA,EAASkhB,GAPLxzB,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OAEzCZ,IAAesB,gBAAgBF,EAAK1H,KAAKkH,OACzCZ,IAAesB,gBAAgBF,EAAK1H,KAAK7J,OAE9BmQ,IAAeosB,OAAOhrB,EAAK1H,KAAKyG,c,yBC6BpCuzB,GA/Bb,WACEzzB,EACAkxB,EACAwC,EACA5zB,EACAG,EACA0zB,EACA/mB,EACA1M,EACAgJ,EACA0mB,GACC,yBAvBHn2B,SAuBE,OAtBFuG,aAsBE,OArBFkN,UAqBE,OApBFgkB,aAoBE,OAnBFwC,kBAmBE,OAlBF5zB,UAkBE,OAjBFG,SAiBE,OAhBF0zB,WAgBE,OAfF/mB,WAeE,OAdF1M,gBAcE,OAbFgJ,WAaE,OAZF0mB,SAYE,EACAvgC,KAAKoK,KAAM,IAAI+B,MAAOC,UAAY,GAClCpM,KAAK2Q,QAAUA,EACf3Q,KAAK6d,KAAO,CACVC,MAAM,IAAI3R,MAAO+kB,cACjBnT,OAAO,IAAI5R,MAAOglB,WAAa,EAC/BnT,KAAK,IAAI7R,MAAOilB,WAElBpxB,KAAK6hC,QAAUA,EACf7hC,KAAKqkC,aAAeA,EACpBrkC,KAAKyQ,KAAOA,EACZzQ,KAAK4Q,IAAMA,EACX5Q,KAAKskC,MAAQA,EACbtkC,KAAKud,MAAQA,GAAS,GACtBvd,KAAK6Q,WAAaA,EAClB7Q,KAAK6Z,MAAQA,EACb7Z,KAAKugC,IAAMA,GCuJAgE,G,oDAjLb,WAAY7wB,GAAwB,IAAD,8BACjC,cAAMA,IAORktB,UAAY,SAACL,GACX,EAAKxpB,SAAS,CAAEwpB,SATiB,EA8FnC5Q,YAAc,WACZ,IAAI6U,GAAa,EACb,EAAK9wB,MAAMiM,SACb,EAAKjM,MAAM6J,MAAMjK,SAAQ,SAAC7F,EAAM0F,GAC1B1F,EAAKrD,MAAQ,EAAKsJ,MAAMiM,UAC1B6kB,EAAYrxB,MAGZqxB,GAAa,IACf,EAAK9wB,MAAM6J,MAAM7P,OAAO82B,EAAW,GACnC7yB,IAAYP,QAAQ,QAAS,EAAKsC,MAAM6J,OAAO/G,MAAK,WAClD,EAAK9C,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAM4rB,eAAe,QAC1B,EAAK5rB,MAAM6O,cAAc,uBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAM4rB,eAAe,aAC1B,EAAK5rB,MAAMmQ,mBACX,EAAKnQ,MAAMkQ,cAAc,UAI7B,EAAKlQ,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAM4rB,eAAe,QAC1B,EAAK5rB,MAAMkQ,cAAc,MAnH3B,EAAKrO,MAAQ,CAAEgrB,IAAK,IAFa,E,qDAInC,WACE,IAAIkE,EAAgBt8B,SAASmR,cAAc,eAC3CmrB,GAAYA,EAASjb,U,wBAKvB,WAAc,IAAD,OACPjM,EAASpV,SAASmR,cAAc,eACjC/F,MAEH,GAAIvT,KAAK0T,MAAMiM,QAEb3f,KAAK0T,MAAM6J,MAAMjK,SAAQ,SAAC7F,GACpBA,EAAKrD,MAAQ,EAAKsJ,MAAMiM,UAC1BlS,EAAK8P,MAAQA,EACb9P,EAAK8yB,IAAM,EAAKhrB,MAAMgrB,QAG1B5uB,IAAYP,QAAQ,QAASpR,KAAK0T,MAAM6J,OAAO/G,MAAK,WAClD,EAAK9C,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMmQ,mBACX,EAAKnQ,MAAM4rB,eAAe,aAC1B,EAAK5rB,MAAMkQ,cAAc,WAEtB,CAAC,IAAD,EAEDjT,EAAU3Q,KAAK0T,MAAM4H,YAAYlR,IAC/Bs6B,EAAkB1kC,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBACrDE,EAAcF,EAAgB5Z,MAAMtY,KACpC6xB,EAAeK,EAAgB5Z,MAAM3X,MACrC0uB,EAAU,kBACVpiB,EAAiBzf,KAAK0T,MAAMgM,gBAAgBlS,QAC9C,SAACC,GAAD,OAAeA,EAAK+E,KAAK/G,MAAM,KAAK,KAAOm5B,KAC3C,GACEnlB,IACFoiB,EAAUpiB,EAAe1G,MAAMpL,KAAK,MAEtC,IAAMiD,EAAMF,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KAAKwG,IAC1DoI,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,IAAK2P,EAAQ,OACb,IAAIvE,EAAMuE,EAAOC,gBACjB,IAAKxE,EACH,OAEF,IAAIowB,EAAYj6B,OAAOk6B,MACpBC,aAAa/rB,GACbgsB,oBAAoBvwB,EAAIZ,MAAM,GAC7BywB,EAAQpzB,KAAKG,UAAUwzB,GACvBp0B,EAAI,UAAGgE,EAAIswB,sBAAP,aAAG,EAAoB1R,WAC/B,IAAK5iB,EACH,OAMFA,GADAA,GADAA,GADAA,GADAA,EAAOA,EAAKlG,QAAQ,QAAS,KACjBA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,IAC3B,IAAIsG,EAAaH,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KAAKyG,WAClD,EAEAgJ,EAAQ7Z,KAAK0T,MAAMmG,OAAS,EAC5B0mB,EAAMvgC,KAAKuV,MAAMgrB,IACjBriB,EAAO,IAAIkmB,GACbzzB,EACAkxB,EACAwC,EACA5zB,EACAG,EACA0zB,EACA/mB,EACA1M,EACAgJ,EACA0mB,GAEE9iB,EAAUzd,KAAK0T,MAAM6J,MACzBE,EAAQvd,KAAKge,GACbvM,IAAYP,QAAQ,QAASqM,GAASjH,MAAK,WACzC,EAAK9C,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMmQ,mBACX,EAAKnQ,MAAM4rB,eAAe,mB,oBA+BhC,WAAU,IACJphB,EADG,OAEHle,KAAK0T,MAAMiM,SACb3f,KAAK0T,MAAM6J,MAAMjK,SAAQ,SAAC7F,GACpBA,EAAKrD,MAAQ,EAAKsJ,MAAMiM,UAC1BzB,EAAOzQ,MAgDb,OAzCI,uBAAKyK,UAAU,cAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,2BAAUA,UAAU,iBAEtB,sBACEA,UAAU,YACVC,MAAO,CAAE8N,SAAU,WAAYyX,OAAQ,MAAOl0B,OAAQ,QAFxD,SAIE,eAAC,GAAD,CAEIo3B,UAAW,EAAKA,UAChBL,IAAK,EAAK7sB,MAAMiM,SAAWzB,EAAOA,EAAKqiB,IAAM,OAKnD,uBAAKroB,UAAU,wBAAf,UACE,uBACEA,UAAU,gBACV6N,QAAS,WACP,EAAK4J,eAHT,SAMG,EAAKjc,MAAMiM,QACV,eAACmP,GAAA,EAAD,qBAEA,eAACA,GAAA,EAAD,uBAGJ,uBACE5W,UAAU,iBACV6N,QAAS,WACP,EAAKkf,cAHT,SAME,eAACnW,GAAA,EAAD,kC,GAzKUvW,IAAMC,WCUxBgO,GAAgB,CACpBhE,mBACAD,gBACA8c,kBACAC,kBACA1b,iBACAC,qBAEa4C,gBAlBS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBiC,MAAOhI,EAAM1J,OAAO0R,MACpB1D,MAAOtE,EAAM1J,OAAOgO,MACpB6F,gBAAiBnK,EAAM1J,OAAO6T,gBAC9BC,QAASpK,EAAM1J,OAAO8T,WAaxB6G,GAFaC,CAGbC,eAAkB6d,KCmCLW,I,kEA/Db,WAAYxxB,GAAoB,IAAD,8BAC7B,cAAMA,IAKRyxB,oBAAsB,WACpB,EAAKpuB,SAAS,CAAEquB,QAAS,EAAK7vB,MAAM6vB,UALpC,EAAK7vB,MAAQ,CACX6vB,QAAQ,GAHmB,E,0CAS/B,WAAU,IAAD,OAuCP,OACE,uBAAKltB,UAAU,yBAAf,WACIlY,KAAKuV,MAAM6vB,QAlBR,CAAC,UAAW,UAAW,UAAW,WAAWxpB,KAAI,SAACnO,EAAM0F,GAC7D,OACE,sBACE+E,UAAU,eACVC,MAAO,CACLkjB,gBAAiB5tB,EACjB43B,OAAO,GAAD,OAAK,EAAK3xB,MAAMmG,QAAU1G,EAAQ,GAAK,QAG/C4S,QAAS,WACP,EAAKrS,MAAM4xB,YAAYnyB,KAFpB1F,MAWT,uBACEyK,UAAU,6BACV6N,QAAS,WACP,EAAKof,yBAGRnlC,KAAKuV,MAAM6vB,QA9CP,CAAC,UAAW,UAAW,UAAW,WAAWxpB,KAAI,SAACnO,EAAM0F,GAC7D,OACE,sBACE+E,UAAU,cACVC,MAAO,CACLktB,OAAO,GAAD,OAAK,EAAK3xB,MAAMmG,QAAU1G,EAAQ,EAAI,GAAK,QAGnD4S,QAAS,WACP,EAAKrS,MAAM4xB,YAAYnyB,EAAQ,IAPnC,SAUE,sBACE+E,UAAU,YACVC,MAAO,CAAEotB,aAAa,aAAD,OAAe93B,OAPjCA,a,GAnBS8K,IAAMC,YCQ1BgO,GAAgB,CACpB8e,Y/FHK,SAAqBzrB,GAC1B,MAAO,CAAEhU,KAAM,eAAgBgb,QAAShH,I+FGxC4lB,oBAEahZ,gBAXS,SAAClR,GACvB,MAAO,CACLsE,MAAOtE,EAAM1J,OAAOgO,MACpB0B,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,eAOYkL,GAAzBC,CAAwC+e,ICjB1CC,GAAY,CACvB,CAAEtgC,KAAM,OAAQkH,MAAO,aAAc+Y,KAAM,QAC3C,CAAEjgB,KAAM,SAAUkH,MAAO,YAAa+Y,KAAM,WAC5C,CAAEjgB,KAAM,cAAekH,MAAO,YAAa+Y,KAAM,eACjD,CAAEjgB,KAAM,OAAQkH,MAAO,OAAQ+Y,KAAM,QACrC,CAAEjgB,KAAM,cAAekH,MAAO,qBAAsB+Y,KAAM,eAC1D,CAAEjgB,KAAM,SAAUkH,MAAO,yBAA0B+Y,KAAM,UACzD,CAAEjgB,KAAM,UAAWkH,MAAO,iBAAkB+Y,KAAM,YCO9C2f,GAAe,WACnB,IAAI/rB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,IAAIixB,EAAMjxB,EAAIswB,eACd,GAAKW,EAAL,CACA,IAAIj1B,EAAOi1B,EAAIrS,WAEf,OADA5iB,EAAOA,GAAQA,EAAK9C,WA+NPg4B,G,8MA1NbC,WAAa,WACX,EAAKlyB,MAAM6rB,uBAAsB,GACjC,EAAK7rB,MAAM4rB,eAAe,QAC1B,EAAKuG,c,EAEPA,WAAa,WACX,IAAIC,EAAiB39B,SAASmR,cAAc,yBACxCysB,EAAI,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAW3tB,MAAMsc,KACxBuR,EAAI,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAW3tB,MAAM2R,IAC5Bic,EAAOn4B,SAASm4B,EAAKn6B,OAAO,EAAGm6B,EAAKxlC,OAAS,IAC7CylC,EAAOp4B,SAASo4B,EAAKp6B,OAAO,EAAGo6B,EAAKzlC,OAAS,IAC7C,IAAI0lC,EAAY,EAAKvyB,MAAM6H,YAAYopB,UAAUuB,QAAQ38B,MAAQ,IAC7Dw8B,EAAOE,GACTH,EAAUvsB,aAAa,QAAvB,eAAwC0sB,EAAxC,kBAA2DD,EAA3D,Q,EAGJG,WAAa,WACX,IAAIntB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EACMA,EAAI2xB,YAAY,QAAQ,GAG/Bp4B,QAAQC,IAAI,WADZD,QAAQC,IAAI,oCAEhB,EAAKyF,MAAM2rB,gBAAe,GAC1B5qB,EAAIswB,eAAgBsB,QACpB,EAAK3yB,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,K,EAE9B8jB,YAAc,WACZ,EAAK5yB,MAAM4rB,eAAe,SAC1B,EAAK5rB,MAAM6yB,mBAAmBxB,MAAkB,IAChD,EAAKc,c,EAEPW,aAAe,WAAO,IAAD,EACf71B,EAAU,EAAK+C,MAAM4H,YAAYlR,IAC/Bs6B,EAAkB,EAAKhxB,MAAM6H,YAAYopB,UAAUD,kBACrDE,EAAcF,EAAgB5Z,MAAMtY,KACpC6xB,EAAeK,EAAgB5Z,MAAM3X,MACrC0uB,EAAU,kBACVpiB,EAAiB,EAAK/L,MAAMgM,gBAAgBlS,QAC9C,SAACC,GAAD,OAAeA,EAAK+E,KAAK/G,MAAM,KAAK,KAAOm5B,KAC3C,GACEnlB,IACFoiB,EAAUpiB,EAAe1G,MAAMpL,KAAK,MAEtC,IAAMiD,EAAMF,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKwG,IAE1DC,EAAaH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EACAgJ,EAAQ,EAAKnG,MAAMmG,MAEnBb,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,IAAIowB,EAAYj6B,OAAOk6B,MACpBC,aAAa/rB,GACbgsB,oBAAoBvwB,EAAIZ,MAAM,GAC7BywB,EAAQpzB,KAAKG,UAAUwzB,GACvBp0B,EAAI,UAAGgE,EAAIswB,sBAAP,aAAG,EAAoB1R,WAC/B,GAAK5iB,EAAL,CAKAA,GADAA,GADAA,GADAA,GADAA,EAAOA,EAAKlG,QAAQ,QAAS,KACjBA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,IAC3B,IAAImiB,EAAS,IAAI0X,GACfzzB,EACAkxB,EACAwC,EACA5zB,EACAG,EACA0zB,EAtBU,GAwBVzzB,EACAgJ,EACA,IAEE4D,EAAU,EAAK/J,MAAM6J,MACzBE,EAAQvd,KAAKwsB,GACb/a,IAAYP,QAAQ,QAASqM,GAASjH,MAAK,WACzC,EAAK9C,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAMmQ,mBACX,EAAKnQ,MAAM4rB,eAAe,oB,EAG9B3Z,WAAa,SAAC7O,GACZtO,cACIoC,OAAOC,QAAQ,YAAY+a,MAAMC,aAAa/O,GAC9ClM,OAAO6H,KAAKqE,I,EAElB2vB,qBAAuB,WACrB,OAAQx0B,IAAUC,gBAAgB,iBAChC,IAAK,SACH,EAAKyT,WAAW,mCAAqCof,MACrD,MACF,IAAK,QACH,EAAKpf,WAAW,8BAAgCof,MAChD,MACF,IAAK,OACH,EAAKpf,WAAW,iCAAmCof,MACnD,MACF,IAAK,aACH,EAAKpf,WAAW,6BAA+Bof,MAC/C,MACF,IAAK,SACH,EAAKpf,WAAW,mCAAqCof,MACrD,MACF,IAAK,QACH,EAAKpf,WAAW,qCAAuCof,MACvD,MACF,QACE,EAAKpf,WACoB,UAAvBjT,UAAUrL,SACN,8BAAgC09B,KAChC,mCAAqCA,Q,EAKjD2B,iBAAmB,WACjB,IAAIC,EAAYx+B,SAASmR,cAAc,eACjCstB,EAAa,IAAIC,WAAW,QAAS,CACzCxlC,KAAMuJ,OACNk8B,SAAS,EACTC,YAAY,IAEdJ,EAAWK,cAAcJ,GACzB,IAAMK,EAAa,IAAIJ,WAAW,QAAS,CACzCxlC,KAAMuJ,OACNk8B,SAAS,EACTC,YAAY,IAEV/e,EAAiB7f,SAASmR,cAAc,sBAC5C0O,EAAUgf,cAAcC,GACxB,IAAIC,EAAa/+B,SAASmR,cAAc,uBAC9B,OAAV4tB,QAAU,IAAVA,KAAYF,cAAcJ,GAC1B5e,EAAUzU,MAAQwxB,MAAkB,GACpC,IAAMoC,EAAgB,IAAIC,cAAc,UAAW,CACjDN,SAAS,EACTC,YAAY,EACZtf,QAAS,KAEXO,EAAUgf,cAAcG,I,EAG1BE,YAAc,WACZ,IAAIC,EAAM,IAAIC,yBACdD,EAAI72B,KAAOs0B,MAAkB,GAC7BuC,EAAIE,MAAQ58B,OAAO68B,gBAAgBC,YAAY,GAC/C98B,OAAO68B,gBAAgBE,MAAML,I,4CAE/B,WAAU,IAAD,OAwDP,OArDI,uCACE,sBAAKpvB,UAAU,YAAf,SACGutB,GAAU7pB,KAAI,SAACnO,EAAM0F,GACpB,OACE,sBAEE+E,UAAWzK,EAAKtI,KAAO,UACvB4gB,QAAS,WACP,OAAQ5S,GACN,KAAK,EACH,EAAKyyB,aACL,MACF,KAAK,EACH,EAAKY,eACL,MACF,KAAK,EACH,EAAKF,cACL,MACF,KAAK,EACH,EAAKH,aACL,MACF,KAAK,EACH,EAAKO,mBACL,MACF,KAAK,EACH,EAAKD,uBACL,MACF,KAAK,EACH,EAAKY,gBAxBb,SAgCE,eAAC,WAAD,CACEh7B,MAAO,EAAKqH,MAAMsS,EAAEvY,EAAKpB,OACzB4Z,SAAS,MACTC,QAAQ,aAHV,SAKE,uBACEhO,UAAS,eAAUzK,EAAK2X,KAAf,YAAuB3X,EAAKtI,KAA5B,cArCRsI,EAAKtI,WA4ClB,eAAC,GAAD,W,GAnNgBoT,IAAMC,WCC1BgO,GAAgB,CACpBhE,mBACAD,gBACA8c,kBACAC,kBACAzb,oBACA0iB,mBlGzBK,SAA4B3mB,GACjC,MAAO,CAAE/Z,KAAM,uBAAwBgb,QAASjB,IkGyBhD2f,0BAEa9Y,gBAnBS,SAAClR,GACvB,MAAO,CACL+F,YAAa/F,EAAMzD,KAAKwJ,YACxBC,YAAahG,EAAMzD,KAAKyJ,YACxBuE,UAAWvK,EAAM2L,SAASpB,UAC1BvC,MAAOhI,EAAM1J,OAAO0R,MACpB1D,MAAOtE,EAAM1J,OAAOgO,MACpB6F,gBAAiBnK,EAAM1J,OAAO6T,mBAchC8G,GAFaC,CAGbC,eAAkBif,K,8BCWLiC,G,oDA1Cb,WAAYl0B,GAAyB,IAAD,8BAClC,cAAMA,IACD6B,MAAQ,CACXsyB,eAAgB,IAHgB,E,qDAMpC,WAAqB,IAAD,OACdntB,EAAMzI,IAAUC,gBAAgB,QAExB,OAARwI,IACFA,EAAM,MAER,IAAIkF,EAAe5f,KAAK0T,MAAMkM,aAAarV,QAAQ,iBAAkB,IAEjEu9B,EAAS3/B,SAASC,cAAc,UACpC0/B,EAAOjiC,KAAO,kBACdiiC,EAAOvlC,IAAP,gEAAsEqd,EAAtE,yBACElF,GAAO,KADT,yDAEiD5H,KAE/C,oBAAsB8M,EAAtB,kCAJF,4BAMAzX,SAASqR,KAAKC,YAAYquB,GACzBl9B,OAAem9B,eAAiB,SAACzkC,GAChC,EAAKyT,SAAS,CACZ8wB,eAAgBvkC,EAAI0kC,aAAe1kC,EAAI0kC,aAAa,GAAGC,IAAM,0B,oBAKnE,WAAU,IAAD,OASP,OANI,uBAAK/vB,UAAU,kBAAf,UACE,sBAAKA,UAAU,oBAAf,SAAoC,EAAKxE,MAAMkM,eAC/C,sBAAK1H,UAAU,iBAAf,SAAiC,EAAK3C,MAAMsyB,wB,GApC7BtvB,IAAMC,WCMzBgO,GAAgB,CACpB6Y,kBACAC,mBAEa7Y,gBATS,SAAClR,GACvB,MAAO,CACLqK,aAAcrK,EAAM1J,OAAO+T,gBAS7B4G,GAFaC,CAGbC,eAAkB6d,KCqSL2D,G,oDApSb,WAAYx0B,GAAwB,IAAD,8BACjC,cAAMA,IAVRy0B,iBASmC,IARnC5E,WAQmC,IAPnCn5B,SAOmC,IANnC+V,UAMmC,IALnCioB,cAKmC,IAJnCC,iBAImC,IAHnCC,cAGmC,IAFnCv7B,cAEmC,IADnCw7B,UACmC,IA4CnCC,eAAiB,WAGf,IAAIxvB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,EAAK0zB,YAAcv9B,OAAOk6B,MAAM2D,kBAAkBh0B,GACpC,CACZ,UACA,UACA,UACA,UACA,SACA,SACA,SACA,UAEMnB,SAAQ,SAAC7F,GACf,IAAImqB,EAAS,CACX8Q,kBAAkB,EAClBC,eAAgB,OAChBC,kBAAmB,CACjBC,QAAS,SAAC98B,GACR,IAAIiN,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,EAAKf,MAAM4rB,eAAe,QAC1B,IAAIoG,EAAMjxB,EAAIswB,eACd,GAAKW,EAAL,CACA,IAAIpB,EAAQoB,EAAIoD,WAAW,GAC3B,EAAK/xB,SAAS,CAAEwxB,KAAMjE,EAAMyE,0BAA2B,WACrD,EAAKC,WACL,EAAKC,uBAAuBl9B,EAAMm9B,cAAcC,QAAQ/+B,KACxD2B,EAAMq9B,0BAIZC,gBAAiB,SAACC,GAChBA,EAAQH,QAAQ/+B,IAAM,EAAKA,MAG3Bm/B,EAAU3+B,OAAOk6B,MAAM0E,mBAAmB/7B,EAAMmqB,GACpD,EAAKuQ,YAAYsB,gBAAgBF,SAxFF,EA2FnCN,uBAAyB,SAAC7+B,GACxB,IAAI+vB,EAAkChyB,SAASmR,cAAc,eACzD4E,EAAO,EAAKxK,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,OAAUA,EAAKrD,MAAQA,KAAK,GAC3D8T,GAAQA,EAAKX,QACf4c,EAAQ5mB,MAAQ2K,EAAKX,OAEjB,OAAN4c,QAAM,IAANA,KAAQ3Q,QACR,EAAK9V,MAAMkQ,cAAcxZ,IAlGQ,EAoGnCm3B,iBAAmB,SAACC,GAClB,EAAKzqB,SAAS,CAAEyqB,eArGiB,EAuGnCwH,SAAW,WACT,IAAIT,EAAO,EAAKhzB,MAAMgzB,KACtB,GAAKA,EAAL,CACA,EAAK70B,MAAM6rB,uBAAsB,GAEjC,IAcIyG,EAbA9J,EAC0C,WAA5CjqB,IAAUC,gBAAgB,cACtBq2B,EAAKrM,EACuC,eAA5CjqB,IAAUC,gBAAgB,cAC1Bq2B,EAAK1e,MACL0e,EAAKrM,EAAI,EAAKxoB,MAAM6H,YAAYopB,UAAUuB,QAAQ38B,MACpDmgC,EAAInB,EAAKmB,EAAI,EAAKh2B,MAAM6H,YAAYopB,UAAUuB,QAAQ18B,OACtDu8B,EAAO7J,EAAIqM,EAAKh/B,MAAQ,EAAI,GAE5B08B,EACsB,SAAxB,EAAKvyB,MAAMsM,UAA+C,UAAxB,EAAKtM,MAAMsM,SACzC,EAAKtM,MAAM6H,YAAYopB,UAAUuB,QAAQ38B,MAAQ,IACjD,EAAKmK,MAAM6H,YAAYopB,UAAUuB,QAAQ38B,MAAQ,IAGnDmgC,EAhBS,KAiBX,EAAKh2B,MAAM6rB,uBAAsB,GACjCyG,EAAO0D,EAAI,IAEX1D,EAAO0D,EAAIlgC,IAAa,GAE1Bu8B,EAAOA,EAAOE,EAAYA,EAAYF,EACtC,EAAKryB,MAAM2rB,gBAAe,GACVl3B,SAASmR,cAAc,yBAE5BC,aAAa,QAAxB,eAAyCwsB,EAAzC,kBAAuDC,EAAvD,OACA,EAAKjvB,SAAS,CAAEwxB,KAAM,SAvIW,EA0InCoB,mBAAqB,WACnB,IAAIC,EAAoB,EAAKl2B,MAAM6J,MACnC,GAAKqsB,GACA,EAAKl2B,MAAMixB,WAAc,EAAKjxB,MAAMixB,UAAUD,gBAAnD,CAGA,IAAMA,EAAkB,EAAKhxB,MAAMixB,UAAUD,kBAC7C,GAAKA,GAAoBA,EAAgB5Z,MAAzC,CACA,IAAIuZ,EAAeK,EAAgB5Z,MAAM3X,MACrC02B,EAAwBD,EAAap8B,QACvC,SAACC,GAAD,OAAeA,EAAK42B,eAAiBA,KAEnCrrB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACjDygC,EAAO9wB,EAAOlF,eAAiBkF,EAAOC,gBAAiB8wB,YAC3D,EAAK5B,aAAe,EAAKA,YAAY6B,sBAErC,IAAIC,EAAU,CACZ,UACA,UACA,UACA,UACA,SACA,SACA,SACA,UAEFJ,GACEA,EAAsBv2B,SAAQ,SAAC7F,GAG7B,GAFA,EAAKrD,IAAMqD,EAAKrD,IAEZqD,EAAKkD,UAAY,EAAK+C,MAAM4H,YAAYlR,IAAK,CAC/C,IACE,IAAIo2B,EAAOtvB,KAAKC,MAAM1D,EAAK62B,OAC3B9D,EAAO,CAACA,GACR51B,OAAOk6B,MACJC,aAAa/rB,GACbkxB,uBAAuBlxB,EAAOC,gBAAiBunB,GAClD,MAAOl+B,GAIP,YAHA0L,QAAQm8B,KACN,4DAIJ,EAAKhC,YAAYiC,mBAAmBH,EAAQx8B,EAAKoM,YAGlDiwB,GAASA,EAAK/E,gBACnB+E,EAAK/E,eAAgBsB,WAzLY,EA8LnCgE,SAAW,WACT,EAAKtzB,SAAS,CAAEyqB,UAAW,KAC3B,IACI/sB,EADStM,SAASkB,qBAAqB,UAAU,GACpC4P,gBACjB,GAAKxE,EAAL,CACA,IAAIixB,EAAMjxB,EAAIswB,eAUd,GATA,EAAKrxB,MAAM6rB,uBAAsB,GAE7B,EAAK7rB,MAAMqM,aACb,EAAKrM,MAAM4rB,eAAe,QAC1B,EAAK5rB,MAAM2rB,gBAAe,GAC1B,EAAK3rB,MAAMkQ,cAAc,KAIvB8hB,EAAKnlB,YAIP,OAHA,EAAK7M,MAAMqM,YAAc,EAAKrM,MAAM2rB,gBAAe,GACnD,EAAK3rB,MAAM4rB,eAAe,aAC1B,EAAK5rB,MAAMkQ,cAAc,IAG3B,EAAKolB,WACL,EAAKt1B,MAAM4rB,eAAe,UAlN1B,EAAK8I,UAAW,EAChB,EAAKC,aAAc,EACnB,EAAKF,YAAc,KACnB,EAAKhoB,KAAO,GACZ,EAAK5K,MAAQ,CACXisB,UAAW,GACX8G,SAAU,EAAK50B,MAAM40B,SACrBv7B,SAAU,EAAK2G,MAAM3G,SACrBw7B,KAAM,EAAK70B,MAAM60B,MAVc,E,qDAcnC,WAAqB,IAAD,OAClBvoC,KAAK0T,MAAMixB,UAAUpY,GAAG,YAAY,WAClC,IAAI3qB,SAAc,SAACC,EAASC,GAC1B,EAAK0mC,iBACL3mC,OACC2U,MAAK,WACN,EAAKmzB,wBAEP,IAAI3wB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACZxE,GACLA,EAAIiD,iBAAiB,YAAa,EAAK2yB,gB,uCAG3C,SAA0BxN,GAA4B,IAAD,OAC/CA,EAAUyL,WAAatoC,KAAK0T,MAAM40B,UACpCtoC,KAAK+W,SACH,CACEuxB,SAAUzL,EAAUyL,SACpBv7B,SAAU8vB,EAAU9vB,SACpBw7B,KAAM1L,EAAU0L,OAElB,WACE,EAAK8B,gB,6BAiLb,WAAmB,IAAD,OACZrxB,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CACA,IAAIoF,EAAQ7Z,KAAK0T,MAAMmG,MAWlB7Z,KAAKmoC,cACVnoC,KAAKmoC,YAAYiC,mBAXH,CACZ,UACA,UACA,UACA,UACA,SACA,SACA,SACA,UAG0CvwB,IAC5C7Z,KAAK0T,MAAM4rB,eAAe,QAC1Bt/B,KAAK0T,MAAM2rB,gBAAe,GAC1B5qB,EAAIswB,eAAgBsB,QACpBrmC,KAAK0T,MAAM4rB,eAAe,QAC1Bt/B,KAAKmoC,aAAenoC,KAAKmoC,YAAY6B,sBACrC,IAAIpoC,SAAc,SAACC,GACjB,EAAK2mC,iBACL3mC,OACC2U,MAAK,WACN,EAAKmzB,6B,oBAGT,WAAU,IAAD,OACqB,cAAxB3pC,KAAK0T,MAAMsM,UACbhgB,KAAKsqC,kBAEP,IAAMC,EAAa,CACjBjC,SAAUtoC,KAAK0T,MAAM40B,SACrBv7B,SAAU/M,KAAK0T,MAAM3G,SACrBw7B,KAAMvoC,KAAK0T,MAAM60B,MAEnB,OACE,+BACE,uBACErwB,UAAU,uBACVC,MAAOnY,KAAK0T,MAAMqM,WAAa,GAAK,CAAEwG,QAAS,QAFjD,UAIE,uBAAKrO,UAAU,iBAAf,UAC2B,SAAxBlY,KAAK0T,MAAMsM,SACV,eAAC,GAAD,eAAiBuqB,IACS,SAAxBvqC,KAAK0T,MAAMsM,SACb,eAAC,GAAD,eAAeuqB,IACW,UAAxBvqC,KAAK0T,MAAMsM,SACb,eAAC,GAAD,eAAgBuqB,IACd,KACJ,uBACEryB,UAAU,yBACV6N,QAAS,WACP,EAAKrS,MAAM2rB,gBAAe,IAE5BlnB,MAAOnY,KAAK0T,MAAMuM,kBAAoB,CAAE6J,IAAK,SAAY,QAG5D9pB,KAAK0T,MAAMuM,kBACV,uBACE/H,UAAU,oCACVC,MAC0B,cAAxBnY,KAAK0T,MAAMsM,SAA2B,CAAE0d,OAAQ,SAAY,KAIhE,uBAAMxlB,UAAU,iD,GAtSJK,IAAMC,WCiBxBgO,GAAgB,CACpBiZ,mBACAJ,kBACAC,kBACAC,yBACA/c,mBACAD,gBACAqB,kBAEa6C,gBAtBS,SAAClR,GACvB,MAAO,CACLiK,QAASjK,EAAM1J,OAAO2T,QACtBjC,MAAOhI,EAAM1J,OAAO0R,MACpBoC,QAASpK,EAAM1J,OAAO8T,QACtBpE,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxByE,WAAYxK,EAAM2L,SAASnB,WAC3BC,SAAUzK,EAAM2L,SAASlB,SACzBnG,MAAOtE,EAAM1J,OAAOgO,MACpBoG,kBAAmB1K,EAAM2L,SAASjB,qBAYEuG,GAAzBC,CAAwCyhB,I,SCoLxCsC,I,2DA9Mb,WAAY92B,GAA0B,IAAD,8BACnC,cAAMA,IAsBR+2B,UAAY,SAAC1+B,GAOX,IAAIyG,EAaJ,GAnBI,EAAKkB,MAAM+O,SACb,EAAK/O,MAAMiE,kBAAkB,QAC7B,EAAKjE,MAAMiE,kBAAkB,SAC7B,EAAKjE,MAAMiE,kBAAkB,OAC7B,EAAKjE,MAAMiE,kBAAkB,WAI7B5L,EAAMvJ,QACNuJ,EAAMvJ,OAAOkoC,YACb3+B,EAAMvJ,OAAOkoC,WAAWA,aAExBl4B,EACEzG,EAAMvJ,OAAOD,KACbwJ,EAAMvJ,OAAOgQ,MACbzG,EAAMvJ,OAAOkoC,WAAWl4B,MACxBzG,EAAMvJ,OAAOkoC,WAAWA,WAAWl4B,MACnC,IAGFhK,eACAgK,IAC2B,IAA3BA,EAAK3I,QAAQ,WACc,IAA3B2I,EAAK3I,QAAQ,WACiB,IAA9B2I,EAAK3I,QAAQ,cACa,IAA1B2I,EAAK3I,QAAQ,UACyB,IAAtC2I,EAAK3I,QAAQ,sBACa,IAA1B2I,EAAK3I,QAAQ,QACb,CACAkC,EAAM4sB,iBACN,IAAQ/S,EAAUhb,OAAOC,QAAQ,YAAzB+a,MACWhb,OAAOC,QAAQ,YAAYM,OAAtCgvB,OAELwQ,eAAe,CACd9kC,KAAM,WACNwG,MAAO,EAAKqH,MAAMsS,EAAE,wBACpB5G,QAAS,EAAK1L,MAAMsS,EAAE,4CACtB4kB,QAAS,CAAC,EAAKl3B,MAAMsS,EAAE,WAAY,EAAKtS,MAAMsS,EAAE,aAEjDxP,MAAK,SAAC/T,GACe,IAApBA,EAAOmqB,UAAkBhH,EAAMC,aAAarT,MAGlD,GAAKzG,EAAMvJ,OAAOD,IAAlB,CAGI,EAAKgT,MAAMs1B,aACb,EAAK9zB,SAAS,CACZ8zB,aAAa,EACbC,UAAW,EACXC,YAAa,EACbC,WAAY,eAGhBj/B,EAAM4sB,iBACN,IAGIsS,EAAM,IAAIC,MACdD,EAAIvzB,iBAAiB,QAAQ,WAJL,IAACyzB,IAMrBnrC,KAAKorC,aAAeprC,KAAKqrC,cAAgB,EAAI,aAAe,WAL9D,EAAKt0B,SAAS,CAAEi0B,WAAYG,OAQ9BF,EAAI1oC,IAAMwJ,EAAMvJ,OAAOD,IACvB,IAAI+oC,EAAiCnjC,SAASmR,cAAc,UACxDgyB,IACFA,EAAM/oC,IAAMwJ,EAAMvJ,OAAOD,IACzB,EAAKwU,SAAS,CAAE8zB,aAAa,OA5FI,EA+FrCU,UAAY,SAACx/B,GAEX,GADAA,EAAM4sB,iBACF5sB,EAAMvJ,OAAOD,IAAK,CACpB,IAAI+oC,EAAiCnjC,SAASmR,cAAc,UACxDgyB,IAAOA,EAAM/oC,IAAM,IAEzB,EAAKwU,SAAS,CAAE8zB,aAAa,KArGM,EAuGrCW,aAAe,WACb,IAAIF,EAAanjC,SAASmR,cAAc,UACd,UAAtBgyB,EAAMnzB,MAAM5O,OAA4C,UAAvB+hC,EAAMnzB,MAAM3O,QACjD,EAAKuN,SAAS,CAAE+zB,UAAW,EAAKv1B,MAAMu1B,UAAY,IAAK,WACvB,eAA1B,EAAKv1B,MAAMy1B,WACbM,EAAMnzB,MAAM5O,MAAZ,UAAuB,GAA4B,GAAvB,EAAKgM,MAAMu1B,UAAvC,MAEAQ,EAAMnzB,MAAM3O,OAAZ,UAAwB,GAAK,GAAK,EAAK+L,MAAMu1B,UAA7C,UA9G+B,EAkHrCW,cAAgB,WACd,IAAIH,EAAanjC,SAASmR,cAAc,UACd,SAAtBgyB,EAAMnzB,MAAM5O,OAA2C,SAAvB+hC,EAAMnzB,MAAM3O,QAChD,EAAKuN,SAAS,CAAE+zB,UAAW,EAAKv1B,MAAMu1B,UAAY,IAAK,WACvB,eAA1B,EAAKv1B,MAAMy1B,WACbM,EAAMnzB,MAAM5O,MAAZ,UAAuB,GAA4B,GAAvB,EAAKgM,MAAMu1B,UAAvC,MAEAQ,EAAMnzB,MAAM3O,OAAZ,UAAwB,GAAK,GAAK,EAAK+L,MAAMu1B,UAA7C,UAzH+B,EA6HrCY,WA7HqC,sBA6HxB,8BAAApiC,EAAA,6DACPgiC,EAAanjC,SAASmR,cAAc,UAD7B,SAEM+R,MAAMigB,EAAM/oC,KAAKiU,MAAK,SAAC8U,GAAD,OAAOA,EAAErpB,UAFrC,OAEPA,EAFO,OAGXsxB,KAAUC,OAAOvxB,EAAjB,WAA0B,IAAIkK,MAAOU,uBAH1B,2CA7HwB,EAkIrC8+B,YAAc,WACZ,IAAIL,EAAanjC,SAASmR,cAAc,UACxC,EAAKvC,SAAS,CAAEg0B,YAAa,EAAKx1B,MAAMw1B,YAAc,IAAK,WACzDO,EAAMnzB,MAAMgjB,UAAZ,iBAA2D,GAAzB,EAAK5lB,MAAMw1B,YAA7C,YArIiC,EAwIrCa,mBAAqB,WACnB,IAAIN,EAAanjC,SAASmR,cAAc,UACxC,EAAKvC,SAAS,CAAEg0B,YAAa,EAAKx1B,MAAMw1B,YAAc,IAAK,WACzDO,EAAMnzB,MAAMgjB,UAAZ,iBAA2D,GAAzB,EAAK5lB,MAAMw1B,YAA7C,YAzIF,EAAKx1B,MAAQ,CACXs1B,aAAa,EACbG,WAAY,aACZF,UAAW,EACXC,YAAa,GANoB,E,qDAUrC,WAAqB,IAAD,OAClB/qC,KAAK0T,MAAMixB,UAAUpY,GAAG,YAAY,WAClC,IAAIvT,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACZxE,IAGLo3B,KAAUC,gBACVr3B,EAAIiD,iBAAiB,QAAS,EAAK+yB,WAAW,U,oBA2HlD,WAAU,IAAD,OACP,OACE,uBACEvyB,UAAU,gBACVC,MAAOnY,KAAKuV,MAAMs1B,YAAc,GAAK,CAAEtkB,QAAS,QAFlD,UAIE,sBACErO,UAAU,mBACVC,MACEnY,KAAKuV,MAAMs1B,YACP,CAAExP,gBAAiB,sBACnB,GAENtV,QAAS,SAACha,GACR,EAAKw/B,UAAUx/B,MAGnB,sBACExJ,IAAI,GACJ4jB,IAAI,GACJjO,UAAU,QACVC,MAC4B,eAA1BnY,KAAKuV,MAAMy1B,WACP,CAAEzhC,MAAO,QACT,CAAEC,OAAQ,UAGlB,uBAAK0O,UAAU,kBAAf,UACE,uBACEA,UAAU,4BACV6N,QAAS,WACP,EAAKylB,kBAGT,uBACEtzB,UAAU,8BACV6N,QAAS,WACP,EAAK0lB,mBAGT,uBACEvzB,UAAU,sBACV6N,QAAS,WACP,EAAK2lB,gBAGT,uBACExzB,UAAU,gCACV6N,QAAS,WACP,EAAK4lB,iBAGT,uBACEzzB,UAAU,8CACV6N,QAAS,WACP,EAAK6lB,kC,GAtMOrzB,IAAMC,YCDjBiO,gBALS,SAAClR,GACvB,MAAO,KAEa,GAEPkR,CAGbC,eAAkB8jB,K,SCDduB,GAAc,CAClB/c,MAAM,EACNC,UAAU,EACVC,cAAe8c,GACf5c,iBAAkB,CAChBC,oBAAqB,mBA2GV4c,G,oDApGb,WAAYv4B,GAAuB,IAAD,8BAChC,cAAMA,IAFRw4B,aACkC,EAEhC,EAAK32B,MAAQ,CACX+yB,SAAU,KACVv7B,SAAU,KACVw7B,KAAM,KACN4D,SAAS,GAEX,EAAKD,SAAU,EARiB,E,qDAWlC,WAAqB,IAAD,OACdh/B,EAAOlN,KAAK0T,MAAM6H,YACtB3Q,OAAOk6B,MAAMrqB,OACbza,KAAK0T,MAAMixB,UAAUpY,GAAG,mBAAmB,WACzC,EAAK7Y,MAAMmR,kBAAkB3X,GAC7B,EAAKwG,MAAM2rB,gBAAe,GAC1B,IAAMqF,EAAkB,EAAKhxB,MAAMixB,UAAUD,kBAC7C,GAAKA,EAAgB5Z,MAArB,CAGA,IAAMla,EAAM8zB,EAAgB5Z,MAAMla,IAUlC,GATA,EAAK8C,MAAM8rB,sBACT,EAAK9rB,MAAM6L,YACT,EAAK7L,MAAM6L,UAAU/R,QACnB,SAACC,GAAD,OAAyBA,EAAKmD,MAAQA,KACtC,MAKD,EAAKs7B,SAAW,EAAKx4B,MAAM4L,UAAW,CACzC,IAAIzO,EAAa,EAAK6C,MAAM4L,UAAU8sB,kBAAkBx7B,GACxDF,IAAe+wB,UAAU,EAAK/tB,MAAM4H,YAAYlR,IAAKwG,EAAKC,GAC1D,EAAK6C,MAAMwwB,iBAAiBrzB,QAClB,EAAKq7B,SAEfx7B,IAAe+wB,UACb,EAAK/tB,MAAM4H,YAAYlR,IACvBwG,EACAF,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,YAGtD,EAAKq7B,SAAU,MAEjBlsC,KAAK0T,MAAMixB,UAAUpY,GAAG,YAAY,WAClC,EAAKxV,SAAS,CAAEo1B,SAAS,IACzB,IAAInzB,EAAS7Q,SAASkB,qBAAqB,UAAU,GAChD2P,IACKA,EAAOC,kBAIjB4yB,KAAUC,gBACV,EAAKp4B,MAAMixB,UAAU0H,OAAOC,QAAQT,KAAUnyB,cAAa,SAE7D1Z,KAAK0T,MAAMixB,UAAUpY,GAAG,YAAY,SAAC+b,EAAev7B,GAClD,IACIw7B,EADQx7B,EAASu3B,MAAMgE,GACVS,wBACjB,EAAKhyB,SAAS,CAAEuxB,WAAUv7B,WAAUw7B,YAEtCvoC,KAAK0T,MAAMixB,UAAU0H,OAAOC,QAAQT,KAAUnyB,cAAa,IAC3D1Z,KAAK0T,MAAMixB,UAAUpe,QACmC,OAAtD7V,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KACzC,KACAsG,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KAAKwG,O,oBAI1D,WACE,IAAM27B,EAAiB,CACrB5H,UAAW3kC,KAAK0T,MAAMixB,UACtB2D,SAAUtoC,KAAKuV,MAAM+yB,SACrBv7B,SAAU/M,KAAKuV,MAAMxI,SACrBw7B,KAAMvoC,KAAKuV,MAAMgzB,MAEnB,OACE,uBAAKrwB,UAAU,YAAf,UACE,eAAC,GAAD,CAEIuK,OAAQziB,KAAK0T,MAAM+O,OACnBkiB,UAAW3kC,KAAK0T,MAAMixB,UACtB6H,kBAAmBxsC,KAAK0T,MAAM84B,kBAC9B70B,kBAAmB3X,KAAK0T,MAAMiE,oBAGlC,eAAC,GAAD,eAAe40B,IACdvsC,KAAKuV,MAAM42B,QACV,sBAAKj0B,UAAU,UAAf,SACE,eAAC,KAAD,CAAQ6X,QAASgc,GAAaviC,OAAQ,IAAKD,MAAO,QAElD,KACJ,qCACGvJ,KAAK0T,MAAMwM,eAAiB,sBAAKhI,UAAU,aAAoB,c,GA/FjDK,IAAMC,WCAzBgO,I,OAAgB,CACpB0d,oBACA7E,kBACAG,sBACA3a,uBAGa4B,gBAjBS,SAAClR,GACvB,MAAO,CACLZ,SAAUY,EAAM1J,OAAO8I,SACvB4G,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBgE,UAAW/J,EAAM0L,cAAc3B,UAC/BC,UAAWhK,EAAM1J,OAAO0T,UACxBW,eAAgB3K,EAAM2L,SAAShB,kBAUKsG,GAAzBC,CAAwCgmB,IC4SxCC,I,2DA/Tb,WAAYh5B,GAAa,IAAD,8BACtB,cAAMA,IAFRw4B,aACwB,EAEtB,EAAK32B,MAAQ,CACXo3B,SACE16B,IAAUC,gBAAgB,eACkB,WAA5CD,IAAUC,gBAAgB,cAC5BuN,eAAgB,GAChBmtB,SAAU,EACVC,SAAU,EACV9Q,MAAO9pB,IAAUC,gBAAgB,UAAY,EAC7C46B,aAA4D,QAA9C76B,IAAUC,gBAAgB,gBACxC66B,aAA4D,QAA9C96B,IAAUC,gBAAgB,gBACxC86B,gBAAkE,QAAjD/6B,IAAUC,gBAAgB,oBAE7C,EAAKg6B,SAAU,EAdO,E,6DAiBxB,SAA0BrP,GACxB,GACEA,EAAUthB,YAAYopB,WACtB9H,EAAUthB,YAAYopB,UAAUpyB,UAChCvS,KAAK0T,MAAM6H,YAAYopB,UACvB,CACA,IAAMD,EAAkB1kC,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBACzD,IAAKA,EAAgB5Z,MACnB,OAEF9qB,KAAKksC,SAAWlsC,KAAK0T,MAAMu5B,qBAAqBjtC,KAAK0T,MAAM6H,aAC3Dvb,KAAKksC,SAAU,EACflsC,KAAK+W,SAAS,CACZ61B,SAAUlI,EAAgB5Z,MAAMoiB,UAAUC,KAC1CN,SAAUnI,EAAgBvgC,IAAI+oC,UAAUC,OAE1C,IAAIvI,EAAcF,EAAgB5Z,MAAMtY,KACpCqvB,EAAU,kBACVpiB,EAAiBzf,KAAK0T,MAAMgM,gBAAgBlS,QAC9C,SAACC,GAAD,OAAeA,EAAK+E,KAAK/G,MAAM,KAAK,KAAOm5B,KAC3C,GACEnlB,IACFoiB,EAAUpiB,EAAe1G,MAAMpL,KAAK,MAEtC3N,KAAK+W,SAAS,CAAE0I,eAAgBoiB,O,oBAIpC,WACE,OAAI7hC,KAAKuV,MAAMy3B,gBAEX,uBACE90B,UAAU,aACVC,MAAO,CACL0B,MAAO5H,IAAUC,gBAAgB,aAC7BD,IAAUC,gBAAgB,aAC1B,IALR,WAQIlS,KAAKuV,MAAMw3B,cAAgB/sC,KAAKuV,MAAMkK,gBACtC,oBACEvH,UAAU,wBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACElY,KAAK,8CAGP,GARR,SAWE,eAAC3F,GAAA,EAAD,UAAQ9uB,KAAKuV,MAAMkK,oBAGrBzf,KAAKuV,MAAMw3B,eAAiB/sC,KAAKuV,MAAMo3B,UACvC,oBACEz0B,UAAU,qBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACE9iB,MAAM,8CAGR,GARR,SAWE,eAACiF,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM4H,YAAYnW,UAGjCnF,KAAKuV,MAAMu3B,cAAgB9sC,KAAKuV,MAAMq3B,SAAW,GACjD,oBACE10B,UAAU,uBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACElY,KAAK,8CAGP,GARR,SAWE,gBAAC3F,GAAA,EAAD,CAAOse,QAAQ,YAAYC,MAAOrtC,KAAKuV,MAAMq3B,SAA7C,iBAEG,CACCS,MAAOrtC,KAAKuV,MAAMq3B,gBAKxB5sC,KAAKuV,MAAMu3B,cACX9sC,KAAKuV,MAAMs3B,SAAW,IACrB7sC,KAAKuV,MAAMo3B,UACV,oBAAGz0B,UAAU,wBAAb,SACE,gBAAC4W,GAAA,EAAD,CAAOse,QAAQ,YAAYC,MAAOrtC,KAAKuV,MAAMs3B,SAA7C,iBAEG,CACCQ,MAAOrtC,KAAKuV,MAAMs3B,kBAShC,uBACE30B,UAAU,aACVC,MAAO,CACL0B,MAAO5H,IAAUC,gBAAgB,aAC7BD,IAAUC,gBAAgB,aAC1B,IALR,WAQIlS,KAAKuV,MAAMw3B,cAAgB/sC,KAAKuV,MAAMkK,gBACtC,oBACEvH,UAAU,wBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACElY,KAAK,8CAGP,GARR,SAWE,eAAC3F,GAAA,EAAD,UAAQ9uB,KAAKuV,MAAMkK,oBAIrBzf,KAAKuV,MAAMw3B,eAAiB/sC,KAAKuV,MAAMo3B,UACvC,oBACEz0B,UAAU,qBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACE9iB,MAAM,8CAGR,GARR,SAWE,eAACiF,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAM4H,YAAYnW,UAIjCnF,KAAKuV,MAAMu3B,cAAgB9sC,KAAKuV,MAAMq3B,SAAW,GACjD,oBACE10B,UAAU,uBACVC,MACEnY,KAAKuV,MAAMo3B,SACP,CACElY,KAAK,8CAGP,GARR,SAWE,gBAAC3F,GAAA,EAAD,CAAOse,QAAQ,YAAYC,MAAOrtC,KAAKuV,MAAMq3B,SAA7C,iBAEG,CACCS,MAAOrtC,KAAKuV,MAAMq3B,gBAKxB5sC,KAAKuV,MAAMu3B,cACX9sC,KAAKuV,MAAMs3B,SAAW,IACrB7sC,KAAKuV,MAAMo3B,UACV,oBAAGz0B,UAAU,wBAAb,SACE,gBAAC4W,GAAA,EAAD,CAAOse,QAAQ,YAAYC,MAAOrtC,KAAKuV,MAAMs3B,SAA7C,iBAEG,CACCQ,MAAOrtC,KAAKuV,MAAMs3B,eAK5B,sBACE30B,UAAU,kBACVC,MACEhQ,SAAS0L,KAAKgE,YAAc,IACxB,CAAE4c,KAAM,EAAG5K,MAAO,GAClB7pB,KAAKuV,MAAMo3B,SACX,CACElY,KAAK,eAAD,OACF,IAAMrc,WAAWpY,KAAKuV,MAAMwmB,OAD1B,gBAEI/7B,KAAKuV,MAAMo3B,SAAW,IAAM,IAFhC,OAGJ9iB,MAAM,eAAD,OACH,IAAMzR,WAAWpY,KAAKuV,MAAMwmB,OADzB,aAGLuR,UAAW,kCAEb,KAIR,uBACEp1B,UAAU,kBACVC,MACEhQ,SAAS0L,KAAKgE,YAAc,IACxB,CAAE4c,KAAM,EAAG5K,MAAO,IAClB7pB,KAAKuV,MAAMo3B,SACX,CACElY,KAAK,eAAD,OACF,IAAMrc,WAAWpY,KAAKuV,MAAMwmB,OAD1B,aAGJlS,MAAM,eAAD,OACH,IAAMzR,WAAWpY,KAAKuV,MAAMwmB,OADzB,cAIP,GAdR,WAiBK9pB,IAAUC,gBAAgB,oBACoB,QAA/CD,IAAUC,gBAAgB,kBAE1B,qBADFD,IAAUC,gBAAgB,mBAExB,sBACEgG,UAAU,yBACVC,MACEnY,KAAKuV,MAAMo3B,UACV16B,IAAUC,gBAAgB,oBACzBD,IAAUC,gBAAgB,mBAAmBpI,WAAW,KACtD,CAAEyc,QAAS,QACX,KAIR,sBACErO,UAAU,oBACVC,MACEnY,KAAKuV,MAAMo3B,UACV16B,IAAUC,gBAAgB,oBACzBD,IAAUC,gBAAgB,mBAAmBpI,WAAW,KACtD,CAAEyc,QAAS,QACX,KAIV,sBACErO,UAAU,aACVC,MAAOnY,KAAKuV,MAAMo3B,SAAW,CAAEpmB,QAAS,QAAW,MAElDtU,IAAUC,gBAAgB,oBACoB,QAA/CD,IAAUC,gBAAgB,kBAE1B,qBADFD,IAAUC,gBAAgB,mBAExB,sBACEgG,UAAU,0BACVC,MACElG,IAAUC,gBAAgB,oBAC1BD,IAAUC,gBAAgB,mBAAmBpI,WAAW,KACpD,CAAEyc,QAAS,QACXvmB,KAAKuV,MAAMo3B,SACX,CACE1mB,SAAU,WACV4D,MAAO,GAET,KAIR,sBACE3R,UAAU,qBACVC,MACElG,IAAUC,gBAAgB,oBAC1BD,IAAUC,gBAAgB,mBAAmBpI,WAAW,KACpD,CAAEyc,QAAS,QACXvmB,KAAKuV,MAAMo3B,SACX,CACE1mB,SAAU,WACV4D,MAAO,GAET,QAMZ,sBACE3R,UAAU,kBACVC,MACEhQ,SAAS0L,KAAKgE,YAAc,IACxB,CAAE4c,KAAM,EAAG5K,MAAO,GAClB7pB,KAAKuV,MAAMo3B,SACX,CACElY,KAAK,eAAD,OACF,IAAMrc,WAAWpY,KAAKuV,MAAMwmB,OAD1B,gBAEI/7B,KAAKuV,MAAMo3B,SAAW,IAAM,IAFhC,OAGJ9iB,MAAM,eAAD,OACH,IAAMzR,WAAWpY,KAAKuV,MAAMwmB,OADzB,aAGLuR,UAAW,kCAEb,Y,GAzTS/0B,IAAMC,YCOzBgO,GAAgB,CAAEymB,qBlBMjB,SAA8B//B,GACnC,OAAO,SAAC8V,GACN9V,EAAKoS,UACFiuB,WACA/2B,MAAK,SAAC/T,GACLugB,EAvBC,CAAEnd,KAAM,mBAAoBgb,QAuBJ3T,EAAKoS,eAE/BgF,OAAM,WACLtW,QAAQC,IAAI,sBkBbLwY,gBATS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBoE,gBAAiBnK,EAAM1J,OAAO6T,gBAC9BJ,UAAW/J,EAAM0L,cAAc3B,aAIKkH,GAAzBC,CAAwCimB,I,0BCyBxCc,I,qGAvCb,SAAiBC,GACf,IAAIC,EACsC,OAAxC38B,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,GACAmC,EAAQu6B,EAAS7jC,QAAQ4jC,GAC3Bt6B,GAAS,GACXu6B,EAAShgC,OAAOyF,EAAO,GACvBu6B,EAASt6B,QAAQq6B,IAEjBC,EAASt6B,QAAQq6B,GAGnB18B,aAAaK,QAAQ,cAAeF,KAAKG,UAAUq8B,M,mBAGrD,SAAaD,GACX,IAAIC,EACsC,OAAxC38B,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,GACAmC,EAAQu6B,EAAS7jC,QAAQ4jC,GAC3Bt6B,GAAS,GACXu6B,EAAShgC,OAAOyF,EAAO,GAEzBpC,aAAaK,QAAQ,cAAeF,KAAKG,UAAUq8B,M,0BAErD,WAME,OAJ0C,OAAxC38B,aAAaC,QAAQ,gBACrBD,aAAaC,QAAQ,eACjBE,KAAKC,MAAMJ,aAAaC,QAAQ,gBAAkB,IAClD,KACa,O,MC4OR28B,G,oDAlQb,WAAYj6B,GAAwB,IAAD,8BACjC,cAAMA,IAsBRk6B,oBAAsB,SAAC/zB,GAAuC,IAAxB1G,EAAuB,wDAAN,EACrDlB,IAAU2F,gBAAgB,kBAAmBiC,GAC7C,EAAK9C,SAAS,CACZ82B,uBAAwB16B,IAEZ,IAAVA,GACF,EAAKO,MAAM6H,YAAYopB,WACrB,EAAKjxB,MAAM6H,YAAYopB,UAAU0H,OAAOC,QAAQ,CAC9C,uDAAwD,CACtDzyB,MAAM,sBAGZ5H,IAAU2F,gBAAgB,YAAa,wBAE7B,IAAVzE,GACiD,wBAAjDlB,IAAUC,gBAAgB,oBAE1B,EAAKwB,MAAM6H,YAAYopB,WACrB,EAAKjxB,MAAM6H,YAAYopB,UAAU0H,OAAOC,QAAQ,CAC9C,uDAAwD,CACtDzyB,MAAM,sBAGZ5H,IAAU2F,gBAAgB,YAAa,kBAEvC,EAAKlE,MAAM6H,YAAYopB,WACrB,EAAKjxB,MAAM6H,YAAYopB,UAAU0H,OAAOC,QAAQ,CAC9C,uDAAwD,CACtDzyB,MAAM,wBAIT,EAAKnG,MAAM6H,YAAYopB,UAG1BkH,KAAUC,gBAFV,EAAK13B,cAxD0B,EA6DnCA,WAAa,WACX,EAAKV,MAAM8H,cA9DsB,EAgEnCsyB,oBAAsB,SAACj0B,GACrB5H,IAAU2F,gBAAgB,kBAAmBiC,EAAMA,OACnDgyB,KAAUC,iBAlEuB,EAoEnCiC,sBAAwB,SAACC,GAEpBA,IAKO,IAJRxU,GAASxV,OAAOwpB,GAAUS,gBAAgBh3B,WAAU,SAACxJ,GACnD,OACEA,KAAUwE,IAAUC,gBAAgB,cAAgB,qBAIxDs7B,GAAUU,UAAUj8B,IAAUC,gBAAgB,cAEhD,EAAK6E,SAAS,CAAEi3B,sBA/EiB,EAiFnCG,oBAAsB,SAACC,GAElBA,IAOO,IANR7U,GAAevV,OAAOwpB,GAAUS,gBAAgBh3B,WAAU,SAACxJ,GACzD,OACEA,KACCwE,IAAUC,gBAAgB,oBACzB,2BAINs7B,GAAUU,UAAUj8B,IAAUC,gBAAgB,oBAEhD,EAAK6E,SAAS,CAAEq3B,oBA9FiB,EAgGnCC,sBAAwB,SAACx0B,GACF,kBAAVA,GACT,EAAK9C,SAAS,CACZu3B,iBAAkB9U,GACfxV,OAAOwpB,GAAUS,gBACjBpkC,QAAQgQ,KAGf5H,IAAU2F,gBACR,YACiB,kBAAViC,EAAqBA,EAAMA,MAAQA,GAE5C,EAAKnG,MAAM6H,YAAYopB,WACrB,EAAKjxB,MAAM6H,YAAYopB,UAAU0H,OAAOC,QAAQ,CAC9C,uDAAwD,CACtDzyB,MAAM,GAAD,OACc,kBAAVA,EAAqBA,EAAMA,MAAQA,EADvC,kBAKX,EAAKzF,cAlHL,EAAKmB,MAAQ,CACXs4B,uBAAwBtU,GACrBvV,OAAOwpB,GAAUS,gBACjBh3B,WAAU,SAACxJ,GACV,OACEA,KACCwE,IAAUC,gBAAgB,oBACzB,0BAGRo8B,iBAAkB9U,GACfxV,OAAOwpB,GAAUS,gBACjBh3B,WAAU,SAACxJ,GACV,OACEA,KAAUwE,IAAUC,gBAAgB,cAAgB,oBAG1D87B,kBAAkB,EAClBI,gBAAgB,GApBe,E,0CAsHnC,WAAU,IAAD,OAyDP,OACE,uBAAKl2B,UAAU,2BAAf,UACE,sBAAKA,UAAU,wBAAf,SACE,eAAC4W,GAAA,EAAD,iCAEF,sBAAI5W,UAAU,wBAAd,UACE,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAE,aACpBC,SAAS,MACTC,QAAQ,aACR/N,MAAO,CAAEoO,QAAS,gBAJpB,SAME,qBACErO,UAAU,0BACV6N,QAAS,WACP,EAAKooB,qBAAqB,EAAK54B,MAAM64B,iBAHzC,SAME,uBACEl2B,UACElY,KAAKuV,MAAM64B,eAAiB,aAAe,kBA3EhD7U,GACJvV,OAAOwpB,GAAUS,gBACjBryB,KAAI,SAACnO,EAAM0F,GACV,OACE,qBAEE+E,UACE/E,IAAU,EAAKoC,MAAMs4B,uBACjB,uCACA,0BAEN9nB,QAAS,WACP,EAAK6nB,oBAAoBngC,EAAM0F,IAEjCgF,MAAO,CAAEkjB,gBAAiB5tB,GAV5B,SAYG0F,EAAQ,GAAKA,IAAU,EAAKoC,MAAMs4B,wBACjC,uBACE31B,UAAU,aACV6N,QAAS,WACPynB,GAAU1X,MAAMroB,OAfjBA,EAAO0F,SA8EjBnT,KAAKuV,MAAM64B,gBACV,eAAC,SAAD,CACEG,aAAa,EACb10B,MAAO5H,IAAUC,gBAAgB,mBACjC0kB,SAAU52B,KAAK8tC,oBACf3tB,KAAK,MACLhI,MAAO,CACLq2B,OAAQ,GACRC,UAAW,mCAIjB,sBAAKv2B,UAAU,wBAAf,SACE,eAAC4W,GAAA,EAAD,2BAEF,sBAAI5W,UAAU,wBAAd,UACE,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAE,aACpBC,SAAS,MACTC,QAAQ,aACR/N,MAAO,CAAEoO,QAAS,gBAJpB,SAME,qBACErO,UAAU,0BACV6N,QAAS,WACP,EAAKgoB,uBAAuB,EAAKx4B,MAAMy4B,mBAH3C,SAME,uBACE91B,UACElY,KAAKuV,MAAMy4B,iBAAmB,aAAe,kBApFlDxU,GAASxV,OAAOwpB,GAAUS,gBAAgBryB,KAAI,SAACnO,EAAM0F,GAC1D,OACE,qBAEE+E,UACE/E,IAAU,EAAKoC,MAAM+4B,iBACjB,uCACA,0BAENvoB,QAAS,WACP,EAAKsoB,sBAAsB5gC,IAE7B0K,MAAO,CAAEkjB,gBAAiB5tB,GAV5B,SAYG0F,EAAQ,GAAKA,IAAU,EAAKoC,MAAM+4B,kBACjC,uBACEp2B,UAAU,aACV6N,QAAS,WACPynB,GAAU1X,MAAMroB,OAfjBA,EAAO0F,SAyFfnT,KAAKuV,MAAMy4B,kBACV,eAAC,SAAD,CACEO,aAAa,EACb10B,MAAO5H,IAAUC,gBAAgB,aACjC0kB,SAAU52B,KAAKquC,sBACfluB,KAAK,MACLhI,MAAO,CACLq2B,OAAQ,GACRC,UAAW,0C,GA1PDl2B,IAAMC,WCCxBgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBAPS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBC,WAAYjG,EAAMzD,KAAK0J,cAMzBgL,GAFaC,CAGbC,eAAkBinB,KCsHLe,I,2DA/Hb,WAAYh7B,GAAyB,IAAD,8BAClC,cAAMA,IAgBRU,WAAa,WACa,UAApB,EAAKV,MAAMyM,MAAwC,WAApB,EAAKzM,MAAMyM,KAS9C,EAAKzM,MAAM8H,aARLhT,eACF,EAAKkL,MAAM6O,cAAc,+BACzB,EAAK7O,MAAM8O,kBAAiB,IAE5B5X,OAAO2H,SAASmoB,UAvBc,EA6BpCiU,cAAgB,SAAC5iC,GACf,GAAwB,aAApB,EAAK2H,MAAMyM,KAAqB,CAClC,IAAMyO,EAAW7iB,EAAMvJ,OAAO+Q,MAC9B,EAAKwD,SAAS,CAAExD,MAAOqb,IACvB3c,IAAU2F,gBAAgB,WAAYgX,QACjC,GAAwB,UAApB,EAAKlb,MAAMyM,KAAkB,CACtC,IAAM4b,EAAQhwB,EAAMvJ,OAAO+Q,MAC3B,EAAKwD,SAAS,CAAExD,MAAOwoB,IACvB9pB,IAAU2F,gBAAgB,QAASmkB,QAC9B,GAAwB,kBAApB,EAAKroB,MAAMyM,KAA0B,CAC9C,IAAMyuB,EAAgB7iC,EAAMvJ,OAAO+Q,MACnC,EAAKwD,SAAS,CAAExD,MAAOq7B,IACvB38B,IAAU2F,gBAAgB,gBAAiBg3B,QACtC,GAAwB,gBAApB,EAAKl7B,MAAMyM,KAAwB,CAC5C,IAAM0uB,EAAc9iC,EAAMvJ,OAAO+Q,MACjC,EAAKwD,SAAS,CAAExD,MAAOs7B,IACvB58B,IAAU2F,gBAAgB,cAAei3B,QACpC,GAAwB,eAApB,EAAKn7B,MAAMyM,KAAuB,CAC3C,IAAM2uB,EAAa/iC,EAAMvJ,OAAO+Q,MAChC,EAAKwD,SAAS,CAAExD,MAAOu7B,IACvB78B,IAAU2F,gBAAgB,aAAck3B,OACnC,CACL,IAAMN,EAASziC,EAAMvJ,OAAO+Q,MAC5B,EAAKwD,SAAS,CAAExD,MAAOi7B,IACvBv8B,IAAU2F,gBAAgB,SAAU42B,KArDJ,EAyDpCO,aAAe,SAAChjC,GACd,EAAKgL,SAAS,CAAExD,MAAOxH,EAAMvJ,OAAO+Q,SA1DF,EA4DpCy7B,YAAc,SAACC,GACb,EAAKl4B,SAAS,CAAExD,MAAO6E,WAAW,EAAK7C,MAAMhC,OAAS07B,EAAO,KAC7D,EAAKN,cAAc,CACjBnsC,OAAQ,CAAE+Q,MAAO6E,WAAW,EAAK7C,MAAMhC,OAAS07B,EAAO,OA/DvB,EAkEpCC,UAAY,SAACD,GACX,EAAKl4B,SAAS,CAAExD,MAAO6E,WAAW,EAAK7C,MAAMhC,OAAS07B,EAAO,KAC7D,EAAKN,cAAc,CACjBnsC,OAAQ,CAAE+Q,MAAO6E,WAAW,EAAK7C,MAAMhC,OAAS07B,EAAO,OAnEzD,EAAK15B,MAAQ,CACXhC,MACsB,aAApB,EAAKG,MAAMyM,KACPlO,IAAUC,gBAAgB,aAAe,KACrB,UAApB,EAAKwB,MAAMyM,KACXlO,IAAUC,gBAAgB,UAAY,IAClB,kBAApB,EAAKwB,MAAMyM,KACXlO,IAAUC,gBAAgB,kBAAoB,IAC1B,gBAApB,EAAKwB,MAAMyM,KACXlO,IAAUC,gBAAgB,gBAAkB,IACxB,eAApB,EAAKwB,MAAMyM,KACXlO,IAAUC,gBAAgB,eAAiB,IAC3CD,IAAUC,gBAAgB,WAAa,MAdb,E,0CAwEpC,WAAU,IAAD,OACP,OACE,uBAAKgG,UAAU,oBAAf,UACE,uBAAKA,UAAU,kBAAf,UACE,eAAC4W,GAAA,EAAD,UAAQ9uB,KAAK0T,MAAMrH,QACnB,wBACE6L,UAAU,cACVi3B,aAAcnvC,KAAKuV,MAAMhC,MACzB1N,KAAK,SACLopC,KACuB,UAArBjvC,KAAK0T,MAAMrH,OAA0C,eAArBrM,KAAK0T,MAAMrH,MACvC,MACA,IAEN+0B,OAAQ,SAACr1B,GACP,EAAK4iC,cAAc5iC,GACnB,EAAKqI,gBAGT,uBAAM+D,MAAO,CAAEE,WAAY,QAA3B,SAAsCrY,KAAKuV,MAAMhC,WAGnD,uBAAM2E,UAAU,mBAAhB,SAAoClY,KAAK0T,MAAM07B,WAC/C,sBAAKl3B,UAAU,qBAAf,SACE,wBACEA,UAAU,iBACVi3B,aAAcnvC,KAAKuV,MAAMhC,MACzB1N,KAAK,QACLmO,IAAKhU,KAAK0T,MAAM27B,SAChBC,IAAKtvC,KAAK0T,MAAM67B,SAChBN,KAAMjvC,KAAK0T,MAAMu7B,KACjBO,QAAS,SAACzjC,GACR,EAAK4iC,cAAc5iC,IAErB6qB,SAAU,SAAC7qB,GACT,EAAKgjC,aAAahjC,IAEpB0jC,UAAW,WACT,EAAKr7B,kBAKT,uBACE8D,UAAU,mBACVC,MAAO,CAAEyW,SAAU,OAAQ/E,MAAO,OAFpC,SAIG7pB,KAAK0T,MAAMg8B,kB,GAxHCn3B,IAAMC,YCQzBgO,GAAgB,CACpBhE,mBACAD,iBAEakE,gBAVS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBC,WAAYjG,EAAMzD,KAAK0J,cASzBgL,GAFaC,CAGbC,eAAkBgoB,KC+FLiB,I,2DA3Gb,WAAYj8B,GAA2B,IAAD,8BACpC,cAAMA,IAsCRU,WAAa,WACX,EAAKV,MAAM8H,cAtCX,EAAKjG,MAAQ,CACXq6B,uBAAwB7W,GAAa,GAAGC,OAAO/hB,WAAU,SAACxJ,GACxD,OACEA,KAAUwE,IAAUC,gBAAgB,eAAiB,oBAGzD29B,uBAAwB9W,GAAa,GAAGC,OAAO/hB,WAAU,SAACxJ,GACxD,OAAOA,KAAUwE,IAAUC,gBAAgB,eAAiB,WAE9D49B,sBAAuB/W,GAAa,GAAGC,OAAO/hB,WAAU,SAACxJ,GACvD,OAAOA,KAAUwE,IAAUC,gBAAgB,cAAgB,YAZ3B,E,qDAgBtC,WAGE/J,SACGmR,cAAc,gCACd4hB,SAAS,GAAGA,SAAS,GAAGA,UACgB,IAAvCl7B,KAAKuV,MAAMq6B,uBACP,EACA5vC,KAAKuV,MAAMq6B,wBACfr2B,aAAa,WAAY,YAE7BpR,SACGmR,cAAc,gCACd4hB,SAAS,GAAGA,SAAS,GAAGA,SACvBl7B,KAAKuV,MAAMs6B,wBACXt2B,aAAa,WAAY,YAE7BpR,SACGmR,cAAc,gCACd4hB,SAAS,GAAGA,SAAS,GAAGA,SACvBl7B,KAAKuV,MAAMu6B,uBACXv2B,aAAa,WAAY,c,wBAM/B,SAAWxN,EAAYitB,GACrB,IAAIzV,EAAMxX,EAAMvJ,OAAO+Q,MAAM9H,MAAM,KAEnC,OADAwG,IAAU2F,gBAAgBohB,EAAQzV,EAAI,IAC9ByV,GACN,IAAK,aACHh5B,KAAK+W,SAAS,CACZ64B,uBAAwBrsB,EAAI,KAG9B,MAEF,IAAK,aACHvjB,KAAK+W,SAAS,CACZ84B,uBAAwBtsB,EAAI,KAG9B,MACF,IAAK,YACHvjB,KAAK+W,SAAS,CACZ+4B,sBAAuBvsB,EAAI,KAOjCvjB,KAAKoU,e,oBAEP,WAAU,IAAD,OA4BP,OACE,qBAAI8D,UAAU,8BAAd,SA3BO6gB,GAAand,KAAI,SAACnO,GAAD,OACtB,sBAAIyK,UAAU,gCAAd,UACE,oBAAGA,UAAU,wBAAb,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKpB,UAEf,yBACElH,KAAK,GACL+S,UAAU,2BACV0e,SAAU,SAAC7qB,GACT,EAAKgkC,WAAWhkC,EAAO0B,EAAK8F,QAJhC,SAOG9F,EAAKurB,OAAOpd,KAAI,SAACyiB,EAAiBlrB,GAAlB,OACf,yBACEI,MAAO,CAAC8qB,EAASlrB,EAAMkgB,YAEvBnb,UAAU,yBAHZ,SAKG,EAAKxE,MAAMsS,EAAEqY,IAHTlrB,UAdsC1F,EAAKvB,a,GA9ErCqM,IAAMC,YCS3BgO,GAAgB,CACpBhE,mBACAD,iBAEakE,gBAVS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBC,WAAYjG,EAAMzD,KAAK0J,cASzBgL,GAFaC,CAGbC,eAAkBipB,KCkELK,I,2DA/Eb,WAAYt8B,GAA0B,IAAD,8BACnC,cAAMA,IAMRu8B,iBAAmB,SAAC9vB,GAClB,EAAKpJ,SAAS,CAAE8I,WAAYM,IAC5BlO,IAAU2F,gBAAgB,aAAcuI,GACpC3X,eACF,EAAKkL,MAAM6O,cAAc,+BACzB,EAAK7O,MAAM8O,kBAAiB,IAE5B5X,OAAO2H,SAASmoB,UAZlB,EAAKnlB,MAAQ,CACXsK,WAAY5N,IAAUC,gBAAgB,eAAiB,UAHtB,E,0CAiBrC,WAAU,IAAD,OACP,OACE,uBAAKgG,UAAU,2BAAf,UACE,sBACEA,UAAU,wBACVC,MAAO,CAAE8N,SAAU,WAAYyX,OAAQ,QAFzC,SAIE,eAAC5O,GAAA,EAAD,0BAEF,uBAAK5W,UAAU,2BAAf,UACE,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAE,oBACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,sBACEhO,UAAU,wBACV6N,QAAS,WACP,EAAKkqB,iBAAiB,WAExB93B,MAAiC,WAA1BnY,KAAKuV,MAAMsK,WAA0B,GAAK,CAAE4X,QAAS,IAL9D,SAOE,uBAAMvf,UAAU,0CAGpB,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAE,oBACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,sBACEhO,UAAU,wBACV6N,QAAS,WACP,EAAKkqB,iBAAiB,WAExB93B,MAAiC,WAA1BnY,KAAKuV,MAAMsK,WAA0B,GAAK,CAAE4X,QAAS,IAL9D,SAOE,uBAAMvf,UAAU,oCAGpB,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAE,eACpBC,SAAS,MACTC,QAAQ,aAHV,SAKE,sBACEhO,UAAU,wBACV6N,QAAS,WACP,EAAKkqB,iBAAiB,eAExB93B,MAC4B,eAA1BnY,KAAKuV,MAAMsK,WAA8B,GAAK,CAAE4X,QAAS,IAN7D,SASE,uBAAMvf,UAAU,4C,GAxEJK,IAAMC,YCO1BgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBAPS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBC,WAAYjG,EAAMzD,KAAK0J,cAMzBgL,GAFaC,CAGbC,eAAkBspB,KCyMLE,G,oDAlNb,WAAYx8B,GAA2B,IAAD,8BACpC,cAAMA,IAgBRy8B,kBAAoB,WAClB,GAAI,EAAK56B,MAAM66B,UACbxlC,OAAO68B,gBAAgB4I,SACvB,EAAKt5B,SAAS,CAAEq5B,WAAW,QACtB,CAEI,IAAIxuC,SAAQ,SAAUC,EAASC,GACpC,IACIoK,EADAokC,EAAQ1lC,OAAO68B,gBAGnBv7B,EAAKsL,aAAY,WACkB,IAA7B84B,EAAM5I,YAAYnnC,SACpBsB,EAAQyuC,EAAM5I,aACd6I,cAAcrkC,MAEf,OAKLsK,MAAK,SAACg6B,GACN,EAAKz5B,SAAS,CAAEy5B,WAAU,WACxB,EAAKz5B,SAAS,CAAEq5B,WAAW,IAAQ,WACjC,EAAKK,cAEHtoC,SAASmR,cAAc,sBAAuB4hB,SAAS,IACvD/yB,SAASmR,cAAc,sBAAuB4hB,SAAS,KAEvD/yB,SACGmR,cAAc,sBACd4hB,SACCjC,GAAUD,OAAOnvB,QACfoI,IAAUC,gBAAgB,eAAiB,MAE7CqH,aAAa,WAAY,YAC7BpR,SACGmR,cAAc,sBACd4hB,SACCjpB,IAAUC,gBAAgB,eAAiB,GAC3CqH,aAAa,WAAY,wBAxDH,EA+DtCk3B,YAAc,WACZ,IAAM/L,EAAkB,EAAKhxB,MAAM6H,YAAYopB,UAAUD,kBACnDgM,EAAUhM,EAAgB5Z,MAAMla,IACnCrG,QAAQ,MAAO,IACfA,QAAQ,WAAY,IACjBomC,EAAWjM,EAAgB5Z,MAAMla,IACpCrG,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACXqmC,EAASlM,EAAgBvgC,IAAIyM,IAAIrG,QAAQ,MAAO,IAAIA,QAAQ,KAAM,IAClE+9B,EAAQ,kBAAcoI,EAAd,aAA0BC,EAA1B,YAAsCC,EAAtC,KACd,EAAKl9B,MAAM6H,YAAYs1B,SAASvI,GAAU9xB,MAAK,SAAC8tB,GAC9C,IAAI7zB,EAAO6zB,EAAMjR,WACjB5iB,EAAOA,EACJlG,QAAQ,QAAS,IACjBA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IAClB,EAAKumC,aACHrgC,EACAwB,IAAUC,gBAAgB,eAAiB,EAC3CD,IAAUC,gBAAgB,eAAiB,OApFX,EAwFtC4+B,aAAe,SAACrgC,EAAcsgC,EAAoBC,GAChD,IAAI1J,EAAM,IAAIC,yBACdD,EAAI72B,KAAOA,EACX62B,EAAIE,MAAQ58B,OAAO68B,gBAAgBC,YAAYqJ,GAC/CzJ,EAAI2J,KAAOD,EACXpmC,OAAO68B,gBAAgBE,MAAML,GAC7BA,EAAI5kC,QAAU,SAACC,GACbqL,QAAQC,IAAItL,IAEd2kC,EAAI4J,MAAQ,SAACnlC,GACL,EAAKwJ,MAAM66B,WAAa,EAAK18B,MAAM0H,WAIzC,EAAK1H,MAAM6H,YAAYopB,UAAUngC,OAAOgS,MAAK,WAC3C,EAAKi6B,mBArGT,EAAKl7B,MAAQ,CACX47B,aAAa,EACbf,WAAW,EACXI,OAAQ,IAL0B,E,qDAQtC,WACM,oBAAqB5lC,QACvB5K,KAAK+W,SAAS,CAAEo6B,aAAa,IAE3BnxC,KAAKuV,MAAM66B,YACbxlC,OAAO68B,iBAAmB78B,OAAO68B,gBAAgB4I,SACjDrwC,KAAK+W,SAAS,CAAEq5B,WAAW,O,oBA8F/B,WAAU,IAAD,OACP,OACE,qCACGpwC,KAAKuV,MAAM47B,YACV,uCACE,uBAAKj5B,UAAU,kCAAf,UACE,uBAAMA,UAAU,8BAAhB,SACE,eAAC4W,GAAA,EAAD,8BAGF,uBACE5W,UAAU,wBACV6N,QAAS,WACH,EAAKrS,MAAM4L,UACb,EAAK6wB,qBAEL,EAAKz8B,MAAM6O,cAAc,0BACzB,EAAK7O,MAAM8O,kBAAiB,KAGhCrK,MACEnY,KAAK0T,MAAM4L,WAAatf,KAAKuV,MAAM66B,UAC/B,GACA,CAAE3Y,QAAS,IAbnB,SAgBE,uBACEvf,UAAU,wBACVC,MACEnY,KAAKuV,MAAM66B,UACP,CACEjV,UAAW,mBACXC,WAAY,uBAEd,CACED,UAAW,kBACXC,WAAY,8BAMzBp7B,KAAKuV,MAAM66B,WAAapwC,KAAKuV,MAAMi7B,OAAOjwC,OAAS,GAClD,uBACE2X,UAAU,2BACVC,MAAO,CACLE,WAAY,OACZ9O,MAAO,MACPymB,UAAW,OACXnB,WAAY,KANhB,UASE,eAACC,GAAA,EAAD,oBACA,yBACE3pB,KAAK,GACL+S,UAAU,wBACVhM,GAAG,oBACH0qB,SAAU,SAAC7qB,GACTkG,IAAU2F,gBAAgB,aAAc7L,EAAMvJ,OAAO+Q,OACrD3I,OAAO68B,gBAAgB4I,UAN3B,SASGrwC,KAAKuV,MAAMi7B,OAAO50B,KAAI,SAACnO,EAAM0F,GAC5B,OACE,yBAAQI,MAAOJ,EAAO+E,UAAU,sBAAhC,SACGzK,EAAKtI,eAOjBnF,KAAKuV,MAAM66B,WACV,uBACEl4B,UAAU,2BACVC,MAAO,CAAEE,WAAY,OAAQ9O,MAAO,MAAOslB,WAAY,KAFzD,UAIE,eAACC,GAAA,EAAD,oBACA,yBACE3pB,KAAK,GACL+G,GAAG,oBACHgM,UAAU,wBACV0e,SAAU,SAAC7qB,GACTkG,IAAU2F,gBAAgB,aAAc7L,EAAMvJ,OAAO+Q,OACrD3I,OAAO68B,gBAAgB4I,UAN3B,SASGpX,GAAUD,OAAOpd,KAAI,SAACnO,GAAD,OACpB,yBAAQ8F,MAAO9F,EAAMyK,UAAU,sBAA/B,SACGzK,eAOX,W,GAhNe8K,IAAMC,WCM3BgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBARS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxB+D,UAAW/J,EAAM0L,cAAc3B,UAC/BlE,UAAW7F,EAAMzD,KAAKsJ,aAMxBoL,GAFaC,CAGbC,eAAkBwpB,KCkLLkB,G,oDAnLb,WAAY19B,GAA4B,IAAD,8BACrC,cAAMA,IAYRU,WAAa,WACX,EAAKV,MAAM8H,cAd0B,EAgBvC61B,YAAc,WACR7oC,eACF,EAAKkL,MAAM6O,cAAc,+BACzB,EAAK7O,MAAM8O,kBAAiB,IAE5B5X,OAAO2H,SAASmoB,UArBmB,EAwBvC4W,WAAa,WACX,EAAKv6B,SAAS,CAAEw6B,QAAS,EAAKh8B,MAAMg8B,SAAU,WAC5Ct/B,IAAU2F,gBAAgB,SAAU,EAAKrC,MAAMg8B,OAAS,MAAQ,MAChEn8B,YAAW,WACT,EAAKhB,eACJ,SA7BgC,EAgCvCo9B,aAAe,WACb,EAAKz6B,SAAS,CAAE06B,UAAW,EAAKl8B,MAAMk8B,WAAY,WAChDx/B,IAAU2F,gBAAgB,WAAY,EAAKrC,MAAMk8B,SAAW,MAAQ,MACpEr8B,YAAW,WACT,EAAKhB,eACJ,SArCgC,EAwCvCs9B,aAAe,WACb,EAAK36B,SAAS,CAAE46B,UAAW,EAAKp8B,MAAMo8B,WAAY,WAChD1/B,IAAU2F,gBAAgB,WAAY,EAAKrC,MAAMo8B,SAAW,MAAQ,MACpEv8B,YAAW,WACT,EAAKhB,eACJ,SA7CgC,EAgDvCw9B,aAAe,WACb,EAAK76B,SAAS,CAAE86B,UAAW,EAAKt8B,MAAMs8B,WAAY,WAChD5/B,IAAU2F,gBAAgB,WAAY,EAAKrC,MAAMs8B,SAAW,MAAQ,MACpEz8B,YAAW,WACT,EAAKhB,eACJ,SArDgC,EAwDvC09B,gBAAkB,WAChB,EAAK/6B,SAAS,CAAEg7B,aAAc,EAAKx8B,MAAMw8B,cAAe,WACtD9/B,IAAU2F,gBACR,cACA,EAAKrC,MAAMw8B,YAAc,MAAQ,MAEnC38B,YAAW,WACT,EAAKhB,eACJ,SAhEgC,EAmEvC49B,uBAAyB,WACvB,EAAKj7B,SAAS,CAAEi2B,iBAAkB,EAAKz3B,MAAMy3B,kBAC7C/6B,IAAU2F,gBACR,kBACA,EAAKrC,MAAMy3B,gBAAkB,KAAO,OAEtC,EAAKz3B,MAAMy3B,gBACP,EAAKt5B,MAAM6O,cAAc,yBACzB,EAAK7O,MAAM6O,cAAc,wBAC7B,EAAK7O,MAAM8O,kBAAiB,GAC5BpN,YAAW,WACT,EAAKi8B,gBACJ,MA/EkC,EAiFvCY,aAAe,WACb,EAAKl7B,SAAS,CAAE+1B,cAAe,EAAKv3B,MAAMu3B,eAC1C76B,IAAU2F,gBACR,eACA,EAAKrC,MAAMu3B,aAAe,KAAO,OAEnC,EAAKv3B,MAAMu3B,aACP,EAAKp5B,MAAM6O,cAAc,wBACzB,EAAK7O,MAAM6O,cAAc,yBAC7B,EAAK7O,MAAM8O,kBAAiB,GAC5BpN,YAAW,WACT,EAAKi8B,gBACJ,MA7FkC,EA+FvCa,aAAe,WACb,EAAKn7B,SAAS,CAAEg2B,cAAe,EAAKx3B,MAAMw3B,eAC1C96B,IAAU2F,gBACR,eACA,EAAKrC,MAAMw3B,aAAe,KAAO,OAEnC,EAAKx3B,MAAMw3B,aACP,EAAKr5B,MAAM6O,cAAc,wBACzB,EAAK7O,MAAM6O,cAAc,yBAC7B,EAAK7O,MAAM8O,kBAAiB,GAC5BpN,YAAW,WACT,EAAKi8B,gBACJ,MAzGH,EAAK97B,MAAQ,CACXg8B,OAAgD,QAAxCt/B,IAAUC,gBAAgB,UAClC6/B,YAA0D,QAA7C9/B,IAAUC,gBAAgB,eACvCy/B,SAAoD,QAA1C1/B,IAAUC,gBAAgB,YACpCu/B,SAAoD,QAA1Cx/B,IAAUC,gBAAgB,YACpC2/B,SAAoD,QAA1C5/B,IAAUC,gBAAgB,YACpC86B,gBAAkE,QAAjD/6B,IAAUC,gBAAgB,mBAC3C46B,aAA4D,QAA9C76B,IAAUC,gBAAgB,gBACxC66B,aAA4D,QAA9C96B,IAAUC,gBAAgB,iBAVL,E,0CA8GvC,WAAU,IAAD,OACP,OACE,uCACGlS,KAAK0T,MAAM6H,YAAY42B,UAAY,eAAC,GAAD,KAClCnyC,KAAK0T,MAAM6H,YAAYopB,UACrBtL,GACAC,IACF1d,KAAI,SAACnO,GAAD,OACJ,uBAAKyK,UAAU,kCAAf,UACE,uBAAMA,UAAU,8BAAhB,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKpB,UAGf,uBACE6L,UAAU,wBACV6N,QAAS,WACP,OAAQtY,EAAK0rB,UACX,IAAK,SACH,EAAKmY,aACL,MACF,IAAK,WACH,EAAKE,eACL,MACF,IAAK,cACH,EAAKM,kBACL,MACF,IAAK,WACH,EAAKJ,eACL,MACF,IAAK,WACH,EAAKE,eACL,MACF,IAAK,eACH,EAAKK,eACL,MACF,IAAK,eACH,EAAKC,eACL,MACF,IAAK,kBACH,EAAKF,2BAMX75B,MAAO,EAAK5C,MAAM9H,EAAK0rB,UAAY,GAAK,CAAE1B,QAAS,IAhCrD,SAkCE,uBACEvf,UAAU,wBACVC,MACG,EAAK5C,MAAM9H,EAAK0rB,UAKb,CACEgC,UAAW,mBACXC,WAAY,uBANd,CACED,UAAW,kBACXC,WAAY,6BA7C4B3tB,EAAKpB,iB,GA1HzCkM,IAAMC,WCK5BgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBATS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxB+D,UAAW/J,EAAM0L,cAAc3B,UAC/BlE,UAAW7F,EAAMzD,KAAKsJ,UACtBI,WAAYjG,EAAMzD,KAAK0J,cAMzBgL,GAFaC,CAGbC,eAAkB0qB,KCyHLgB,G,oDA7Hb,WAAY1+B,GAA2B,IAAD,8BACpC,cAAMA,IAQR2+B,WAAa,WACX,EAAKt7B,SAAS,CAAEu7B,iBAAkB,EAAK/8B,MAAM+8B,kBAAmB,WAC9DrgC,IAAU2F,gBACR,kBACA,EAAKrC,MAAM+8B,gBAAkB,MAAQ,UAXzC,EAAK/8B,MAAQ,CACXsK,WAAY5N,IAAUC,gBAAgB,eAAiB,SACvDogC,gBACmD,QAAjDrgC,IAAUC,gBAAgB,oBALM,E,0CAkBtC,WAAU,IAAD,OACP,OACE,uBAAKgG,UAAU,uBAAf,UACE,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAEhmB,KAAKuV,MAAM+8B,gBAAkB,SAAW,QAC5DrsB,SAAS,SACTC,QAAQ,aACR/N,MAAO,CAAE3O,OAAQ,OAAQ+c,QAAS,eAAgBgsB,MAAO,QAJ3D,SAME,uBACEr6B,UACElY,KAAKuV,MAAM+8B,gBACP,sBACA,wBAENvsB,QAAS,WACP,EAAKssB,kBAIX,sBAAKn6B,UAAU,sBAAf,SACE,eAAC4W,GAAA,EAAD,+BAEF,uBAAK5W,UAAU,gBAAf,UACGlY,KAAK0T,MAAM6H,YAAY42B,UAAY,eAAC,GAAD,IACpC,eAAC,GAAD,IACA,eAAC,GAAD,CAEI9C,SAAU,GACVE,SAAU,GACVpvB,KAAM,WACNivB,SAAU,KACVM,SAAU,KACVT,KAAM,EACN5iC,MAAO,cAGVrM,KAAK0T,MAAM6H,YAAY42B,UACtB,eAAC,GAAD,CAEI9C,SAAU,GACVE,SAAU,EACVpvB,KAAM,SACNivB,SAAU,IACVM,SAAU,MACVT,KAAM,EACN5iC,MAAO,WAIb,eAAC,GAAD,CAEIgjC,SAAU,GACVE,SAAU,EACVpvB,KAAM,gBACNivB,SAAU,IACVM,SAAU,KACVT,KAAM,EACN5iC,MAAO,mBAGVrM,KAAK0T,MAAM6H,YAAY42B,UACtB,eAAC,GAAD,CAEI9C,SAAU,GACVE,SAAU,EACVpvB,KAAM,cACNivB,SAAU,IACVM,SAAU,KACVT,KAAM,EACN5iC,MAAO,sBAIXrM,KAAKuV,MAAMsK,YAAwC,WAA1B7f,KAAKuV,MAAMsK,aACrC7f,KAAK0T,MAAM6H,YAAY42B,SACtB,eAAC,GAAD,CAEI9C,SAAU,EACVE,SAAU,GACVpvB,KAAM,QACNivB,SAAU,MACVM,SAAU,IACVT,KAAM,GACN5iC,MAAO,UAGT,KACJ,eAAC,GAAD,CAEIgjC,SAAU,EACVE,SAAU,GACVpvB,KAAM,aACNivB,SAAU,MACVM,SAAU,IACVT,KAAM,GACN5iC,MAAO,eAGX,eAAC,GAAD,IACA,eAAC,GAAD,c,GA1HiBkM,IAAMC,WCG3BgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBARS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxB+D,UAAW/J,EAAM0L,cAAc3B,UAC/BlE,UAAW7F,EAAMzD,KAAKsJ,aAMxBoL,GAFaC,CAGbC,eAAkB0rB,K,mBCsFLI,I,2DApGb,WAAY9+B,GAA0B,IAAD,8BACnC,cAAMA,IACD6B,MAAQ,CACXZ,SAAU,GACV4L,aAAa,EACbkyB,cAAe,EACfzX,gBAAkE,QAAjD/oB,IAAUC,gBAAgB,oBAE7C,EAAKyT,WAAa,EAAKA,WAAWuD,KAAhB,iBARiB,E,sDAWrC,WAAsB,IAAD,OAEflpB,KAAK0T,MAAM6H,YAAY2I,QACzBlkB,KAAK0T,MAAM6H,YAAY2I,OAAOC,WAC3B3N,MAAK,SAAC7B,GACL,EAAKoC,SAAS,CAAEpC,SAAUA,EAAS0P,SAEpCC,OAAM,WACLtW,QAAQC,IAAI,qB,+BAIpB,WACEjO,KAAK0T,MAAMsB,UACThV,KAAK+W,SAAS,CACZpC,SAAU3U,KAAK0T,MAAMsB,SAASL,a,wBAGpC,SAAW5I,GACTA,EAAM4sB,iBACN,IAAInmB,EAAOzG,EAAMvJ,OAAOR,aAAa,QACrC,GAAIhC,KAAK0T,MAAM6H,YAAYopB,UACzB3kC,KAAK0T,MAAM6H,YAAYopB,UAAUpe,QAAQ/T,OACpC,CAAC,IAAD,EACDtG,EAAKsG,EAAK5G,OAAO,GAEjBke,EAAG,UAAGlf,OAAOmK,OAAO,GAAG5M,SAASiR,eAAelN,UAA5C,aAAG,EAA8CwmC,UACxD,IAAK5oB,EAAK,OACVlf,OAAOmK,OAAO,GAAGO,SAAS,EAAGwU,M,8CAGjC,SAAiC+S,GAC3BA,EAAU7nB,WAAahV,KAAK0T,MAAMsB,UACpChV,KAAK+W,SAAS,CAAEpC,SAAUkoB,EAAU7nB,SAASL,a,oBAGjD,WAAU,IAAD,OA2CP,OACE,sBAAKuD,UAAU,yBAAf,SACE,qBAAIA,UAAU,eAAd,SACGlY,KAAKuV,MAAMZ,UA7CQ,SAApBg+B,EAAqBrvB,EAAYsvB,GAErC,OADAA,IACOtvB,EAAM1H,KAAI,SAACnO,EAAW0F,GAC3B,OACE,sBAAgB+E,UAAU,oBAA1B,UACGzK,EAAKoH,SAAStU,OAAS,GACtBqyC,GAAS,IACR,EAAKr9B,MAAMylB,iBACV,uBACE9iB,UAAU,iCACV6N,QAAS,WACP,EAAKhP,SAAS,CACZ07B,aACE,EAAKl9B,MAAMk9B,eAAiBt/B,GAAS,EAAIA,KAG/CgF,MACE,EAAK5C,MAAMk9B,eAAiBt/B,EACxB,GACA,CAAEgoB,UAAW,oBAKzB,oBACE3oB,KAAM/E,EAAK+E,KACXuT,QAAS,EAAKJ,WACdzN,UAAU,oBAHZ,SAKGzK,EAAKsL,QAEPtL,EAAKoH,SAAStU,OAAS,IACvB,EAAKgV,MAAMk9B,eAAiBt/B,GAC3By/B,EAAQ,GACR,EAAKr9B,MAAMylB,iBACX,8BAAK2X,EAAkBllC,EAAKoH,SAAU+9B,KACpC,OAhCGz/B,MAyCew/B,CAAkB3yC,KAAKuV,MAAMZ,SAAU,W,GA9F/C4D,IAAMC,YCOjBiO,gBARS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxB5G,SAAUY,EAAM1J,OAAO8I,SACvBK,SAAUO,EAAM1J,OAAOmJ,YAGL,GACPyR,CAAwC+rB,ICkFxCK,I,2DAvFb,WAAYn/B,GAAsB,IAAD,8BAC/B,cAAMA,IAcR6tB,iBAAmB,SAACpuB,GAClB,EAAK4D,SAAS,CAAEqpB,YAAajtB,KAd7B,EAAKoC,MAAQ,CACX6qB,aAAc,GAHe,E,8CAOjC,SAAWxvB,GACT,IAAKA,EAGH,OAFA5Q,KAAK0T,MAAM6O,cAAc,uBACzBviB,KAAK0T,MAAM8O,kBAAiB,GAG9BxiB,KAAK0T,MAAM6H,YAAYopB,UAAUpe,QAAQ3V,K,oBAK3C,WAAU,IAAD,OACHkiC,GAA+C,cAA1B9yC,KAAK0T,MAAMq/B,WAChC/yC,KAAK0T,MAAM6L,UACe,UAA1Bvf,KAAK0T,MAAMq/B,WACX/yC,KAAK0T,MAAM6J,MAAM/P,QAAO,SAACC,GAAD,MAAyB,KAAfA,EAAK8P,SACvCvd,KAAK0T,MAAM8L,SAAiBhS,QAAO,SAACC,GACtC,OAAOA,EAAKkD,UAAY,EAAK+C,MAAM4H,YAAYlR,OAgDjD,OAAK0oC,EAAY,GAQf,sBAAK56B,UAAU,0BAAf,SACE,qBAAIA,UAAU,gBAAd,SAtDK46B,EAAYpnC,UAAUkQ,KAAI,SAACnO,EAAW0F,GAC3C,IAAM6/B,EAAgB,CACpB9S,QAASzyB,EAAKrD,IACd+V,KAAgC,cAA1B,EAAKzM,MAAMq/B,WAA6B,YAAc,SAE9D,OACE,sBACE76B,UAAU,qBAEVmO,aAAc,WACZ,EAAKkb,iBAAiBpuB,IAExBmT,aAAc,WACZ,EAAKib,kBAAkB,IAP3B,UAUE,oBAAGrpB,UAAU,uBAAb,SAC6B,cAA1B,EAAKxE,MAAMq/B,WACRtlC,EAAKsL,MACqB,UAA1B,EAAKrF,MAAMq/B,WACXtlC,EAAK8P,MACL9P,EAAKgD,OAEX,sBAAKyH,UAAU,gCAAf,SACE,eAAC4W,GAAA,EAAD,UAAQrhB,EAAKo0B,YAEf,uBAAK3pB,UAAU,yBAAf,UACGnE,KAAK+E,MAAwB,IAAlBrL,EAAKoD,YADnB,OAGC,EAAK0E,MAAM6qB,cAAgBjtB,EAC1B,eAAC,GAAD,eAAgB6/B,IACd,KACJ,sBACE96B,UAAU,qBACV6N,QAAS,WACP,EAAKJ,WAAWlY,EAAKmD,MAEvBuH,MAAO,CAAE86B,OAAQ,WALnB,SAOE,eAACnkB,GAAA,EAAD,wBA/BGrhB,EAAKrD,YAuCd,sBAAK8N,UAAU,kCAAf,SACE,eAAC4W,GAAA,EAAD,0B,GA5EYvW,IAAMC,YCYtBgO,GAAgB,CAAEhE,mBAAkBD,iBAC3BkE,gBAVS,SAAClR,GACvB,MAAO,CACL+F,YAAa/F,EAAMzD,KAAKwJ,YACxBC,YAAahG,EAAMzD,KAAKyJ,YACxBgE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBiC,QAASjK,EAAM1J,OAAO2T,WAMxBgH,GAFaC,CAGbC,eAAkBmsB,KCiSLK,G,oDArSb,WAAYx/B,GAA8B,IAAD,8BACvC,cAAMA,IAFR6vB,WACyC,IAczCrb,kBAAoB,SAAC1J,GACnB,EAAKzH,SAAS,CAAEyH,cAfuB,EAiBzCsK,iBAAmB,SAACF,GAClB,EAAK7R,SAAS,CAAE6R,gBAlBuB,EAwBzCuqB,gBAAkB,SAACJ,GACjB,EAAKh8B,SAAS,CAAEg8B,gBAzBuB,EA2BzCV,WAAa,WACX,EAAKt7B,SAAS,CAAEq8B,aAAc,EAAK79B,MAAM69B,cAAe,WACtDnhC,IAAU2F,gBACR,cACA,EAAKrC,MAAM69B,YAAc,MAAQ,UA/BE,EAmCzCC,iBAAmB,WACjB,OAAK,EAAK99B,MAAMqT,WAAW,GAOpB,EAAKrT,MAAMqT,WACf1nB,MAC2B,GAA1B,EAAKqU,MAAMk9B,aACe,GAA1B,EAAKl9B,MAAMk9B,aAAoB,GAAK,EAAKl9B,MAAMqT,WAAWroB,OACtD,EAAKgV,MAAMqT,WAAWroB,OACI,GAA1B,EAAKgV,MAAMk9B,aAAoB,IAEpC72B,KAAI,SAACnO,EAAW0F,GACf,OACE,qBACE+E,UAAU,uBAEV6N,QAAS,WACP,EAAKrS,MAAM6H,YAAYopB,UAAUpe,QAAQ9Y,EAAKmD,MAJlD,SAOGnB,KAAOhC,EAAKob,UALR1V,MAhBT,sBAAK+E,UAAU,kCAAf,SACE,eAAC4W,GAAA,EAAD,uBAvCiC,EAgEzCwkB,iBAAmB,WACjB,IAAIC,EAAa,EAAKh+B,MAAMg+B,WACxBd,EACFc,EAAa,EAAIA,EAAa,EAAI,EAAKh+B,MAAMk9B,aAC3Ce,EAAkB,GAClBC,EAAQ1/B,KAAKuW,KAAK,EAAK/U,MAAMqT,WAAWroB,OAAS,IACrD,GAAIkzC,GAAS,EACX,IADe,IAAD,WACL7yC,GACP4yC,EAAStzC,KACP,qBACEgY,UACEu6B,IAAiB7xC,EACb,oCACA,uBAENmlB,QAAS,WACP,EAAKhP,SAAS,CAAE07B,aAAc7xC,KAPlC,SAUGA,EAAI,MAZFA,EAAI,EAAGA,EAAI6yC,EAAO7yC,IAAM,EAAxBA,QAiBT,IADM,IAAD,WACIA,GACP,IAAI6hB,EAASgwB,EAAe,EAAU,IAAN7xC,EAAU6xC,IAAiB7xC,EAC3D4yC,EAAStzC,KACP,qBACEgY,UACEuK,EACI,oCACA,uBAENsD,QAAS,WACG,IAANnlB,GAA0B,IAAf2yC,EAOf,EAAKx8B,SAAS,CACZw8B,WAAYd,EAAe,EAAI7xC,EAAI2yC,EAAa,EAAI,EACpDd,aAAc7xC,EAAI2yC,IARlB,EAAKx8B,SAAS,CACZw8B,WAAY,EACZd,aAAc,KAVtB,SAoBG7xC,EAAI2yC,EAAa,MAvBf3yC,EAAI,EAAGA,EAAI,EAAGA,IAAM,EAApBA,GA4BX,OAAO4yC,GAlHP,EAAKj+B,MAAQ,CACXw9B,WAAY,WACZp+B,SAAU,GACVuW,MAAO,EAAKxX,MAAM4H,YAAY4P,MAC9B1M,UAAU,EACVoK,WAAY,KACZ2qB,WAAY,EACZd,aAAc,EACdW,YAC+C,QAA7CnhC,IAAUC,gBAAgB,gBAXS,E,qDAoBzC,WACElS,KAAK0T,MAAM6Q,yB,oBAiGb,WAAU,IAAD,OACDmvB,EAAc,CAClBvzB,KAAMngB,KAAKuV,MAAMiJ,SAAW,GAAK,MACjCjV,MAAO,QACPC,OAAQ,OACRye,YAAajoB,KAAKuV,MAAMiJ,SACxB0J,kBAAmBloB,KAAKkoB,kBACxBY,iBAAkB9oB,KAAK8oB,kBAEnBkqB,EAAgB,CACpBD,WAAY/yC,KAAKuV,MAAMw9B,YAEzB,OACE,sBAAK76B,UAAU,mBAAf,SACGlY,KAAKuV,MAAMiJ,SACV,uCACE,sBACEtG,UAAU,iBACV6N,QAAS,WACP,EAAKmC,mBAAkB,GACvB,EAAKxU,MAAMwO,cAAa,GACxB,EAAKnL,SAAS,CAAE6R,WAAY,QALhC,SAQE,uBAAM1Q,UAAU,iBAGlB,uBACEA,UAAU,0BACVC,MAAOnY,KAAKuV,MAAMiJ,SAAW,CAAEiW,KAAM,IAAO,GAF9C,UAIE,sBACEvc,UAAU,0BACVC,MAAO,CAAE3O,OAAQ,OAAQglC,OAAQ,iBAFnC,SAIE,eAAC1f,GAAA,EAAD,gCAEF,eAAC,GAAD,eAAe4kB,OAEjB,qBAAIx7B,UAAU,kBAAd,SACGlY,KAAKuV,MAAMqT,WAAa5oB,KAAKqzC,mBAAqB,OAErD,qBAAIn7B,UAAU,kBAAd,SACGlY,KAAKuV,MAAMqT,WAAa5oB,KAAKszC,mBAAqB,UAIvD,uCACE,uBAAKp7B,UAAU,oBAAf,UACE,eAAC,WAAD,CACE7L,MAAOrM,KAAK0T,MAAMsS,EAAEhmB,KAAKuV,MAAM69B,YAAc,SAAW,QACxDntB,SAAS,SACTC,QAAQ,aACR/N,MAAO,CACL8N,SAAU,WACV6D,IAAK,EACLD,MAAO,EACPrgB,OAAQ,QARZ,SAWE,uBACE0O,UACElY,KAAKuV,MAAM69B,YACP,0BACA,4BAENrtB,QAAS,WACP,EAAKssB,kBAKVryC,KAAKuV,MAAM2V,OACqB,YAAjClrB,KAAK0T,MAAM4H,YAAY4P,OACc,SAArClrB,KAAK0T,MAAM4H,YAAY3O,WACc,SAArC3M,KAAK0T,MAAM4H,YAAY3O,WACc,QAArC3M,KAAK0T,MAAM4H,YAAY3O,UACrB,sBAAKuL,UAAU,aAAa3V,IAAKvC,KAAKuV,MAAM2V,MAAO/E,IAAI,KAEvD,sBAAKjO,UAAU,aAAf,SACE,eAAC,GAAD,CAEI7F,OAAQrS,KAAK0T,MAAM4H,YAAYjJ,OAC/BhG,MAAOrM,KAAK0T,MAAM4H,YAAYnW,KAC9B42B,MAAO,QAMf,oBAAG7jB,UAAU,aAAb,SAA2BlY,KAAK0T,MAAM4H,YAAYnW,OAClD,qBAAG+S,UAAU,cAAb,UACE,eAAC4W,GAAA,EAAD,qBADF,IACyB,IACvB,eAACA,GAAA,EAAD,UACG9uB,KAAK0T,MAAM4H,YAAYhP,OACpBtM,KAAK0T,MAAM4H,YAAYhP,OACvB,sBAGR,wBAAM4L,UAAU,mBAAhB,UACE,eAAC4W,GAAA,EAAD,2BADF,KACgC/a,KAAK+E,MAAM9Y,KAAK0T,MAAMgI,KAAO,IAD7D,OAGE,eAACoT,GAAA,EAAD,wBAED9uB,KAAK0T,MAAM6H,YAAY42B,UACtB,sBAAKj6B,UAAU,wBAAf,SACE,eAAC,GAAD,eAAew7B,MAInB,uBAAKx7B,UAAU,wBAAf,UACE,uBACEA,UAAU,qBACV6N,QAAS,WACP,EAAKotB,gBAAgB,aAEvBh7B,MAC4B,aAA1BnY,KAAKuV,MAAMw9B,WAA4B,GAAK,CAAEtb,QAAS,IAN3D,SASE,eAAC3I,GAAA,EAAD,wBAEF,uBACE5W,UAAU,sBACVC,MAC4B,cAA1BnY,KAAKuV,MAAMw9B,WACP,GACA,CAAEtb,QAAS,IAEjB1R,QAAS,WACP,EAAKotB,gBAAgB,cARzB,SAWE,eAACrkB,GAAA,EAAD,yBAEF,uBACE5W,UAAU,sBACVC,MAC4B,UAA1BnY,KAAKuV,MAAMw9B,WAAyB,GAAK,CAAEtb,QAAS,IAEtD1R,QAAS,WACP,EAAKotB,gBAAgB,UANzB,SASE,eAACrkB,GAAA,EAAD,qBAEF,uBACE5W,UAAU,sBACVC,MAC4B,YAA1BnY,KAAKuV,MAAMw9B,WAA2B,GAAK,CAAEtb,QAAS,IAExD1R,QAAS,WACP,EAAKotB,gBAAgB,YANzB,SASE,eAACrkB,GAAA,EAAD,6BAIN,sBAAK5W,UAAU,yBAAf,SACE,sBAAKA,UAAU,kBAAf,SAC6B,aAA1BlY,KAAKuV,MAAMw9B,WACV,eAAC,GAAD,IAEA,eAAC,GAAD,eAAiBC,iB,GA/RLz6B,IAAMC,WCE9BgO,GAAgB,CAAEjC,wBAAsBrC,gBAC/BuE,gBARS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,aAM1BiH,GAFaC,CAGbC,eAAkBwsB,KCILS,I,OAhBb,WACEhjC,EACAC,EACAmI,EACAlI,EACAgxB,GACC,yBAZHz3B,SAYE,OAXFuG,aAWE,OAVFC,SAUE,OATFmI,WASE,OARFlI,gBAQE,OAPFgxB,aAOE,EACA7hC,KAAKoK,KAAM,IAAI+B,MAAOC,UAAY,GAClCpM,KAAK2Q,QAAUA,EACf3Q,KAAK4Q,IAAMA,EACX5Q,KAAK+Y,MAAQA,EACb/Y,KAAK6Q,WAAaA,EAClB7Q,KAAK6hC,QAAUA,ICLb+R,G,oDAQJ,WAAYlgC,GAA6B,IAAD,8BACtC,cAAMA,IALRmgC,eAIwC,IAHxC7C,WAGwC,IAFxCzN,WAEwC,EAEtC,EAAKhuB,MAAQ,CACXu+B,aACgD,QAA9C7hC,IAAUC,gBAAgB,gBAC5B6hC,YAAY,EACZr4B,KAAM,EACNs4B,kBAAmBtjC,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC5DsG,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EACJojC,SAAU,GAEZ,EAAKJ,UAAY1nC,KAAK+nC,MACtB,EAAKlD,MAAQ,IAbyB,E,qDAexC,WAAqB,IAAD,OAClBpmC,OAAOupC,eAAiB,WACtB,EAAKC,gB,uCAGT,SAA0BvX,GACxB,GACEA,EAAUthB,YAAYopB,WACtB9H,EAAUthB,YAAYopB,UAAUpyB,UAChCvS,KAAK0T,MAAM6H,YAAYopB,UACvB,CACA,IAAMD,EAAkB1kC,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBACzD,IAAKA,EAAgB5Z,MACnB,OAGA9qB,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBAAkB7zB,aACnDgsB,EAAUthB,YAAYopB,UAAUD,kBAAkB7zB,aAElD7Q,KAAKgxC,MAAQ7kC,KAAK+nC,MAAQl0C,KAAK6zC,UAC/B7zC,KAAK6zC,UAAY1nC,KAAK+nC,OAExBl0C,KAAK+W,SAAS,CACZk9B,UACIvP,EAAgB5Z,MAAMoiB,UAAUuG,MAChC/O,EAAgB5Z,MAAMoiB,UAAUC,MAChCntC,KAAKgxC,MACP,S,0BAMR,WACGhxC,KAAKuV,MAAMu+B,aAER9zC,KAAKq0C,uBADLr0C,KAAKs0C,qB,8BAKX,WACE,IAAIC,EAAUpsC,SAASW,gBACnByrC,EAAGC,kBACLD,EAAGC,oBACMD,EAAGE,qBACZF,EAAGE,uBACMF,EAAGG,wBACZH,EAAGG,0BACMH,EAAGI,qBACZJ,EAAGI,sBAGL30C,KAAK+W,SAAS,CAAE+8B,cAAc,IAC9B7hC,IAAU2F,gBAAgB,eAAgB,S,kCAG5C,WAEOzP,SAASysC,oBAEVzsC,SAAS0sC,eACX1sC,SAAS0sC,iBACA1sC,SAAS2sC,iBAClB3sC,SAAS2sC,mBACA3sC,SAAS4sC,oBAClB5sC,SAAS4sC,sBACA5sC,SAAS6sC,sBAClB7sC,SAAS6sC,uBAGXh1C,KAAK+W,SAAS,CAAE+8B,cAAc,IAC9B7hC,IAAU2F,gBAAgB,eAAgB,S,+BAE5C,WAAqB,IAAD,OACdjH,EAAU3Q,KAAK0T,MAAM4H,YAAYlR,IAC/Bs6B,EAAkB1kC,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBACrDE,EAAcF,EAAgB5Z,MAAMtY,KACpCqvB,EAAU,kBACVpiB,EAAiBzf,KAAK0T,MAAMgM,gBAAgBlS,QAC9C,SAACC,GAAD,OACEm3B,EAAY/6B,QAAQ4D,EAAK+E,KAAK/G,MAAM,KAAK,KAAO,GAChDgC,EAAK+E,KAAK/G,MAAM,KAAK,GAAG5B,QAAQ+6B,IAAgB,KAClD,GACEnlB,IACFoiB,EAAUpiB,EAAe1G,MAAMpL,KAAK,MAEtC,IAAM+iC,EAAUhM,EAAgB5Z,MAAMla,IACnCrG,QAAQ,MAAO,IACfA,QAAQ,WAAY,IACjBomC,EAAWjM,EAAgB5Z,MAAMla,IACpCrG,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACXqmC,EAASlM,EAAgBvgC,IAAIyM,IAAIrG,QAAQ,MAAO,IAAIA,QAAQ,KAAM,IAClE+9B,EAAQ,kBAAcoI,EAAd,aAA0BC,EAA1B,YAAsCC,EAAtC,KACRhgC,EAAMF,IAAeosB,OAAO98B,KAAK0T,MAAM4H,YAAYlR,KAAKwG,IAC9D5Q,KAAK0T,MAAM6H,YAAYs1B,SAASvI,GAAU9xB,MAAK,SAAC8tB,GAAgB,IAAD,EAC7D,GAAKA,EAAL,CACA,IAAI7zB,EAAO6zB,EAAMjR,WAKjB5iB,GADAA,GADAA,GADAA,GADAA,EAAOA,EAAKlG,QAAQ,QAAS,KACjBA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,IAC3B,IAAIsG,EAAaH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EACAokC,EAAW,IAAItB,GACjBhjC,EACAC,EACAH,EAAK7E,OAAO,EAAG,KACfiF,EACAgxB,GAEErd,EAAW,UAAG,EAAK9Q,MAAM6L,iBAAd,QAA2B,GAC1CiF,EAAYtkB,KAAK+0C,GACjB,EAAKvhC,MAAMiQ,gBAAgBa,GAC3B7S,IAAYP,QAAQ,YAAaoT,GACjC,EAAKzN,SAAS,CAAEg9B,YAAY,IAC5B,EAAKrgC,MAAM6O,cAAc,oBACzB,EAAK7O,MAAM8O,kBAAiB,GAC5B,EAAK9O,MAAM8rB,oBAAmB,S,wBAKlC,WACEvtB,IAAU2F,gBAAgB,eAAgB,MAC1ChN,OAAO68B,iBAAmB78B,OAAO68B,gBAAgB4I,SAEjDrwC,KAAKq0C,uBAELr0C,KAAK0T,MAAM0D,oBAAmB,GAC9BpX,KAAK0T,MAAMwO,cAAa,GACxBliB,KAAK0T,MAAM2rB,gBAAe,GAC1B5jB,EAAYy5B,QAAQl1C,KAAK0T,MAAM4H,YAAYlR,IAAKpK,KAAK0T,MAAMgI,MAC3DzJ,IAAU2F,gBAAgB,cAAezP,SAAS0L,KAAKgE,aACvD5F,IAAU2F,gBAAgB,eAAgBzP,SAAS0L,KAAKM,cACxDlC,IAAU2F,gBAAgB,UAAWhN,OAAOkN,QAAU,IACtD7F,IAAU2F,gBAAgB,UAAWhN,OAAOmN,QAAU,M,oBAGxD,WAAU,IAAD,OACP,OACE,uBAAKG,UAAU,uBAAf,UACE,uBAAKA,UAAU,sBAAf,UACE,gCACE,gBAAC4W,GAAA,EAAD,CACEse,QAAQ,uBACRC,MAAOt5B,KAAK+E,OACT9Y,KAAK0T,MAAMgI,KACVD,EAAYrP,QAAQpM,KAAK0T,MAAM4H,YAAYlR,MAC3C,IALN,kCASG,CACCijC,MAAOt5B,KAAKohC,IACVphC,KAAK+E,OACF9Y,KAAK0T,MAAMgI,KACVD,EAAYrP,QAAQpM,KAAK0T,MAAM4H,YAAYlR,MAC3C,MAdV,eAFJ,eAwBE,gCACE,gBAAC0kB,GAAA,EAAD,CACEse,QAAQ,sBACRC,MAAOt5B,KAAKuW,KAAKtqB,KAAKuV,MAAM0+B,SAAW,IAFzC,iCAKG,CACC5G,MAAM,GAAD,OAAKt5B,KAAKuW,KAAKtqB,KAAKuV,MAAM0+B,SAAW,MAN9C,kBAYJ,uBACE/7B,UAAU,sBACV6N,QAAS,WACP,EAAKquB,aACLxpC,OAAOwiB,SAJX,UAOE,uBAAMlV,UAAU,gCAChB,uBAAMA,UAAU,oBAAhB,SACE,eAAC4W,GAAA,EAAD,wBAGJ,uBACE5W,UAAU,sBACV6N,QAAS,WACH,EAAKrS,MAAM6H,YAAYopB,UACzB,EAAKyQ,qBAEL,EAAK1hC,MAAM6O,cAAc,qBACzB,EAAK7O,MAAM8O,kBAAiB,KAPlC,UAWE,uBAAMtK,UAAU,+BAChB,uBAAMA,UAAU,oBAAhB,SACE,eAAC4W,GAAA,EAAD,gCAGJ,uBACE5W,UAAU,0BACV6N,QAAS,WACP,EAAKsvB,gBAHT,UAME,uBAAMn9B,UAAU,0CACdlY,KAAKuV,MAAMu+B,aAKX,uBAAM57B,UAAU,wBAAhB,SACE,eAAC4W,GAAA,EAAD,gCALF,uBAAM5W,UAAU,wBAAhB,SACE,eAAC4W,GAAA,EAAD,2C,GAlPevW,IAAMC,WA+PpBC,eAAWm7B,IC9OpBptB,GAAgB,CACpB7C,mBACAvM,sBACAmN,wBACA/B,mBACAD,gBACA8c,kBACAG,sBACAtd,gBAEauE,gBArBS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBiE,UAAWhK,EAAM1J,OAAO0T,UACxBhC,MAAOhI,EAAM1J,OAAO0R,MACpBlK,MAAOkC,EAAMwL,QAAQ1N,MACrBiM,UAAW/J,EAAM0L,cAAc3B,UAC/BI,gBAAiBnK,EAAM1J,OAAO6T,mBAehC8G,GAFaC,CAGbC,eAAkBktB,KCnCd7H,I,OAAc,CAClB/c,MAAM,EACNC,UAAU,EACVC,cAAe8c,GACf5c,iBAAkB,CAChBC,oBAAqB,oBAkNVimB,G,oDA3Mb,WAAY5hC,GAA4B,IAAD,8BACrC,cAAMA,IA2CR6hC,iBAAmB,SAACxpC,GAClB,IAAM8E,EAAa9E,EAAMvJ,OAAO+Q,MAAQ,IAClChB,EAAW1B,EACb,EAAK6C,MAAM4L,UAAUk2B,kBAAkB3kC,GACvC,EACJ,EAAK6C,MAAM6H,YAAYopB,UAAUpe,QAAQhU,IAjDJ,EAoDvCkjC,gBAAkB,SAAC1pC,GACjB,EAAKgL,SAAS,CAAE2+B,kBAAmB3pC,EAAMvJ,OAAO+Q,MAAQ,OArDnB,EAuDvCoiC,gBAAkB,WAChB,GAAK,EAAKjiC,MAAM6H,YAAYopB,UAA5B,CAGA,IAAMD,EAAkB,EAAKhxB,MAAM6H,YAAYopB,UAAUD,kBACzD,GAAKA,EAAgB5Z,MAArB,CACA,IAAIuZ,EAAeK,EAAgB5Z,MAAM3X,MACzC,EAAK4D,SAAS,CACZ6+B,oBAAqBvR,IAEvB,IAAMrjB,EAAU,EAAKtN,MAAM6H,YAAYyF,QAAQqjB,EAAe,GAC1DrjB,GAAWA,EAAQxO,MACrB,EAAKkB,MAAM6H,YAAYopB,UAAUpe,QAAQvF,EAAQxO,MAAMgE,MAAK,WAC1D,IAAI3F,EAAaH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EAEJ,EAAKkG,SAAS,CAAE2+B,kBAAmB7kC,UAzEF,EA6EvCglC,YAAc,WACZ,IAAMnR,EAAkB,EAAKhxB,MAAM6H,YAAYopB,UAAUD,kBACzD,GAAKA,EAAgB5Z,MAArB,CACA,IAAIuZ,EAAeK,EAAgB5Z,MAAM3X,MACzC,EAAK4D,SAAS,CACZ6+B,oBAAqBvR,IAEvB,IAAMrjB,EAAU,EAAKtN,MAAM6H,YAAYyF,QAAQqjB,EAAe,GAC1DrjB,GAAWA,EAAQxO,MACrB,EAAKkB,MAAM6H,YAAYopB,UAAUpe,QAAQvF,EAAQxO,MAAMgE,MAAK,WAC1D,IAAI3F,EAAaH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EACJ,EAAKkG,SAAS,CAAE2+B,kBAAmB7kC,SA3FF,EA+FvCilC,kBAAoB,SAAC/pC,GACnB,GAAKA,EAAMvJ,OAAO+Q,MAAlB,CACA,IAAMyN,EAAU,EAAKtN,MAAM6H,YAAYyF,QAAQjV,EAAMvJ,OAAO+Q,OACxDyN,GAAWA,EAAQxO,MACrB,EAAKkB,MAAM6H,YAAYopB,UAAUpe,QAAQvF,EAAQxO,MAAMgE,MAAK,WAC1D,IAAI3F,EAAaH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAC3DyG,WACCH,IAAeosB,OAAO,EAAKppB,MAAM4H,YAAYlR,KAAKyG,WAClD,EACJ,EAAKkG,SAAS,CAAE2+B,kBAAmB7kC,SAxGF,EA4GvCklC,eAAiB,SAAChqC,KA1GhB,EAAKwJ,MAAQ,CACXmgC,kBAAmB,EAAKhiC,MAAM7C,WAAa,EAAK6C,MAAM7C,WAAa,EACnE4O,eAAgB,GAChBu2B,YAAa,EACbC,UAAW,EACXL,oBAAqB,GAPc,E,6DAWvC,SAA0B/Y,GACxB,GACEA,EAAUthB,YAAYopB,WACtB9H,EAAUthB,YAAYopB,UAAUpyB,UAChCvS,KAAK0T,MAAM6H,YAAYopB,UACvB,CACA,IAAMD,EAAkB1kC,KAAK0T,MAAM6H,YAAYopB,UAAUD,kBACzD,IAAKA,EAAgB5Z,MACnB,OAEF9qB,KAAK+W,SAAS,CACZi/B,YAAatR,EAAgB5Z,MAAMoiB,UAAUC,KAC7C8I,UAAWvR,EAAgB5Z,MAAMoiB,UAAUuG,MAC3CmC,oBAAqBlR,EAAgB5Z,MAAM3X,QAE7C,IAAIyxB,EAAcF,EAAgB5Z,MAAMtY,KACpCqvB,EAAU,kBACVpiB,EAAiBzf,KAAK0T,MAAMgM,gBAAgBlS,QAC9C,SAACC,GAAD,OAAeA,EAAK+E,KAAK/G,MAAM,KAAK,KAAOm5B,KAC3C,GACEnlB,IACFoiB,EAAUpiB,EAAe1G,MAAMpL,KAAK,MAEtC3N,KAAK+W,SAAS,CAAE0I,eAAgBoiB,IAE9BhF,EAAUvhB,YAAYlR,KACxBpK,KAAK0T,MAAMywB,sBAAsBnkC,KAAK0T,MAAM4H,aAE1CuhB,EAAUhsB,YACZ7Q,KAAK+W,SAAS,CAAE2+B,kBAAmB7Y,EAAUhsB,e,oBAqEjD,WAAU,IAAD,OACP,OAAK7Q,KAAK0T,MAAM4L,WAAatf,KAAK0T,MAAM6H,YAAYopB,UAEhD,sBAAKzsB,UAAU,iBAAf,SACE,eAAC,KAAD,CAAQ6X,QAASgc,GAAaviC,OAAQ,IAAKD,MAAO,QAKtD,uBAAK2O,UAAU,iBAAf,UACE,oBAAGA,UAAU,gBAAgBC,MAAO,CAAE6X,UAAW,IAAjD,SACE,kCACE,eAAClB,GAAA,EAAD,+BADF,IACmC,IAChC/a,KAAKwpB,MACJv9B,KAAKuV,MAAMmgC,kBAAoB,EAC3B,IAC+B,IAA/B11C,KAAKuV,MAAMmgC,mBALnB,qBAWF,oBAAGx9B,UAAU,gBAAgBC,MAAO,CAAE6X,UAAW,GAAjD,SACGhwB,KAAKuV,MAAMygC,YAAc,EACxB,uCACE,eAAClnB,GAAA,EAAD,oCACA,wBACEjpB,KAAK,OACLV,KAAK,WACL+G,GAAG,WACHk1B,OAAQ,SAACr1B,GACP,EAAKgqC,eAAehqC,IAEtBwH,MAAOvT,KAAKuV,MAAMygC,cAEpB,uCAASh2C,KAAKuV,MAAM0gC,aAXtB,eAYE,eAACnnB,GAAA,EAAD,+BACA,wBACEjpB,KAAK,OACLV,KAAK,cACL+G,GAAG,cACHk1B,OAAQ,SAACr1B,GACP,EAAK+pC,kBAAkB/pC,IAEzBojC,aAAcnvC,KAAKuV,MAAMqgC,sBAE3B,uCACK51C,KAAK0T,MAAM6H,YAAYopB,UAAU7yB,KAAKkX,MAAMzoB,aAGjD,OAEN,+BACE,wBACE2X,UAAU,iBACVi3B,aAAcp7B,KAAKwpB,MAAqC,IAA/Bv9B,KAAKuV,MAAMmgC,mBACpC7vC,KAAK,QACLmO,IAAI,MACJs7B,IAAI,IACJL,KAAK,IACLQ,UAAW,SAAC1jC,GACV,EAAKwpC,iBAAiBxpC,IAExBmqC,WAAY,SAACnqC,GACX,EAAKwpC,iBAAiBxpC,IAExB6qB,SAAU,SAAC7qB,GACT,EAAK0pC,gBAAgB1pC,IAEvBoM,MAAO,CAAE5O,MAAO,IAAKkrB,KAAM,GAAI3K,IAAK,QAIxC,sBACE5R,UAAU,mBACV6N,QAAS,WACP,EAAK4vB,mBAHT,SAME,uBAAMz9B,UAAU,sCAAhB,iBAEF,sBACEA,UAAU,eACV6N,QAAS,WACP,EAAK8vB,eAHT,SAME,uBAAM39B,UAAU,6C,GAxMEK,IAAMC,WCH5BgO,GAAgB,CAAE2d,0BACT1d,gBAVS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxBzK,WAAY0E,EAAM0L,cAAcpQ,WAChCyO,UAAW/J,EAAM0L,cAAc3B,UAC/BI,gBAAiBnK,EAAM1J,OAAO6T,mBAMhC8G,GAFaC,CAGbC,eAAkB4uB,KCjBhBa,GAAUvrC,OAAeurC,OAEhBtP,GAAa,SAAClC,GACzB,IAAIyR,EAAY1jC,UAAU2jC,UAAUxsC,QAAQ,YAAc,EACtDysC,GAAO,EACLC,EAAY,SAACxqC,GAEjB,IAAIuqC,EAEJ,OAAsB,KAAlBvqC,EAAM0b,SAAoC,KAAlB1b,EAAM0b,SAChCkd,EAAU6R,OACVF,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,GAEa,KAAlBvqC,EAAM0b,SAAoC,KAAlB1b,EAAM0b,SAChCkd,EAAUngC,OACV8xC,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,QANT,GASIG,EAAe,SAAC1qC,GAEpB,GADAA,EAAM4sB,kBACF2d,EACJ,OAAIvqC,EAAM2qC,OAAS,GACjB/R,EAAU6R,OACVF,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,GAELvqC,EAAM2qC,OAAS,GACjB/R,EAAUngC,OACV8xC,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,QANT,GAUIK,EAAc,SAAC5qC,GACnB,IAAIuqC,EACJ,OAAIvqC,EAAM6qC,WAAa,GACrBjS,EAAU6R,OACVF,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,GAELvqC,EAAM6qC,WAAa,GACrBjS,EAAUngC,OACV8xC,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MACI,QANT,GAuCF3R,EAAUpY,GAAG,YAAY,WACvB,IAAIvT,EAAS7Q,SAASkB,qBAAqB,UAAU,GACrD,GAAK2P,EAAL,CACA,IAAIvE,EAAMuE,EAAOC,gBACjB,GAAKxE,EAAL,CAGA,GAA6C,QAAzCxC,IAAUC,gBAAgB,WACjB,IAAIikC,GAAO1hC,GACnB8X,GAAG,kCAAkC,SAACxgB,IAtC7B,SAACA,GACf,IAAIuqC,EACe,YAAfvqC,EAAMlG,MAAqC,UAAfkG,EAAMlG,MACpC8+B,EAAUngC,OACV8xC,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,OAGc,aAAfvqC,EAAMlG,MAAsC,YAAfkG,EAAMlG,QACrC8+B,EAAU6R,OACVF,GAAO,EACPlhC,YAAW,WACTkhC,GAAO,IACN,MAwBDO,CAAQ9qC,MAKZnB,OAAO8M,iBAAiB,UAAW6+B,GAzBnB,SAAC9hC,GACjBA,EAAIiD,iBAAiB,UAAW6+B,GAE5BH,EACF3hC,EAAIiD,iBAAiB,iBAAkB++B,GAAc,GAErDhiC,EAAIiD,iBAAiB,aAAci/B,GAAa,GAoBlDG,CAAUriC,SC6PCsiC,G,oDA5Vb,WAAYrjC,GAAqB,IAAD,8BAC9B,cAAMA,IALRsjC,kBAIgC,IAHhCC,eAGgC,IAFhCtS,eAEgC,IAoEhCuS,iBAAmB,WACjB,IAAI/J,EAAOhlC,SAASmR,cAAc,cAC9BpM,EAAO,EAAKwG,MAAM6H,YAClB4xB,EAAM9kC,YACR8kC,EAAM9kC,UAAY,IAGpB,EAAK0O,SAAS,CAAE4tB,UAAW,OAAQ,WAChC/5B,OAAek6B,MAAMrqB,OACtB,EAAKkqB,UAAYz3B,EAAKiqC,SAAShK,EAAM,CACnCpsB,QAC4B,eAA1B,EAAKxL,MAAMsK,WAA8B,aAAe,UAC1Du3B,KAAgC,eAA1B,EAAK7hC,MAAMsK,WAA8B,WAAa,OAC5DtW,MAAO,OACPC,OAAQ,OACR6tC,MAAM,EACNC,OAC8C,WAA5CrlC,IAAUC,gBAAgB,cAA6B,OAAS,KAEpE,EAAK6E,SAAS,CAAE4tB,UAAW,EAAKA,YACN,eAA1B,EAAKpvB,MAAMsK,YAA+BgnB,GAAW,EAAKlC,eAxF9B,EAoGhC6H,kBAAoB,SAACvmB,GAEnB,OAAQA,GACN,IAAK,QACH,EAAKlP,SAAS,CACZwgC,kBAAkB,EAAKhiC,MAAMgiC,mBAE/B,MACF,IAAK,OACH,EAAKxgC,SAAS,CACZygC,iBAAiB,EAAKjiC,MAAMiiC,kBAE9B,MACF,IAAK,MACH,EAAKzgC,SAAS,CACZ0gC,gBAAgB,EAAKliC,MAAMkiC,iBAE7B,MACF,IAAK,SACH,EAAK1gC,SAAS,CACZ2gC,mBAAmB,EAAKniC,MAAMmiC,sBAxHN,EAgIhC//B,kBAAoB,SAACsO,GAEnB,OAAQA,GACN,IAAK,QACH,GAAqD,QAAjDhU,IAAUC,gBAAgB,mBAC5B,MAEA,EAAK6E,SAAS,CAAEwgC,kBAAkB,IAClC,MAGJ,IAAK,OACH,GAAiD,QAA7CtlC,IAAUC,gBAAgB,eAC5B,MAEA,EAAK6E,SAAS,CAAEygC,iBAAiB,IACjC,MAEJ,IAAK,MACH,EAAKzgC,SAAS,CAAE0gC,gBAAgB,IAChC,MACF,IAAK,SACH,EAAK1gC,SAAS,CAAE2gC,mBAAmB,MAtJT,EA4JhC7K,SAAW,WACT,EAAKt3B,MAAMovB,UAAUngC,QA7JS,EA+JhCooC,SAAW,WACT,EAAKr3B,MAAMovB,UAAU6R,QA9JrB,EAAKjhC,MAAQ,CACXgiC,iBACmD,QAAjDtlC,IAAUC,gBAAgB,mBAC5BulC,gBAAgB,EAChBC,mBAAmB,EACnBF,gBAC+C,QAA7CvlC,IAAUC,gBAAgB,eAC5BiN,WAAW,EACXwlB,UAAW,KACX5I,MAAO9pB,IAAUC,gBAAgB,UAAY,EAC7Cs8B,OAAQ5gC,SAASqE,IAAUC,gBAAgB,YAAc,GACzDwJ,KAAMD,EAAYrP,QAAQ,EAAKsH,MAAM4H,YAAYlR,KACjDywB,QAAkD,QAAzC5oB,IAAUC,gBAAgB,WACnC2N,WAAY5N,IAAUC,gBAAgB,eAAiB,UAf3B,E,sDAkBhC,WACElS,KAAK0T,MAAM6Q,uBACXvkB,KAAK0T,MAAMywB,sBAAsBnkC,KAAK0T,MAAM4H,aAC5Ctb,KAAK0T,MAAMmQ,mBACX7jB,KAAK0T,MAAMoP,mBACX9iB,KAAK0T,MAAMuQ,oBAAoBjkB,KAAK0T,MAAM6H,e,8CAE5C,SAAiCshB,GAAyB,IAAD,OACvD78B,KAAK+W,SAAS,CACZoI,UAAW0d,EAAU1d,YAInB0d,EAAU1d,YACZnf,KAAKg3C,aAAe5hC,YAAW,WAC7B,EAAK1B,MAAM8O,kBAAiB,GAC5B,EAAKzL,SAAS,CAAEoI,WAAW,MAC1B,Q,+BAGP,WAAqB,IAAD,OAClBnf,KAAKk3C,mBACLl3C,KAAK0T,MAAM6D,iBAAiBvX,KAAKk3C,kBACjCtsC,OAAO8M,iBAAiB,UAAU,WAChC,EAAKw/B,sBAEPl3C,KAAKi3C,UAAYz/B,aAAY,WAC3B,IAAIkE,EAAO,EAAKnG,MAAMmG,KACtBA,GAAQ,EACR,IAAIyxB,EAAOhlC,SAASmR,cAAc,cAE9Bq+B,EAAexvC,SAASmR,cAAc,cAExCq+B,IACCA,EAAatvC,WACY,eAA1B,EAAKkN,MAAMsK,YAEX,EAAKq3B,mBAEP,IACsE,EADlElT,EAAMmJ,EAAM93B,uBAAuB,kBAAkB,GACrD83B,EAAM93B,uBAAuB,kBAAkB9U,OAAS,GAAKyjC,IAC/D,UAAAA,EAAI0G,kBAAJ,SAAgBkN,YAAY5T,IAE9B,EAAKjtB,SAAS,CAAE2E,SAChB,EAAKjE,iBACJ,O,kCAEL,WACE84B,cAAcvwC,KAAKi3C,a,0BAyBrB,WACEhlC,IAAU2F,gBAAgB,eAAgB,MAE1C3F,IAAU2F,gBAAgB,cAAezP,SAAS0L,KAAKgE,YAAc,IACrE5F,IAAU2F,gBAAgB,eAAgBzP,SAAS0L,KAAKM,aAAe,IACvElC,IAAU2F,gBAAgB,UAAWhN,OAAOkN,QAAU,IACtD7F,IAAU2F,gBAAgB,UAAWhN,OAAOmN,QAAU,M,oBAiExD,WAAU,IAAD,OACD8/B,EAAiB,CACrBlT,UAAW3kC,KAAKuV,MAAMovB,UACtBhtB,kBAAmB3X,KAAK2X,kBACxB60B,kBAAmBxsC,KAAKwsC,kBACxB/pB,OACEziB,KAAKuV,MAAMiiC,iBACXx3C,KAAKuV,MAAMkiC,gBACXz3C,KAAKuV,MAAMmiC,mBACX13C,KAAKuV,MAAMgiC,kBAEf,OACE,uBAAKr/B,UAAU,SAAf,UACE,sBACEA,UAAU,oCACV6N,QAAS,WACP,EAAK6mB,YAHT,SAME,uBAAM10B,UAAU,4CAElB,sBACEA,UAAU,gCACV6N,QAAS,WACP,EAAK8mB,YAHT,SAME,uBAAM30B,UAAU,wCAElB,sBACEA,UAAU,gCACV6N,QAAS,WACP,EAAKymB,kBAAkB,QACvB,EAAKA,kBAAkB,SACvB,EAAKA,kBAAkB,UACvB,EAAKA,kBAAkB,QAN3B,SASE,uBAAMt0B,UAAU,oCAEjBlY,KAAKuV,MAAM4J,UAAY,eAAC,GAAD,IAAiB,KACzC,sBACEjH,UAAU,aACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMiiC,iBAGrC,EAAKhL,kBAAkB,SAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,WAG3B,sBACEt0B,UAAU,cACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMgiC,kBAGrC,EAAK/K,kBAAkB,UAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,YAG3B,sBACEt0B,UAAU,YACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMkiC,gBAGrC,EAAKjL,kBAAkB,QAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,UAG3B,sBACEt0B,UAAU,eACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMmiC,mBAGrC,EAAKlL,kBAAkB,WAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,aAI1BxsC,KAAKuV,MAAMovB,WAAa3kC,KAAK0T,MAAM6H,YAAYopB,WAC9C,eAAC,GAAD,eAAgBkT,IAElB,sBACE3/B,UAAU,0BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,UAEzBQ,MACEnY,KAAKuV,MAAMgiC,iBACP,GACA,CACEpc,UAAW,qBATrB,SAaE,eAAC,GAAD,MAEF,sBACEjjB,UAAU,6BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,SAEzBQ,MACEnY,KAAKuV,MAAMiiC,gBACP,GACA,CACErc,UAAW,sBATrB,SAaE,eAAC,GAAD,CAAuBzf,KAAM1b,KAAKuV,MAAMmG,SAE1C,sBACExD,UAAU,2BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,WAEzBQ,MACEnY,KAAKuV,MAAMmiC,kBACP,GACA,CACEvc,UAAW,qBATrB,SAaE,eAAC,GAAD,CAAqBzf,KAAM1b,KAAKuV,MAAMmG,SAExC,sBACExD,UAAU,4BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,QAEzBQ,MACEnY,KAAKuV,MAAMkiC,eACP,GACA,CACEtc,UAAW,sBATrB,SAaE,eAAC,GAAD,CAAsBzf,KAAM1b,KAAKuV,MAAMmG,SAEzC,sBACExD,UAAU,iBACVhM,GAAG,YACHiM,MACEhQ,SAAS0L,KAAKgE,YAAc,IACxB,CAAE4c,KAAM,EAAG5K,MAAO,GACQ,eAA1B7pB,KAAKuV,MAAMsK,WACX,CACE4U,KAAK,eAAD,OAAiB,IAAMrc,WAAWpY,KAAKuV,MAAMwmB,OAA7C,OACJlS,MAAM,eAAD,OAAiB,IAAMzR,WAAWpY,KAAKuV,MAAMwmB,OAA7C,OACLjS,IAAK,OACL4T,OAAQ,QAEgB,WAA1B19B,KAAKuV,MAAMsK,WACX,CACE4U,KAAK,eAAD,OAAiB,IAAMrc,WAAWpY,KAAKuV,MAAMwmB,OAA7C,OACJlS,MAAM,eAAD,OAAiB,IAAMzR,WAAWpY,KAAKuV,MAAMwmB,OAA7C,QAEmB,WAA1B/7B,KAAKuV,MAAMsK,WACX,CACE4U,KAAMz0B,KAAKuV,MAAMi5B,OAAS,GAAK,KAC/B3kB,MAAO7pB,KAAKuV,MAAMi5B,OAAS,GAAK,MAElC,KAIR,eAAC,GAAD,CAAkB9yB,KAAM1b,KAAKuV,MAAMmG,c,GA3VtBnD,IAAMC,WCUrBgO,GAAgB,CACpB3C,oBACAU,wBACAN,uBACAzB,mBACA2hB,yBACArhB,oBACAvL,qBAEakP,gBAhBS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxB6D,UAAW5J,EAAMwL,QAAQ5B,aAYWqH,GAAzBC,CAAwCswB,ICpBjDhL,GAAc,CAClB/c,MAAM,EACNC,UAAU,EACVC,cAAe8c,GACf5c,iBAAkB,CAChBC,oBAAqB,mBAKnByoB,G,oDAEJ,WAAYpkC,GAAyB,IAAD,8BAClC,cAAMA,IAFRxG,UACoC,EAElC,EAAKqI,MAAQ,GAFqB,E,sDAKpC,WAAsB,IAAD,OACfuB,EAAM3O,SAASoK,SAASC,KAAK/G,MAAM,KACnCrB,EAAM0M,EAAIA,EAAIvW,OAAS,GAAGkL,MAAM,KAAK,GAEzCkG,IAAYX,QAAQ,SAASwF,MAAK,SAAC/T,GACjC,IAAIqP,EAAOrP,EAAOuU,IAAEC,UAAUxU,EAAQ,CAAE2H,SACxCmH,KAAS2F,UAAU9M,GAAKoM,MAAK,SAAC/T,GAC5B,EAAKiR,MAAMyD,kBAAkBrF,GAC7B,EAAK4B,MAAMmR,kBAAkBja,OAAOugB,KAAK1oB,EAAQ,KACjD,EAAKiR,MAAM0D,oBAAmB,GAC9BC,KAAYC,UAAUlN,W,oBAK5B,WACE,OAAKpK,KAAK0T,MAAM0H,UAOT,eAAC,GAAD,IALH,sBAAKlD,UAAU,UAAf,SACE,eAAC,KAAD,CAAQ6X,QAASgc,GAAaviC,OAAQ,IAAKD,MAAO,Y,GA1BnCgP,IAAMC,WAiChBC,eAAWq/B,ICpCpBtxB,GAAgB,CACpBpP,sBACAD,qBACA0N,qBACAD,sBACApC,mBACAD,iBAEakE,gBAfS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BG,YAAa/F,EAAMzD,KAAKwJ,YACxBF,UAAW7F,EAAMzD,KAAKsJ,aAWcoL,GAAzBC,CAAwCqxB,I,UCLjDtxB,GAAgB,CACpBpP,sBACAD,qBACA0N,qBACAD,sBACApC,mBACAD,gBACA/N,e5ITK,SAAwBQ,GAC7B,MAAO,CAAEnP,KAAM,mBAAoBgb,QAAS7L,I4IS5CuC,qBAEakP,gBAlBS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BG,YAAa/F,EAAMzD,KAAKwJ,YACxBF,UAAW7F,EAAMzD,KAAKsJ,UACtBpG,SAAUO,EAAM1J,OAAOmJ,YAaawR,GAAzBC,CAAwChT,MC+NxCsjC,G,oDA/Ob,WAAYrjC,GAAqB,IAAD,8BAC9B,cAAMA,IALRsjC,kBAIgC,IAHhCC,eAGgC,IAFhCtS,eAEgC,IAkChC6H,kBAAoB,SAACvmB,GAEnB,OAAQA,GACN,IAAK,QACH,EAAKlP,SAAS,CACZwgC,kBAAkB,EAAKhiC,MAAMgiC,mBAE/B,MACF,IAAK,OACH,EAAKxgC,SAAS,CACZygC,iBAAiB,EAAKjiC,MAAMiiC,kBAE9B,MACF,IAAK,MACH,EAAKzgC,SAAS,CACZ0gC,gBAAgB,EAAKliC,MAAMkiC,iBAE7B,MACF,IAAK,SACH,EAAK1gC,SAAS,CACZ2gC,mBAAmB,EAAKniC,MAAMmiC,sBAtDN,EA8DhC//B,kBAAoB,SAACsO,GAEnB,OAAQA,GACN,IAAK,QACH,GAAqD,QAAjDhU,IAAUC,gBAAgB,mBAC5B,MAEA,EAAK6E,SAAS,CAAEwgC,kBAAkB,IAClC,MAGJ,IAAK,OACH,GAAiD,QAA7CtlC,IAAUC,gBAAgB,eAC5B,MAEA,EAAK6E,SAAS,CAAEygC,iBAAiB,IACjC,MAEJ,IAAK,MACH,EAAKzgC,SAAS,CAAE0gC,gBAAgB,IAChC,MACF,IAAK,SACH,EAAK1gC,SAAS,CAAE2gC,mBAAmB,MApFT,EA0FhC7K,SAAW,WACT,EAAKt3B,MAAMovB,UAAUngC,QA3FS,EA6FhCooC,SAAW,WACT,EAAKr3B,MAAMovB,UAAU6R,QA5FrB,EAAKjhC,MAAQ,CACXgiC,iBACmD,QAAjDtlC,IAAUC,gBAAgB,mBAC5BulC,gBAAgB,EAChBC,mBAAmB,EACnBF,gBAC+C,QAA7CvlC,IAAUC,gBAAgB,eAC5BiN,WAAW,EACXwlB,UAAW,KACX5I,MAAO9pB,IAAUC,gBAAgB,UAAY,EAC7Cs8B,OAAQ5gC,SAASqE,IAAUC,gBAAgB,YAAc,GACzDwJ,KAAMD,EAAYrP,QAAQ,EAAKsH,MAAM4H,YAAYlR,KACjDywB,QAAkD,QAAzC5oB,IAAUC,gBAAgB,WACnC2N,WAAY5N,IAAUC,gBAAgB,eAAiB,UAf3B,E,oEAmBhC,SAAiC2qB,GAAyB,IAAD,OACvD78B,KAAK+W,SAAS,CACZoI,UAAW0d,EAAU1d,YAInB0d,EAAU1d,YACZnf,KAAKg3C,aAAe5hC,YAAW,WAC7B,EAAK1B,MAAM8O,kBAAiB,GAC5B,EAAKzL,SAAS,CAAEoI,WAAW,MAC1B,Q,oBAmEP,WAAU,IAAD,OACD04B,EAAiB,CACrBlT,UAAW3kC,KAAKuV,MAAMovB,UACtBhtB,kBAAmB3X,KAAK2X,kBACxB60B,kBAAmBxsC,KAAKwsC,kBACxB/pB,OACEziB,KAAKuV,MAAMiiC,iBACXx3C,KAAKuV,MAAMkiC,gBACXz3C,KAAKuV,MAAMmiC,mBACX13C,KAAKuV,MAAMgiC,kBAEf,OACE,uBAAKr/B,UAAU,SAAf,UACE,sBACEA,UAAU,gCACV6N,QAAS,WACP,EAAKymB,kBAAkB,QACvB,EAAKA,kBAAkB,SACvB,EAAKA,kBAAkB,UACvB,EAAKA,kBAAkB,QAN3B,SASE,uBAAMt0B,UAAU,oCAEjBlY,KAAKuV,MAAM4J,UAAY,eAAC,GAAD,IAAiB,KACzC,sBACEjH,UAAU,aACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMiiC,iBAGrC,EAAKhL,kBAAkB,SAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,WAG3B,sBACEt0B,UAAU,cACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMgiC,kBAGrC,EAAK/K,kBAAkB,UAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,YAG3B,sBACEt0B,UAAU,YACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMkiC,gBAGrC,EAAKjL,kBAAkB,QAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,UAG1BxsC,KAAK0T,MAAM6H,YAAY42B,UACtB,sBACEj6B,UAAU,eACVmO,aAAc,WACR,EAAK9Q,MAAMslB,SAAW,EAAKtlB,MAAMmiC,mBAGrC,EAAKlL,kBAAkB,WAEzBzmB,QAAS,WACP,EAAKymB,kBAAkB,aAI7B,eAAC,GAAD,eAAYqL,IACZ,sBACE3/B,UAAU,0BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,UAEzBQ,MACEnY,KAAKuV,MAAMgiC,iBACP,GACA,CACEpc,UAAW,qBATrB,SAaE,eAAC,GAAD,MAEF,sBACEjjB,UAAU,6BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,SAEzBQ,MACEnY,KAAKuV,MAAMiiC,gBACP,GACA,CACErc,UAAW,sBATrB,SAaE,eAAC,GAAD,CAAuBzf,KAAM1b,KAAKuV,MAAMmG,SAEzC1b,KAAK0T,MAAM6H,YAAY42B,UACtB,sBACEj6B,UAAU,2BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,WAEzBQ,MACEnY,KAAKuV,MAAMmiC,kBACP,GACA,CACEvc,UAAW,qBATrB,SAaE,eAAC,GAAD,CAAqBzf,KAAM1b,KAAKuV,MAAMmG,SAG1C,sBACExD,UAAU,4BACVoO,aAAc,SAACva,GACb,EAAK4L,kBAAkB,QAEzBQ,MACEnY,KAAKuV,MAAMkiC,eACP,GACA,CACEtc,UAAW,sBATrB,SAaE,eAAC,GAAD,CAAsBzf,KAAM1b,KAAKuV,MAAMmG,gB,GA7O5BnD,IAAMC,WCWrBgO,GAAgB,CACpB3C,oBACAU,wBACAN,uBACAzB,mBACAM,qBAEa2D,gBAfS,SAAClR,GACvB,MAAO,CACLgG,YAAahG,EAAMzD,KAAKyJ,YACxBD,YAAa/F,EAAMzD,KAAKwJ,YACxB6D,UAAW5J,EAAMwL,QAAQ5B,UACzBtO,WAAY0E,EAAM0L,cAAcpQ,cAUI2V,GAAzBC,CAAwCswB,IChBjDtjC,I,2DAEJ,WAAYC,GAAqB,IAAD,8BAC9B,cAAMA,IAFRxG,UACgC,IAmChC6qC,WAnCgC,uCAmCnB,WAAOt1C,GAAP,SAAA6G,EAAA,sDACX8L,YAAW,WACT,IAAI4iC,EAAiB,IAAIptC,OAAOqtC,KAAKxkC,OACrCukC,EAAeriC,OAAOxN,SAASmR,cAAc,kBAC7C0+B,EAAeE,aAAaz1C,KAC3B,KALQ,2CAnCmB,sDAE9B,EAAK8S,MAAQ,GAFiB,E,qDAKhC,WAAqB,IAAD,SACduB,EAAM3O,SAASoK,SAASC,KAAK/G,MAAM,KACnCrB,EAAM0M,EAAIA,EAAIvW,OAAS,GAAGkL,MAAM,KAAK,GAEzCkG,IAAYX,QAAQ,SAASwF,MAAK,SAAC/T,GACjC,IAAIqP,EAAOrP,EAAOuU,IAAEC,UAAUxU,EAAQ,CAAE2H,SACxCmH,KAAS2F,UAAU9M,GAAK,GAAMoM,MAAK,SAAC/T,GAClC,EAAKiR,MAAMyD,kBAAkBrF,GAC7B,EAAKimC,WAAWt1C,GAChB,EAAKiR,MAAM0D,oBAAmB,GAC9BC,KAAYC,UAAUlN,SAG1B,UAAAjC,SACGmR,cAAc,wBADjB,SAEIC,aAAa,QAAS,eAC1B3O,OAAOupC,eAAiB,WACtB,EAAKC,gB,wBAIT,WACEp0C,KAAK0T,MAAM0D,oBAAmB,GAE9BnF,IAAU2F,gBAAgB,cAAezP,SAAS0L,KAAKgE,YAAc,IACrE5F,IAAU2F,gBAAgB,eAAgBzP,SAAS0L,KAAKM,aAAe,IACvElC,IAAU2F,gBAAgB,UAAWhN,OAAOkN,QAAU,IACtD7F,IAAU2F,gBAAgB,UAAWhN,OAAOmN,QAAU,M,oBAWxD,WACE,OAAO,sBAAKG,UAAU,eAAf,yB,GA9CUK,IAAMC,YAiDZC,eAAWhF,IC3CpB+S,GAAgB,CACpBpP,sBACAD,qBACA0N,qBACAD,sBACApC,mBACAD,iBAEakE,gBAfS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BG,YAAa/F,EAAMzD,KAAKwJ,YACxBF,UAAW7F,EAAMzD,KAAKsJ,aAWcoL,GAAzBC,CAAwChT,I,wCCZnD4c,GAAQzlB,OAAOylB,MACf8nB,GAAQvtC,OAAOutC,MAEb1kC,G,oDAEJ,WAAYC,GAAqB,IAAD,8BAC9B,cAAMA,IAFRxG,UACgC,IAiChCkrC,aAAe,SAAChuC,GACduH,IAAYX,QAAQ,SAASwF,MAAK,SAAC/T,GACjC,IAAIqP,EAAOrP,EAAOuU,IAAEC,UAAUxU,EAAQ,CAAE2H,SACxCmH,KAAS2F,UAAU9M,GAAK,GAAMoM,MAAK,SAAC/T,GAClC,EAAKiR,MAAMyD,kBAAkBrF,GACT,QAAhBA,EAAKO,OACP,EAAKgmC,UAAU51C,GACU,QAAhBqP,EAAKO,OACd,EAAKimC,UAAU71C,GACU,QAAhBqP,EAAKO,QACd,EAAKkmC,UAAU91C,GAEjB,EAAKiR,MAAM0D,oBAAmB,GAC9BC,KAAYC,UAAUlN,UA9CI,EA2DhCouC,kBAAoB,SAACjiC,GAUnB,IATA,IAQIkiC,EARAC,EAAS,GACTC,EACF,mEACEC,EAAQ,IAAIt5C,WAAWiX,GACvBsiC,EAAaD,EAAMC,WACnBC,EAAgBD,EAAa,EAC7BE,EAAaF,EAAaC,EAGrBl4C,EAAI,EAAGA,EAAIm4C,EAAYn4C,GAAQ,EAMtC83C,GAAUC,GAJG,UADbF,EAASG,EAAMh4C,IAAM,GAAOg4C,EAAMh4C,EAAI,IAAM,EAAKg4C,EAAMh4C,EAAI,MACjC,IAID+3C,GAHZ,OAARF,IAAmB,IAGgBE,GAF3B,KAARF,IAAiB,GAEiCE,EAD3C,GAARF,GAkBN,OAdsB,IAAlBK,EAKFJ,GAAUC,GAFG,KAFbF,EAAQG,EAAMG,MAEO,GAEIJ,GADZ,EAARF,IAAc,GACqB,KACb,IAAlBK,IAKTJ,GAAUC,GAHG,OADbF,EAASG,EAAMG,IAAe,EAAKH,EAAMG,EAAa,MAC/B,IAGEJ,GAFZ,KAARF,IAAiB,GAEkBE,GAD3B,GAARF,IAAe,GACmC,KAGlDC,GA5FuB,EA8FhCM,SAAW,SAACtwC,EAAsBmK,GAChC,IAAIiE,EAAM,EAAK0hC,kBAAkB9vC,GAE7BuwC,EAAW9wC,SAASC,cAAc,OACtC6wC,EAAS12C,IACP,QAAUgM,KAASsE,EAAUP,eAAiB,WAAawE,EAC7DmiC,EAAS1/B,aACP,QADF,gBAEWtH,IAAUC,gBAAgB,eAAiB,OAFtD,wBAGgD,QAA5CD,IAAUC,gBAAgB,cAA0B,QAAU,OAGlEtH,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAK4F,YAAYw/B,GAC3C,IAAI9M,EAAUvhC,OAAOmK,OAAO,GAAG5M,SAASmR,cAAc,KACjD6yB,GACLvhC,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAK+jC,YAAYzL,IA7Gb,EA+GhCxmB,WAAa,WACX/a,OAAOmK,OAAO,GAAG5M,SAAS+wC,iBAAkB5jC,SAC1C,EACA5E,IAAesB,gBAAgB,EAAKuD,MAAMnL,KAAKkH,SAlHnB,EAqHhCgnC,UAAY,SAAC71C,GACX,IAAIqM,EAAM,IAAIuhB,GACdvhB,EAAI6hB,UAAUluB,GAAQ+T,KAAtB,uCAA2B,WAAOzJ,GAAP,uBAAAzD,EAAA,oEACJsT,OAAOC,KAAK9P,EAAS6jB,OAAOvU,QADxB,gEAChB88B,EADgB,iBAEDrqC,EAAIpE,KAAKyuC,GAAUtoB,MAAM,eAFxB,OAEjBnoB,EAFiB,OAGjBmK,EAAYsmC,EAAS1tC,MAAM,KAAKC,UAAU,GAChD,EAAKstC,SAAStwC,EAASmK,GAJA,+IAMzB,EAAK8S,aANoB,gEAA3B,wDAvH8B,EAgIhC0yB,UAAY,SAAC51C,GACX,IADmC,EAC/B22C,EAAQ,IAAIjB,GAAM11C,GAClB42C,EAAUD,EAAME,aAFe,cAGlBD,GAHkB,IAGnC,2BAA0B,CAAC,IAAlB5rC,EAAiB,QACpB8rC,EAAWH,EAAMI,WAAW/rC,EAAKtI,MAChCo0C,GACHvrC,QAAQC,IAAI,wBAEd,IAAM4E,EAAYpF,EAAKtI,KAAKsG,MAAM,KAAKC,UAAU,GACjD,EAAKstC,SAASO,EAAU1mC,IATS,8BAWnC1K,SAAS+wC,iBAAkB5jC,SACzB,EACA5E,IAAesB,gBAAgB,EAAKuD,MAAMnL,KAAKkH,SA7InB,EAgJhCinC,UAAY,SAAC91C,GACXg3C,KAAMh3C,GAAQ+T,MACZ,SAACkjC,GAAoB,IAAD,gBACDA,GADC,IAClB,2BAAiC,CAAC,IAAzBjsC,EAAwB,QACzBoF,EAAYpF,EAAKtI,KAAKsG,MAAM,KAAKC,UAAU,GACjD,EAAKstC,SAASvrC,EAAKxM,OAAQ4R,IAHX,8BAKlB1K,SAAS+wC,iBAAkB5jC,SACzB,EACA5E,IAAesB,gBAAgB,EAAKuD,MAAMnL,KAAKkH,WAInD,SAAU3O,OAGV,SAAUg3C,QA9JZ,EAAKpkC,MAAQ,CACXnL,IAAK,GACLwvC,WAAY3nC,IAAUC,gBAAgB,eAAiB,QAJ3B,E,qDAQhC,WAAqB,IAAD,SACd4E,EAAM3O,SAASoK,SAASC,KAAK/G,MAAM,KACnCrB,EAAM0M,EAAIA,EAAIvW,OAAS,GAAGkL,MAAM,KAAK,GACzCzL,KAAK+W,SAAS,CAAE3M,QAChBpK,KAAKo4C,aAAahuC,GAClB,UAAAjC,SACGkN,uBAAuB,yBAAyB,UADnD,SAEI6lB,SACA,CAAC,MAAO,MAAO,MAAO,QAAQrxB,QAC5BoI,IAAUC,gBAAgB,eAAiB,SAE7CqH,aAAa,WAAY,YAC7B3O,OAAOmK,OAAO,GAAG5M,SAASuP,iBAAiB,SAAS,SAAC3L,GACnD2E,IAAesH,mBACb5N,EACAjC,SAAS0L,KAAKgE,YACd1P,SAAS0L,KAAKM,aACdvJ,OAAOmK,OAAO,GAAG5M,SAAS+wC,iBAAkBjhC,UAC5CrN,OAAOmK,OAAO,GAAG5M,SAAS+wC,iBAAkBjlC,iBAGhDrJ,OAAOupC,eAAiB,WACtB,EAAKC,WAAWhqC,M,wBAqBpB,SAAWA,GACTpK,KAAK0T,MAAM0D,oBAAmB,GAE9BnF,IAAU2F,gBAAgB,cAAezP,SAAS0L,KAAKgE,YAAc,IACrE5F,IAAU2F,gBAAgB,eAAgBzP,SAAS0L,KAAKM,aAAe,IACvElC,IAAU2F,gBAAgB,UAAWhN,OAAOkN,QAAU,IACtD7F,IAAU2F,gBAAgB,UAAWhN,OAAOmN,QAAU,M,oBA4GxD,WAAU,IAAD,OACP,OACE,uCACE,yBACEG,UAAU,eACV7L,MAAM,cACN9C,MAAM,OACNC,OAAO,OAJT,SAME,2CAEF,sBAAK0O,UAAU,cAAf,SACE,yBACE/S,KAAK,GACL+S,UAAU,wBACVhM,GAAG,oBACH0qB,SAAU,SAAC7qB,GACTkG,IAAU2F,gBAAgB,aAAc7L,EAAMvJ,OAAO+Q,OACrD3I,OAAOmK,OAAO,GAAG5M,SAAS0L,KAAKxL,UAAY,GAC3C,EAAK+vC,aAAa,EAAK7iC,MAAMnL,MAPjC,SAUG,CAAC,MAAO,MAAO,MAAO,QAAQwR,KAAI,SAACnO,EAAM0F,GACxC,OACE,yBAAQI,MAAO9F,EAAMyK,UAAU,sBAA/B,SACGzK,kB,GAhME8K,IAAMC,WA0MZC,eAAWhF,ICzMpB+S,GAAgB,CACpBpP,sBACAD,qBACA0N,qBACAD,sBACApC,mBACAD,iBAEakE,gBAfS,SAAClR,GACvB,MAAO,CACL4F,mBAAoB5F,EAAMzD,KAAKqJ,mBAC/BG,YAAa/F,EAAMzD,KAAKwJ,YACxBF,UAAW7F,EAAMzD,KAAKsJ,aAWcoL,GAAzBC,CAAwChT,IChBjD6b,I,OAAiB,CACrBN,MAAM,EACNC,UAAU,EACVC,cAAeK,GACfH,iBAAkB,CAChBC,oBAAqB,oBAInBwqB,G,oDAEJ,WAAYnmC,GAAuB,IAAD,8BAChC,cAAMA,IAFR6vB,WACkC,IASlC/S,aAAe,WACb,EAAK9c,MAAMiP,qBAAoB,GAC/Bm3B,MAAM,yCAX0B,EAalC9oB,YAAc,SAAC5R,GACb,EAAK1L,MAAM6O,cAAcnD,GACzB,EAAK1L,MAAM8O,kBAAiB,IAb5B,EAAKjN,MAAQ,CACXmuB,UAAU,EACVC,SAAS,EACTC,UAAU,EACVvL,MAAO,IANuB,E,qDAiBlC,WAEE,IAAIvhB,EAAM3O,SAASoK,SAASC,KAI5B,GAH+B,OAA3BrK,SAASoK,SAASwnC,MACpB/5C,KAAK0T,MAAM6R,QAAQrlB,KAAK,iBAEtB4W,EAAIjN,QAAQ,UAAY,EAE1B,OADA7J,KAAK+W,SAAS,CAAE4sB,SAAS,KAClB,EAET,GAAI7sB,EAAIjN,QAAQ,SAAW,EAAG,CAC5B,IAAImwC,EAAcC,eAGlB,OAFAj6C,KAAK+W,SAAS,CAAEshB,MAAO2hB,EAAO/iB,OAC9Bj3B,KAAK+W,SAAS,CAAE2sB,UAAU,KACnB,EAET,GAAI5sB,EAAIjN,QAAQ,iBAAmB,EAAG,CACpC,IAAImwC,EAAcC,eAGlB,OAFAj6C,KAAK+W,SAAS,CAAEshB,MAAO2hB,EAAOE,eAC9Bl6C,KAAK+W,SAAS,CAAE2sB,UAAU,KACnB,K,oBAIX,WAAU,IAAD,OACP,OAAI1jC,KAAKuV,MAAMouB,SAAW3jC,KAAKuV,MAAMmuB,SAEjC,sBAAKxrB,UAAU,+BAAf,SACE,uBAAKA,UAAU,qBAAf,UACGlY,KAAKuV,MAAMmuB,SACV,eAAC,KAAD,CAAQ3T,QAAST,GAAgB9lB,OAAQ,GAAID,MAAO,KAEpD,uBAAM2O,UAAU,oCAGlB,sBAAKA,UAAU,0BAAf,SACE,eAAC4W,GAAA,EAAD,UACG9uB,KAAKuV,MAAMmuB,SACR,yBACA,uBAGP1jC,KAAKuV,MAAMmuB,SACV,sBACExrB,UAAU,0BACV6N,QAAS,WACPmK,KAAK,EAAK3a,MAAM8iB,OAChB,EAAKthB,SAAS,CAAE6sB,UAAU,KAJ9B,SAOG5jC,KAAKuV,MAAMquB,SACV,eAAC9U,GAAA,EAAD,qBAEA,eAACA,GAAA,EAAD,2BAGF,UAOV,uBAAK5W,UAAU,UAAf,UACE,sBACE3V,IAEM,oBAGN4jB,IAAI,GACJjO,UAAU,SAEZ,uBAAKA,UAAU,4BAA4BC,MAAO,CAAEq2B,OAAQ,KAA5D,UACE,sBAAKt2B,UAAU,uBAAf,SACE,eAAC4W,GAAA,EAAD,0CAEF,sBACE5W,UAAU,sBACV6N,QAAS,WACP,EAAKrS,MAAM6R,QAAQrlB,KAAK,kBAE1BiY,MAAO,CAAE6X,UAAW,GAAIijB,OAAQ,WALlC,SAOE,eAACnkB,GAAA,EAAD,kCAGJ,sBACEvsB,IACiD,QAA/C0P,IAAUC,gBAAgB,iBACtB,2BACA,qBAENiU,IAAI,GACJjO,UAAU,mC,GAjHGK,IAAMC,WAwHdC,eAAWohC,IChIpBrzB,GAAgB,CAAEhE,mBAAkBD,gBAAeI,wBAC1C8D,gBAJS,SAAClR,GACvB,MAAO,KAG+BiR,GAAzBC,CAAwCozB,IC6CxCM,GA/CA,WAoBb,OAnBAC,qBAAU,WACR,IAAM1/B,EAAMzI,IAAUC,gBAAgB,QAClCwI,EACFJ,EAAKsf,eAAelf,GAEO,UAAvBhI,UAAUrL,UAA+C,UAAvBqL,UAAUrL,SAC9CiT,EAAKsf,eAAe,MAEG,UAAvBlnB,UAAUrL,UACa,UAAvBqL,UAAUrL,SAEViT,EAAKsf,eAAe,OACY,OAAvBlnB,UAAUrL,SACnBiT,EAAKsf,eAAe,MAEpBtf,EAAKsf,eAAe,QAGvB,IAED,eAAC,IAAD,UACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAO0I,UAAWgB,GAASx4B,KAAK,aAChC,eAAC,IAAD,CAAOw3B,UAAWwV,GAAYhtC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAW+X,GAAYvvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,SACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,QACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,SACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,SACnC,eAAC,IAAD,CAAOw3B,UAAWiY,GAAazvC,KAAK,SACpC,eAAC,IAAD,CAAOw3B,UAAWiY,GAAazvC,KAAK,SACpC,eAAC,IAAD,CAAOw3B,UAAWiY,GAAazvC,KAAK,SAAU,IAC9C,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,SACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,SACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,WACnC,eAAC,IAAD,CAAOw3B,UAAWgY,GAAYxvC,KAAK,UACnC,eAAC,IAAD,CAAOw3B,UAAWkY,GAAW1vC,KAAK,YCtCtC2vC,GAAoBtyC,SAASmR,cAAc,kBAU/C,GATAmhC,IAAgBA,GAAa/P,WAAWkN,YAAY6C,IAEpDC,IAAS/kC,OACP,eAAC,IAAD,CAAU4L,MAAOA,EAAjB,SACE,eAAC,GAAD,MAEFpZ,SAASiR,eAAe,SAGtB5Q,cAAY,CACd,IAAQiJ,GAAgB7G,OAAOC,QAAQ,YAA/B4G,aAGRkpC,EAFwB/vC,OAAOC,QAAQ,yBAA/B8vC,aAEIlpC,GADU,mCACkB0oC,IAGxC3xC,gBAC4C,IAA5CkK,UAAUkoC,WAAW/wC,QAAQ,YACe,IAA5C6I,UAAUkoC,WAAW/wC,QAAQ,YACe,IAA5C6I,UAAUkoC,WAAW/wC,QAAQ,WAELe,OAAOC,QAAQ,YAA/B4G,YACIopC,OAAO,cAAe,QAAQrkC,MAAK,SAAC/T,GAC9Cs2B,GAAa,GAAGC,OAASv2B,EACzBs2B,GAAa,GAAGC,OAAO94B,KAAK,oBAGhC2rC,KAAUiP,aAEVJ,IAAS/kC,OACP,eAAC,IAAD,CAAU4L,MAAOA,EAAjB,SACE,eAAC,GAAD,MAEFpZ,SAASiR,eAAe,U,6KC7CnB,SAAS6gC,IAQd,IAPA,IACI33C,EADAy4C,EAAkB,GAEpBzvB,EAAI,uBACJ5C,EACE9d,OAAO2H,SAASwnC,KAAKiB,UAAU,IAC/BpwC,OAAO2H,SAAShC,OAAOyqC,UAAU,GAAGvvC,MAAM,KAAK,GAE3CnJ,EAAIgpB,EAAE2vB,KAAKvyB,IACjBqyB,EAAWz4C,EAAE,IAAM44C,mBAAmB54C,EAAE,IAE1C,OAAOy4C,EAEF,IAAMtnB,EAAW,SACtBxxB,EACAgxB,GAGI,IAFJ5f,EAEG,uDAFkB,GACrBmd,EACG,uDADwB,aAEvB9lB,EAAO,IAAI0D,KAAK,CAACnM,GAAO,aAAc,CACxCoM,cAAc,IAAIlC,MAAOC,UACzBvG,KAAM5D,EAAK4D,OAEP8E,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QAC5B,EAAwBD,OAAOC,QAAQ,YAA/BM,EAAR,EAAQA,OAAQE,EAAhB,EAAgBA,IACV8vC,EAASvwC,OAAOC,QAAQ,WAExBO,GAAaC,GAAOF,EAAOE,KAAKC,QAAQ,YACxCC,EAAUT,EAAKrB,KAAK2B,EAAW,WAC/BoG,EAAWT,aAAaC,QAAQ,mBAClCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5C7F,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkBpB,GACzBmB,EAAOxJ,OAAP,uCAAgB,WAAO0J,GAAP,eAAAzC,EAAA,yDACdqB,EAAGqB,cACDlB,EAAKrB,KAAK8B,EAASb,EAAKvF,MACxBxF,EAAOsJ,KAAK8C,EAAMvJ,OAAQC,SAElB,IAAI04C,EAAOrwC,EAAKrB,KAAK8B,EAASb,EAAKvF,OACzCi2C,aAA6B5pC,GAAwB,GACxC5G,OAAOC,QAAQ,YACvBqlB,KACPplB,EAAKrB,KAAK8B,EAASb,EAAKvF,MACxB2F,EAAKrB,KAAK+H,EAAU9G,EAAKvF,OACzB,SAAUxC,OAIO,IAAfswB,EAfU,uBAgBRooB,EAAchoC,EAAMuI,KAAI,SAACnO,GAC3B,OAAOkE,IAAYC,WAAWnE,EAAKrD,QAjBzB,SAmBNxI,QAAQmnB,IAAIsyB,GAnBN,OAqBK,IAAfpoB,GACFzC,IAtBY,4CAAhB,uDA2BIkD,E,mGACJ,SACE4nB,EACAC,EACAh5B,EACAC,GAEC,IADDqR,EACA,uDAD+B,aAEzBlpB,EAAKC,OAAOC,QAAQ,YAC1B,IACEF,EAAG6wC,QAAQD,GAAS,SAAC54C,EAAKiuB,GACxB,IAAI6qB,GAAsB,EAC1B7qB,EAAMtd,SAAQ,SAAC5I,GACA,eAATA,IACF+wC,GAAa,MAGbA,GACF1qC,aAAaK,QAAQ,kBAAmBmqC,GACxC1nB,KAEAlpB,EAAGulB,KAAKorB,EAASC,GAAS,SAAU54C,GAC9BA,IACJgI,EAAG+wC,aAAaJ,GAChB/4B,EAAc,uBACdC,GAAiB,UAIvB,MAAO+K,GACPhL,EAAc,iBACdC,GAAiB,M,sBAGrB,SACEvgB,EACAgxB,GAGC,IAFD5f,EAEA,uDAFqB,GACrBmd,EACA,uDAD2B,aAEvB9lB,EAAO,IAAI0D,KAAK,CAACnM,GAAO,aAAc,CACxCoM,cAAc,IAAIlC,MAAOC,UACzBvG,KAAM5D,EAAK4D,OAEP8E,EAAKC,OAAOC,QAAQ,MACpBC,EAAOF,OAAOC,QAAQ,QACtBswC,EAASvwC,OAAOC,QAAQ,WACxB2G,EAAWT,aAAaC,QAAQ,mBAClCD,aAAaC,QAAQ,mBACrBpG,OACGC,QAAQ,YACR4G,YAAYC,SAAS,mBAAoB,QAC5C7F,EAAS,IAAIzJ,WACjByJ,EAAOC,kBAAkBpB,GACzBmB,EAAOxJ,OAAP,uCAAgB,WAAO0J,GAAP,eAAAzC,EAAA,yDACdqB,EAAGqB,cACDlB,EAAKrB,KAAK+H,EAAU9G,EAAKvF,MACzBxF,EAAOsJ,KAAK8C,EAAMvJ,OAAQC,SAElB,IAAI04C,EAAOrwC,EAAKrB,KAAK+H,EAAU9G,EAAKvF,OAC1Ci2C,aAA6B5pC,GAAwB,GAEtC,IAAfyhB,EARU,uBASRooB,EAAchoC,EAAMuI,KAAI,SAACnO,GAC3B,OAAOkE,IAAYC,WAAWnE,EAAKrD,QAVzB,SAYNxI,QAAQmnB,IAAIsyB,GAZN,OAcK,IAAfpoB,GACFzC,IAfY,2CAAhB,0D,KAqBWkD,Q,oEC7GAyJ,IAvBb,WACE/yB,EACAjF,EACAmH,EACAQ,EACAgG,EACAoY,EACA7Y,EACA1F,EACAlM,GACC,yBAnBH2J,SAmBE,OAlBFjF,UAkBE,OAjBFmH,YAiBE,OAhBFQ,iBAgBE,OAfFgG,SAeE,OAdFoY,WAcE,OAbF7Y,YAaE,OAZF1F,eAYE,OAXFlM,UAWE,EACAT,KAAKoK,IAAMA,EACXpK,KAAKmF,KAAOA,EACZnF,KAAKsM,OAASA,EACdtM,KAAK8M,YAAcA,EACnB9M,KAAK8S,IAAMA,EACX9S,KAAKkrB,MAAQA,EACblrB,KAAKqS,OAASA,EACdrS,KAAK2M,UAAYA,EACjB3M,KAAKS,KAAOA,I","file":"static/js/main.96e70a02.chunk.js","sourcesContent":["function ab2str(buf) {\n  if (buf instanceof ArrayBuffer) {\n    buf = new Uint8Array(buf);\n  }\n  return new TextDecoder(\"utf-8\").decode(buf);\n}\n\nvar domParser = new DOMParser();\n\nclass Buffer {\n  capacity: any;\n  fragment_list: any;\n  imageArray: any;\n  cur_fragment: Fragment;\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.fragment_list = [];\n    this.imageArray = [];\n    this.cur_fragment = new Fragment(capacity);\n    this.fragment_list.push(this.cur_fragment);\n  }\n  write(byte) {\n    var result = this.cur_fragment.write(byte);\n    if (!result) {\n      this.cur_fragment = new Fragment(this.capacity);\n      this.fragment_list.push(this.cur_fragment);\n      this.cur_fragment.write(byte);\n    }\n  }\n  get(idx) {\n    var fi = 0;\n    while (fi < this.fragment_list.length) {\n      var frag = this.fragment_list[fi];\n      if (idx < frag.size) {\n        return frag.get(idx);\n      }\n      idx -= frag.size;\n      fi += 1;\n    }\n    return null;\n  }\n  size() {\n    var s = 0;\n    for (var i = 0; i < this.fragment_list.length; i++) {\n      s += this.fragment_list[i].size;\n    }\n    return s;\n  }\n  shrink() {\n    var total_buffer = new Uint8Array(this.size());\n    var offset = 0;\n    for (var i = 0; i < this.fragment_list.length; i++) {\n      var frag = this.fragment_list[i];\n      if (frag.full()) {\n        total_buffer.set(frag.buffer, offset);\n      } else {\n        total_buffer.set(frag.buffer.slice(0, frag.size), offset);\n      }\n      offset += frag.size;\n    }\n    return total_buffer;\n  }\n}\n\nvar copagesne_uint8array = function (buffers) {\n  var total_size = 0;\n  for (let i = 0; i < buffers.length; i++) {\n    var buffer = buffers[i];\n    total_size += buffer.length;\n  }\n  var total_buffer = new Uint8Array(total_size);\n  var offset = 0;\n  for (let i = 0; i < buffers.length; i++) {\n    buffer = buffers[i];\n    total_buffer.set(buffer, offset);\n    offset += buffer.length;\n  }\n  return total_buffer;\n};\n\nclass Fragment {\n  buffer: Uint8Array;\n  capacity: any;\n  size: number;\n  constructor(capacity) {\n    this.buffer = new Uint8Array(capacity);\n    this.capacity = capacity;\n    this.size = 0;\n  }\n\n  write(byte) {\n    if (this.size >= this.capacity) {\n      return false;\n    }\n    this.buffer[this.size] = byte;\n    this.size += 1;\n    return true;\n  }\n  full() {\n    return this.size === this.capacity;\n  }\n  get(idx) {\n    return this.buffer[idx];\n  }\n}\n\nvar uncompression_lz77 = function (data) {\n  var length = data.length;\n  var offset = 0; // Current offset into data\n  var buffer = new Buffer(data.length);\n\n  while (offset < length) {\n    var char = data[offset];\n    offset += 1;\n\n    if (char === 0) {\n      buffer.write(char);\n    } else if (char <= 8) {\n      for (var i = offset; i < offset + char; i++) {\n        buffer.write(data[i]);\n      }\n      offset += char;\n    } else if (char <= 0x7f) {\n      buffer.write(char);\n    } else if (char <= 0xbf) {\n      var next = data[offset];\n      offset += 1;\n      var distance = (((char << 8) | next) >> 3) & 0x7ff;\n      var lz_length = (next & 0x7) + 3;\n\n      var buffer_size = buffer.size();\n      for (let i = 0; i < lz_length; i++) {\n        buffer.write(buffer.get(buffer_size - distance));\n        buffer_size += 1;\n      }\n    } else {\n      buffer.write(32);\n      buffer.write(char ^ 0x80);\n    }\n  }\n  return buffer;\n};\n\nclass MobiFile {\n  view: DataView;\n  buffer: ArrayBuffer;\n  offset: number;\n  header: any;\n  palm_header: any;\n  mobi_header: any;\n  reclist: any;\n  constructor(data) {\n    this.view = new DataView(data);\n    this.buffer = this.view.buffer;\n    this.offset = 0;\n    this.header = null;\n  }\n\n  parse() {}\n\n  getUint8() {\n    var v = this.view.getUint8(this.offset);\n    this.offset += 1;\n    return v;\n  }\n\n  getUint16() {\n    var v = this.view.getUint16(this.offset);\n    this.offset += 2;\n    return v;\n  }\n\n  getUint32() {\n    var v = this.view.getUint32(this.offset);\n    this.offset += 4;\n    return v;\n  }\n\n  getStr(size) {\n    var v = ab2str(this.buffer.slice(this.offset, this.offset + size));\n    this.offset += size;\n    return v;\n  }\n\n  skip(size) {\n    this.offset += size;\n  }\n\n  setoffset(_of) {\n    this.offset = _of;\n  }\n\n  get_record_extrasize(data, flags) {\n    var pos = data.length - 1;\n    var extra = 0;\n    for (var i = 15; i > 0; i--) {\n      if (flags & (1 << i)) {\n        var res = this.buffer_get_varlen(data, pos);\n        var size = res[0];\n        var l = res[1];\n        pos = res[2];\n        pos -= size - l;\n        extra += size;\n      }\n    }\n    if (flags & 1) {\n      var a = data[pos];\n      extra += (a & 0x3) + 1;\n    }\n    return extra;\n  }\n\n  // data should be uint8array\n  buffer_get_varlen(data, pos) {\n    var l = 0;\n    var size = 0;\n    var byte_count = 0;\n    var mask = 0x7f;\n    var stop_flag = 0x80;\n    var shift = 0;\n    for (var i = 0; ; i++) {\n      var byte = data[pos];\n      size |= (byte & mask) << shift;\n      shift += 7;\n      l += 1;\n      byte_count += 1;\n      pos -= 1;\n\n      var to_stop = byte & stop_flag;\n      if (byte_count >= 4 || to_stop > 0) {\n        break;\n      }\n    }\n    return [size, l, pos];\n  }\n  // 读出文本内容\n  read_text() {\n    var text_end = this.palm_header.record_count;\n    var buffers: any = [];\n    for (var i = 1; i <= text_end; i++) {\n      buffers.push(this.read_text_record(i));\n    }\n    var all = copagesne_uint8array(buffers);\n    return ab2str(all);\n  }\n\n  read_text_record(i) {\n    var flags = this.mobi_header.extra_flags;\n    var begin = this.reclist[i].offset;\n    var end = this.reclist[i + 1].offset;\n\n    var data = new Uint8Array(this.buffer.slice(begin, end));\n    var ex = this.get_record_extrasize(data, flags);\n\n    data = new Uint8Array(this.buffer.slice(begin, end - ex));\n    if (this.palm_header.compression === 2) {\n      var buffer = uncompression_lz77(data);\n      return buffer.shrink();\n    } else {\n      return data;\n    }\n  }\n  // 从buffer中读出image\n  read_image(idx) {\n    var first_image_idx = this.mobi_header.first_image_idx;\n    var begin = this.reclist[first_image_idx + idx].offset;\n    var end = this.reclist[first_image_idx + idx + 1].offset;\n    var data = new Uint8Array(this.buffer.slice(begin, end));\n    return new Blob([data.buffer]);\n  }\n\n  load() {\n    this.header = this.load_pdbheader();\n    this.reclist = this.load_reclist();\n    this.load_record0();\n  }\n\n  load_pdbheader() {\n    var header: any = {};\n    header.name = this.getStr(32);\n    header.attr = this.getUint16();\n    header.version = this.getUint16();\n    header.ctime = this.getUint32();\n    header.mtime = this.getUint32();\n    header.btime = this.getUint32();\n    header.mod_num = this.getUint32();\n    header.appinfo_offset = this.getUint32();\n    header.sortinfo_offset = this.getUint32();\n    header.type = this.getStr(4);\n    header.creator = this.getStr(4);\n    header.uid = this.getUint32();\n    header.next_rec = this.getUint32();\n    header.record_num = this.getUint16();\n    return header;\n  }\n\n  load_reclist() {\n    var reclist: any = [];\n    for (var i = 0; i < this.header.record_num; i++) {\n      var record: any = {};\n      record.offset = this.getUint32();\n      // TODO(zz) change\n      record.attr = this.getUint32();\n      reclist.push(record);\n    }\n    return reclist;\n  }\n  load_record0() {\n    this.palm_header = this.load_record0_header();\n    this.mobi_header = this.load_mobi_header();\n  }\n\n  load_record0_header() {\n    var p_header: any = {};\n    var first_record = this.reclist[0];\n    this.setoffset(first_record.offset);\n\n    p_header.compression = this.getUint16();\n    this.skip(2);\n    p_header.text_length = this.getUint32();\n    p_header.record_count = this.getUint16();\n    p_header.record_size = this.getUint16();\n    p_header.encryption_type = this.getUint16();\n    this.skip(2);\n\n    return p_header;\n  }\n\n  load_mobi_header() {\n    var mobi_header: any = {};\n\n    var start_offset = this.offset;\n\n    mobi_header.identifier = this.getUint32();\n    mobi_header.header_length = this.getUint32();\n    mobi_header.mobi_type = this.getUint32();\n    mobi_header.text_encoding = this.getUint32();\n    mobi_header.uid = this.getUint32();\n    mobi_header.generator_version = this.getUint32();\n\n    this.skip(40);\n\n    mobi_header.first_nonbook_index = this.getUint32();\n    mobi_header.full_name_offset = this.getUint32();\n    mobi_header.full_name_length = this.getUint32();\n\n    mobi_header.language = this.getUint32();\n    mobi_header.input_language = this.getUint32();\n    mobi_header.output_language = this.getUint32();\n    mobi_header.min_version = this.getUint32();\n    mobi_header.first_image_idx = this.getUint32();\n\n    mobi_header.huff_rec_index = this.getUint32();\n    mobi_header.huff_rec_count = this.getUint32();\n    mobi_header.datp_rec_index = this.getUint32();\n    mobi_header.datp_rec_count = this.getUint32();\n\n    mobi_header.exth_flags = this.getUint32();\n\n    this.skip(36);\n\n    mobi_header.drm_offset = this.getUint32();\n    mobi_header.drm_count = this.getUint32();\n    mobi_header.drm_size = this.getUint32();\n    mobi_header.drm_flags = this.getUint32();\n\n    this.skip(8);\n\n    // TODO (zz) fdst_index\n    this.skip(4);\n\n    this.skip(46);\n\n    mobi_header.extra_flags = this.getUint16();\n\n    this.setoffset(start_offset + mobi_header.header_length);\n\n    return mobi_header;\n  }\n  load_exth_header() {\n    // TODO\n    return {};\n  }\n  extractContent(s) {\n    var span = document.createElement(\"span\");\n    span.innerHTML = s;\n    return span.textContent || span.innerText;\n  }\n  render(isElectron: boolean = false) {\n    return new Promise((resolve, reject) => {\n      this.load();\n      var content = this.read_text();\n      var bookDoc = domParser.parseFromString(content, \"text/html\")\n        .documentElement;\n      let lines: any = Array.from(bookDoc.querySelectorAll(\"p,b,font,h3,h1\"));\n      let parseContent: any = [];\n      for (let i = 0, len = lines.length; i < len - 1; i++) {\n        lines[i].innerText &&\n          lines[i].innerText !== parseContent[parseContent.length - 1] &&\n          parseContent.push(lines[i].innerText);\n        let imgDoms = lines[i].getElementsByTagName(\"img\");\n        if (imgDoms.length > 0) {\n          for (let i = 0; i < imgDoms.length; i++) {\n            parseContent.push(\"#image\");\n          }\n        }\n      }\n      const handleImage = async () => {\n        var imgDoms = bookDoc.getElementsByTagName(\"img\");\n\n        parseContent.push(\"~image\");\n        for (let i = 0; i < imgDoms.length; i++) {\n          const src = await this.render_image(imgDoms, i);\n          parseContent.push(\n            src + \" \" + imgDoms[i].width + \" \" + imgDoms[i].height\n          );\n        }\n        if (imgDoms.length > 200 || !isElectron) {\n          resolve(bookDoc);\n        } else {\n          resolve(parseContent.join(\"\\n    \\n\"));\n        }\n      };\n      handleImage();\n    });\n  }\n  render_image = (imgDoms, i) => {\n    return new Promise((resolve, reject) => {\n      var imgDom = imgDoms[i];\n      var idx = +imgDom.getAttribute(\"recindex\");\n      var blob = this.read_image(idx - 1);\n      var imgReader = new FileReader();\n      imgReader.onload = (e) => {\n        imgDom.src = e.target?.result;\n        resolve(e.target?.result);\n      };\n      imgReader.onerror = function (err) {\n        reject(err);\n      };\n      imgReader.readAsDataURL(blob);\n    });\n  };\n}\n\nexport default MobiFile;\n","export const isTitle = (line: string) => {\n  return (\n    line.length < 30 &&\n    line.indexOf(\"[\") === -1 &&\n    line.indexOf(\"(\") === -1 &&\n    (line.startsWith(\"CHAPTER \") ||\n      line.startsWith(\"Chapter \") ||\n      line.startsWith(\"序章\") ||\n      line.startsWith(\"前言\") ||\n      line.startsWith(\"写在前面的话\") ||\n      line.startsWith(\"后记\") ||\n      line.startsWith(\"楔子\") ||\n      line.startsWith(\"后记\") ||\n      line.startsWith(\"后序\") ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"章\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"章\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"节\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"节\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"回\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"回\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"卷\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"卷\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"部\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"部\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"辑\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"辑\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"集\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"集\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"话\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"话\")) ||\n      (line.indexOf(\"第\") > -1 &&\n        line.indexOf(\"篇\") > -1 &&\n        line.indexOf(\"第\") < line.indexOf(\"篇\")) ||\n      /^[\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d\\u5341\\u767e\\u5343\\u4e07]+$/.test(\n        line\n      ) ||\n      /^\\d+$/.test(line))\n  );\n};\nconst escapeHTML = (str) => {\n  var escapeChars = {\n    \"¢\": \"cent\",\n    \"£\": \"pound\",\n    \"¥\": \"yen\",\n    \"€\": \"euro\",\n    \"©\": \"copy\",\n    \"®\": \"reg\",\n    \"<\": \"lt\",\n    \">\": \"gt\",\n    '\"': \"quot\",\n    \"&\": \"amp\",\n    \"'\": \"#39\",\n  };\n\n  var regexString = \"[\";\n  for (var key in escapeChars) {\n    regexString += key;\n  }\n  regexString += \"]\";\n\n  var regex = new RegExp(regexString, \"g\");\n  return str.replace(regex, function (m) {\n    return \"&\" + escapeChars[m] + \";\";\n  });\n};\nexport const generateEpub = (file: any) => {\n  return new Promise<File | boolean>((resolve, reject) => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const chardet = window.require(\"chardet\");\n    const { readFileSync } = window.require(\"fs\");\n    const iconv = window.require(\"iconv-lite\");\n    const nodepub = window.require(\"nodepub\");\n    const { remote, app } = window.require(\"electron\");\n    const configDir = (app || remote.app).getPath(\"userData\");\n    const dirPath = path.join(configDir, \"uploads\");\n    const name = file.name;\n    let bookExtension =\n      name.indexOf(\"mobi\") > -1\n        ? \"mobi\"\n        : name.indexOf(\"azw3\") > -1\n        ? \"azw3\"\n        : name.split(\".\").reverse()[0];\n    let bookName = name.substr(\n      0,\n      name.length - (bookExtension !== \"txt\" ? 8 : 3) - 1\n    );\n    var reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = (event) => {\n      fs.writeFileSync(\n        path.join(dirPath, file.name),\n        Buffer.from(event.target!.result as any)\n      );\n\n      var metadata = {\n        id: new Date().getTime(),\n        title: bookName,\n        author: \"Unknown Authur\",\n        fileAs: \"Anonymous\",\n        genre: \"Non-Fiction\",\n        tags: \"Sample,Example,Test\",\n        copyright: \"Anonymous, 2020\",\n        publisher: bookExtension,\n        published: new Date().toLocaleDateString(),\n        language: \"cn\",\n        description: \"A book generated by Koodo Reader\",\n        contents: \"Content\",\n        source: \"https://koodo.960960.xyz\",\n        images: [path.join(dirPath, `cover.png`)],\n      };\n\n      // Set up the EPUB basics.\n      var epub = nodepub.document(metadata, path.join(dirPath, `cover.png`));\n      let content: any = [];\n      let contentFilter: any = [];\n      const analyzeChapter = () => {\n        const data = readFileSync(path.join(dirPath, file.name), {\n          encoding: \"binary\",\n        });\n        const buf = new Buffer(data, \"binary\");\n        const lines = iconv.decode(buf, chardet.detect(buf)).split(\"\\n\");\n        const lineLength = lines.length;\n        const imgIndex = lines.indexOf(\"~image\");\n        const images = lines.slice(imgIndex).filter((item) => {\n          return item.startsWith(\"data\");\n        });\n        lines.splice(imgIndex, lineLength - imgIndex);\n        for (let item of lines) {\n          const line = escapeHTML(item).trim();\n          if (isTitle(line)) {\n            content.push({\n              title: line,\n              data: \"\",\n            });\n          } else if (line) {\n            if (!content[content.length - 1]) {\n              content.push({\n                title: \"Forward\",\n                data: \"\",\n              });\n            }\n            if (line === \"#image\") {\n              if (images.length > 0) {\n                content[content.length - 1].data += `<img src=\"${\n                  images[0].split(\" \")[0]\n                }\" style=\"margin-left: calc(50% - ${\n                  // eslint-disable-next-line\n                  parseInt(images[0].split(\" \")[1]) / 2 + \"\" + \"px\"\n                })\"  width=\"${images[0].split(\" \")[1]}px\"  height=\"${\n                  images[0].split(\" \")[2]\n                }px\"/>`;\n                images.shift();\n              } else {\n                content[content.length - 1].data += `<img src=\" \"/>`;\n              }\n            } else if (!line.startsWith(\"*\")) {\n              content[\n                content.length - 1\n              ].data += `<p style=\"text-indent:2em\">${line}</p>`;\n            }\n          }\n        }\n        contentFilter = content.filter((item) => {\n          return item.data.trim() && item.data.trim().length > 50;\n        });\n      };\n      analyzeChapter();\n      for (let item of contentFilter) {\n        epub.addSection(item.title, `<h1>${item.title}</h1>` + item.data);\n      }\n\n      epub.writeEPUB(\n        function (e) {\n          console.log(\"Error:\", e);\n          reject(false);\n        },\n        dirPath,\n        bookName,\n        function () {\n          var data = fs.readFileSync(path.join(dirPath, `${bookName}.epub`));\n          let blobTemp = new Blob([data], { type: \"application/epub+zip\" });\n          let fileTemp = new File([blobTemp], `${bookName}.epub`, {\n            lastModified: new Date().getTime(),\n            type: blobTemp.type,\n          });\n\n          try {\n            const fs = window.require(\"fs-extra\");\n            fs.remove(path.join(dirPath, `${bookName}.epub`), (err) => {\n              if (err) throw err;\n              console.log(\"successfully epub deleted\");\n            });\n            fs.remove(path.join(dirPath, file.name), (err) => {\n              if (err) throw err;\n              console.log(\"successfully file deleted\");\n            });\n\n            resolve(fileTemp);\n          } catch (e) {\n            console.log(\"error removing \");\n            reject(false);\n          }\n        }\n      );\n    };\n  });\n};\n","export const mimetype = {\n  svg: \"image/svg+xml\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  gif: \"image/gif\",\n  webp: \"image/webp\",\n  zip: \"application/zip\",\n  rar: \"application/x-rar-compressed\",\n  \"7z\": \"application/x-7z-compressed\",\n  tar: \"application/x-tar\",\n  html: \"text/html\",\n  htm: \"text/html\",\n  xml: \"text/xml\",\n  xhtml: \"application/xhtml+xml\",\n};\n","import xml2js from \"xml2js\";\nimport { isTitle } from \"./generateEpub\";\nexport const xmlBookToObj = (xml) => {\n  var objBook: any = {};\n  var informBook;\n  let parser = new xml2js.Parser();\n  parser.parseString(xml, function (err, result) {\n    if (err) {\n      console.log(\"Error with parsing xml\" + err);\n    }\n\n    var fictionBook = result.FictionBook;\n    var bookDesc = fictionBook.description[0][\"title-info\"][0];\n\n    objBook.title = bookDesc[\"book-title\"][0];\n    informBook = \"<h2>\" + objBook.title + \"</h2>\";\n\n    if (bookDesc[\"author\"][0][\"first-name\"]) {\n      objBook.firstName = bookDesc[\"author\"][0][\"first-name\"][0];\n      informBook += \"<h3>\" + objBook.firstName;\n      if (bookDesc[\"author\"][0][\"last-name\"]) {\n        objBook.lastName = bookDesc[\"author\"][0][\"last-name\"][0];\n        informBook += \" \" + objBook.lastName;\n      }\n      informBook += \"</h3>\";\n    }\n\n    if (fictionBook.binary) {\n      objBook.posterSrc =\n        \"data:image/jpeg;base64,\" + fictionBook.binary[0][\"_\"];\n      informBook += '<img alt=\"poster\" src=\"' + objBook.posterSrc + '\">';\n    }\n  });\n\n  return informBook;\n};\n\nexport const xmlBookTagFilter = (bookString) => {\n  var regExpTagDelete = /<epigraph>|<\\/epigraph>|<empty-line\\/>|/gi;\n  var regExpTitleOpen = /<title>/gi;\n  var regExpTitleClose = /<\\/title>/gi;\n  var bookStart = bookString.match(/<body.*?>/i);\n  var bookBody = bookString.slice(\n    bookString.search(/<body.*?>/i) + bookStart[0].length,\n    bookString.search(/<\\/body>/i)\n  );\n\n  bookBody = bookBody.replace(regExpTagDelete, \"\");\n  bookBody = bookBody.replace(regExpTitleOpen, \"<h3>\");\n  bookBody = bookBody.replace(regExpTitleClose, \"</h3>\");\n\n  return bookBody;\n};\nexport const txtToHtml = (text: string) => {\n  const lines = text.split(\"\\n\");\n  let html: string = \"\";\n  for (let item of lines) {\n    if (item.trim()) {\n      if (isTitle(item.trim())) {\n        html += `<h1>${item}</h1>`;\n      } else {\n        html += `<p>${item}</p>`;\n      }\n    }\n  }\n  return html;\n};\n","// 阅读期间自动记录当前阅读位置\nclass RecordLocation {\n  static recordCfi(bookKey: string, cfi: string, percentage: number) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    obj[bookKey] = { cfi: cfi, percentage: percentage };\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n\n  static getCfi(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    return obj[bookKey] || {};\n  }\n  static recordScrollHeight(\n    bookKey: string,\n    width: number,\n    height: number,\n    scroll: number,\n    length: number\n  ) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    obj[bookKey] = { width, height, scroll, length };\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n\n  static getScrollHeight(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    return obj[bookKey] || {};\n  }\n  static getAllCfi() {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    return obj;\n  }\n  static clear(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json!) || {};\n    delete obj[bookKey];\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n}\n\nexport default RecordLocation;\n","import OtherUtil from \"../otherUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport localforage from \"localforage\";\nimport BookModel from \"../../model/Book\";\nimport RecordLocation from \"../readUtils/recordLocation\";\n\nclass BookUtil {\n  static addBook(key: string, buffer: ArrayBuffer) {\n    if (isElectron) {\n      const fs = window.require(\"fs\");\n      const path = window.require(\"path\");\n      const dataPath = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      return new Promise<void>((resolve, reject) => {\n        var reader = new FileReader();\n        reader.readAsArrayBuffer(new Blob([buffer]));\n        reader.onload = async (event) => {\n          try {\n            fs.writeFileSync(\n              path.join(dataPath, \"book\", key),\n              Buffer.from(event.target!.result as any)\n            );\n            resolve();\n          } catch (error) {\n            reject();\n            throw error;\n          }\n        };\n        reader.onerror = () => {\n          reject();\n        };\n      });\n    } else {\n      return localforage.setItem(key, buffer);\n    }\n  }\n  static deleteBook(key: string) {\n    if (isElectron) {\n      const fs = window.require(\"fs-extra\");\n      const path = window.require(\"path\");\n      const dataPath = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      return new Promise<void>((resolve, reject) => {\n        try {\n          fs.remove(path.join(dataPath, `book`, key), (err) => {\n            if (err) throw err;\n            resolve();\n          });\n        } catch (e) {\n          reject();\n        }\n      });\n    } else {\n      return localforage.removeItem(key);\n    }\n  }\n  static fetchBook(key: string, isArrayBuffer: boolean = false) {\n    if (isElectron) {\n      return new Promise<File | ArrayBuffer>((resolve, reject) => {\n        var fs = window.require(\"fs\");\n        var path = window.require(\"path\");\n        var data = fs.readFileSync(\n          path.join(\n            localStorage.getItem(\"storageLocation\")\n              ? localStorage.getItem(\"storageLocation\")\n              : window\n                  .require(\"electron\")\n                  .ipcRenderer.sendSync(\"storage-location\", \"ping\"),\n            `book`,\n            key\n          )\n        );\n        let blobTemp = new Blob([data]);\n        let fileTemp = new File([blobTemp], \"data\", {\n          lastModified: new Date().getTime(),\n          type: blobTemp.type,\n        });\n        if (isArrayBuffer) {\n          resolve(new Uint8Array(data).buffer);\n        } else {\n          resolve(fileTemp);\n        }\n      });\n    } else {\n      return localforage.getItem(key);\n    }\n  }\n\n  static openBook(book: BookModel) {\n    const windowWidth = RecordLocation.getScrollHeight(book.key).scroll\n      ? RecordLocation.getScrollHeight(book.key).width\n      : OtherUtil.getReaderConfig(\"windowWidth\");\n    const windowHeight = RecordLocation.getScrollHeight(book.key).scroll\n      ? RecordLocation.getScrollHeight(book.key).height\n      : OtherUtil.getReaderConfig(\"windowHeight\");\n    let ref =\n      book.description === \"readonly\" ? book.format.toLowerCase() : \"epub\";\n    if (OtherUtil.getReaderConfig(\"isAutoFullscreen\") === \"yes\") {\n      if (isElectron) {\n        const { ipcRenderer } = window.require(\"electron\");\n        ipcRenderer.sendSync(\n          \"open-book\",\n          `${window.location.href.split(\"#\")[0]}#/${ref}/${book.key}?width=full`\n        );\n      } else {\n        window.open(\n          `${window.location.href.split(\"#\")[0]}#/${ref}/${book.key}?width=full`\n        );\n      }\n    } else {\n      if (isElectron) {\n        const { ipcRenderer } = window.require(\"electron\");\n        ipcRenderer.sendSync(\n          \"open-book\",\n          `${window.location.href.split(\"#\")[0]}#/${ref}/${\n            book.key\n          }?width=${windowWidth}&height=${windowHeight}&x=${OtherUtil.getReaderConfig(\n            \"windowX\"\n          )}&y=${OtherUtil.getReaderConfig(\"windowY\")}`\n        );\n      } else {\n        window.open(\n          `${window.location.href.split(\"#\")[0]}#/${ref}/${\n            book.key\n          }?width=${windowWidth}&height=${windowHeight}&x=${OtherUtil.getReaderConfig(\n            \"windowX\"\n          )}&y=${OtherUtil.getReaderConfig(\"windowY\")}`\n        );\n      }\n    }\n  }\n  static async RedirectBook(book: BookModel) {\n    const windowWidth = RecordLocation.getScrollHeight(book.key).scroll\n      ? RecordLocation.getScrollHeight(book.key).width\n      : OtherUtil.getReaderConfig(\"windowWidth\");\n    const windowHeight = RecordLocation.getScrollHeight(book.key).scroll\n      ? RecordLocation.getScrollHeight(book.key).height\n      : OtherUtil.getReaderConfig(\"windowHeight\");\n    if (book.description === \"pdf\") {\n      if (isElectron) {\n        const { ipcRenderer } = window.require(\"electron\");\n        if (OtherUtil.getReaderConfig(\"isAutoFullscreen\") === \"yes\") {\n          ipcRenderer.sendSync(\n            \"open-book\",\n            `${\n              window.navigator.platform.indexOf(\"Win\") > -1\n                ? \"lib/pdf/web/\"\n                : \"lib\\\\pdf\\\\web\\\\\"\n            }viewer.html?file=${book.key}&width=full`\n          );\n        } else {\n          ipcRenderer.sendSync(\n            \"open-book\",\n            `${\n              window.navigator.platform.indexOf(\"Win\") > -1\n                ? \"lib/pdf/web/\"\n                : \"lib\\\\pdf\\\\web\\\\\"\n            }viewer.html?file=${\n              book.key\n            }&width=${windowWidth}&height=${windowHeight}&x=${OtherUtil.getReaderConfig(\n              \"windowX\"\n            )}&y=${OtherUtil.getReaderConfig(\"windowY\")}`\n          );\n        }\n      } else {\n        window.open(`./lib/pdf/web/viewer.html?file=${book.key}`);\n      }\n    } else {\n      this.openBook(book);\n    }\n  }\n  static generateBook(\n    bookName: string,\n    extension: string,\n    md5: string,\n    size: number\n  ) {\n    let cover: any = \"noCover\";\n    let key: string,\n      name: string,\n      author: string,\n      publisher: string,\n      description: string;\n    [name, author, description, publisher] = [\n      bookName,\n      \"Unknown Authur\",\n      \"readonly\",\n      \"\",\n    ];\n    let format = extension.toUpperCase();\n    key = new Date().getTime() + \"\";\n    return new BookModel(\n      key,\n      name,\n      author,\n      description,\n      md5,\n      cover,\n      format,\n      publisher,\n      size\n    );\n  }\n}\n\nexport default BookUtil;\n","// 记录书本打开记录\nimport BookModel from \"../../model/Book\";\nclass RecordRecent {\n  static setRecent(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n  static setAllRecent(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n  static getAllRecent() {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default RecordRecent;\n","class OtherUtil {\n  static getReaderConfig(key: string) {\n    let readerConfig = JSON.parse(localStorage.getItem(\"readerConfig\")!) || {};\n    return readerConfig[key];\n  }\n  static setReaderConfig(key: string, value: string) {\n    let readerConfig = JSON.parse(localStorage.getItem(\"readerConfig\")!) || {};\n    readerConfig[key] = value;\n    localStorage.setItem(\"readerConfig\", JSON.stringify(readerConfig));\n  }\n}\n\nexport default OtherUtil;\n","//卡片模式下的图书显示\nimport React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport MobiParser from \"../../utils/fileUtils/mobiParser\";\nimport marked from \"marked\";\nimport iconv from \"iconv-lite\";\nimport chardet from \"chardet\";\nimport rtfToHTML from \"@iarna/rtf-to-html\";\nimport {\n  xmlBookTagFilter,\n  xmlBookToObj,\n  txtToHtml,\n} from \"../../utils/fileUtils/xmlUtil\";\nimport HtmlParser from \"../../utils/fileUtils/htmlParser\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { mimetype } from \"../../constants/mimetype\";\nimport styleUtil from \"../../utils/readUtils/styleUtil\";\nimport { setInterval } from \"timers\";\n\ndeclare var window: any;\n\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = { key: \"\" };\n  }\n\n  componentDidMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n    this.setState({ key });\n    localforage.getItem(\"books\").then((result: any) => {\n      let book = result[_.findIndex(result, { key })];\n      BookUtil.fetchBook(key, true).then((result) => {\n        this.props.handleReadingBook(book);\n        if (book.format === \"MOBI\" || book.format === \"AZW3\") {\n          this.handleMobi(result as ArrayBuffer);\n        } else if (book.format === \"TXT\") {\n          this.handleTxt(result as ArrayBuffer);\n        } else if (book.format === \"MD\") {\n          this.handleMD(result as ArrayBuffer);\n        } else if (book.format === \"FB2\") {\n          this.handleFb2(result as ArrayBuffer);\n        } else if (book.format === \"RTF\") {\n          this.handleRtf(result as ArrayBuffer);\n        } else if (book.format === \"DOCX\") {\n          this.handleDocx(result as ArrayBuffer);\n        } else if (\n          book.format === \"HTML\" ||\n          book.format === \"XHTML\" ||\n          book.format === \"HTM\" ||\n          book.format === \"XML\"\n        ) {\n          this.handleHtml(result as ArrayBuffer, book.format);\n        }\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n      });\n    });\n    this.props.handleRenderFunc(this.handleRenderHtml);\n    setInterval(() => {\n      this.handleRecord();\n    }, 1000);\n    window.frames[0].document.addEventListener(\"click\", (event) => {\n      this.props.handleLeaveReader(\"left\");\n      this.props.handleLeaveReader(\"right\");\n      this.props.handleLeaveReader(\"top\");\n      this.props.handleLeaveReader(\"bottom\");\n    });\n  }\n  handleIframeHeight = () => {\n    let iFrame: any = document.getElementsByTagName(\"iframe\")[0];\n    var body = iFrame.contentWindow.document.body,\n      html = iFrame.contentWindow.document.documentElement;\n    iFrame.height = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  };\n  handleRecord() {\n    OtherUtil.setReaderConfig(\"windowWidth\", document.body.clientWidth + \"\");\n    OtherUtil.setReaderConfig(\"windowHeight\", document.body.clientHeight + \"\");\n    OtherUtil.setReaderConfig(\"windowX\", window.screenX + \"\");\n    OtherUtil.setReaderConfig(\"windowY\", window.screenY + \"\");\n    RecordLocation.recordScrollHeight(\n      this.state.key,\n      document.body.clientWidth,\n      document.body.clientHeight,\n      document.getElementsByClassName(\"ebook-viewer\")[0].scrollTop,\n      document.getElementsByClassName(\"ebook-viewer\")[0].scrollHeight\n    );\n  }\n  handleRest = (docStr: string) => {\n    let htmlParser = new HtmlParser(\n      new DOMParser().parseFromString(docStr, \"text/html\")\n    );\n    this.props.handleHtmlBook({\n      doc: htmlParser.getAnchoredDoc(),\n      chapters: htmlParser.getContentList(),\n      subitems: [],\n    });\n    this.handleRenderHtml();\n  };\n  handleRenderHtml = () => {\n    window.frames[0].document.body.innerHTML = \"\";\n    window.frames[0].document.body.innerHTML = (this.props.htmlBook\n      .doc as any).documentElement.outerHTML;\n    styleUtil.addHtmlCss();\n    setTimeout(() => {\n      document\n        .getElementsByClassName(\"ebook-viewer\")[0]\n        .scrollTo(0, RecordLocation.getScrollHeight(this.state.key).scroll);\n    }, 1);\n    this.handleIframeHeight();\n  };\n  handleMobi = async (result: ArrayBuffer) => {\n    let mobiFile = new MobiParser(result);\n    let content: any = await mobiFile.render();\n    this.handleRest(content.outerHTML);\n  };\n  handleTxt = (result: ArrayBuffer) => {\n    let text = iconv.decode(\n      Buffer.from(result),\n      chardet.detect(Buffer.from(result)) as string\n    );\n    this.handleRest(txtToHtml(text));\n  };\n  handleMD = (result: ArrayBuffer) => {\n    var blob = new Blob([result], { type: \"text/plain\" });\n    var reader = new FileReader();\n    reader.onload = (evt) => {\n      this.handleRest(marked(evt.target?.result as any));\n    };\n    reader.readAsText(blob, \"UTF-8\");\n  };\n  handleRtf = (result: ArrayBuffer) => {\n    let text = iconv.decode(\n      Buffer.from(result),\n      chardet.detect(Buffer.from(result)) as string\n    );\n    rtfToHTML.fromString(text, (err: any, html: any) => {\n      this.handleRest(html);\n    });\n  };\n  handleDocx = (result: ArrayBuffer) => {\n    window.mammoth.convertToHtml({ arrayBuffer: result }).then((res: any) => {\n      this.handleRest(res.value);\n    });\n  };\n  handleFb2 = (result: ArrayBuffer) => {\n    let fb2Str = iconv.decode(\n      Buffer.from(result),\n      chardet.detect(Buffer.from(result)) as string\n    );\n    let bookObj = xmlBookToObj(Buffer.from(result));\n    bookObj += xmlBookTagFilter(fb2Str);\n    this.handleRest(bookObj);\n  };\n  handleHtml = (result: ArrayBuffer, format: string) => {\n    var blob = new Blob([result], {\n      type: mimetype[format.toLocaleLowerCase()],\n    });\n    var reader = new FileReader();\n    reader.onload = (evt) => {\n      const html = evt.target?.result as any;\n      this.handleRest(html);\n    };\n    reader.readAsText(blob, \"UTF-8\");\n  };\n  render() {\n    return (\n      <div\n        className=\"ebook-viewer\"\n        style={{\n          width: `${\n            (100 * parseFloat(OtherUtil.getReaderConfig(\"scale\") || \"1\")) / 2\n          }%`,\n          height: \"100%\",\n          marginLeft: `${\n            (100 *\n              (2 - parseFloat(OtherUtil.getReaderConfig(\"scale\") || \"1\"))) /\n            4\n          }%`,\n          overflowY: \"scroll\",\n        }}\n      >\n        <iframe title=\"html-viewer\" width=\"100%\">\n          Loading\n        </iframe>\n      </div>\n    );\n  }\n}\nexport default withRouter(Viewer as any);\n","class HtmlParser {\n  bookDoc: any;\n  contentList: HTMLElement[];\n  contentTitleList: any[];\n  constructor(bookDoc: any) {\n    this.bookDoc = bookDoc;\n    this.contentList = [];\n    this.contentTitleList = [];\n    this.getContent(bookDoc);\n  }\n  getContent(bookDoc: HTMLElement) {\n    this.contentList = Array.from(\n      bookDoc.querySelectorAll(\"h1,h2,h3,h4,h5,font\")\n    );\n    for (let i = 0; i < this.contentList.length; i++) {\n      let random = Math.floor(Math.random() * 900) + 100;\n      this.contentTitleList.push({\n        label: this.contentList[i].innerText,\n        id: this.contentList[i].innerText.replace(/ /g, \"_\") + random,\n        href: \"#\" + this.contentList[i].innerText.replace(/ /g, \"_\") + random,\n        subitems: [],\n      });\n    }\n    for (let i = 0; i < this.contentList.length; i++) {\n      this.contentList[i].id = this.contentTitleList[i].id;\n    }\n  }\n  getAnchoredDoc() {\n    return this.bookDoc;\n  }\n  getContentList() {\n    return this.contentTitleList;\n  }\n}\n\nexport default HtmlParser;\n","import OtherUtil from \"../otherUtil\";\n\nclass styleUtil {\n  // 为 iframe 添加默认的样式\n  static addDefaultCss() {\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let css = this.getDefaultCss();\n    let style = doc.getElementById(\"default-style\");\n    let background = document.querySelector(\".background\");\n    if (!background) return;\n    background!.setAttribute(\n      \"style\",\n      `background-color:${OtherUtil.getReaderConfig(\n        \"backgroundColor\"\n      )};filter: brightness(${\n        OtherUtil.getReaderConfig(\"brightness\") || 1\n      }) invert(${OtherUtil.getReaderConfig(\"isInvert\") === \"yes\" ? 1 : 0})`\n    );\n    if (!doc.head) {\n      return;\n    }\n    if (!style) {\n      style = doc.createElement(\"style\");\n      style.id = \"default-style\";\n      style.textContent = css;\n      doc.head.appendChild(style);\n      return;\n    }\n    style.textContent = css;\n  }\n  static addHtmlCss() {\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let css = this.getDefaultCss();\n    let style = doc.getElementById(\"default-style\");\n    let background = document.querySelector(\".viewer\");\n    if (!background) return;\n    background!.setAttribute(\n      \"style\",\n      `background-color:${OtherUtil.getReaderConfig(\n        \"backgroundColor\"\n      )};filter: brightness(${\n        OtherUtil.getReaderConfig(\"brightness\") || 1\n      }) invert(${OtherUtil.getReaderConfig(\"isInvert\") === \"yes\" ? 1 : 0})`\n    );\n    window.frames[0].document.body.setAttribute(\n      \"style\",\n      this.getCustomCss() as string\n    );\n    if (!style) {\n      style = doc.createElement(\"style\");\n      style.id = \"default-style\";\n      style.textContent = css;\n      doc.head.appendChild(style);\n      return;\n    }\n    style.textContent = css;\n  }\n  // 获取为文档默认应用的css样式\n  static getDefaultCss() {\n    let colors = [\"#FBF1D1\", \"#EFEEB0\", \"#CAEFC9\", \"#76BEE9\"];\n    let lines = [\"#FF0000\", \"#000080\", \"#0000FF\", \"#2EFF2E\"];\n\n    return `::selection{background:#f3a6a68c}::-moz-selection{background:#f3a6a68c}[class*=color-]:hover{cursor:pointer;background-image:linear-gradient(0,rgba(0,0,0,.075),rgba(0,0,0,.075))}.color-0{background-color:${colors[0]}}.color-1{background-color:${colors[1]}}.color-2{background-color:${colors[2]}}.color-3{background-color:${colors[3]}}.line-0{border-bottom:2px solid ${lines[0]}}.line-1{border-bottom:2px solid ${lines[1]}}.line-2{border-bottom:2px solid ${lines[2]}}.line-3{border-bottom:2px solid ${lines[3]}}}img{max-width:100%}`;\n  }\n  static getCustomCss(isJSON: boolean = true) {\n    if (isJSON) {\n      return `font-size: ${\n        OtherUtil.getReaderConfig(\"fontSize\") || 17\n      }px !important;line-height: ${\n        OtherUtil.getReaderConfig(\"lineHeight\") || \"1.25\"\n      } !important;font-family: ${\n        OtherUtil.getReaderConfig(\"fontFamily\") || \"Helvetica\"\n      } !important;color: ${\n        OtherUtil.getReaderConfig(\"textColor\")\n          ? OtherUtil.getReaderConfig(\"textColor\")\n          : OtherUtil.getReaderConfig(\"backgroundColor\") ===\n              \"rgba(44,47,49,1)\" ||\n            OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n          ? \"white\"\n          : \"\"\n      } !important;letter-spacing: ${\n        OtherUtil.getReaderConfig(\"letterSpacing\")\n          ? OtherUtil.getReaderConfig(\"letterSpacing\")\n          : \"\"\n      }px !important;text-align: ${\n        OtherUtil.getReaderConfig(\"textAlign\")\n          ? OtherUtil.getReaderConfig(\"textAlign\")\n          : \"\"\n      } !important;\n      font-weight: ${\n        OtherUtil.getReaderConfig(\"isBold\") === \"yes\" ? \"bold !important\" : \"\"\n      };font-style: ${\n        OtherUtil.getReaderConfig(\"isItalic\") === \"yes\"\n          ? \"italic !important\"\n          : \"\"\n      };text-shadow: ${\n        OtherUtil.getReaderConfig(\"isShadow\") === \"yes\"\n          ? \"2px 2px 2px #cccccc !important\"\n          : \"\"\n      };text-decoration: ${\n        OtherUtil.getReaderConfig(\"isUnderline\") === \"yes\"\n          ? \"underline !important\"\n          : \"\"\n      };margin-bottom: ${\n        OtherUtil.getReaderConfig(\"paraSpacing\") || 0\n      }px !important;padding:0`;\n    } else {\n      return {\n        \"a, article, cite, code, div, li, p, pre, span, table\": {\n          \"font-size\": `${\n            OtherUtil.getReaderConfig(\"fontSize\") || 17\n          }px !important`,\n          \"line-height\": `${\n            OtherUtil.getReaderConfig(\"lineHeight\") || \"1.25\"\n          } !important`,\n          \"font-family\": `${\n            OtherUtil.getReaderConfig(\"fontFamily\") || \"Helvetica\"\n          } !important`,\n          color: `${\n            OtherUtil.getReaderConfig(\"textColor\")\n              ? OtherUtil.getReaderConfig(\"textColor\")\n              : OtherUtil.getReaderConfig(\"backgroundColor\") ===\n                  \"rgba(44,47,49,1)\" ||\n                OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n              ? \"white\"\n              : \"\"\n          } !important`,\n          \"letter-spacing\": `${\n            OtherUtil.getReaderConfig(\"letterSpacing\")\n              ? `${OtherUtil.getReaderConfig(\"letterSpacing\")}px`\n              : \"\"\n          } !important`,\n          \"text-align\": `${\n            OtherUtil.getReaderConfig(\"textAlign\")\n              ? `${OtherUtil.getReaderConfig(\"textAlign\")}`\n              : \"\"\n          } !important`,\n          \"font-weight\": `${\n            OtherUtil.getReaderConfig(\"isBold\") === \"yes\"\n              ? \"bold !important\"\n              : \"\"\n          }`,\n          \"font-style\": `${\n            OtherUtil.getReaderConfig(\"isItalic\") === \"yes\"\n              ? \"italic !important\"\n              : \"\"\n          }`,\n          \"text-shadow\": `${\n            OtherUtil.getReaderConfig(\"isShadow\") === \"yes\"\n              ? \"2px 2px 2px #cccccc !important\"\n              : \"\"\n          }`,\n          \"text-decoration\": `${\n            OtherUtil.getReaderConfig(\"isUnderline\") === \"yes\"\n              ? \"underline !important\"\n              : \"\"\n          }`,\n          \"margin-bottom\": `${\n            OtherUtil.getReaderConfig(\"paraSpacing\") || 0\n          }px !important`,\n        },\n      };\n    }\n  }\n  static addStyle = (url: string) => {\n    const style = document.createElement(\"link\");\n    style.href = url;\n    style.rel = \"stylesheet\";\n    document.head.appendChild(style);\n  };\n\n  static applyTheme() {\n    OtherUtil.getReaderConfig(\"themeColor\") &&\n      OtherUtil.getReaderConfig(\"themeColor\") !== \"default\" &&\n      this.addStyle(\n        \"./assets/styles/\" + OtherUtil.getReaderConfig(\"themeColor\") + \".css\"\n      );\n  }\n}\n\nexport default styleUtil;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport translationEN from \"./assets/locales/en/translation.json\";\nimport translationCN from \"./assets/locales/cn/translation.json\";\nimport translationTW from \"./assets/locales/tw/translation.json\";\nimport translationRU from \"./assets/locales/ru/translation.json\";\n\n// the translations\nconst resources = {\n  en: {\n    translation: translationEN,\n  },\n  zh: {\n    translation: translationCN,\n  },\n  cht: {\n    translation: translationTW,\n  },\n  ru: {\n    translation: translationRU,\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n    fallbackLng: \"en\",\n    keySeparator: false, // we do not use keys in form messages.welcome\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n    },\n  });\n\nexport default i18n;\n","const initState = {\n  isOpenEditDialog: false,\n  isOpenDeleteDialog: false,\n  isOpenAddDialog: false,\n  isOpenActionDialog: false,\n  isReading: false,\n  dragItem: \"\",\n  currentBook: {},\n  currentEpub: {},\n  renderFunc: () => {},\n};\nexport function book(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_EDIT_DIALOG\":\n      return {\n        ...state,\n        isOpenEditDialog: action.payload,\n      };\n    case \"HANDLE_DELETE_DIALOG\":\n      return {\n        ...state,\n        isOpenDeleteDialog: action.payload,\n      };\n    case \"HANDLE_RENDER_FUNC\":\n      return {\n        ...state,\n        renderFunc: action.payload,\n      };\n    case \"HANDLE_ADD_DIALOG\":\n      return {\n        ...state,\n        isOpenAddDialog: action.payload,\n      };\n    case \"HANDLE_ACTION_DIALOG\":\n      return {\n        ...state,\n        isOpenActionDialog: action.payload,\n      };\n    case \"HANDLE_READING_STATE\":\n      return {\n        ...state,\n        isReading: action.payload,\n      };\n    case \"HANDLE_READING_BOOK\":\n      return {\n        ...state,\n        currentBook: action.payload,\n      };\n\n    case \"HANDLE_READING_EPUB\":\n      return {\n        ...state,\n        currentEpub: action.payload,\n      };\n    case \"HANDLE_DRAG_ITEM\":\n      return {\n        ...state,\n        dragItem: action.payload,\n      };\n    case \"HANDLE_REDIRECT\":\n      return {\n        ...state,\n        isRedirect: true,\n      };\n    default:\n      return state;\n  }\n}\n","// 记录书本打开记录\nclass ReadingTime {\n  static setTime(bookKey: string, time: number) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    obj[bookKey] = time;\n    localStorage.setItem(\"readingTime\", JSON.stringify(obj));\n  }\n\n  static getTime(bookKey: string) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    return obj[bookKey] || 0;\n  }\n  static getAllTime() {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    return obj || [];\n  }\n  static clearTime(bookKey: string) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    delete obj[bookKey];\n    localStorage.setItem(\"readingTime\", JSON.stringify(obj));\n  }\n}\n\nexport default ReadingTime;\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport ReadingTime from \"./readingTime\";\nimport RecordLocation from \"./recordLocation\";\nimport _ from \"underscore\";\n//获取所有图书的书名\nconst getBookName = (books: BookModel[]) => {\n  return books.map((item) => item.name);\n};\n//获取所有作者名\nconst getAuthorName = (books: BookModel[]) => {\n  return books.map((item) => item.author);\n};\n//获取所有图书的key值\nconst getBookKey = (books: BookModel[]) => {\n  return books.map((item) => item.key);\n};\n//获取图书索引\nconst getBookIndex = (nameArr: string[], oldNameArr: string[]) => {\n  let indexArr: number[] = [];\n  for (let i = 0; i < nameArr.length; i++) {\n    if (oldNameArr.indexOf(nameArr[i]) > -1) {\n      //如果索引数组已经包含该索引，就把它放在随后一位，取数组长度为索引\n      indexArr.push(\n        indexArr.indexOf(oldNameArr.indexOf(nameArr[i])) > -1\n          ? indexArr.length\n          : oldNameArr.indexOf(nameArr[i])\n      );\n    }\n  }\n  return indexArr;\n};\n\nconst getDurationArr = () => {\n  let durationObj = ReadingTime.getAllTime();\n  var sortable: any[] = [];\n  for (let obj in durationObj) {\n    sortable.push([obj, durationObj[obj]]);\n  }\n  sortable.sort(function (a, b) {\n    return a[1] - b[1];\n  });\n  return Object.keys(durationObj);\n};\nconst getPercentageArr = () => {\n  let locationObj = RecordLocation.getAllCfi();\n  var sortable: any = [];\n  for (let obj in locationObj) {\n    sortable.push([obj, locationObj[obj].percentage]);\n  }\n  sortable.sort(function (a, b) {\n    return a[1] - b[1];\n  });\n  return Object.keys(locationObj);\n};\nclass SortUtil {\n  static sortBooks(\n    books: BookModel[],\n    bookSortCode: { sort: number; order: number }\n  ) {\n    if (bookSortCode.sort === 1) {\n      let oldNameArr = getBookName(books);\n      let nameArr = getBookName(books).sort();\n      if (bookSortCode.order === 1) {\n        return getBookIndex(nameArr, oldNameArr);\n      } else {\n        return getBookIndex(nameArr, oldNameArr).reverse();\n      }\n    }\n    if (bookSortCode.sort === 2) {\n      let nameArr: number[] = [];\n      for (let i = 0; i < books.length; i++) {\n        nameArr.push(i);\n      }\n      if (bookSortCode.order === 1) {\n        return nameArr;\n      } else {\n        return nameArr.reverse();\n      }\n    }\n    if (bookSortCode.sort === 3) {\n      let durationKeys = getDurationArr();\n      let bookKeys = getBookKey(books);\n      if (bookSortCode.order === 1) {\n        return getBookIndex(_.union(durationKeys, bookKeys), bookKeys);\n      } else {\n        return getBookIndex(\n          _.union(durationKeys, bookKeys),\n          bookKeys\n        ).reverse();\n      }\n    }\n    if (bookSortCode.sort === 4) {\n      let oldAuthorArr = getAuthorName(books);\n      let authorArr = getAuthorName(books).sort();\n      if (bookSortCode.order === 1) {\n        return getBookIndex(authorArr, oldAuthorArr);\n      } else {\n        return getBookIndex(authorArr, oldAuthorArr).reverse();\n      }\n    }\n    if (bookSortCode.sort === 5) {\n      let percentagenKeys = getPercentageArr();\n      let bookKeys = getBookKey(books);\n      if (bookSortCode.order === 1) {\n        return getBookIndex(\n          _.union(percentagenKeys, bookKeys),\n          bookKeys\n        ).reverse();\n      } else {\n        return getBookIndex(_.union(percentagenKeys, bookKeys), bookKeys);\n      }\n    }\n  }\n  static sortNotes(\n    notes: NoteModel[],\n    noteSortCode: { sort: number; order: number },\n    books: BookModel[] = []\n  ) {\n    if (noteSortCode.sort === 2) {\n      //使书摘从晚到早排序\n      let noteArr = _.clone(notes).reverse();\n      let dateArr = _.uniq(\n        notes.map(\n          (item) =>\n            \"\" + item.date.year + \"-\" + item.date.month + \"-\" + item.date.day\n        )\n      );\n      if (noteSortCode.order === 1) {\n        dateArr.sort();\n      } else {\n        dateArr.sort().reverse();\n      }\n      //得到以日期为键，书摘为值的对象\n      let noteObj: { [key: string]: any } = {};\n      dateArr.forEach((date) => {\n        noteObj[date] = [];\n      });\n      noteArr.forEach((note) => {\n        dateArr.forEach((date) => {\n          if (\n            date ===\n            \"\" + note.date.year + \"-\" + note.date.month + \"-\" + note.date.day\n          ) {\n            noteObj[date].push(note);\n          }\n        });\n      });\n      return noteObj || {};\n    }\n    if (noteSortCode.sort === 1) {\n      //使书摘从晚到早排序\n      let noteArr = _.clone(notes).reverse();\n      let nameArr = _.uniq(\n        notes.map(\n          (item) =>\n            books[\n              _.findLastIndex(books, {\n                key: item.bookKey,\n              })\n            ].name\n        )\n      );\n      if (noteSortCode.order === 1) {\n        nameArr.sort();\n      } else {\n        nameArr.sort().reverse();\n      }\n      //得到以日期为键，书摘为值的对象\n      let noteObj: { [key: string]: any } = {};\n      nameArr.forEach((name) => {\n        noteObj[name] = [];\n      });\n      noteArr.forEach((note) => {\n        nameArr.forEach((name) => {\n          if (\n            name ===\n            books[\n              _.findLastIndex(books, {\n                key: note.bookKey,\n              })\n            ].name\n          ) {\n            noteObj[name].push(note);\n          }\n        });\n      });\n      return noteObj || {};\n    }\n  }\n  static setBookSortCode(sortCode: number, orderCode: number) {\n    let json =\n      localStorage.getItem(\"bookSortCode\") ||\n      JSON.stringify({ sort: 0, order: 1 });\n    let obj = json ? JSON.parse(json) : { sort: 0, order: 1 };\n    obj.sort = sortCode;\n    obj.order = orderCode;\n    localStorage.setItem(\"bookSortCode\", JSON.stringify(obj));\n  }\n\n  static getBookSortCode() {\n    let json =\n      localStorage.getItem(\"bookSortCode\") ||\n      JSON.stringify({ sort: 0, order: 1 });\n    let obj = JSON.parse(json) || { sort: 0, order: 1 };\n    return obj || null;\n  }\n  static setNoteSortCode(sort: number, order: number) {\n    let json =\n      localStorage.getItem(\"noteSortCode\") ||\n      JSON.stringify({ sort: 2, order: 2 });\n    let obj = json ? JSON.parse(json) : { sort: 2, order: 2 };\n    obj.sort = sort;\n    obj.order = order;\n    localStorage.setItem(\"noteSortCode\", JSON.stringify(obj));\n  }\n\n  static getNoteSortCode() {\n    let json =\n      localStorage.getItem(\"noteSortCode\") ||\n      JSON.stringify({ sort: 2, order: 2 });\n    let obj = JSON.parse(json) || { sort: 2, order: 2 };\n    return obj || null;\n  }\n}\n\nexport default SortUtil;\n","import SortUtil from \"../../utils/readUtils/sortUtil\";\nconst initState = {\n  books: null,\n  deletedBooks: [],\n  searchResults: [],\n  isSearch: false,\n  isAboutOpen: false,\n  isBookSort: false,\n  isNoteSort: false,\n  isSettingOpen: false,\n  viewMode: \"card\",\n  isSortDisplay: false,\n  isShowLoading: false,\n  isTipDialog: false,\n  isShowNew: false,\n  bookSortCode: { sort: 0, order: 1 },\n  noteSortCode: SortUtil.getNoteSortCode(),\n  isMessage: false,\n  message: \"Add Successfully\",\n  tip: \"\",\n};\nexport function manager(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_BOOKS\":\n      return {\n        ...state,\n        books: action.payload,\n      };\n    case \"HANDLE_DELETED_BOOKS\":\n      return {\n        ...state,\n        deletedBooks: action.payload,\n      };\n    case \"HANDLE_SEARCH_BOOKS\":\n      return {\n        ...state,\n        searchResults: action.payload,\n      };\n    case \"HANDLE_TIP_DIALOG\":\n      return {\n        ...state,\n        isTipDialog: action.payload,\n      };\n    case \"HANDLE_TIP\":\n      return {\n        ...state,\n        tip: action.payload,\n      };\n    case \"HANDLE_SEARCH\":\n      return {\n        ...state,\n        isSearch: action.payload,\n      };\n\n    case \"HANDLE_SETTING\":\n      return {\n        ...state,\n        isSettingOpen: action.payload,\n      };\n    case \"HANDLE_ABOUT\":\n      return {\n        ...state,\n        isAboutOpen: action.payload,\n      };\n    case \"HANDLE_BOOK_SORT\":\n      return {\n        ...state,\n        isBookSort: action.payload,\n      };\n    case \"HANDLE_NOTE_SORT\":\n      return {\n        ...state,\n        isNoteSort: action.payload,\n      };\n\n    case \"HANDLE_VIEW_MODE\":\n      return {\n        ...state,\n        viewMode: action.payload,\n      };\n    case \"HANDLE_SORT_DISPLAY\":\n      return {\n        ...state,\n        isSortDisplay: action.payload,\n      };\n    case \"HANDLE_SHOW_LOADING\":\n      return {\n        ...state,\n        isShowLoading: action.payload,\n      };\n    case \"HANDLE_SHOW_NEW\":\n      return {\n        ...state,\n        isShowNew: action.payload,\n      };\n    case \"HANDLE_MESSAGE\":\n      return {\n        ...state,\n        message: action.payload,\n      };\n    case \"HANDLE_MESSAGE_BOX\":\n      return {\n        ...state,\n        isMessage: action.payload,\n      };\n    case \"HANDLE_SORT_CODE\":\n      return {\n        ...state,\n        bookSortCode: {\n          sort: action.payload.sort,\n          order: action.payload.order,\n        },\n      };\n    case \"HANDLE_NOTE_SORT_CODE\":\n      return {\n        ...state,\n        noteSortCode: {\n          sort: action.payload.sort,\n          order: action.payload.order,\n        },\n      };\n    case \"HANDLE_NOTES\":\n      return {\n        ...state,\n        notes: action.payload,\n      };\n    case \"HANDLE_BOOKMARKS\":\n      return {\n        ...state,\n        bookmarks: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","const initState = {\n  percentage: null,\n  locations: null,\n};\nexport function progressPanel(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_PERCENTAGE\":\n      return {\n        ...state,\n        percentage: action.payload,\n      };\n\n    case \"HANDLE_SECTION\":\n      return {\n        ...state,\n        section: action.payload,\n      };\n    case \"HANDLE_LOCATIONS\":\n      return {\n        ...state,\n        locations: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import OtherUtil from \"../../utils/otherUtil\";\nconst initState = {\n  bookmarks: [],\n  notes: [],\n  digests: [],\n  chapters: null,\n  currentChapter: \"\",\n  flattenChapters: null,\n  color: OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\" ? 3 : 0,\n  noteKey: \"\",\n  originalText: \"\",\n  htmlBook: null,\n  readerMode: OtherUtil.getReaderConfig(\"readerMode\") || \"double\",\n};\nexport function reader(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_BOOKMARKS\":\n      return {\n        ...state,\n        bookmarks: action.payload,\n      };\n    case \"HANDLE_NOTES\":\n      return {\n        ...state,\n        notes: action.payload,\n      };\n    case \"HANDLE_ORIGINAL_TEXT\":\n      return {\n        ...state,\n        originalText: action.payload,\n      };\n    case \"HANDLE_HTML_BOOK\":\n      return {\n        ...state,\n        htmlBook: action.payload,\n      };\n    case \"HANDLE_COLOR\":\n      return {\n        ...state,\n        color: action.payload,\n      };\n    case \"HANDLE_NOTE_KEY\":\n      return {\n        ...state,\n        noteKey: action.payload,\n      };\n    case \"HANDLE_DIGESTS\":\n      return {\n        ...state,\n        digests: action.payload,\n      };\n    case \"HANDLE_SECTION\":\n      return {\n        ...state,\n        section: action.payload,\n      };\n    case \"HANDLE_CHAPTERS\":\n      return {\n        ...state,\n        chapters: action.payload,\n      };\n    case \"HANDLE_FLATTEN_CHAPTERS\":\n      return {\n        ...state,\n        flattenChapters: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","const initState = {\n  selection: null,\n  isOpenMenu: false,\n  menuMode: \"menu\",\n  isChangeDirection: false,\n  isShowBookmark: false,\n};\nexport function viewArea(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_OPEN_MENU\":\n      return {\n        ...state,\n        isOpenMenu: action.payload,\n      };\n    case \"HANDLE_OPEN_HIGHLIGHT\":\n      return {\n        ...state,\n        isOpenHighlight: action.payload,\n      };\n\n    case \"HANDLE_SHOW_BOOKMARK\":\n      return {\n        ...state,\n        isShowBookmark: action.payload,\n      };\n    case \"HANDLE_SELECTION\":\n      return {\n        ...state,\n        selection: action.payload,\n      };\n    case \"HANDLE_DIALOG_LOCATION\":\n      return {\n        ...state,\n        dialogLocation: action.payload,\n      };\n    case \"HANDLE_MENU_MODE\":\n      return {\n        ...state,\n        menuMode: action.payload,\n      };\n    case \"HANDLE_CHANGE_DIRECTION\":\n      return {\n        ...state,\n        isChangeDirection: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import OtherUtil from \"../../utils/otherUtil\";\nconst initState = {\n  mode: \"home\",\n  shelfIndex: -1,\n  isDragToLove: false,\n  isDragToDelete: false,\n  isCollapsed: OtherUtil.getReaderConfig(\"isCollapsed\") === \"yes\",\n};\nexport function sidebar(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_MODE\":\n      return {\n        ...state,\n        mode: action.payload,\n      };\n    case \"HANDLE_SHELF_INDEX\":\n      return {\n        ...state,\n        shelfIndex: action.payload,\n      };\n    case \"HANDLE_COLLAPSE\":\n      return {\n        ...state,\n        isCollapsed: action.payload,\n      };\n    case \"HANDLE_DRAG_TO_LOVE\":\n      return {\n        ...state,\n        isDragToLove: action.payload,\n      };\n    case \"HANDLE_DRAG_TO_DELETE\":\n      return {\n        ...state,\n        isDragToDelete: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","const initState = {\n  isBackup: false,\n  isOpenTokenDialog: false,\n};\nexport function backupPage(\n  state = initState,\n  action: { type: string; payload: boolean }\n) {\n  switch (action.type) {\n    case \"HANDLE_BACKUP\":\n      return {\n        ...state,\n        isBackup: action.payload,\n      };\n    case \"HANDLE_TOKEN_DIALOG\":\n      return {\n        ...state,\n        isOpenTokenDialog: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware, compose, combineReducers } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { book } from \"./reducers/book\";\nimport { manager } from \"./reducers/manager\";\nimport { progressPanel } from \"./reducers/progressPanel\";\nimport { reader } from \"./reducers/reader\";\nimport { viewArea } from \"./reducers/viewArea\";\nimport { sidebar } from \"./reducers/sidebar\";\nimport { backupPage } from \"./reducers/backupPage\";\nimport BookModel from \"../model/Book\";\nimport NoteModel from \"../model/Note\";\nimport BookmarkModel from \"../model/Bookmark\";\nimport HtmlBookModel from \"../model/HtmlBook\";\nconst rootReducer = combineReducers({\n  book,\n  manager,\n  reader,\n  progressPanel,\n  viewArea,\n  sidebar,\n  backupPage,\n});\nconst store = createStore(\n  rootReducer,\n  compose(\n    applyMiddleware(thunk),\n    (window as any).devToolsExtension\n      ? (window as any).devToolsExtension()\n      : (f: any) => f\n  )\n);\nexport default store;\nexport type stateType = {\n  manager: {\n    books: BookModel[];\n    deletedBooks: BookModel[];\n    searchResults: number[];\n    isSearch: boolean;\n    isBookSort: boolean;\n    isSettingOpen: boolean;\n    viewMode: string;\n    isSortDisplay: boolean;\n    isAboutOpen: boolean;\n    isShowLoading: boolean;\n    isShowNew: boolean;\n    isTipDialog: boolean;\n    bookSortCode: { sort: number; order: number };\n    noteSortCode: { sort: number; order: number };\n    isMessage: boolean;\n    message: string;\n    tip: string;\n  };\n  book: {\n    isOpenEditDialog: boolean;\n    isOpenDeleteDialog: boolean;\n    isOpenAddDialog: boolean;\n    isOpenActionDialog: boolean;\n    isReading: boolean;\n    dragItem: string;\n    currentBook: BookModel;\n    currentEpub: any;\n    renderFunc: () => void;\n  };\n  backupPage: {\n    isBackup: boolean;\n    isOpenTokenDialog: boolean;\n  };\n  progressPanel: {\n    percentage: number;\n    locations: any[];\n  };\n  reader: {\n    bookmarks: BookmarkModel[];\n    notes: NoteModel[];\n    digests: NoteModel[];\n    color: number;\n    chapters: any[];\n    flattenChapters: any;\n    noteKey: string;\n    originalText: string;\n    htmlBook: HtmlBookModel;\n  };\n  sidebar: {\n    mode: string;\n    shelfIndex: number;\n    isDragToLove: boolean;\n    isCollapsed: boolean;\n    isDragToDelete: boolean;\n  };\n  viewArea: {\n    selection: string;\n    menuMode: string;\n    isOpenMenu: boolean;\n    isChangeDirection: boolean;\n    isShowBookmark: boolean;\n  };\n};\n","// 记录书本打开记录\nimport BookModel from \"../../model/Book\";\nclass AddTrash {\n  static setTrash(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static setAllTrash(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static getAllTrash() {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default AddTrash;\n","import localforage from \"localforage\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport SortUtil from \"../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../model/Book\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport NoteModel from \"../../model/Note\";\nimport { Dispatch } from \"redux\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\n\nexport function handleNotes(notes: NoteModel[]) {\n  return { type: \"HANDLE_NOTES\", payload: notes };\n}\nexport function handleBooks(books: BookModel[]) {\n  return { type: \"HANDLE_BOOKS\", payload: books };\n}\nexport function handleDeletedBooks(deletedBooks: BookModel[]) {\n  return { type: \"HANDLE_DELETED_BOOKS\", payload: deletedBooks };\n}\nexport function handleSearchResults(searchResults: number[]) {\n  return { type: \"HANDLE_SEARCH_BOOKS\", payload: searchResults };\n}\nexport function handleSearch(isSearch: boolean) {\n  return { type: \"HANDLE_SEARCH\", payload: isSearch };\n}\nexport function handleTipDialog(isTipDialog: boolean) {\n  return { type: \"HANDLE_TIP_DIALOG\", payload: isTipDialog };\n}\nexport function handleTip(tip: string) {\n  return { type: \"HANDLE_TIP\", payload: tip };\n}\nexport function handleSetting(isSettingOpen: boolean) {\n  return { type: \"HANDLE_SETTING\", payload: isSettingOpen };\n}\nexport function handleAbout(isAboutOpen: boolean) {\n  return { type: \"HANDLE_ABOUT\", payload: isAboutOpen };\n}\nexport function handleViewMode(mode: string) {\n  return { type: \"HANDLE_VIEW_MODE\", payload: mode };\n}\nexport function handleMessage(message: string) {\n  return { type: \"HANDLE_MESSAGE\", payload: message };\n}\n\nexport function handleMessageBox(isShow: boolean) {\n  return { type: \"HANDLE_MESSAGE_BOX\", payload: isShow };\n}\nexport function handleSortDisplay(isSortDisplay: boolean) {\n  return { type: \"HANDLE_SORT_DISPLAY\", payload: isSortDisplay };\n}\nexport function handleLoadingDialog(isShowLoading: boolean) {\n  return { type: \"HANDLE_SHOW_LOADING\", payload: isShowLoading };\n}\nexport function handleNewDialog(isShowNew: boolean) {\n  return { type: \"HANDLE_SHOW_NEW\", payload: isShowNew };\n}\nexport function handleBookSort(isBookSort: boolean) {\n  return { type: \"HANDLE_BOOK_SORT\", payload: isBookSort };\n}\nexport function handleNoteSort(isNoteSort: boolean) {\n  return { type: \"HANDLE_NOTE_SORT\", payload: isNoteSort };\n}\nexport function handleBookSortCode(bookSortCode: {\n  sort: number;\n  order: number;\n}) {\n  return { type: \"HANDLE_SORT_CODE\", payload: bookSortCode };\n}\n\nexport function handleNoteSortCode(noteSortCode: {\n  sort: number;\n  order: number;\n}) {\n  return { type: \"HANDLE_NOTE_SORT_CODE\", payload: noteSortCode };\n}\nexport function handleBookmarks(bookmarks: BookmarkModel[]) {\n  return { type: \"HANDLE_BOOKMARKS\", payload: bookmarks };\n}\nexport function handleFetchBooks(isTrash = false) {\n  return (dispatch: Dispatch) => {\n    localforage.getItem(\"books\", async (err, value) => {\n      let bookArr: any = value;\n      let keyArr = AddTrash.getAllTrash();\n      if (isTrash) {\n        dispatch(handleDeletedBooks(handleKeyFilter(bookArr, keyArr)));\n      } else {\n        dispatch(handleBooks(handleKeyRemove(bookArr, keyArr)));\n      }\n    });\n  };\n}\nexport function handleFetchBookSortCode() {\n  return (dispatch: Dispatch) => {\n    let bookSortCode = SortUtil.getBookSortCode();\n    dispatch(handleBookSortCode(bookSortCode));\n  };\n}\nexport function handleFetchList() {\n  return (dispatch: Dispatch) => {\n    let viewMode = OtherUtil.getReaderConfig(\"viewMode\") || \"card\";\n    dispatch(handleViewMode(viewMode));\n  };\n}\nconst handleKeyRemove = (items: any[], arr: string[]) => {\n  if (!items) return [];\n  let itemArr: any[] = [];\n  if (!arr[0]) {\n    return items;\n  }\n  for (let item of items) {\n    if (arr.indexOf(item.key) === -1) {\n      itemArr.push(item);\n    }\n  }\n\n  return itemArr;\n};\nconst handleKeyFilter = (items: any[], arr: string[]) => {\n  if (!items) {\n    return [];\n  }\n  let itemArr: any[] = [];\n  for (let item of items) {\n    if (arr.indexOf(item.key) > -1) {\n      itemArr.push(item);\n    }\n  }\n  return itemArr;\n};\n","export function handleBackupDialog(mode: boolean) {\n  return { type: \"HANDLE_BACKUP\", payload: mode };\n}\nexport function handleTokenDialog(mode: boolean) {\n  return { type: \"HANDLE_TOKEN_DIALOG\", payload: mode };\n}\n","import localforage from \"localforage\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport HtmlBookModel from \"../../model/HtmlBook\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\nexport function handleNotes(notes: NoteModel[]) {\n  return { type: \"HANDLE_NOTES\", payload: notes };\n}\nexport function handleOriginalText(originalText: string) {\n  return { type: \"HANDLE_ORIGINAL_TEXT\", payload: originalText };\n}\nexport function handleColor(color: number) {\n  return { type: \"HANDLE_COLOR\", payload: color };\n}\nexport function handleBookmarks(bookmarks: BookmarkModel[]) {\n  return { type: \"HANDLE_BOOKMARKS\", payload: bookmarks };\n}\nexport function handleDigests(digests: NoteModel[]) {\n  return { type: \"HANDLE_DIGESTS\", payload: digests };\n}\nexport function handleHtmlBook(htmlBook: HtmlBookModel) {\n  return { type: \"HANDLE_HTML_BOOK\", payload: htmlBook };\n}\nexport function handleCurrentChapter(currentChapter: string) {\n  return { type: \"HANDLE_CURRENT_CHAPTER\", payload: currentChapter };\n}\nexport function handleChapters(chapters: any) {\n  return { type: \"HANDLE_CHAPTERS\", payload: chapters };\n}\nexport function handleFlattenChapters(flattenChapters: any) {\n  return { type: \"HANDLE_FLATTEN_CHAPTERS\", payload: flattenChapters };\n}\nexport function handleNoteKey(key: string) {\n  return { type: \"HANDLE_NOTE_KEY\", payload: key };\n}\nexport function handleFetchNotes() {\n  return (dispatch: (arg0: { type: string; payload: NoteModel[] }) => void) => {\n    localforage.getItem(\"notes\", (err, value) => {\n      let noteArr: any;\n      if (value === null || value === []) {\n        noteArr = [];\n      } else {\n        noteArr = value;\n      }\n      let keyArr = AddTrash.getAllTrash();\n      dispatch(handleNotes(handleKeyRemove(noteArr, keyArr)));\n      dispatch(\n        handleDigests(\n          handleKeyRemove(\n            noteArr.filter((item: NoteModel) => {\n              return item.notes === \"\";\n            }),\n            keyArr\n          )\n        )\n      );\n    });\n  };\n}\nexport function flatChapter(chapters: any) {\n  let newChapter: any = [];\n  for (let i = 0; i < chapters.length; i++) {\n    if (chapters[i].subitems[0]) {\n      newChapter.push(chapters[i]);\n      newChapter = newChapter.concat(flatChapter(chapters[i].subitems));\n    } else {\n      newChapter.push(chapters[i]);\n    }\n  }\n  return newChapter;\n}\n\nexport function handleFetchChapters(epub: any) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    epub.loaded.navigation\n      .then((chapters: any) => {\n        dispatch(handleChapters(chapters.toc));\n        dispatch(handleFlattenChapters(flatChapter(chapters.toc)));\n      })\n      .catch(() => {\n        console.log(\"Error occurs\");\n      });\n  };\n}\nexport function handleFetchBookmarks() {\n  return (\n    dispatch: (arg0: { type: string; payload: BookmarkModel[] }) => void\n  ) => {\n    localforage.getItem(\"bookmarks\", (err, value) => {\n      let bookmarkArr: any;\n      if (value === null || value === []) {\n        bookmarkArr = [];\n      } else {\n        bookmarkArr = value;\n      }\n      let keyArr = AddTrash.getAllTrash();\n      dispatch(handleBookmarks(handleKeyRemove(bookmarkArr, keyArr)));\n    });\n  };\n}\nconst handleKeyRemove = (items: any[], arr: string[]) => {\n  let itemArr: any[] = [];\n  if (!arr[0]) {\n    return items;\n  }\n  for (let i = 0; i < items.length; i++) {\n    if (arr.indexOf(items[i].bookKey) === -1) {\n      itemArr.push(items[i]);\n    }\n  }\n  return itemArr;\n};\n","import BookModel from \"../../model/Book\";\nexport function handleEditDialog(mode: boolean) {\n  return { type: \"HANDLE_EDIT_DIALOG\", payload: mode };\n}\nexport function handleDeleteDialog(mode: boolean) {\n  return { type: \"HANDLE_DELETE_DIALOG\", payload: mode };\n}\nexport function handleAddDialog(mode: boolean) {\n  return { type: \"HANDLE_ADD_DIALOG\", payload: mode };\n}\nexport function handleRenderFunc(renderFunc: () => void) {\n  return { type: \"HANDLE_RENDER_FUNC\", payload: renderFunc };\n}\nexport function handleActionDialog(mode: boolean) {\n  return { type: \"HANDLE_ACTION_DIALOG\", payload: mode };\n}\nexport function handleReadingState(state: boolean) {\n  return { type: \"HANDLE_READING_STATE\", payload: state };\n}\nexport function handleReadingBook(book: BookModel) {\n  return { type: \"HANDLE_READING_BOOK\", payload: book };\n}\nexport function handleReadingEpub(epub: any) {\n  return { type: \"HANDLE_READING_EPUB\", payload: epub };\n}\nexport function handleDragItem(key: string) {\n  return { type: \"HANDLE_DRAG_ITEM\", payload: key };\n}\n","export function handleShelfIndex(shelfIndex: number) {\n  return { type: \"HANDLE_SHELF_INDEX\", payload: shelfIndex };\n}\nexport function handleCollapse(isCollapsed: boolean) {\n  return { type: \"HANDLE_COLLAPSE\", payload: isCollapsed };\n}\nexport function handleMode(mode: string) {\n  return { type: \"HANDLE_MODE\", payload: mode };\n}\nexport function handleDragToLove(isDragToLove: boolean) {\n  return { type: \"HANDLE_DRAG_TO_LOVE\", payload: isDragToLove };\n}\nexport function handleDragToDelete(isDragToDelete: boolean) {\n  return { type: \"HANDLE_DRAG_TO_DELETE\", payload: isDragToDelete };\n}\n","export const sideMenu = [\n  {\n    name: \"All Books\",\n    icon: \"home\",\n    mode: \"home\",\n  },\n  {\n    name: \"My Favorites\",\n    icon: \"love\",\n    mode: \"favorite\",\n  },\n\n  {\n    name: \"My Notes\",\n    icon: \"idea\",\n    mode: \"note\",\n  },\n  {\n    name: \"My Digests\",\n    icon: \"digest\",\n    mode: \"digest\",\n  },\n  {\n    name: \"Deleted Books\",\n    icon: \"trash\",\n    mode: \"trash\",\n  },\n];\n","import React from \"react\";\nimport \"./sidebar.css\";\nimport { sideMenu } from \"../../constants/sideMenu\";\nimport { SidebarProps, SidebarState } from \"./interface\";\nimport { withRouter } from \"react-router-dom\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { isElectron } from \"react-device-detect\";\n\nclass Sidebar extends React.Component<SidebarProps, SidebarState> {\n  constructor(props: SidebarProps) {\n    super(props);\n    this.state = {\n      index: 0,\n      hoverIndex: -1,\n      isCollapsed: OtherUtil.getReaderConfig(\"isCollapsed\") === \"yes\" || false,\n    };\n  }\n  componentDidMount() {\n    this.props.handleMode(\n      document.URL.split(\"/\").reverse()[0] === \"empty\"\n        ? \"home\"\n        : document.URL.split(\"/\").reverse()[0]\n    );\n  }\n  handleSidebar = (mode: string, index: number) => {\n    this.setState({ index: index });\n    this.props.history.push(`/manager/${mode}`);\n    this.props.handleMode(mode);\n    this.props.handleSearch(false);\n    this.props.handleSortDisplay(false);\n  };\n  handleHover = (index: number) => {\n    this.setState({ hoverIndex: index });\n  };\n  handleCollapse = (isCollapsed: boolean) => {\n    this.setState({ isCollapsed });\n    this.props.handleCollapse(isCollapsed);\n    OtherUtil.setReaderConfig(\"isCollapsed\", isCollapsed ? \"yes\" : \"no\");\n  };\n  handleJump = (url: string) => {\n    isElectron\n      ? window.require(\"electron\").shell.openExternal(url)\n      : window.open(url);\n  };\n  render() {\n    const renderSideMenu = () => {\n      return sideMenu.map((item, index) => {\n        return (\n          <li\n            key={item.name}\n            className={\n              this.state.index === index\n                ? \"active side-menu-item\"\n                : \"side-menu-item\"\n            }\n            id={`sidebar-${item.icon}`}\n            onClick={() => {\n              this.handleSidebar(item.mode, index);\n            }}\n            onDrop={() => {\n              index === 1 && this.props.handleDragToLove(true);\n              index === 5 && this.props.handleDragToDelete(true);\n            }}\n            onMouseEnter={() => {\n              this.handleHover(index);\n            }}\n            onMouseLeave={() => {\n              this.handleHover(-1);\n            }}\n            style={this.props.isCollapsed ? { width: 40, marginLeft: 15 } : {}}\n          >\n            {this.state.index === index ? (\n              <div className=\"side-menu-selector-container\"></div>\n            ) : null}\n            {this.state.hoverIndex === index ? (\n              <div className=\"side-menu-hover-container\"></div>\n            ) : null}\n            <div\n              className={\n                this.state.index === index\n                  ? \"side-menu-selector active-selector\"\n                  : \"side-menu-selector \"\n              }\n            >\n              <Tooltip\n                title={this.props.t(item.name)}\n                position=\"top\"\n                trigger=\"mouseenter\"\n              >\n                <div\n                  className=\"side-menu-icon\"\n                  style={this.props.isCollapsed ? {} : { marginLeft: \"38px\" }}\n                >\n                  <span\n                    className={\n                      this.state.index === index\n                        ? `icon-${item.icon}  active-icon`\n                        : `icon-${item.icon}`\n                    }\n                    style={\n                      this.props.isCollapsed ? { marginLeft: \"-25px\" } : {}\n                    }\n                  ></span>\n                </div>\n              </Tooltip>\n              <span style={this.props.isCollapsed ? { display: \"none\" } : {}}>\n                {this.props.t(item.name)}\n              </span>\n            </div>\n          </li>\n        );\n      });\n    };\n    return (\n      <div className=\"sidebar\">\n        <div\n          className=\"sidebar-list-icon\"\n          onClick={() => {\n            this.handleCollapse(!this.state.isCollapsed);\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\n              this.props.isCollapsed ? \"Show sidebar\" : \"Collapse sidebar\"\n            )}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <span className=\"icon-menu sidebar-list\"></span>\n          </Tooltip>\n        </div>\n\n        <img\n          src={\n            OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n              ? \"./assets/label_light.png\"\n              : \"./assets/label.png\"\n          }\n          alt=\"\"\n          onClick={() => {\n            this.handleJump(\"https://koodo.960960.xyz\");\n          }}\n          className=\"logo\"\n        />\n        <div className=\"side-menu-container-parent\">\n          <ul className=\"side-menu-container\">{renderSideMenu()}</ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Sidebar);\n","import { handleMode } from \"../../store/actions/sidebar\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport Sidebar from \"./component\";\nimport { handleSearch, handleSortDisplay } from \"../../store/actions/manager\";\nimport {\n  handleDragToLove,\n  handleDragToDelete,\n  handleCollapse,\n} from \"../../store/actions/sidebar\";\n\nconst mapStateToProps = (state: stateType) => {\n  return { mode: state.sidebar.mode, isCollapsed: state.sidebar.isCollapsed };\n};\nconst actionCreator = {\n  handleMode,\n  handleSearch,\n  handleDragToLove,\n  handleDragToDelete,\n  handleSortDisplay,\n  handleCollapse,\n};\n\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Sidebar as any));\n","import BookModel from \"../model/Book\";\nimport NoteModel from \"../model/Note\";\nclass SearchUtil {\n  static MergeArray(arr1: number[], arr2: number[]) {\n    var _arr: number[] = [];\n    for (let item of arr1) {\n      _arr.push(item);\n    }\n    for (let item of arr2) {\n      var flag = true;\n      for (let subitem of arr1) {\n        if (item === subitem) {\n          flag = false;\n          break;\n        }\n      }\n      if (flag) {\n        _arr.push(item);\n      }\n    }\n    return _arr;\n  }\n  static fuzzyQuery(list: string[], keyWord: string) {\n    var arr: number[] = [];\n    for (var i = 0; i < list.length; i++) {\n      if (list[i].indexOf(keyWord) > -1) {\n        arr.push(i);\n      }\n    }\n    return arr;\n  }\n  static MouseSearch(books: BookModel[]) {\n    let keyword = (document.querySelector(\n      \".header-search-box\"\n    ) as HTMLInputElement).value.toLowerCase();\n    let bookNameArr: string[] = [];\n    let AuthorNameArr: string[] = [];\n    if (!books) return [];\n    books.forEach((item) => {\n      bookNameArr.push(item.name.toLowerCase());\n      AuthorNameArr.push(item.author.toLowerCase());\n    });\n    let bookResults = this.fuzzyQuery(bookNameArr, keyword);\n    let authorResults = this.fuzzyQuery(AuthorNameArr, keyword);\n\n    return this.MergeArray(bookResults, authorResults);\n  }\n  static KeySearch(event: any, books: BookModel[]) {\n    if (event && event.keyCode === 13) {\n      let bookNameArr: string[] = [];\n      let AuthorNameArr: string[] = [];\n      if (!books) return [];\n\n      books.forEach((item) => {\n        bookNameArr.push(item.name.toLowerCase());\n        AuthorNameArr.push(item.author.toLowerCase());\n      });\n      let bookResults = this.fuzzyQuery(\n        bookNameArr,\n        event.target.value.toLowerCase()\n      );\n      let authorResults = this.fuzzyQuery(\n        AuthorNameArr,\n        event.target.value.toLowerCase()\n      );\n\n      return this.MergeArray(bookResults, authorResults);\n    }\n  }\n  static MouseNoteSearch(notes: NoteModel[]) {\n    let keyword = (document.querySelector(\n      \".header-search-box\"\n    ) as HTMLInputElement).value.toLowerCase();\n    let noteArr: string[] = [];\n    let textArr: string[] = [];\n    notes.forEach((item: NoteModel) => {\n      noteArr.push(item.notes.toLowerCase());\n      textArr.push(item.text.toLowerCase());\n    });\n    let noteResults = this.fuzzyQuery(noteArr, keyword);\n    let textResults = this.fuzzyQuery(textArr, keyword);\n    return this.MergeArray(noteResults, textResults);\n  }\n  static KeyNoteSearch(event: any, notes: NoteModel[]) {\n    if (event && event.keyCode === 13) {\n      let noteArr: string[] = [];\n      let textArr: string[] = [];\n      notes.forEach((item: NoteModel) => {\n        noteArr.push(item.notes.toLowerCase());\n        textArr.push(item.text.toLowerCase());\n      });\n      let noteResults = this.fuzzyQuery(\n        noteArr,\n        event.target.value.toLowerCase()\n      );\n      let textResults = this.fuzzyQuery(\n        textArr,\n        event.target.value.toLowerCase()\n      );\n      return this.MergeArray(noteResults, textResults);\n    }\n  }\n}\nexport default SearchUtil;\n","//搜索框\nimport React from \"react\";\nimport \"./searchBox.css\";\nimport SearchUtil from \"../../utils/searchUtil\";\nimport { SearchBoxProps } from \"./interface\";\nclass SearchBox extends React.Component<SearchBoxProps> {\n  componentDidMount() {\n    if (this.props.isNavSearch) {\n      let searchBox: any = document.querySelector(\".header-search-box\");\n      searchBox && searchBox.focus();\n    }\n  }\n  handleMouse = () => {\n    let value = (this.refs.searchBox as any).value;\n    if (this.props.isNavSearch) {\n      value && this.search(value);\n    }\n    if (this.props.mode === \"nav\") {\n      this.props.handleSearchState(true);\n    }\n    let results =\n      this.props.tabMode === \"note\"\n        ? SearchUtil.MouseNoteSearch(\n            this.props.notes.filter((item) => item.notes !== \"\")\n          )\n        : this.props.tabMode === \"digest\"\n        ? SearchUtil.MouseNoteSearch(this.props.digests)\n        : SearchUtil.MouseSearch(this.props.books);\n    if (results) {\n      this.props.handleSearchResults(results);\n      this.props.handleSearch(true);\n    }\n  };\n  handleKey = (event: any) => {\n    if (event.keyCode !== 13) {\n      return;\n    }\n    let value = (this.refs.searchBox as any).value.toLowerCase();\n    if (this.props.isNavSearch || this.props.isReading) {\n      value && this.search(value);\n    }\n    let results =\n      this.props.tabMode === \"note\"\n        ? SearchUtil.KeyNoteSearch(\n            event,\n            this.props.notes.filter((item) => item.notes !== \"\")\n          )\n        : this.props.tabMode === \"digest\"\n        ? SearchUtil.KeyNoteSearch(event, this.props.digests)\n        : SearchUtil.KeySearch(event, this.props.books);\n    if (results) {\n      this.props.handleSearchResults(results);\n      this.props.handleSearch(true);\n    }\n  };\n  search = (q: string) => {\n    this.doSearch(q).then((result) => {\n      let searchList = result.map((item: any) => {\n        item.excerpt = item.excerpt.replace(\n          q,\n          `<span class=\"content-search-text\">${q}</span>`\n        );\n        return item;\n      });\n      this.props.handleSearchList(searchList);\n    });\n  };\n  doSearch = (q: string) => {\n    return Promise.all(\n      this.props.currentEpub.spine.spineItems.map((item: any) =>\n        item\n          .load(this.props.currentEpub.load.bind(this.props.currentEpub))\n          .then(item.find.bind(item, q))\n          .finally(item.unload.bind(item))\n      )\n    ).then((results: any) => Promise.resolve([].concat.apply([], results)));\n  };\n  handleCancel = () => {\n    if (this.props.isNavSearch) {\n      this.props.handleSearchList(null);\n    }\n    this.props.handleSearch(false);\n    (document.querySelector(\".header-search-box\") as HTMLInputElement).value =\n      \"\";\n  };\n\n  render() {\n    return (\n      <div style={{ position: \"relative\" }}>\n        <input\n          type=\"text\"\n          ref=\"searchBox\"\n          className=\"header-search-box\"\n          onKeyDown={(event) => {\n            this.handleKey(event);\n          }}\n          onFocus={() => {\n            this.props.mode === \"nav\" && this.props.handleSearchState(true);\n          }}\n          placeholder={\n            this.props.isNavSearch || this.props.mode === \"nav\"\n              ? this.props.t(\"Search the book\")\n              : this.props.tabMode === \"note\"\n              ? this.props.t(\"Search my notes\")\n              : this.props.tabMode === \"digest\"\n              ? this.props.t(\"Search my digests\")\n              : this.props.t(\"Search my library\")\n          }\n          style={\n            this.props.mode === \"nav\"\n              ? { width: this.props.width, height: this.props.height }\n              : { paddingRight: \"50px\" }\n          }\n        />\n        {this.props.isSearch ? (\n          <span\n            className=\"header-search-text\"\n            onClick={() => {\n              this.handleCancel();\n            }}\n            style={\n              this.props.mode === \"nav\" ? { right: \"-9px\", top: \"14px\" } : {}\n            }\n          >\n            <span className=\"icon-close\"></span>\n          </span>\n        ) : (\n          <span\n            className=\"icon-search header-search-icon\"\n            onClick={() => {\n              this.handleMouse();\n            }}\n            style={this.props.mode === \"nav\" ? { right: \"5px\" } : {}}\n          ></span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import { connect } from \"react-redux\";\nimport { handleSearchResults, handleSearch } from \"../../store/actions/manager\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport SearchBox from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    isSearch: state.manager.isSearch,\n    isReading: state.book.isReading,\n    currentEpub: state.book.currentEpub,\n    tabMode: state.sidebar.mode,\n    shelfIndex: state.sidebar.shelfIndex,\n  };\n};\nconst actionCreator = {\n  handleSearchResults,\n  handleSearch,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SearchBox as any));\n","import SparkMD5 from \"spark-md5\";\nexport const fetchMD5 = (file: any) => {\n  return new Promise<string>((resolve, reject) => {\n    var blobSlice =\n        (File as any).prototype.slice ||\n        (File as any).prototype.mozSlice ||\n        (File as any).prototype.webkitSlice,\n      chunkSize = 2097152, // 以每片2MB大小来逐次读取\n      chunks = Math.ceil(file.size / chunkSize),\n      currentChunk = 0,\n      spark = new SparkMD5(), //创建SparkMD5的实例\n      fileReader = new FileReader();\n    fileReader.onload = async (e) => {\n      if (!e.target) {\n        reject(\"\");\n\n        throw new Error();\n      }\n      spark.appendBinary(e.target.result as any); // append array buffer\n      currentChunk += 1;\n      if (currentChunk < chunks) {\n        loadNext();\n      } else {\n        resolve(spark.end());\n      }\n    };\n\n    const loadNext = () => {\n      var start = currentChunk * chunkSize,\n        end = start + chunkSize >= file.size ? file.size : start + chunkSize;\n\n      fileReader.readAsBinaryString(blobSlice.call(file, start, end));\n    };\n\n    loadNext();\n  });\n};\n","import BookModel from \"../../model/Book\";\n\ndeclare var window: any;\nexport const addEpub = (file: any, md5: string) => {\n  return new Promise<BookModel | boolean>((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = async (e) => {\n      if (!e.target) {\n        reject(false);\n        throw new Error();\n      }\n\n      let cover: any = \"\";\n      const epub = window.ePub(e.target.result);\n      epub.loaded.metadata\n        .then((metadata: any) => {\n          if (!e.target) {\n            reject(false);\n            throw new Error();\n          }\n          epub\n            .coverUrl()\n            .then(async (url: string) => {\n              if (url) {\n                var reader = new FileReader();\n                let blob = await fetch(url).then((r) => r.blob());\n                reader.readAsDataURL(blob);\n                reader.onloadend = async () => {\n                  cover = reader.result;\n                  let key: string,\n                    name: string,\n                    author: string,\n                    description: string,\n                    publisher: string;\n                  [name, author, description, publisher] = [\n                    metadata.title,\n                    metadata.creator,\n                    metadata.description,\n                    metadata.publisher,\n                  ];\n                  let format =\n                    publisher === \"mobi\"\n                      ? \"MOBI\"\n                      : publisher === \"azw3\"\n                      ? \"AZW3\"\n                      : publisher === \"txt\"\n                      ? \"TXT\"\n                      : \"EPUB\";\n                  key = new Date().getTime() + \"\";\n                  let book = new BookModel(\n                    key,\n                    name,\n                    author,\n                    description,\n                    md5,\n                    cover,\n                    format,\n                    publisher,\n                    file.size\n                  );\n                  resolve(book);\n                };\n              } else {\n                cover = \"noCover\";\n                let key: string,\n                  name: string,\n                  author: string,\n                  publisher: string,\n                  description: string;\n                [name, author, description, publisher] = [\n                  metadata.title,\n                  metadata.creator,\n                  metadata.description,\n                  metadata.publisher,\n                ];\n                let format =\n                  publisher === \"mobi\"\n                    ? \"MOBI\"\n                    : publisher === \"azw3\"\n                    ? \"AZW3\"\n                    : publisher === \"txt\"\n                    ? \"TXT\"\n                    : \"EPUB\";\n                key = new Date().getTime() + \"\";\n                let book = new BookModel(\n                  key,\n                  name,\n                  author,\n                  description,\n                  md5,\n                  cover,\n                  format,\n                  publisher,\n                  file.size\n                );\n\n                resolve(book);\n              }\n            })\n            .catch((err: any) => {\n              reject(false);\n            });\n        })\n        .catch(() => {\n          reject(false);\n        });\n    };\n  });\n};\n","import BookModel from \"../../model/Book\";\n\ndeclare var window: any;\nvar pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\nexport const addPdf = (\n  data: ArrayBuffer,\n  md5: string,\n  bookName: string,\n  size: number\n) => {\n  return new Promise<BookModel | boolean>((resolve, reject) => {\n    pdfjsLib\n      .getDocument({ data: data })\n      .promise.then((pdfDoc_: any) => {\n        let pdfDoc = pdfDoc_;\n        pdfDoc.getMetadata().then(async (metadata: any) => {\n          let cover: any = \"noCover\";\n          let key: string,\n            name: string,\n            author: string,\n            publisher: string,\n            description: string;\n          [name, author, description, publisher] = [\n            metadata.info.Title || bookName,\n            metadata.info.Author || \"Unknown Authur\",\n            \"pdf\",\n            metadata.info.publisher,\n          ];\n          let format = \"PDF\";\n          key = new Date().getTime() + \"\";\n          let book = new BookModel(\n            key,\n            name,\n            author,\n            description,\n            md5,\n            cover,\n            format,\n            publisher,\n            size\n          );\n          resolve(book);\n        });\n      })\n      .catch((err: any) => {\n        reject(false);\n      });\n  });\n};\n","export const fetchMD5FromPath = (filePath: string) => {\n  return new Promise<string>((resolve, reject) => {\n    var crypto = window.require(\"crypto\");\n    var fs = window.require(\"fs\");\n\n    var md5sum = crypto.createHash(\"md5\");\n    var s = fs.ReadStream(filePath);\n    s.on(\"data\", function (d) {\n      md5sum.update(d);\n    });\n\n    s.on(\"end\", () => {\n      resolve(md5sum.digest(\"hex\"));\n    });\n    s.on(\"error\", () => {\n      reject(\"\");\n    });\n  });\n};\nexport const fetchFileFromPath = (filePath: string) => {\n  return new Promise<File>((resolve, reject) => {\n    fetch(filePath)\n      .then((response) => response.body)\n      .then((body) => {\n        const reader = body!.getReader();\n        return new ReadableStream({\n          start(controller) {\n            return pump();\n            function pump(): any {\n              return reader.read().then(({ done, value }) => {\n                if (done) {\n                  controller.close();\n                  return;\n                }\n                controller.enqueue(value);\n                return pump();\n              });\n            }\n          },\n        });\n      })\n      .then((stream) => new Response(stream))\n      .then((response) => response.blob())\n      .then((blob) => {\n        let fileTemp = new File(\n          [blob],\n          window.navigator.platform.indexOf(\"Win\") > -1\n            ? filePath.split(\"\\\\\").reverse()[0]\n            : filePath.split(\"/\").reverse()[0],\n          {\n            lastModified: new Date().getTime(),\n            type: blob.type,\n          }\n        );\n        resolve(fileTemp);\n      })\n      .catch((err) => {\n        console.error(err);\n        reject();\n      });\n  });\n};\n","//从本地导入书籍\nimport React from \"react\";\nimport \"./importLocal.css\";\nimport BookModel from \"../../model/Book\";\nimport localforage from \"localforage\";\nimport { fetchMD5 } from \"../../utils/fileUtils/md5Util\";\nimport { addEpub } from \"../../utils/fileUtils/epubUtil\";\nimport { Trans } from \"react-i18next\";\nimport Dropzone from \"react-dropzone\";\nimport { Tooltip } from \"react-tippy\";\nimport { ImportLocalProps, ImportLocalState } from \"./interface\";\nimport RecordRecent from \"../../utils/readUtils/recordRecent\";\nimport MobiParser from \"../../utils/fileUtils/mobiParser\";\nimport iconv from \"iconv-lite\";\nimport { isElectron } from \"react-device-detect\";\nimport { withRouter } from \"react-router-dom\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport { generateEpub } from \"../../utils/fileUtils/generateEpub\";\nimport { addPdf } from \"../../utils/fileUtils/pdfUtil\";\nimport {\n  fetchFileFromPath,\n  fetchMD5FromPath,\n} from \"../../utils/fileUtils/fileUtil\";\n\ndeclare var window: any;\n\nclass ImportLocal extends React.Component<ImportLocalProps, ImportLocalState> {\n  constructor(props: ImportLocalProps) {\n    super(props);\n    this.state = {\n      isOpenFile: false,\n      width: document.body.clientWidth,\n    };\n  }\n  componentDidMount() {\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      if (!localStorage.getItem(\"storageLocation\")) {\n        localStorage.setItem(\n          \"storageLocation\",\n          ipcRenderer.sendSync(\"storage-location\", \"ping\")\n        );\n      }\n      var filePath = ipcRenderer.sendSync(\"get-file-data\");\n      if (filePath && filePath !== \".\") {\n        this.handleFilePath(filePath);\n      }\n    }\n    window.addEventListener(\"resize\", () => {\n      this.setState({ width: document.body.clientWidth });\n    });\n  }\n  handleFilePath = async (filePath: string) => {\n    let md5 = await fetchMD5FromPath(filePath);\n    if ([...this.props.books, ...this.props.deletedBooks].length > 0) {\n      let isRepeat = false;\n      let repeatBook: BookModel | null = null;\n      [...this.props.books, ...this.props.deletedBooks].forEach((item) => {\n        if (item.md5 === md5) {\n          isRepeat = true;\n          repeatBook = item;\n        }\n      });\n      if (isRepeat && repeatBook) {\n        this.handleJump(repeatBook);\n        return;\n      }\n    }\n    const fileTemp = await fetchFileFromPath(filePath);\n    this.setState({ isOpenFile: true }, async () => {\n      await this.getMd5WithBrowser(fileTemp);\n    });\n  };\n  handleJump = (book: BookModel) => {\n    RecentBooks.setRecent(book.key);\n    BookUtil.RedirectBook(book);\n  };\n  handleAddBook = (book: BookModel) => {\n    return new Promise<void>((resolve, reject) => {\n      let bookArr = [...this.props.books, ...this.props.deletedBooks];\n      if (bookArr == null) {\n        bookArr = [];\n      }\n      bookArr.push(book);\n      this.props.handleReadingBook(book);\n      RecordRecent.setRecent(book.key);\n      localforage\n        .setItem(\"books\", bookArr)\n        .then(() => {\n          this.props.handleFetchBooks();\n          this.props.handleMessage(\"Add Successfully\");\n          this.props.handleMessageBox(true);\n          setTimeout(() => {\n            this.state.isOpenFile && this.handleJump(book);\n            this.setState({ isOpenFile: false });\n            this.props.history.push(\"/manager/home\");\n          }, 100);\n          resolve();\n        })\n        .catch(() => {\n          reject();\n        });\n    });\n  };\n\n  //获取书籍md5\n  getMd5WithBrowser = async (file: any) => {\n    return new Promise<void>(async (resolve, reject) => {\n      const md5 = await fetchMD5(file);\n      if (!md5) {\n        reject();\n      } else {\n        await this.handleBook(file, md5);\n        resolve();\n      }\n    });\n  };\n\n  handleBook = (file: any, md5: string) => {\n    let extension = file.name.split(\".\").reverse()[0];\n    let bookName = file.name.substr(0, file.name.length - extension.length - 1);\n    let result: BookModel | Boolean;\n    return new Promise<void>((resolve, reject) => {\n      //md5重复不导入\n      let isRepeat = false;\n      if ([...this.props.books, ...this.props.deletedBooks].length > 0) {\n        [...this.props.books, ...this.props.deletedBooks].forEach((item) => {\n          if (item.md5 === md5) {\n            isRepeat = true;\n            this.props.handleMessage(\"Duplicate Book\");\n            this.props.handleMessageBox(true);\n            resolve();\n          }\n        });\n      }\n      //解析图书，获取图书数据\n      if (!isRepeat) {\n        let reader = new FileReader();\n        reader.readAsArrayBuffer(file);\n        reader.onload = async (e) => {\n          if (!e.target) {\n            this.props.handleMessage(\"Import Failed\");\n            this.props.handleMessageBox(true);\n\n            reject();\n            throw new Error();\n          }\n\n          if (extension === \"pdf\") {\n            result = await addPdf(\n              e.target.result as ArrayBuffer,\n              md5,\n              bookName,\n              file.size\n            );\n            if (!result) {\n              this.props.handleMessage(\"Import Failed\");\n              this.props.handleMessageBox(true);\n\n              reject();\n              throw new Error();\n            } else {\n              await this.handleAddBook(result as BookModel);\n              BookUtil.addBook(\n                (result as BookModel).key,\n                e.target!.result as ArrayBuffer\n              );\n              resolve();\n            }\n          } else if (extension === \"mobi\" || extension === \"azw3\") {\n            let reader = new FileReader();\n            reader.onload = async (event) => {\n              const file_content = (event.target as any).result;\n              let mobiFile = new MobiParser(file_content);\n              let content: any = await mobiFile.render(isElectron);\n              if (typeof content === \"object\") {\n                result = BookUtil.generateBook(\n                  bookName,\n                  extension,\n                  md5,\n                  file.size\n                );\n                await this.handleAddBook(result);\n                BookUtil.addBook(result.key, file_content as ArrayBuffer);\n                resolve();\n              } else {\n                let buf = iconv.encode(content, \"UTF-8\");\n                let blobTemp: any = new Blob([buf], { type: \"text/plain\" });\n                let fileTemp = new File([blobTemp], file.name + \".txt\", {\n                  lastModified: new Date().getTime(),\n                  type: blobTemp.type,\n                });\n                await this.getMd5WithBrowser(fileTemp);\n                resolve();\n              }\n            };\n            reader.readAsArrayBuffer(file);\n          } else if (extension === \"txt\") {\n            if (isElectron) {\n              let _result = await generateEpub(file);\n              if (_result) {\n                await this.getMd5WithBrowser(_result);\n                resolve();\n              } else {\n                this.props.handleMessage(\"Import Failed\");\n                this.props.handleMessageBox(true);\n\n                reject();\n              }\n            } else {\n              let reader = new FileReader();\n              reader.readAsArrayBuffer(file);\n              reader.onload = async (event) => {\n                result = BookUtil.generateBook(\n                  bookName,\n                  extension,\n                  md5,\n                  file.size\n                );\n                await this.handleAddBook(result);\n                BookUtil.addBook(result.key, (event.target as any).result);\n                resolve();\n              };\n            }\n          } else if (\n            extension === \"djvu\" ||\n            extension === \"docx\" ||\n            extension === \"md\" ||\n            extension === \"cbz\" ||\n            extension === \"tml\" ||\n            extension === \"html\" ||\n            extension === \"xml\" ||\n            extension === \"xhtml\" ||\n            extension === \"cbr\" ||\n            extension === \"cbt\" ||\n            extension === \"rtf\" ||\n            extension === \"fb2\"\n          ) {\n            let reader = new FileReader();\n            reader.onload = async (event) => {\n              const file_content = (event.target as any).result;\n              result = BookUtil.generateBook(\n                bookName,\n                extension,\n                md5,\n                file.size\n              );\n              await this.handleAddBook(result);\n              BookUtil.addBook(result.key, file_content as ArrayBuffer);\n              resolve();\n            };\n            reader.readAsArrayBuffer(file);\n          } else {\n            result = await addEpub(file, md5);\n            if (!result) {\n              this.props.handleMessage(\"Import Failed\");\n              this.props.handleMessageBox(true);\n\n              reject();\n              throw new Error();\n            } else {\n              await this.handleAddBook(result as BookModel);\n              BookUtil.addBook(\n                (result as BookModel).key,\n                e.target!.result as ArrayBuffer\n              );\n              resolve();\n            }\n          }\n        };\n      }\n    });\n  };\n\n  render() {\n    return (\n      <Dropzone\n        onDrop={async (acceptedFiles) => {\n          this.props.handleDrag(false);\n          for (let item of acceptedFiles) {\n            await this.getMd5WithBrowser(item);\n          }\n        }}\n        accept={[\n          \".epub\",\n          \".pdf\",\n          \".txt\",\n          \".mobi\",\n          \".azw3\",\n          \".djvu\",\n          \".htm\",\n          \".html\",\n          \".xml\",\n          \".xhtml\",\n          \".docx\",\n          \".rtf\",\n          \".md\",\n          \".fb2\",\n          \".cbz\",\n          \".cbt\",\n          \".cbr\",\n        ]}\n        multiple={true}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <div\n            className=\"import-from-local\"\n            {...getRootProps()}\n            style={\n              this.props.isCollapsed && document.body.clientWidth < 950\n                ? { width: \"42px\" }\n                : {}\n            }\n          >\n            <div className=\"animation-mask-local\"></div>\n            {this.props.isCollapsed && this.state.width < 950 ? (\n              <Tooltip\n                title={this.props.t(\"Import from Local\")}\n                position=\"top\"\n                style={{ height: \"20px\" }}\n                trigger=\"mouseenter\"\n              >\n                <span\n                  className=\"icon-folder\"\n                  style={{ fontSize: \"15px\", fontWeight: 500 }}\n                ></span>\n              </Tooltip>\n            ) : (\n              <span>\n                <Trans>Import from Local</Trans>\n              </span>\n            )}\n\n            <input\n              type=\"file\"\n              id=\"import-book-box\"\n              className=\"import-book-box\"\n              name=\"file\"\n              {...getInputProps()}\n            />\n          </div>\n        )}\n      </Dropzone>\n    );\n  }\n}\n\nexport default withRouter(ImportLocal);\n","//从本地导入书籍\nimport \"./importLocal.css\";\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleFetchBooks,\n  handleLoadingDialog,\n} from \"../../store/actions/manager\";\nimport { handleReadingBook } from \"../../store/actions/book\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ImportLocal from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    bookmarks: state.reader.bookmarks,\n    isCollapsed: state.sidebar.isCollapsed,\n    deletedBooks: state.manager.deletedBooks,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n  handleFetchBooks,\n  handleReadingBook,\n  handleLoadingDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ImportLocal as any));\n","//提示更新的文字\nimport React from \"react\";\nimport \"./updateInfo.css\";\nimport { UpdateInfoProps, UpdateInfoState } from \"./interface\";\nimport { version } from \"../../../../package.json\";\nimport { Trans } from \"react-i18next\";\nimport axios from \"axios\";\nimport Lottie from \"react-lottie\";\nimport animationNew from \"../../../assets/lotties/new.json\";\nimport animationSuccess from \"../../../assets/lotties/success.json\";\nimport copy from \"copy-text-to-clipboard\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { isElectron } from \"react-device-detect\";\nconst newOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationNew,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\ndeclare var window: any;\n\nclass UpdateInfo extends React.Component<UpdateInfoProps, UpdateInfoState> {\n  constructor(props: UpdateInfoProps) {\n    super(props);\n    this.state = {\n      updateLog: \"\",\n      isUpdated: false,\n    };\n  }\n  componentDidMount() {\n    !this.props.currentBook.key &&\n      axios\n        .get(`https://koodo.960960.xyz/api/update?name=${navigator.language}`)\n        .then((res) => {\n          console.log(res);\n          const newVersion = res.data.log.version;\n          setTimeout(() => {\n            if (version !== newVersion) {\n              this.setState({ updateLog: res.data.log });\n\n              this.props.handleNewDialog(true);\n            } else if (\n              OtherUtil.getReaderConfig(\"version\") !== newVersion &&\n              OtherUtil.getReaderConfig(\"isFirst\")\n            ) {\n              this.setState({ isUpdated: true });\n              this.props.handleNewDialog(true);\n              OtherUtil.setReaderConfig(\"version\", newVersion);\n            }\n          }, 500);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n  }\n  renderList = (arr: any[]) => {\n    return arr.map((item, index) => {\n      return (\n        <li className=\"update-dialog-list\" key={index}>\n          <span>{index + 1 + \". \"}</span>\n          <span>{item}</span>\n        </li>\n      );\n    });\n  };\n  handleJump = () => {\n    isElectron &&\n      window\n        .require(\"electron\")\n        .shell.openExternal(\n          this.state.isUpdated\n            ? \"https://koodo.960960.xyz/log\"\n            : \"https://koodo.960960.xyz/download\"\n        );\n  };\n  handleClose = () => {\n    this.setState({ updateLog: \"\", isUpdated: false });\n    this.props.handleNewDialog(false);\n  };\n\n  render() {\n    return (\n      <>\n        {(this.state.updateLog || this.state.isUpdated) &&\n          this.props.isShowNew && (\n            <div\n              className=\"new-version\"\n              style={\n                this.state.isUpdated\n                  ? { height: \"240px\", top: \"calc(50vh - 120px)\" }\n                  : {}\n              }\n            >\n              <div className=\"new-version-title\">\n                {this.state.isUpdated ? (\n                  <Trans>Update Complete</Trans>\n                ) : (\n                  <>\n                    <Trans>Update to</Trans>\n                    {\" \" + this.state.updateLog.version}\n                  </>\n                )}\n              </div>\n              <div\n                className=\"setting-close-container\"\n                onClick={() => {\n                  this.handleClose();\n                }}\n              >\n                <span className=\"icon-close setting-close\"></span>\n              </div>\n              {this.state.isUpdated && (\n                <div className=\"update-info-text\">\n                  <Trans>You successfully update to</Trans>\n                  {\" \" + version}\n                </div>\n              )}\n              <div className=\"update-dialog-info\" style={{ height: 420 }}>\n                <div className=\"new-version-animation\">\n                  {this.state.isUpdated ? (\n                    <Lottie\n                      options={successOptions}\n                      height={80}\n                      width={80}\n                      style={{ marginTop: \"10px\", marginBottom: \"10px\" }}\n                    />\n                  ) : (\n                    <Lottie options={newOptions} height={220} width={220} />\n                  )}\n                </div>\n                <div\n                  className=\"new-version-open\"\n                  onClick={() => {\n                    this.handleJump();\n                  }}\n                  style={this.state.isUpdated ? { marginTop: \"10px\" } : {}}\n                >\n                  {this.state.isUpdated ? (\n                    <>\n                      <Trans>Changelog</Trans>\n                    </>\n                  ) : (\n                    <Trans>Open link in browser</Trans>\n                  )}\n                </div>\n                {this.state.updateLog && (\n                  <>\n                    <div\n                      className=\"new-version-copy\"\n                      onClick={() => {\n                        copy(\"https://koodo.960960.xyz/download\");\n                        this.props.handleMessage(\"Copy Successfully\");\n                        this.props.handleMessageBox(true);\n                      }}\n                    >\n                      <Trans>Copy Link</Trans>\n                    </div>\n\n                    <p className=\"update-dialog-new-title\">\n                      <Trans>What's New</Trans>\n                    </p>\n                    <ul className=\"update-dialog-new-container\">\n                      {this.renderList(this.state.updateLog.new)}\n                    </ul>\n                    <p className=\"update-dialog-fix-title\">\n                      <Trans>What's been fixed</Trans>\n                    </p>\n                    <ul className=\"update-dialog-fix-container\">\n                      {this.renderList(this.state.updateLog.fix)}\n                    </ul>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n      </>\n    );\n  }\n}\n\nexport default UpdateInfo;\n","//左下角的图标外链\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleNewDialog,\n} from \"../../../store/actions/manager\";\nimport UpdateInfo from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    books: state.manager.books,\n    isShowNew: state.manager.isShowNew,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n  handleNewDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(UpdateInfo as any));\n","import localforage from \"localforage\";\nimport BookUtil from \"../fileUtils/bookUtil\";\n\nlet JSZip = (window as any).JSZip;\n\nclass RestoreUtil {\n  static restore = (file: any, handleFinish: () => void, isSync = false) => {\n    let configArr = [\n      \"notes\",\n      \"books\",\n      \"bookmarks\",\n      \"readerConfig\",\n      \"noteTags\",\n      \"themeColors\",\n      \"bookSortCode\",\n      \"noteSortCode\",\n      \"readingTime\",\n      \"recentBooks\",\n      \"favoriteBooks\",\n      \"favoriteBooks\",\n      \"shelfList\",\n      \"pdfjs.history\",\n      \"recordLocation\",\n    ];\n    let zip = new JSZip();\n\n    // more files !\n    configArr.forEach((item) => {\n      zip\n        .loadAsync(file)\n        .then((content: any) => {\n          // you now have every files contained in the loaded zip\n          return content.files[\n            content.files[`${item}.json`]\n              ? `${item}.json`\n              : `config/${item}.json`\n          ].async(\"text\"); // a promise of \"Hello World\\n\"\n        })\n        .then((text: any) => {\n          if (text) {\n            if (item === \"notes\" || item === \"books\" || item === \"bookmarks\") {\n              localforage.setItem(item, JSON.parse(text));\n            } else {\n              localStorage.setItem(item, text);\n            }\n          }\n        })\n        .then(() => {\n          if (item === \"books\" && !isSync) {\n            localforage.getItem(\"books\").then((value: any) => {\n              let zip = new JSZip();\n              value &&\n                value.length > 0 &&\n                value.forEach((item: any) => {\n                  zip\n                    .loadAsync(file)\n                    .then((content: any) => {\n                      if (content.files[`book/${item.key}`]) {\n                        return content.files[`book/${item.key}`].async(\n                          \"arraybuffer\"\n                        );\n                      }\n                      //兼容之前的版本\n                      if (\n                        content.files[`book/${item.name}.pdf`] &&\n                        item.description === \"pdf\"\n                      ) {\n                        return content.files[`book/${item.name}.pdf`].async(\n                          \"arraybuffer\"\n                        ); // a promise of \"Hello World\\n\"\n                      } else if (content.files[`book/${item.name}.epub`]) {\n                        return content.files[`book/${item.name}.epub`].async(\n                          \"arraybuffer\"\n                        ); // a promise of \"Hello World\\n\"\n                      }\n                    })\n                    .then(async (book: any) => {\n                      await BookUtil.addBook(item.key, book);\n                    })\n                    .catch((err: any) => {\n                      console.log(err, \"Error occurs\");\n                    });\n                });\n            });\n          }\n        })\n        .catch((err: any) => {\n          console.log(err, \"Error happen\");\n        });\n    });\n    setTimeout(() => {\n      handleFinish();\n    }, 1000);\n  };\n}\n\nexport default RestoreUtil;\n","import RestoreUtil from \"./restoreUtil\";\nimport OtherUtil from \"../otherUtil\";\n\nvar Dropbox = (window as any).Dropbox;\n\nclass DropboxUtil {\n  static UploadFile(\n    blob: any,\n    handleFinish: () => void,\n    showMessage: (message: string) => void\n  ) {\n    var ACCESS_TOKEN = OtherUtil.getReaderConfig(\"dropbox_token\") || \"\";\n    let year = new Date().getFullYear(),\n      month = new Date().getMonth() + 1,\n      day = new Date().getDate();\n    var dbx = new Dropbox.Dropbox({ accessToken: ACCESS_TOKEN });\n    const file = new File([blob], \"data.zip\");\n\n    dbx\n      .filesUpload({\n        path: \"/data.zip\",\n        contents: file,\n      })\n      .then(function (response: any) {\n        console.log(response, \"上传成功\");\n        dbx\n          .filesCopyV2({\n            from_path: \"/data.zip\",\n            to_path:\n              \"/\" +\n              `${year}-${month <= 9 ? \"0\" + month : month}-${\n                day <= 9 ? \"0\" + day : day\n              }.zip`,\n          })\n          .then(function (response: any) {\n            console.log(response, \"上传成功\");\n            handleFinish();\n          })\n          .catch(function (error: any) {\n            console.error(error, \"上传失败\");\n            showMessage(\"Upload failed, check your connection\");\n          });\n      })\n      .catch(function (error: any) {\n        console.error(error, \"上传失败\");\n        showMessage(\"Upload failed, check your connection\");\n      });\n    return false;\n  }\n  static DownloadFile(\n    handleFinish: () => void,\n    showMessage: (message: string) => void,\n    isSync: boolean = false\n  ) {\n    var ACCESS_TOKEN = OtherUtil.getReaderConfig(\"dropbox_token\") || \"\";\n    var dbx = new Dropbox.Dropbox({ accessToken: ACCESS_TOKEN });\n    dbx\n      .filesDownload({\n        path: isSync ? \"/config.zip\" : \"/data.zip\",\n      })\n      .then(function (data: any) {\n        let file = data.result.fileBlob;\n        file.lastModifiedDate = new Date();\n        file.name = \"data.zip\";\n        RestoreUtil.restore(file, handleFinish, isSync);\n      })\n      .catch(function (error: any) {\n        showMessage(\"Download failed,network problem or no backup\");\n\n        console.error(error);\n      });\n\n    return false;\n  }\n}\n\nexport default DropboxUtil;\n","import RestoreUtil from \"./restoreUtil\";\nimport OtherUtil from \"../otherUtil\";\n\nclass WebdavUtil {\n  static UploadFile = async (\n    file: any,\n    handleFinish: () => void,\n    showMessage: (message: string) => void\n  ) => {\n    const { createClient } = window.require(\"webdav\");\n    let { url, username, password } = JSON.parse(\n      OtherUtil.getReaderConfig(\"webdav_token\") || \"\"\n    );\n    const client = createClient(url, {\n      username,\n      password,\n    });\n    var wfs = window.require(\"webdav-fs\")(url, {\n      username: username,\n      password: password,\n    });\n    if ((await client.exists(\"/KoodoReader\")) === false) {\n      await client.createDirectory(\"/KoodoReader\");\n    }\n    wfs.writeFile(\"/KoodoReader/data.zip\", file, \"binary\", function (err) {\n      console.log(err);\n      if (err) showMessage(\"Upload failed, check your connection\");\n      let year = new Date().getFullYear(),\n        month = new Date().getMonth() + 1,\n        day = new Date().getDate();\n      client\n        .copyFile(\n          \"/KoodoReader/data.zip\",\n          \"/KoodoReader/\" +\n            `${year}-${month <= 9 ? \"0\" + month : month}-${\n              day <= 9 ? \"0\" + day : day\n            }.zip`\n        )\n        .then(() => {\n          handleFinish();\n        })\n        .catch(() => {\n          showMessage(\"Upload failed, check your connection\");\n        });\n    });\n\n    return false;\n  };\n  static DownloadFile = async (\n    handleFinish: () => void,\n    showMessage: (message: string) => void\n  ) => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const { createClient } = window.require(\"webdav\");\n    const { remote, app } = window.require(\"electron\");\n    const configDir = (app || remote.app).getPath(\"userData\");\n    const dirPath = path.join(configDir, \"uploads\");\n    const request = window.require(\"request\");\n    let { url, username, password } = JSON.parse(\n      OtherUtil.getReaderConfig(\"webdav_token\") || \"\"\n    );\n    const client = createClient(url, {\n      username,\n      password,\n    });\n    if ((await client.exists(\"/KoodoReader/data.zip\")) === false) {\n      showMessage(\"Download failed,network problem or no backup\");\n    }\n    const downloadLink: string = client.getFileDownloadLink(\n      \"/KoodoReader/data.zip\"\n    );\n    let stream = fs.createWriteStream(path.join(dirPath, `data.zip`));\n    request(downloadLink)\n      .pipe(stream)\n      .on(\"close\", function (err) {\n        if (err) {\n          console.log(err);\n        } else {\n          var data = fs.readFileSync(path.join(dirPath, `data.zip`));\n          let blobTemp: any = new Blob([data], { type: \"application/zip\" });\n          let fileTemp = new File([blobTemp], \"data.zip\", {\n            lastModified: new Date().getTime(),\n            type: blobTemp.type,\n          });\n          RestoreUtil.restore(fileTemp, handleFinish);\n          try {\n            const fs_extra = window.require(\"fs-extra\");\n            fs_extra.remove(path.join(dirPath, `data.zip`), (error: any) => {\n              if (error) throw error;\n            });\n          } catch (e) {\n            console.log(\"error removing \", path.join(dirPath, `data.zip`));\n          }\n        }\n      });\n\n    return false;\n  };\n}\n\nexport default WebdavUtil;\n","import FileSaver from \"file-saver\";\nimport BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport DropboxUtil from \"./dropbox\";\nimport WebdavUtil from \"./webdav\";\nimport localforage from \"localforage\";\nimport SyncUtil, { moveData } from \"./common\";\nimport BookUtil from \"../fileUtils/bookUtil\";\nimport OtherUtil from \"../otherUtil\";\n\nlet JSZip = (window as any).JSZip;\n\nclass BackupUtil {\n  static backup = async (\n    bookArr: BookModel[],\n    notes: NoteModel[],\n    bookmarks: BookmarkModel[],\n    handleFinish: () => void,\n    driveIndex: number,\n    showMessage: (message: string) => void\n  ) => {\n    let zip = new JSZip();\n    let books = bookArr;\n    //0表示备份到本地，1表示备份到dropbox,2表示备份到onedrive,3表示备份到webdav，4表示把indexeddb中的数据转移到uploads文件夹中，5表示同步数据到本地\n    if (driveIndex !== 5) {\n      let bookZip = zip.folder(\"book\");\n      let data: any = [];\n      books &&\n        books.forEach((item) => {\n          data.push(\n            driveIndex === 4\n              ? localforage.getItem(item.key)\n              : BookUtil.fetchBook(item.key)\n          );\n        });\n      let results = await Promise.all(data);\n      for (let i = 0; i < books.length; i++) {\n        bookZip.file(`${books[i].key}`, results[i]);\n      }\n    } else {\n      let timestamp = new Date().getTime().toString();\n      OtherUtil.setReaderConfig(\"lastSyncTime\", timestamp);\n\n      localStorage.setItem(\"lastSyncTime\", timestamp);\n    }\n    let configZip = zip.folder(\"config\");\n    configZip\n      .file(\"notes.json\", JSON.stringify(notes))\n      .file(\"books.json\", JSON.stringify(books))\n      .file(\"bookmarks.json\", JSON.stringify(bookmarks))\n      .file(\"readerConfig.json\", localStorage.getItem(\"readerConfig\") || \"\")\n      .file(\"themeColors.json\", localStorage.getItem(\"themeColors\") || \"\")\n      .file(\n        \"bookSortCode.json\",\n        localStorage.getItem(\"bookSortCode\") ||\n          JSON.stringify({ sort: 0, order: 2 })\n      )\n      .file(\n        \"noteSortCode.json\",\n        localStorage.getItem(\"noteSortCode\") ||\n          JSON.stringify({ sort: 2, order: 2 })\n      )\n      .file(\"readingTime.json\", localStorage.getItem(\"readingTime\") || \"\")\n      .file(\"recentBooks.json\", localStorage.getItem(\"recentBooks\") || [])\n      .file(\"favoriteBooks.json\", localStorage.getItem(\"favoriteBooks\") || [])\n      .file(\"shelfList.json\", localStorage.getItem(\"shelfList\") || [])\n      .file(\"noteTags.json\", localStorage.getItem(\"noteTags\") || [])\n      .file(\"pdfjs.history.json\", localStorage.getItem(\"pdfjs.history\") || [])\n      .file(\n        \"recordLocation.json\",\n        localStorage.getItem(\"recordLocation\") || \"\"\n      );\n    let year = new Date().getFullYear(),\n      month = new Date().getMonth() + 1,\n      day = new Date().getDate();\n\n    zip\n      .generateAsync({ type: \"blob\" })\n      .then((blob: any) => {\n        switch (driveIndex) {\n          case 0:\n            handleFinish();\n            FileSaver.saveAs(\n              blob,\n              `${year}-${month <= 9 ? \"0\" + month : month}-${\n                day <= 9 ? \"0\" + day : day\n              }.zip`\n            );\n            break;\n          case 1:\n            DropboxUtil.UploadFile(blob, handleFinish, showMessage);\n            break;\n          case 2:\n            break;\n          case 3:\n            WebdavUtil.UploadFile(\n              new File([blob], \"data.zip\", {\n                lastModified: new Date().getTime(),\n                type: blob.type,\n              }),\n              handleFinish,\n              showMessage\n            );\n            break;\n          case 4:\n            moveData(blob, 4, books);\n\n            break;\n          case 5:\n            handleFinish();\n            SyncUtil.syncData(blob, 5, [], handleFinish);\n\n            break;\n          default:\n            break;\n        }\n      })\n      .catch((err: any) => {\n        console.log(err);\n      });\n  };\n}\n\nexport default BackupUtil;\n","//header 页面\nimport React from \"react\";\nimport \"./header.css\";\nimport SearchBox from \"../../components/searchBox\";\nimport ImportLocal from \"../../components/importLocal\";\nimport { Trans } from \"react-i18next\";\nimport { HeaderProps, HeaderState } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport UpdateInfo from \"../../components/dialogs/updateInfo\";\nimport RestoreUtil from \"../../utils/syncUtils/restoreUtil\";\nimport BackupUtil from \"../../utils/syncUtils/backupUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { isElectron } from \"react-device-detect\";\nclass Header extends React.Component<HeaderProps, HeaderState> {\n  constructor(props: HeaderProps) {\n    super(props);\n\n    this.state = {\n      isOnlyLocal: false,\n      language: OtherUtil.getReaderConfig(\"lang\"),\n      isNewVersion: false,\n      width: document.body.clientWidth,\n      isdataChange: false,\n    };\n  }\n  componentDidMount() {\n    if (isElectron) {\n      const fs = window.require(\"fs\");\n      const path = window.require(\"path\");\n      const request = window.require(\"request\");\n      const { remote, app } = window.require(\"electron\");\n      const configDir = (app || remote.app).getPath(\"userData\");\n      const dirPath = path.join(configDir, \"uploads\");\n      if (!fs.existsSync(dirPath)) {\n        fs.mkdirSync(dirPath);\n        fs.mkdirSync(path.join(dirPath, \"data\"));\n        fs.mkdirSync(path.join(dirPath, \"data\", \"book\"));\n        console.log(\"文件夹创建成功\");\n      } else {\n        console.log(\"文件夹已存在\");\n      }\n\n      if (\n        OtherUtil.getReaderConfig(\"storageLocation\") &&\n        !localStorage.getItem(\"storageLocation\")\n      ) {\n        localStorage.setItem(\n          \"storageLocation\",\n          OtherUtil.getReaderConfig(\"storageLocation\")\n        );\n      }\n      if (!fs.existsSync(path.join(dirPath, `cover.png`))) {\n        let stream = fs.createWriteStream(path.join(dirPath, `cover.png`));\n        request(`https://koodo.960960.xyz/images/splash.png`)\n          .pipe(stream)\n          .on(\"close\", function (err) {\n            if (err) {\n              console.log(err);\n            } else {\n              console.log(\"文件下载完毕\");\n            }\n          });\n      }\n      //Check for data update\n      let storageLocation = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      let sourcePath = path.join(\n        storageLocation,\n        \"config\",\n        \"readerConfig.json\"\n      );\n      //Detect data modification\n      fs.readFile(sourcePath, \"utf8\", (err, data) => {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        const readerConfig = JSON.parse(data);\n        if (\n          localStorage.getItem(\"lastSyncTime\") &&\n          parseInt(readerConfig.lastSyncTime) >\n            parseInt(localStorage.getItem(\"lastSyncTime\")!)\n        ) {\n          this.setState({ isdataChange: true });\n        }\n      });\n    }\n\n    window.addEventListener(\"resize\", () => {\n      this.setState({ width: document.body.clientWidth });\n    });\n  }\n\n  syncFromLocation = async () => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const { zip } = window.require(\"zip-a-folder\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\");\n    let outPath = path.join(storageLocation, \"config.zip\");\n    await zip(sourcePath, outPath);\n\n    var data = fs.readFileSync(outPath);\n\n    let blobTemp = new Blob([data], { type: \"application/epub+zip\" });\n    let fileTemp = new File([blobTemp], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blobTemp.type,\n    });\n    RestoreUtil.restore(\n      fileTemp,\n      () => {\n        this.setState({ isdataChange: false });\n        //Check for data update\n        let storageLocation = localStorage.getItem(\"storageLocation\")\n          ? localStorage.getItem(\"storageLocation\")\n          : window\n              .require(\"electron\")\n              .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n        let sourcePath = path.join(\n          storageLocation,\n          \"config\",\n          \"readerConfig.json\"\n        );\n\n        fs.readFile(sourcePath, \"utf8\", (err, data) => {\n          if (err) {\n            console.error(err);\n            return;\n          }\n          const readerConfig = JSON.parse(data);\n          if (\n            localStorage.getItem(\"lastSyncTime\") &&\n            readerConfig.lastSyncTime\n          ) {\n            localStorage.setItem(\"lastSyncTime\", readerConfig.lastSyncTime);\n          }\n        });\n      },\n      true\n    );\n  };\n  syncToLocation = () => {\n    if (OtherUtil.getReaderConfig(\"isFirst\") !== \"no\") {\n      this.props.handleTipDialog(true);\n      this.props.handleTip(\n        \"You need to manually change the storage location to the same sync folder on different computers. When you click the sync button, Koodo Reader will automatically upload or download the data from this folder according the timestamp.\"\n      );\n      OtherUtil.setReaderConfig(\"isFirst\", \"no\");\n      return;\n    }\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\", \"readerConfig.json\");\n    fs.readFile(sourcePath, \"utf8\", (err, data) => {\n      if (err) {\n        BackupUtil.backup(\n          this.props.books,\n          this.props.notes,\n          this.props.bookmarks,\n          () => {\n            this.props.handleMessage(\"Sync Successfully\");\n            this.props.handleMessageBox(true);\n          },\n          5,\n          () => {}\n        );\n        console.log(err);\n        return;\n      }\n      const readerConfig = JSON.parse(data);\n\n      if (\n        readerConfig &&\n        localStorage.getItem(\"lastSyncTime\") &&\n        parseInt(readerConfig.lastSyncTime) >\n          parseInt(localStorage.getItem(\"lastSyncTime\")!)\n      ) {\n        this.syncFromLocation();\n      } else {\n        //否则就把Koodo中数据同步到同步文件夹\n        BackupUtil.backup(\n          this.props.books,\n          this.props.notes,\n          this.props.bookmarks,\n          () => {\n            this.props.handleMessage(\"Sync Successfully\");\n            this.props.handleMessageBox(true);\n          },\n          5,\n          () => {}\n        );\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"header\">\n        <div className=\"header-search-container\">\n          <SearchBox />\n        </div>\n\n        <>\n          <div\n            className=\"setting-icon-container\"\n            onClick={() => {\n              this.props.handleSortDisplay(!this.props.isSortDisplay);\n            }}\n            onMouseLeave={() => {\n              this.props.handleSortDisplay(false);\n            }}\n            style={{ left: \"490px\", top: \"18px\" }}\n          >\n            <Tooltip\n              title={this.props.t(\"Sort\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n            >\n              <span className=\"icon-sort-desc header-sort-icon\"></span>\n            </Tooltip>\n          </div>\n          <div\n            className=\"setting-icon-container\"\n            onClick={() => {\n              this.props.handleAbout(!this.props.isAboutOpen);\n            }}\n            onMouseLeave={() => {\n              this.props.handleAbout(false);\n            }}\n          >\n            <Tooltip\n              title={this.props.t(\"Setting\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n            >\n              <span className=\"icon-setting setting-icon\"></span>\n            </Tooltip>\n          </div>\n          {isElectron && (\n            <div\n              className=\"setting-icon-container\"\n              onClick={() => {\n                // this.syncFromLocation();\n                this.syncToLocation();\n              }}\n              style={{ left: \"635px\" }}\n            >\n              <Tooltip\n                title={this.props.t(\n                  this.state.isdataChange\n                    ? \"Data change detected, whether to update?\"\n                    : \"Sync\"\n                )}\n                position=\"top\"\n                trigger=\"mouseenter\"\n              >\n                <span\n                  className=\"icon-sync setting-icon\"\n                  style={\n                    this.state.isdataChange\n                      ? { color: \"rgb(35, 170, 242)\" }\n                      : {}\n                  }\n                ></span>\n              </Tooltip>\n            </div>\n          )}\n        </>\n\n        <div\n          className=\"import-from-cloud\"\n          onClick={() => {\n            this.props.handleBackupDialog(true);\n          }}\n          style={\n            this.props.isCollapsed && document.body.clientWidth < 950\n              ? { width: \"42px\" }\n              : {}\n          }\n        >\n          <div className=\"animation-mask\"></div>\n          {this.props.isCollapsed && this.state.width < 950 ? (\n            <Tooltip\n              title={this.props.t(\"Backup and Restore\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n            >\n              <span\n                className=\"icon-share\"\n                style={{ fontSize: \"15px\", fontWeight: 600 }}\n              ></span>\n            </Tooltip>\n          ) : (\n            <Trans>Backup and Restore</Trans>\n          )}\n        </div>\n        <ImportLocal\n          {...{\n            handleDrag: this.props.handleDrag,\n          }}\n        />\n        {isElectron &&\n          OtherUtil.getReaderConfig(\"isDisableUpdate\") !== \"yes\" && (\n            <UpdateInfo />\n          )}\n      </div>\n    );\n  }\n}\n\nexport default Header;\n","//header 页面\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleSortDisplay,\n  handleMessageBox,\n  handleMessage,\n  handleSetting,\n  handleAbout,\n  handleTipDialog,\n  handleTip,\n} from \"../../store/actions/manager\";\nimport { handleBackupDialog } from \"../../store/actions/backupPage\";\nimport { stateType } from \"../../store\";\nimport Header from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isSearch: state.manager.isSearch,\n    isAboutOpen: state.manager.isAboutOpen,\n    bookmarks: state.reader.bookmarks,\n    books: state.manager.books,\n    notes: state.reader.notes,\n    isCollapsed: state.sidebar.isCollapsed,\n\n    isSortDisplay: state.manager.isSortDisplay,\n  };\n};\nconst actionCreator = {\n  handleSortDisplay,\n  handleMessageBox,\n  handleMessage,\n  handleBackupDialog,\n  handleSetting,\n  handleAbout,\n  handleTipDialog,\n  handleTip,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Header as any));\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nclass DeleteUtil {\n  static deleteBook(books: BookModel[], bookKey: string) {\n    books = books.filter((item) => item.key !== bookKey);\n    return books;\n  }\n  static deleteBookmarks(bookmarks: BookmarkModel[], bookKey: string) {\n    bookmarks = bookmarks.filter((item) => item.bookKey !== bookKey);\n    return bookmarks;\n  }\n  static deleteNotes(notes: NoteModel[], bookKey: string) {\n    notes = notes.filter((item) => item.bookKey !== bookKey);\n    return notes;\n  }\n}\n\nexport default DeleteUtil;\n","// 记录书本打开记录\nconst defaultShelf = {\n  New: null,\n  Study: [],\n  Work: [],\n  Entertainment: [],\n};\nclass ShelfUtil {\n  static setShelf(shelfTitle: string, bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    if (obj[shelfTitle] === undefined) {\n      obj[shelfTitle] = [];\n    }\n    if (obj[shelfTitle].indexOf(bookKey) === -1) {\n      obj[shelfTitle].unshift(bookKey);\n    }\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n\n  static getShelf() {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    return obj;\n  }\n  static clearShelf(shelfIndex: number, bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfTitle = Object.keys(obj);\n    let currentShelfTitle = shelfTitle[shelfIndex];\n    let index = obj[currentShelfTitle].indexOf(bookKey);\n    obj[currentShelfTitle].splice(index, 1);\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static deletefromAllShelf(bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfTitle = Object.keys(obj);\n    shelfTitle.splice(0, 1);\n    shelfTitle.forEach((item) => {\n      let index = obj[item].indexOf(bookKey);\n      if (index > -1) {\n        obj[item].splice(index, 1);\n      }\n    });\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static removeShelf(shelfTitle: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    delete obj[shelfTitle];\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static getBookPosition(bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfList: string[] = [];\n    for (let item in obj) {\n      if (obj[item] && obj[item].indexOf(bookKey) > -1) {\n        shelfList.push(item);\n      }\n    }\n    return shelfList;\n  }\n}\n\nexport default ShelfUtil;\n","// 记录书本打开记录\nimport BookModel from \"../../model/Book\";\nclass AddFavorite {\n  static setFavorite(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static setAllFavorite(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static getAllFavorite() {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default AddFavorite;\n","import React from \"react\";\nimport \"./deleteDialog.css\";\nimport DeleteUtil from \"../../../utils/readUtils/deleteUtil\";\nimport localforage from \"localforage\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport AddFavorite from \"../../../utils/readUtils/addFavorite\";\nimport { Trans } from \"react-i18next\";\nimport { DeleteDialogProps } from \"./interface\";\nimport { withRouter } from \"react-router-dom\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport BookUtil from \"../../../utils/fileUtils/bookUtil\";\n\nclass DeleteDialog extends React.Component<DeleteDialogProps> {\n  handleCancel = () => {\n    this.props.handleDeleteDialog(false);\n  };\n  handleDeleteOther = (key: string) => {\n    return new Promise<void>(async (resolve, reject) => {\n      if (this.props.bookmarks[0]) {\n        let bookmarkArr = DeleteUtil.deleteBookmarks(this.props.bookmarks, key);\n        if (bookmarkArr.length === 0) {\n          await localforage.removeItem(\"bookmarks\");\n        } else {\n          await localforage.setItem(\"bookmarks\", bookmarkArr);\n        }\n      }\n      if (this.props.notes) {\n        let noteArr = DeleteUtil.deleteNotes(this.props.notes, key);\n        if (noteArr.length === 0) {\n          await localforage.removeItem(\"notes\");\n          resolve();\n        } else {\n          await localforage.setItem(\"notes\", noteArr);\n          resolve();\n        }\n      }\n    });\n  };\n  handleComfirm = async () => {\n    //从列表删除和从图书库删除判断\n    if (this.props.mode === \"shelf\") {\n      ShelfUtil.clearShelf(this.props.shelfIndex, this.props.currentBook.key);\n    } else if (this.props.mode === \"trash\") {\n      let keyArr = AddTrash.getAllTrash();\n      for (let item of keyArr) {\n        await this.deleteBook(item);\n      }\n\n      if (this.props.books.length === 1) {\n        this.props.history.push(\"/manager/empty\");\n      }\n      this.props.handleFetchBooks(false);\n      this.props.handleFetchBooks(true);\n      this.props.handleFetchBookmarks();\n      this.props.handleFetchNotes();\n    } else {\n      AddTrash.setTrash(this.props.currentBook.key);\n      //从喜爱的图书中删除\n      AddFavorite.clear(this.props.currentBook.key);\n      this.props.handleFetchBooks(false);\n    }\n\n    this.props.handleDeleteDialog(false);\n    this.props.handleMessage(\"Delete Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  deleteBook = (key: string) => {\n    return new Promise<void>((resolve, reject) => {\n      this.props.books &&\n        localforage\n          .setItem(\"books\", DeleteUtil.deleteBook(this.props.books, key))\n          .then(async () => {\n            await BookUtil.deleteBook(key);\n            //从喜爱的图书中删除\n            AddFavorite.clear(key);\n            //从回收的图书中删除\n            AddTrash.clear(key);\n            //从书架删除\n            ShelfUtil.deletefromAllShelf(key);\n            //从阅读记录删除\n            RecordRecent.clear(key);\n            //删除阅读历史\n            RecordLocation.clear(key);\n            //删除书签，笔记，书摘，高亮\n            await this.handleDeleteOther(key);\n            resolve();\n          })\n          .catch(() => {\n            reject();\n          });\n    });\n  };\n  render() {\n    return (\n      <div className=\"delete-dialog-container\">\n        {this.props.mode === \"shelf\" ? (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete from Shelf</Trans>\n          </div>\n        ) : this.props.mode === \"trash\" ? (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete All Books</Trans>\n          </div>\n        ) : (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete This Book</Trans>\n          </div>\n        )}\n        {this.props.mode === \"trash\" ? null : (\n          <div className=\"delete-dialog-book\">\n            <div className=\"delete-dialog-book-title\">\n              {this.props.currentBook.name}\n            </div>\n          </div>\n        )}\n\n        {this.props.mode === \"shelf\" ? (\n          <div className=\"delete-dialog-other-option\">\n            <Trans>This action won't delete the original book</Trans>\n          </div>\n        ) : this.props.mode === \"trash\" ? (\n          <div className=\"delete-dialog-other-option\" style={{ top: \"80px\" }}>\n            <Trans>\n              This action will remove all the books in recycle bin,together with\n              their notes, bookmarks and digests\n            </Trans>\n          </div>\n        ) : (\n          <div className=\"delete-dialog-other-option\">\n            <Trans>\n              This action will move this book and its the notes, bookmarks and\n              digests of this book to the recycle bin\n            </Trans>\n          </div>\n        )}\n        <div\n          className=\"delete-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"delete-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Delete</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(DeleteDialog);\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchBooks,\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport {\n  handleDeleteDialog,\n  handleActionDialog,\n} from \"../../../store/actions/book\";\nimport {\n  handleFetchBookmarks,\n  handleFetchNotes,\n} from \"../../../store/actions/reader\";\nimport { stateType } from \"../../../store\";\nimport DeleteDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    mode: state.sidebar.mode,\n    shelfIndex: state.sidebar.shelfIndex,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleDeleteDialog,\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleMessageBox,\n  handleMessage,\n  handleActionDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(DeleteDialog);\n","//编辑图书对话框\nimport React from \"react\";\nimport \"./editDialog.css\";\nimport localforage from \"localforage\";\nimport { Trans } from \"react-i18next\";\nimport { EditDialogProps, EditDialogState } from \"./interface\";\n\nclass EditDialog extends React.Component<EditDialogProps, EditDialogState> {\n  constructor(props: EditDialogProps) {\n    super(props);\n    this.state = { isCheck: false };\n  }\n  componentDidMount() {\n    const nameBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-name-box\"\n    ) as HTMLInputElement;\n    const authorBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-author-box\"\n    ) as HTMLInputElement;\n    nameBox.value = this.props.currentBook.name;\n    authorBox.value = this.props.currentBook.author;\n  }\n\n  handleCancel = () => {\n    this.props.handleEditDialog(false);\n  };\n  handleComfirm = () => {\n    const nameBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-name-box\"\n    ) as HTMLInputElement;\n    let name = nameBox.value;\n    const authorBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-author-box\"\n    ) as HTMLInputElement;\n    let author = authorBox.value;\n    let { books } = this.props;\n    books.forEach((item) => {\n      if (item.key === this.props.currentBook.key) {\n        item.name = name;\n        item.author = author;\n        return false;\n      }\n    });\n    localforage.setItem(\"books\", books).then(() => {\n      this.props.handleEditDialog(false);\n      this.props.handleFetchBooks();\n    });\n    this.props.handleMessage(\"Edit Successfully\");\n    this.props.handleMessageBox(true);\n    this.props.handleActionDialog(false);\n  };\n  render() {\n    return (\n      <div className=\"edit-dialog-container\">\n        <div className=\"edit-dialog-title\">\n          <Trans>Edit Book</Trans>\n        </div>\n        <div className=\"edit-dialog-book-name-container\">\n          <div className=\"edit-dialog-book-name-text\">\n            <Trans>Book Name</Trans>\n          </div>\n          <input className=\"edit-dialog-book-name-box\" />\n        </div>\n        <div className=\"edit-dialog-book-author-container\">\n          <div className=\"edit-dialog-book-author-text\">\n            <Trans>Author</Trans>\n          </div>\n          <input className=\"edit-dialog-book-author-box\" />\n        </div>\n        <div\n          className=\"edit-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"edit-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Confirm</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditDialog;\n","//编辑图书对话框\nimport { connect } from \"react-redux\";\nimport \"./editDialog.css\";\nimport {\n  handleFetchBooks,\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport {\n  handleEditDialog,\n  handleActionDialog,\n} from \"../../../store/actions/book\";\nimport { stateType } from \"../../../store\";\nimport EditDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleEditDialog,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(mapStateToProps, actionCreator)(EditDialog);\n","//添加图书到书架的对话框\nimport React, { Component } from \"react\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport { Trans } from \"react-i18next\";\nimport { AddDialogProps, AddDialogState } from \"./interface\";\nimport \"./addDialog.css\";\n\nclass AddDialog extends Component<AddDialogProps, AddDialogState> {\n  constructor(props: AddDialogProps) {\n    super(props);\n    this.state = { isNew: true, shelfTitle: \"\" };\n  }\n\n  handleCancel = () => {\n    this.props.handleAddDialog(false);\n  };\n  handleComfirm = () => {\n    const inputElement: HTMLInputElement = document.querySelector(\n      \".add-dialog-new-shelf-box\"\n    ) as HTMLInputElement;\n    let shelfTitle: string = this.state.shelfTitle;\n    let shelfList = ShelfUtil.getShelf();\n    let shelfTitles = Object.keys(ShelfUtil.getShelf());\n    let shelfIndex = this.state.isNew\n      ? shelfTitles.length\n      : shelfTitles.indexOf(inputElement.value);\n    if (this.state.isNew) {\n      shelfTitle = inputElement.value;\n      if (shelfList.hasOwnProperty(shelfTitle)) {\n        this.props.handleMessage(\"Duplicate Shelf\");\n        this.props.handleMessageBox(true);\n        return;\n      }\n    }\n    //未填书架名提醒\n    if (!shelfTitle) {\n      this.props.handleMessage(\"Empty Shelf Title\");\n      this.props.handleMessageBox(true);\n      return;\n    }\n    //判断书架中是否已有该图书\n    if (\n      shelfList[`${shelfTitle}`] &&\n      shelfList[`${shelfTitle}`].indexOf(this.props.currentBook.key) > -1\n    ) {\n      this.props.handleMessage(\"Duplicate Book\");\n      this.props.handleMessageBox(true);\n      return;\n    }\n\n    ShelfUtil.setShelf(shelfTitle, this.props.currentBook.key);\n    this.props.handleAddDialog(false);\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n    this.props.handleActionDialog(false);\n    this.props.handleMode(\"shelf\");\n    this.props.handleShelfIndex(shelfIndex);\n  };\n  //如果是添加到已存在的书架就diable新建图书的input框\n  handleChange = (shelfTitle: string) => {\n    if (shelfTitle === \"New\") {\n      this.setState({ isNew: true });\n    } else {\n      this.setState({ shelfTitle });\n      this.setState({ isNew: false });\n    }\n  };\n  render() {\n    const renderShelfList = () => {\n      let shelfList = ShelfUtil.getShelf();\n      let shelfTitle = Object.keys(shelfList);\n      return shelfTitle.map((item) => {\n        return (\n          <option\n            value={item}\n            key={item}\n            className=\"add-dialog-shelf-list-option\"\n          >\n            {this.props.t(item)}\n          </option>\n        );\n      });\n    };\n    return (\n      <div className=\"add-dialog-container\">\n        <div className=\"add-dialog-title\">\n          <Trans>Add to Shelf</Trans>\n        </div>\n        <div className=\"add-dialog-shelf-list-container\">\n          <div className=\"add-dialog-shelf-list-text\">\n            <Trans>Select</Trans>\n          </div>\n          <select\n            className=\"add-dialog-shelf-list-box\"\n            onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\n              this.handleChange(event.target.value);\n            }}\n          >\n            {renderShelfList()}\n          </select>\n        </div>\n        <div className=\"add-dialog-new-shelf-container\">\n          <div className=\"add-dialog-new-shelf-text\">\n            <Trans>New Shelf</Trans>\n          </div>\n          <input\n            className=\"add-dialog-new-shelf-box\"\n            disabled={!this.state.isNew}\n          />\n        </div>\n        <div\n          className=\"add-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"add-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Confirm</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddDialog;\n","//添加图书到书架的对话框\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport {\n  handleAddDialog,\n  handleActionDialog,\n} from \"../../../store/actions/book\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport AddDialog from \"./component\";\nimport { handleMode, handleShelfIndex } from \"../../../store/actions/sidebar\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleAddDialog,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n  handleMode,\n  handleShelfIndex,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(AddDialog as any));\n","//排序弹窗\nimport React from \"react\";\nimport \"./sortDialog.css\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport { Trans } from \"react-i18next\";\nimport { SortDialogProps, SortDialogState } from \"./interface\";\n\nclass SortDialog extends React.Component<SortDialogProps, SortDialogState> {\n  constructor(props: SortDialogProps) {\n    super(props);\n    this.state = {\n      isNote: this.props.mode === \"note\" || this.props.mode === \"digest\",\n    };\n  }\n\n  handleSort = (code: number) => {\n    if (this.state.isNote) {\n      let noteSortCode = this.props.noteSortCode;\n      noteSortCode.sort = code;\n      this.props.handleNoteSortCode(noteSortCode);\n      this.props.handleNoteSort(true);\n      SortUtil.setNoteSortCode(code, this.props.noteSortCode.order);\n    } else {\n      let bookSortCode = this.props.bookSortCode;\n      bookSortCode.sort = code;\n      this.props.handleBookSortCode(bookSortCode);\n      this.props.handleBookSort(true);\n      SortUtil.setBookSortCode(code, this.props.bookSortCode.order);\n    }\n  };\n  handleOrder = (code: number) => {\n    if (this.state.isNote) {\n      let noteSortCode = this.props.noteSortCode;\n      noteSortCode.order = code;\n      this.props.handleNoteSort(true);\n      SortUtil.setNoteSortCode(this.props.noteSortCode.sort, code);\n      this.props.handleNoteSortCode(noteSortCode);\n    } else {\n      let bookSortCode = this.props.bookSortCode;\n      bookSortCode.order = code;\n      this.props.handleBookSort(true);\n      SortUtil.setBookSortCode(this.props.bookSortCode.sort, code);\n      this.props.handleBookSortCode(bookSortCode);\n    }\n  };\n\n  render() {\n    let sortCode = this.state.isNote\n      ? this.props.noteSortCode\n      : this.props.bookSortCode;\n    return (\n      <div\n        className=\"sort-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleSortDisplay(false);\n        }}\n        onMouseEnter={() => {\n          this.props.handleSortDisplay(true);\n        }}\n        style={this.state.isNote ? { height: \"120px\" } : {}}\n      >\n        {this.state.isNote ? (\n          <ul className=\"sort-by-category\">\n            {[\"Sort by Name\", \"Sort by Date\"].map((item, index) => {\n              return (\n                <li\n                  className=\"sort-by-category-list\"\n                  onClick={() => {\n                    this.handleSort(index + 1);\n                  }}\n                  style={sortCode.sort === index + 1 ? {} : { opacity: 0.34 }}\n                >\n                  <Trans>{item}</Trans>\n                  {sortCode.sort === index + 1 && (\n                    <span className=\"icon-check\"></span>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        ) : (\n          <ul className=\"sort-by-category\">\n            {[\n              \"Sort by Recent\",\n              \"Sort by Name\",\n              \"Sort by Date\",\n              \"Sort by Duration\",\n              \"Sort by Author\",\n              \"Sort by Percentage\",\n            ].map((item, index) => {\n              return (\n                <li\n                  className=\"sort-by-category-list\"\n                  onClick={() => {\n                    this.handleSort(index);\n                  }}\n                  style={sortCode.sort === index ? {} : { opacity: 0.34 }}\n                  key={index}\n                >\n                  <Trans>{item}</Trans>\n                  {sortCode.sort === index && (\n                    <span\n                      className=\"icon-check\"\n                      style={{ fontWeight: \"bold\" }}\n                    ></span>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className=\"sort-dialog-seperator\"></div>\n        <ul className=\"sort-by-order\">\n          <li\n            className=\"sort-by-order-list\"\n            onClick={() => {\n              this.handleOrder(1);\n            }}\n            style={sortCode.order === 1 ? {} : { opacity: 0.34 }}\n          >\n            <Trans>Ascending Order</Trans>\n            {sortCode.order === 1 && (\n              <span\n                className=\"icon-check\"\n                style={{ fontWeight: \"bold\" }}\n              ></span>\n            )}\n          </li>\n          <li\n            className=\"sort-by-order-list\"\n            onClick={() => {\n              this.handleOrder(2);\n            }}\n            style={sortCode.order === 2 ? {} : { opacity: 0.34 }}\n          >\n            <Trans>Descending Order</Trans>\n            {sortCode.order === 2 && (\n              <span\n                className=\"icon-check\"\n                style={{ fontWeight: \"bold\" }}\n              ></span>\n            )}\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default SortDialog;\n","import { connect } from \"react-redux\";\nimport {\n  handleBookSortCode,\n  handleNoteSortCode,\n  handleSortDisplay,\n  handleBookSort,\n  handleNoteSort,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport SortDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n    mode: state.sidebar.mode,\n    isSortDisplay: state.manager.isSortDisplay,\n  };\n};\nconst actionCreator = {\n  handleBookSortCode,\n  handleSortDisplay,\n  handleNoteSortCode,\n  handleBookSort,\n  handleNoteSort,\n};\nexport default connect(mapStateToProps, actionCreator)(SortDialog);\n","//排序弹窗\nimport React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { AboutDialogProps, AboutDialogState } from \"./interface\";\nimport { isElectron } from \"react-device-detect\";\n\nclass AboutDialog extends React.Component<AboutDialogProps, AboutDialogState> {\n  constructor(props: AboutDialogProps) {\n    super(props);\n    this.state = {};\n  }\n  handleJump = (url: string) => {\n    isElectron\n      ? window.require(\"electron\").shell.openExternal(url)\n      : window.open(url);\n    this.props.handleAbout(false);\n  };\n\n  render() {\n    return (\n      <div\n        className=\"sort-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleAbout(false);\n        }}\n        onMouseEnter={() => {\n          this.props.handleAbout(true);\n        }}\n        style={{\n          left: \"525px\",\n          height: \"180px\",\n          width: \"120px\",\n        }}\n      >\n        <ul className=\"sort-by-category\">\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.props.handleSetting(true);\n              this.props.handleAbout(false);\n            }}\n          >\n            <Trans>Setting</Trans>\n          </li>\n\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              if (navigator.language.indexOf(\"zh\") > -1) {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/e9c4e5755d564b0db6340eeba6d9ece9?v=7c8fcbed9adf4592ada95cfd593868c9\"\n                );\n              } else {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/01aaa516687c418499f713d34793b9ad?v=54d51fe1688a4f8ab5784b17e4df3308\"\n                );\n              }\n            }}\n          >\n            <Trans>Help</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://koodo.960960.xyz/support\");\n            }}\n          >\n            <Trans>Feedback</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              if (navigator.language.indexOf(\"zh\") > -1) {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/215baeda57804fd29dbb0e91d1e6a021?v=360c00183d944b598668f34c255edfd7\"\n                );\n              } else {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/d1c19a132932465bae1d89dd963c92ea?v=ca8aa69cf25849c18c92b92ba868663b\"\n                );\n              }\n            }}\n          >\n            <Trans>Roadmap</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://koodo.960960.xyz\");\n            }}\n          >\n            <Trans>Our Website</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://960960.xyz\");\n            }}\n          >\n            <Trans>About developer</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://github.com/troyeguo/koodo-reader\");\n            }}\n          >\n            <Trans>Github Repo</Trans>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default AboutDialog;\n","import { connect } from \"react-redux\";\nimport { handleSetting, handleAbout } from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport AboutDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isSettingOpen: state.manager.isSettingOpen,\n    isAboutOpen: state.manager.isAboutOpen,\n  };\n};\nconst actionCreator = {\n  handleSetting,\n  handleAbout,\n};\nexport default connect(mapStateToProps, actionCreator)(AboutDialog);\n","//消息提示\nimport React from \"react\";\nimport \"./messageBox.css\";\nimport { Trans } from \"react-i18next\";\nimport { MessageBoxProps } from \"./interface\";\n\nclass MessageBox extends React.Component<MessageBoxProps> {\n  render() {\n    return (\n      <div className=\"message-box-container-parent\">\n        <div className=\"message-box-container\">\n          <span className=\"icon-success  message-box-icon\"></span>\n          <div className=\"message-content\">\n            <Trans>{this.props.message}</Trans>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageBox;\n","//消息提示\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport MessageBox from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    message: state.manager.message,\n  };\n};\nconst actionCreator = {};\nexport default connect(mapStateToProps, actionCreator)(MessageBox);\n","export const config = {\n  callback_url:\n    process.env.NODE_ENV === \"production\"\n      ? \"https://reader.960960.xyz\"\n      : \"http://localhost:3000\",\n  token_url:\n    process.env.NODE_ENV === \"production\"\n      ? \"http://localhost:3366\"\n      : \"http://localhost:3366\",\n  dropbox_client_id: \"vnc67byrssocvy1\",\n  googledrive_client_id:\n    \"99440516227-ifr1ann33f2j610i3ri17ej0i51c7m6e.apps.googleusercontent.com\",\n  onedrive_client_id: \"ac96f9bf-94f2-49c0-8418-999b919bc236\",\n};\nexport const driveList = [\n  {\n    id: 1,\n    name: \"Local\",\n    icon: \"local\",\n    url: \"\",\n  },\n  {\n    id: 2,\n    name: \"Dropbox\",\n    icon: \"dropbox\",\n    url: `https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=${config.dropbox_client_id}&redirect_uri=${config.callback_url}`,\n  },\n\n  {\n    id: 3,\n    name: \"Google Drive\",\n    icon: \"googledrive\",\n    url: \"\",\n  },\n  // {\n  //   id: 4,\n  //   name: \"OneDrive\",\n  //   icon: \"onedrive\",\n  //   url: `https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=${config.onedrive_client_id}&scope=files.readwrite offline_access&response_type=code&redirect_uri=${config.callback_url}`,\n  // },\n  {\n    id: 5,\n    name: \"WebDav\",\n    icon: \"webdav\",\n    url: \"\",\n  },\n];\n","//绑定网盘的弹窗\nimport React, { Component } from \"react\";\nimport \"./tokenDialog.css\";\nimport copy from \"copy-text-to-clipboard\";\nimport { Trans } from \"react-i18next\";\nimport { TokenDialogProps, TokenDialogState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\n\nclass TokenDialog extends Component<TokenDialogProps, TokenDialogState> {\n  constructor(props: TokenDialogProps) {\n    super(props);\n    this.state = { isNew: false };\n  }\n\n  handleCancel = () => {\n    this.props.handleTokenDialog(false);\n  };\n  handleTokenComfirm = () => {\n    let token: string = (document.querySelector(\n      \".token-dialog-token-box\"\n    ) as HTMLTextAreaElement).value;\n    OtherUtil.setReaderConfig(`${this.props.driveName}_token`, token);\n    this.props.handleTokenDialog(false);\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleDavComfirm = () => {\n    let url: string = (document.querySelector(\n      \".token-dialog-url-box\"\n    ) as HTMLTextAreaElement).value;\n    let username: string = (document.querySelector(\n      \".token-dialog-username-box\"\n    ) as HTMLTextAreaElement).value;\n    let password: string = (document.querySelector(\n      \".token-dialog-password-box\"\n    ) as HTMLTextAreaElement).value;\n    OtherUtil.setReaderConfig(\n      `${this.props.driveName}_token`,\n      JSON.stringify({ url, username, password })\n    );\n    this.props.handleTokenDialog(false);\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  render() {\n    return (\n      <div className=\"token-dialog-container\">\n        <div className=\"token-dialog-box\">\n          <div className=\"token-dialog-title\">\n            <Trans>Bind</Trans>\n            &nbsp;\n            {this.props.driveName}&nbsp;\n            <Trans>Token</Trans>\n          </div>\n          {this.props.driveName === \"webdav\" ? (\n            <>\n              <div\n                className=\"token-dialog-info-text\"\n                style={\n                  OtherUtil.getReaderConfig(\"lang\") === \"en\"\n                    ? { fontSize: \"14px\" }\n                    : {}\n                }\n              >\n                <Trans>Webdav Info</Trans>\n              </div>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Server Address\")}\n                id=\"token-dialog-url-box\"\n                className=\"token-dialog-url-box\"\n              />\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Username\")}\n                id=\"token-dialog-username-box\"\n                className=\"token-dialog-username-box\"\n              />\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Password\")}\n                id=\"token-dialog-password-box\"\n                className=\"token-dialog-password-box\"\n              />\n            </>\n          ) : (\n            <>\n              <div\n                className=\"token-dialog-info-text\"\n                style={\n                  OtherUtil.getReaderConfig(\"lang\") === \"en\"\n                    ? { fontSize: \"14px\" }\n                    : {}\n                }\n              >\n                <Trans>Token Info</Trans>\n              </div>\n              <div\n                className=\"token-dialog-link-text\"\n                onClick={() => {\n                  copy(this.props.url);\n                  this.props.handleMessage(\"Copy Successfully\");\n                  this.props.handleMessageBox(true);\n                }}\n              >\n                <Trans>Copy Link</Trans>\n              </div>\n              <textarea className=\"token-dialog-token-box\" />\n            </>\n          )}\n\n          <div\n            className=\"token-dialog-cancel\"\n            onClick={() => {\n              this.handleCancel();\n            }}\n          >\n            <Trans>Cancel</Trans>\n          </div>\n          <div\n            className=\"token-dialog-comfirm\"\n            onClick={() => {\n              if (this.props.driveName === \"webdav\") {\n                this.handleDavComfirm();\n              } else {\n                this.handleTokenComfirm();\n              }\n            }}\n          >\n            <Trans>Confirm</Trans>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TokenDialog;\n","//添加图书到书架的对话框\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { handleTokenDialog } from \"../../../store/actions/backupPage\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport TokenDialog from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleTokenDialog,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(TokenDialog as any));\n","//备份和恢复页面\nimport React from \"react\";\nimport \"./backupDialog.css\";\nimport { driveList } from \"../../../constants/driveList\";\nimport BackupUtil from \"../../../utils/syncUtils/backupUtil\";\nimport RestoreUtil from \"../../../utils/syncUtils/restoreUtil\";\nimport { Trans } from \"react-i18next\";\nimport DropboxUtil from \"../../../utils/syncUtils/dropbox\";\nimport WebdavUtil from \"../../../utils/syncUtils/webdav\";\nimport { BackupDialogProps, BackupDialogState } from \"./interface\";\nimport TokenDialog from \"../tokenDialog\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport Lottie from \"react-lottie\";\nimport animationSuccess from \"../../../assets/lotties/success.json\";\n\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nclass BackupDialog extends React.Component<\n  BackupDialogProps,\n  BackupDialogState\n> {\n  constructor(props: BackupDialogProps) {\n    super(props);\n    this.state = {\n      currentStep: 0,\n      isBackup: \"\",\n      currentDrive: 0,\n    };\n  }\n  handleClose = () => {\n    this.props.handleBackupDialog(false);\n  };\n\n  handleFinish = () => {\n    this.setState({ currentStep: 2 });\n    this.props.handleLoadingDialog(false);\n    this.showMessage(\"Sync Successfully\");\n  };\n  handleRestoreToLocal = (event: any) => {\n    event.preventDefault();\n    RestoreUtil.restore(event.target.files[0], this.handleFinish);\n  };\n  showMessage = (message: string) => {\n    this.props.handleMessage(message);\n    this.props.handleMessageBox(true);\n  };\n  handleDrive = (index: number) => {\n    this.setState({ currentDrive: index }, () => {\n      switch (index) {\n        case 0:\n          BackupUtil.backup(\n            this.props.books,\n            this.props.notes,\n            this.props.bookmarks,\n            this.handleFinish,\n            0,\n            this.showMessage\n          );\n          break;\n        case 1:\n          if (!OtherUtil.getReaderConfig(\"dropbox_token\")) {\n            this.props.handleTokenDialog(true);\n            break;\n          }\n\n          if (this.state.isBackup === \"yes\") {\n            this.showMessage(\"Uploading\");\n            this.props.handleLoadingDialog(true);\n\n            BackupUtil.backup(\n              this.props.books,\n              this.props.notes,\n              this.props.bookmarks,\n              this.handleFinish,\n              1,\n              this.showMessage\n            );\n          } else {\n            this.props.handleLoadingDialog(true);\n            this.showMessage(\"Downloading\");\n            DropboxUtil.DownloadFile(this.handleFinish, this.showMessage);\n          }\n\n          break;\n        case 2:\n          this.showMessage(\"Coming Soon\");\n          break;\n\n        case 3:\n          if (!OtherUtil.getReaderConfig(\"webdav_token\")) {\n            this.props.handleTokenDialog(true);\n            break;\n          }\n          if (this.state.isBackup === \"yes\") {\n            this.showMessage(\"Uploading\");\n            this.props.handleLoadingDialog(true);\n\n            BackupUtil.backup(\n              this.props.books,\n              this.props.notes,\n              this.props.bookmarks,\n              this.handleFinish,\n              3,\n              this.showMessage\n            );\n          } else {\n            this.showMessage(\"Downloading\");\n            this.props.handleLoadingDialog(true);\n\n            WebdavUtil.DownloadFile(this.handleFinish, this.showMessage);\n          }\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  render() {\n    const renderDrivePage = () => {\n      return driveList.map((item, index) => {\n        return (\n          <li\n            key={item.id}\n            className=\"backup-page-list-item\"\n            onClick={() => {\n              this.handleDrive(index);\n            }}\n            style={index !== 2 ? { opacity: 1 } : {}}\n          >\n            <div className=\"backup-page-list-item-container\">\n              <span\n                className={`icon-${item.icon} backup-page-list-icon`}\n              ></span>\n              {OtherUtil.getReaderConfig(\"dropbox_token\") && index === 1 ? (\n                <div\n                  className=\"backup-page-list-title\"\n                  onClick={() => {\n                    OtherUtil.setReaderConfig(\"dropbox_token\", \"\");\n                    this.showMessage(\"Unauthorize Successfully\");\n                  }}\n                  style={{ color: \"rgb(0, 120, 212)\" }}\n                >\n                  <Trans>Unauthorize</Trans>\n                </div>\n              ) : OtherUtil.getReaderConfig(\"webdav_token\") && index === 3 ? (\n                <div\n                  className=\"backup-page-list-title\"\n                  onClick={() => {\n                    OtherUtil.setReaderConfig(\"webdav_token\", \"\");\n                    this.showMessage(\"Unauthorize Successfully\");\n                  }}\n                  style={{ color: \"rgb(0, 120, 212)\" }}\n                >\n                  <Trans>Unauthorize</Trans>\n                </div>\n              ) : (\n                <div className=\"backup-page-list-title\">\n                  <Trans>{item.name}</Trans>\n                </div>\n              )}\n            </div>\n          </li>\n        );\n      });\n    };\n    console.log(\n      driveList,\n      this.state.currentDrive,\n      driveList[this.state.currentDrive!]\n    );\n    const dialogProps = {\n      driveName: driveList[this.state.currentDrive!].icon,\n      url: driveList[this.state.currentDrive!].url,\n    };\n\n    return (\n      <div className=\"backup-page-container\">\n        {this.props.isOpenTokenDialog ? <TokenDialog {...dialogProps} /> : null}\n        {this.state.currentStep === 0 ? (\n          <div className=\"backup-page-title\">\n            <Trans>Do you want to backup or restore?</Trans>\n          </div>\n        ) : this.state.currentStep === 1 && this.state.isBackup === \"yes\" ? (\n          <div className=\"backup-page-title\">\n            <Trans>Where to keep your data?</Trans>\n          </div>\n        ) : this.state.currentStep === 1 && this.state.isBackup === \"no\" ? (\n          <div className=\"backup-page-title\">\n            <Trans>Where is your data?</Trans>\n          </div>\n        ) : null}\n        {this.state.currentStep === 0 ? (\n          <div className=\"backup-page-option\">\n            <div\n              className={\n                this.state.isBackup === \"yes\"\n                  ? \"backup-page-backup active\"\n                  : \"backup-page-backup\"\n              }\n              onClick={() => {\n                this.setState({ isBackup: \"yes\" });\n              }}\n            >\n              <span className=\"icon-backup\"></span>\n              <div>\n                <Trans>I want to backup</Trans>\n              </div>\n            </div>\n\n            <div\n              className={\n                this.state.isBackup === \"no\"\n                  ? \"backup-page-backup active\"\n                  : \"backup-page-backup\"\n              }\n              onClick={() => {\n                this.setState({ isBackup: \"no\" });\n              }}\n            >\n              <span className=\"icon-restore\"></span>\n              <div>\n                <Trans>I want to restore</Trans>\n              </div>\n            </div>\n          </div>\n        ) : this.state.currentStep === 1 ? (\n          <div className=\"backup-page-drive-container\">\n            <div>{renderDrivePage()}</div>\n            {this.state.isBackup === \"no\" ? (\n              <input\n                type=\"file\"\n                id=\"restore-file\"\n                accept=\"application/zip\"\n                className=\"restore-file\"\n                name=\"file\"\n                multiple={false}\n                onChange={(event) => {\n                  this.handleRestoreToLocal(event);\n                }}\n              />\n            ) : null}\n          </div>\n        ) : (\n          <div className=\"backup-page-finish-container\">\n            <div className=\"backup-page-finish\">\n              <Lottie options={successOptions} height={80} width={80} />\n              <div className=\"backup-page-finish-text\">\n                <Trans>\n                  {this.state.isBackup === \"yes\"\n                    ? \"Backup Successfully\"\n                    : \"Restore Successfully\"}\n                </Trans>\n              </div>\n              {this.state.isBackup ? null : (\n                <div style={{ opacity: 0.6 }}>\n                  <Trans>Try refresh or restart</Trans>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        {this.state.isBackup === \"yes\" && this.state.currentStep === 0 ? (\n          <div className=\"backup-page-backup-selector\"></div>\n        ) : null}\n        {this.state.isBackup === \"no\" && this.state.currentStep === 0 ? (\n          <div\n            className=\"backup-page-backup-selector\"\n            style={{ marginLeft: \"252px\" }}\n          ></div>\n        ) : null}\n        <div\n          className=\"backup-page-close-icon\"\n          onClick={() => {\n            this.handleClose();\n          }}\n        >\n          <span className=\"icon-close backup-close-icon\"></span>\n        </div>\n\n        {this.state.currentStep === 1 ? (\n          <div\n            className=\"backup-page-next\"\n            onClick={() => {\n              this.setState({ currentStep: 0 });\n            }}\n          >\n            <Trans>Last Step</Trans>\n          </div>\n        ) : this.state.currentStep === 0 ? (\n          <div\n            className=\"backup-page-next\"\n            onClick={() => {\n              this.setState({ currentStep: 1 });\n            }}\n            style={this.state.isBackup ? {} : { display: \"none\" }}\n          >\n            <Trans>Next Step</Trans>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default BackupDialog;\n","//备份和恢复页面\nimport {\n  handleBackupDialog,\n  handleTokenDialog,\n} from \"../../../store/actions/backupPage\";\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleLoadingDialog,\n  handleTipDialog,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport BackupDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    isOpenTokenDialog: state.backupPage.isOpenTokenDialog,\n  };\n};\nconst actionCreator = {\n  handleBackupDialog,\n  handleMessageBox,\n  handleMessage,\n  handleTokenDialog,\n  handleLoadingDialog,\n  handleTipDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(BackupDialog);\n","export const dropdownList = [\n  {\n    id: 1,\n    title: \"Font Family\",\n    value: \"fontFamily\",\n    option: [\n      \"Built-in font\",\n      \"Helvetica\",\n      \"Times New Roman\",\n      \"Microsoft YaHei\",\n      \"SimSun\",\n      \"SimHei\",\n      \"Arial\",\n    ],\n  },\n  {\n    id: 2,\n    title: \"Line Height\",\n    value: \"lineHeight\",\n    option: [\"1\", \"1.25\", \"1.5\", \"1.75\", \"2\"],\n  },\n  {\n    id: 3,\n    title: \"Text Align\",\n    value: \"textAlign\",\n    option: [\"left\", \"justify\", \"right\"],\n  },\n];\nexport const speedList = {\n  id: 3,\n  title: \"Speed\",\n  value: \"speed\",\n  option: [\"0.5\", \"0.75\", \"1\", \"1.25\", \"1.5\", \"1.75\", \"2\"],\n};\n","export const settingList = [\n  {\n    isElectron: false,\n    title: \"Turn on touch screen mode\",\n    propName: \"isTouch\",\n  },\n  {\n    isElectron: false,\n    title: \"Auto open latest book\",\n    propName: \"isOpenBook\",\n  },\n  {\n    isElectron: true,\n    title: \"Auto open book in fullscreen\",\n    propName: \"isAutoFullscreen\",\n  },\n  {\n    isElectron: false,\n    title: \"Default expand all content\",\n    propName: \"isExpandContent\",\n  },\n  {\n    isElectron: true,\n    title: \"Disable update notification\",\n    propName: \"isDisableUpdate\",\n  },\n  {\n    isElectron: false,\n    title: \"Turn on night mode\",\n    propName: \"isDisplayDark\",\n  },\n];\nexport const langList = [\n  { label: \"简体中文\", value: \"zh\" },\n  { label: \"繁體中文\", value: \"cht\" },\n  { label: \"English\", value: \"en\" },\n  { label: \"русский\", value: \"ru\" },\n];\nexport const searchList = [\n  { label: \"Google\", value: \"google\" },\n  { label: \"Baidu\", value: \"baidu\" },\n  { label: \"Bing\", value: \"bing\" },\n  { label: \"DuckDuckGo\", value: \"duckduckgo\" },\n  { label: \"Yandex\", value: \"yandex\" },\n  { label: \"Yahoo\", value: \"yahoo\" },\n];\nexport const readerSettingList = [\n  {\n    title: \"Bold Font\",\n    propName: \"isBold\",\n  },\n  {\n    title: \"Italic\",\n    propName: \"isItalic\",\n  },\n  {\n    title: \"Text Underline\",\n    propName: \"isUnderline\",\n  },\n  {\n    title: \"Text Shadow\",\n    propName: \"isShadow\",\n  },\n  {\n    title: \"Invert color\",\n    propName: \"isInvert\",\n  },\n  {\n    title: \"Don't show footer\",\n    propName: \"isHideFooter\",\n  },\n  {\n    title: \"Don't show header\",\n    propName: \"isHideHeader\",\n  },\n  {\n    title: \"Dont't use mimical background\",\n    propName: \"isUseBackground\",\n  },\n];\nexport const htmlSettingList = [\n  {\n    title: \"Bold Font\",\n    propName: \"isBold\",\n  },\n  {\n    title: \"Italic\",\n    propName: \"isItalic\",\n  },\n  {\n    title: \"Text Underline\",\n    propName: \"isUnderline\",\n  },\n  {\n    title: \"Text Shadow\",\n    propName: \"isShadow\",\n  },\n];\n","export const backgroundList = [\n  \"rgba(255,255,255,1)\",\n  \"rgba(44,47,49,1)\",\n  \"rgba(233, 216, 188,1)\",\n  \"rgba(197, 231, 207,1)\",\n];\nexport const textList = [\n  \"rgba(0,0,0,1)\",\n  \"rgba(255,255,255,1)\",\n  \"rgba(89, 68, 41,1)\",\n  \"rgba(54, 80, 62,1)\",\n];\nexport const themeList = [\n  {\n    id: 0,\n    color: \"rgba(75, 75, 75, 1)\",\n    name: \"default\",\n    title: \"Default\",\n  },\n  {\n    id: 1,\n    color: \"rgba(1, 121, 202, 1)\",\n    name: \"blue\",\n    title: \"Blue\",\n  },\n  {\n    id: 2,\n    color: \"rgba(0, 143, 145, 1)\",\n    name: \"green\",\n    title: \"Green\",\n  },\n\n  {\n    id: 3,\n    color: \"rgba(241, 100, 100, 1)\",\n    name: \"red\",\n    title: \"Red\",\n  },\n  {\n    id: 4,\n    color: \"rgba(104, 103, 209, 1)\",\n    name: \"purple\",\n    title: \"Purple\",\n  },\n];\n","//左下角的图标外链\nimport React from \"react\";\nimport \"./settingDialog.css\";\nimport { SettingInfoProps, SettingInfoState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport i18n from \"../../../i18n\";\nimport { version } from \"../../../../package.json\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport SyncUtil from \"../../../utils/syncUtils/common\";\nimport { isElectron } from \"react-device-detect\";\nimport { dropdownList } from \"../../../constants/dropdownList\";\nimport { Tooltip } from \"react-tippy\";\nimport RestoreUtil from \"../../../utils/syncUtils/restoreUtil\";\nimport BackupUtil from \"../../../utils/syncUtils/backupUtil\";\nimport {\n  settingList,\n  langList,\n  searchList,\n} from \"../../../constants/settingList\";\nimport { themeList } from \"../../../constants/themeList\";\nimport _ from \"underscore\";\nclass SettingDialog extends React.Component<\n  SettingInfoProps,\n  SettingInfoState\n> {\n  constructor(props: SettingInfoProps) {\n    super(props);\n    this.state = {\n      isTouch: OtherUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      isAutoFullscreen: OtherUtil.getReaderConfig(\"isAutoFullscreen\") === \"yes\",\n      isOpenBook: OtherUtil.getReaderConfig(\"isOpenBook\") === \"yes\",\n      isExpandContent: OtherUtil.getReaderConfig(\"isExpandContent\") === \"yes\",\n      isDisableUpdate: OtherUtil.getReaderConfig(\"isDisableUpdate\") === \"yes\",\n      isDisplayDark: OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\",\n\n      currentThemeIndex: _.findLastIndex(themeList, {\n        name: OtherUtil.getReaderConfig(\"themeColor\"),\n      }),\n    };\n  }\n  componentDidMount() {\n    OtherUtil.getReaderConfig(\"systemFont\") &&\n      document\n        .getElementsByClassName(\"lang-setting-dropdown\")[0]\n        ?.children[\n          dropdownList[0].option.indexOf(\n            OtherUtil.getReaderConfig(\"systemFont\")\n          )\n        ].setAttribute(\"selected\", \"selected\");\n    document\n      .getElementsByClassName(\"lang-setting-dropdown\")[1]\n      ?.children[\n        [\"zh\", \"cht\", \"en\", \"ru\"].indexOf(\n          OtherUtil.getReaderConfig(\"lang\") ||\n            (navigator.language.indexOf(\"zh\") > -1 ? \"zh\" : \"en\")\n        )\n      ].setAttribute(\"selected\", \"selected\");\n    document.getElementsByClassName(\"lang-setting-dropdown\")[2]?.children[\n      _.findLastIndex(searchList, {\n        value:\n          OtherUtil.getReaderConfig(\"searchEngine\") ||\n          (navigator.language === \"zh-CN\" ? \"baidu\" : \"google\"),\n      })\n    ].setAttribute(\"selected\", \"selected\");\n  }\n  handleRest = (bool: boolean) => {\n    bool\n      ? this.props.handleMessage(\"Turn Off Successfully\")\n      : this.props.handleMessage(\"Turn On Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  changeLanguage = (lng: string) => {\n    i18n.changeLanguage(lng);\n    OtherUtil.setReaderConfig(\"lang\", lng);\n  };\n  changeSearch = (searchEngine: string) => {\n    OtherUtil.setReaderConfig(\"searchEngine\", searchEngine);\n  };\n  changeFont = (font: string) => {\n    let body = document.getElementsByTagName(\"body\")[0];\n    body.setAttribute(\"style\", \"font-family:\" + font + \"!important\");\n    OtherUtil.setReaderConfig(\"systemFont\", font);\n  };\n  handleJump = (url: string) => {\n    isElectron\n      ? window.require(\"electron\").shell.openExternal(url)\n      : window.open(url);\n  };\n  handleSetting = (stateName: string) => {\n    this.setState({ [stateName]: !this.state[stateName] } as any);\n    OtherUtil.setReaderConfig(stateName, this.state[stateName] ? \"no\" : \"yes\");\n    this.handleRest(this.state[stateName]);\n  };\n  syncFromLocation = async () => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const { zip } = window.require(\"zip-a-folder\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\");\n    let outPath = path.join(storageLocation, \"config.zip\");\n    await zip(sourcePath, outPath);\n\n    var data = fs.readFileSync(outPath);\n\n    let blobTemp = new Blob([data], { type: \"application/epub+zip\" });\n    let fileTemp = new File([blobTemp], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blobTemp.type,\n    });\n\n    RestoreUtil.restore(\n      fileTemp,\n      () => {\n        BackupUtil.backup(\n          this.props.books,\n          this.props.notes,\n          this.props.bookmarks,\n          () => {\n            this.props.handleMessage(\"Change Successfully\");\n            this.props.handleMessageBox(true);\n          },\n          5,\n          () => {}\n        );\n      },\n      true\n    );\n  };\n  handleChangeLocation = async () => {\n    const { dialog } = window.require(\"electron\").remote;\n    var path = await dialog.showOpenDialog({\n      properties: [\"openDirectory\"],\n    });\n    const { ipcRenderer } = window.require(\"electron\");\n    if (!path.filePaths[0]) {\n      return;\n    }\n    SyncUtil.changeLocation(\n      localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : ipcRenderer.sendSync(\"storage-location\", \"ping\"),\n      path.filePaths[0],\n      this.props.handleMessage,\n      this.props.handleMessageBox,\n      this.syncFromLocation\n    );\n    localStorage.setItem(\"storageLocation\", path.filePaths[0]);\n    document.getElementsByClassName(\n      \"setting-dialog-location-title\"\n    )[0].innerHTML =\n      path.filePaths[0] ||\n      localStorage.getItem(\"storageLocation\") ||\n      ipcRenderer.sendSync(\"storage-location\", \"ping\");\n  };\n  handleDisplayDark = () => {\n    this.setState({ isDisplayDark: !this.state.isDisplayDark });\n    OtherUtil.setReaderConfig(\n      \"isDisplayDark\",\n      this.state.isDisplayDark ? \"no\" : \"yes\"\n    );\n    if (isElectron) {\n      this.props.handleMessage(\"Try refresh or restart\");\n      this.props.handleMessageBox(true);\n    } else {\n      window.location.reload();\n    }\n  };\n\n  handleTheme = (name: string, index: number) => {\n    this.setState({ currentThemeIndex: index });\n    OtherUtil.setReaderConfig(\"themeColor\", name);\n    if (isElectron) {\n      this.props.handleMessage(\"Try refresh or restart\");\n      this.props.handleMessageBox(true);\n    } else {\n      window.location.reload();\n    }\n  };\n  render() {\n    return (\n      <div className=\"setting-dialog-container\">\n        <p className=\"setting-dialog-title\">\n          <Trans>Setting</Trans>\n        </p>\n        <p className=\"setting-subtitle\">\n          <Trans>Version</Trans>\n          {version}\n        </p>\n        <div\n          className=\"setting-close-container\"\n          onClick={() => {\n            this.props.handleSetting(false);\n          }}\n        >\n          <span className=\"icon-close setting-close\"></span>\n        </div>\n\n        <div className=\"setting-dialog-info\">\n          {settingList.map((item, index) => {\n            return (\n              <div\n                className=\"setting-dialog-new-title\"\n                key={item.title}\n                style={\n                  item.isElectron ? (isElectron ? {} : { display: \"none\" }) : {}\n                }\n              >\n                <Trans>{item.title}</Trans>\n                <span\n                  className=\"single-control-switch\"\n                  onClick={() => {\n                    switch (index) {\n                      case 0:\n                      case 1:\n                      case 2:\n                      case 3:\n                      case 4:\n                        this.handleSetting(item.propName);\n                        break;\n                      case 5:\n                        this.handleDisplayDark();\n                        break;\n                      default:\n                        break;\n                    }\n                  }}\n                  style={this.state[item.propName] ? {} : { opacity: 0.6 }}\n                >\n                  <span\n                    className=\"single-control-button\"\n                    style={\n                      this.state[item.propName]\n                        ? {\n                            transform: \"translateX(20px)\",\n                            transition: \"transform 0.5s ease\",\n                          }\n                        : {\n                            transform: \"translateX(0px)\",\n                            transition: \"transform 0.5s ease\",\n                          }\n                    }\n                  ></span>\n                </span>\n              </div>\n            );\n          })}\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Theme Color</Trans>\n            <ul className=\"theme-setting-container\">\n              {themeList.map((item, index) => (\n                <Tooltip\n                  key={item.id}\n                  title={this.props.t(item.title)}\n                  position=\"top\"\n                  trigger=\"mouseenter\"\n                >\n                  <li\n                    className={\n                      index === this.state.currentThemeIndex\n                        ? \"active-color theme-setting-item\"\n                        : \"theme-setting-item\"\n                    }\n                    onClick={() => {\n                      this.handleTheme(item.name, index);\n                    }}\n                    style={{ backgroundColor: item.color }}\n                  ></li>\n                </Tooltip>\n              ))}\n            </ul>\n          </div>\n\n          {isElectron && (\n            <>\n              <div className=\"setting-dialog-new-title\">\n                <Trans>Change storage location</Trans>\n\n                <span\n                  className=\"change-location-button\"\n                  onClick={() => {\n                    this.handleChangeLocation();\n                  }}\n                >\n                  <Trans>Change location</Trans>\n                </span>\n              </div>\n              <div className=\"setting-dialog-location-title\">\n                {localStorage.getItem(\"storageLocation\")\n                  ? localStorage.getItem(\"storageLocation\")\n                  : window\n                      .require(\"electron\")\n                      .ipcRenderer.sendSync(\"storage-location\", \"ping\")}\n              </div>\n            </>\n          )}\n          <div className=\"setting-dialog-new-title\">\n            <Trans>System Font</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeFont(event.target.value);\n              }}\n            >\n              {dropdownList[0].option.map((item) => (\n                <option value={item} key={item} className=\"lang-setting-option\">\n                  {this.props.t(item)}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Language</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeLanguage(event.target.value);\n              }}\n            >\n              {langList.map((item) => (\n                <option\n                  value={item.value}\n                  key={item.value}\n                  className=\"lang-setting-option\"\n                >\n                  {item.label}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Default search engine</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeSearch(event.target.value);\n              }}\n            >\n              {searchList.map((item) => (\n                <option\n                  value={item.value}\n                  key={item.value}\n                  className=\"lang-setting-option\"\n                >\n                  {item.label}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SettingDialog;\n","//左下角的图标外链\nimport { connect } from \"react-redux\";\nimport SettingDialog from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleSetting,\n  handleMessageBox,\n  handleMessage,\n  handleTipDialog,\n  handleTip,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    bookmarks: state.reader.bookmarks,\n    books: state.manager.books,\n    notes: state.reader.notes,\n  };\n};\nconst actionCreator = {\n  handleSetting,\n  handleTipDialog,\n  handleTip,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingDialog as any));\n","//对图书操作的菜单\nimport React from \"react\";\nimport \"./actionDialog.css\";\nimport { Trans } from \"react-i18next\";\nimport { ActionDialogProps } from \"./interface\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport FileSaver from \"file-saver\";\nimport localforage from \"localforage\";\nimport Parser from \"html-react-parser\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nclass ActionDialog extends React.Component<ActionDialogProps> {\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleEditBook = () => {\n    this.props.handleEditDialog(true);\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleActionDialog(false);\n  };\n  handleAddShelf = () => {\n    this.props.handleAddDialog(true);\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleActionDialog(false);\n  };\n  handleRestoreBook = () => {\n    AddTrash.clear(this.props.currentBook.key);\n    this.props.handleActionDialog(false);\n    this.props.handleMessage(\"Restore Successfully\");\n    this.props.handleMessageBox(true);\n    this.props.handleFetchBooks();\n  };\n  render() {\n    if (this.props.mode === \"trash\") {\n      return (\n        <div\n          className=\"action-dialog-container\"\n          onMouseLeave={() => {\n            this.props.handleActionDialog(false);\n          }}\n          style={{\n            left: this.props.left,\n            top: this.props.top,\n            maxHeight: \"40px\",\n          }}\n        >\n          <div className=\"action-dialog-actions-container\">\n            <div\n              className=\"action-dialog-add\"\n              onClick={() => {\n                this.handleRestoreBook();\n              }}\n            >\n              <span className=\"icon-clockwise view-icon\"></span>\n              <span className=\"action-name\">\n                <Trans>Restore</Trans>\n              </span>\n              <p className=\"action-name\"></p>\n            </div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div\n        className=\"action-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleActionDialog(false);\n        }}\n        style={{ left: this.props.left, top: this.props.top }}\n      >\n        <div className=\"action-dialog-actions-container\">\n          <div\n            className=\"action-dialog-add\"\n            onClick={() => {\n              this.handleAddShelf();\n            }}\n          >\n            <span className=\"icon-shelf view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Add to Shelf</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-delete\"\n            onClick={() => {\n              this.handleDeleteBook();\n            }}\n          >\n            <span className=\"icon-trash view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Delete</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-edit\"\n            onClick={() => {\n              this.handleEditBook();\n            }}\n          >\n            <span className=\"icon-edit view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Edit</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-edit\"\n            onClick={() => {\n              localforage\n                .getItem(this.props.currentBook.key)\n                .then((result: any) => {\n                  this.props.handleMessage(\"Export Successfully\");\n                  this.props.handleMessageBox(true);\n                  FileSaver.saveAs(\n                    new Blob([result]),\n                    this.props.currentBook.name +\n                      `.${this.props.currentBook.format.toLocaleLowerCase()}`\n                  );\n                });\n            }}\n          >\n            <span className=\"icon-export view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Export</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n        </div>\n        <div className=\"sort-dialog-seperator\"></div>\n\n        <div className=\"action-dialog-book-info\">\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Book Name</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.name}\n            </p>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Author</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              <Trans>{this.props.currentBook.author}</Trans>\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Publisher</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.publisher}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>File size</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.size\n                ? parseInt(this.props.currentBook.size / 1024 + \"\") + \"Kb\"\n                : // eslint-disable-next-line\n                  \"0\" + \"Kb\"}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-added\">\n              <Trans>Added at</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {new Date(parseInt(this.props.currentBook.key))\n                .toLocaleString()\n                .replace(/:\\d{1,2}$/, \" \")}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>My Shelves</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {ShelfUtil.getBookPosition(this.props.currentBook.key).map(\n                (item) => (\n                  <>\n                    <Trans>{item}</Trans>&nbsp;\n                  </>\n                )\n              )}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-desc\">\n              <Trans>Description</Trans>:\n            </p>\n            <div className=\"action-dialog-book-detail\">\n              {Parser(this.props.currentBook.description || \" \")}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ActionDialog;\n","import { connect } from \"react-redux\";\nimport {\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleActionDialog,\n  handleReadingBook,\n} from \"../../../store/actions/book\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleFetchBooks,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ActionDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    mode: state.sidebar.mode,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleEditDialog,\n  handleAddDialog,\n  handleDeleteDialog,\n  handleReadingBook,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ActionDialog as any));\n","import React from \"react\";\nimport \"./emptyCover.css\";\n\nconst emptyCover = (props) => {\n  return (\n    <div className=\"empty-cover\" style={{ transform: `scale(${props.scale})` }}>\n      <div\n        className=\"cover-banner\"\n        style={{\n          backgroundColor:\n            props.format === \"PDF\"\n              ? \"rgba(55, 170, 81, 0.7)\"\n              : props.format === \"TXT\"\n              ? \"rgba(251, 191, 16,1)\"\n              : props.format === \"EPUB\"\n              ? \"rgba(33, 165, 241,1)\"\n              : props.format === \"MOBI\"\n              ? \"rgba(255, 108, 110,1)\"\n              : props.format === \"AZW3\"\n              ? \"rgba(33, 165, 241,1)\"\n              : \"rgba(255, 108, 110,1)\",\n        }}\n      >\n        {props.format || \"BOOK\"}\n      </div>\n      <div\n        className=\"cover-title\"\n        style={{ fontSize: props.scale === 1.15 ? \"13px\" : \"\" }}\n      >\n        {props.title}\n      </div>\n      <div className=\"cover-footer\">Koodo Reader</div>\n    </div>\n  );\n};\nexport default emptyCover;\n","//卡片模式下的图书显示\nimport React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport \"./bookCardItem.css\";\nimport { BookCardProps, BookCardState } from \"./interface\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport ActionDialog from \"../dialogs/actionDialog\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { withRouter } from \"react-router-dom\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { isElectron } from \"react-device-detect\";\nimport EmptyCover from \"../emptyCover\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\ndeclare var window: any;\n\nclass BookCardItem extends React.Component<BookCardProps, BookCardState> {\n  epub: any;\n  constructor(props: BookCardProps) {\n    super(props);\n    this.state = {\n      isOpenConfig: false,\n      isFavorite:\n        AddFavorite.getAllFavorite().indexOf(this.props.book.key) > -1,\n      left: 0,\n      top: 0,\n    };\n  }\n\n  async componentDidMount() {\n    let filePath = \"\";\n    //控制是否自动打开本书\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      filePath = await ipcRenderer.sendSync(\"get-file-data\");\n    }\n\n    if (\n      OtherUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key &&\n      !filePath\n    ) {\n      BookUtil.RedirectBook(this.props.book);\n    }\n    this.props.handleReadingBook(this.props.book);\n  }\n  componentWillReceiveProps(nextProps: BookCardProps) {\n    if (nextProps.isDragToLove !== this.props.isDragToLove) {\n      if (\n        nextProps.isDragToLove &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleLoveBook();\n        this.props.handleDragToLove(false);\n      }\n    }\n    if (nextProps.isDragToDelete !== this.props.isDragToDelete) {\n      if (\n        nextProps.isDragToDelete &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleDeleteBook();\n        this.props.handleDragToDelete(false);\n      }\n    }\n  }\n  handleMoreAction = (event: any) => {\n    const e = event || window.event;\n    let x = e.clientX;\n    if (x > document.body.clientWidth - 300) {\n      x = x - 180;\n    }\n    this.setState(\n      {\n        left: x,\n        top:\n          document.body.clientHeight - e.clientY > 300\n            ? e.clientY\n            : e.clientY - 300,\n      },\n      () => {\n        this.props.handleActionDialog(true);\n        this.props.handleReadingBook(this.props.book);\n      }\n    );\n  };\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.book);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    if (Object.keys(AddFavorite.getAllFavorite()).length === 0) {\n      this.props.history.push(\"/manager/empty\");\n    }\n    this.props.handleMessage(\"Cancel Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  //控制按钮的弹出\n  handleConfig = (mode: boolean) => {\n    this.setState({ isOpenConfig: mode });\n  };\n  handleJump = () => {\n    RecentBooks.setRecent(this.props.book.key);\n    BookUtil.RedirectBook(this.props.book);\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n    const actionProps = { left: this.state.left, top: this.state.top };\n    return (\n      <>\n        <div\n          className=\"book-list-item\"\n          onMouseOver={() => {\n            this.handleConfig(true);\n          }}\n          onMouseLeave={() => {\n            this.handleConfig(false);\n          }}\n        >\n          {this.props.book.cover &&\n          this.props.book.cover !== \"noCover\" &&\n          this.props.book.publisher !== \"mobi\" &&\n          this.props.book.publisher !== \"azw3\" &&\n          this.props.book.publisher !== \"txt\" ? (\n            <img\n              className=\"book-item-cover\"\n              src={this.props.book.cover}\n              alt=\"\"\n              onClick={() => {\n                this.handleJump();\n              }}\n              onDragStart={() => {\n                this.props.handleDragItem(this.props.book.key);\n              }}\n              onDragEnd={() => {\n                this.props.handleDragItem(\"\");\n              }}\n            />\n          ) : (\n            <div\n              className=\"book-item-cover\"\n              onClick={() => {\n                this.handleJump();\n              }}\n              onDragStart={() => {\n                this.props.handleDragItem(this.props.book.key);\n              }}\n              onDragEnd={() => {\n                this.props.handleDragItem(\"\");\n              }}\n            >\n              <EmptyCover\n                {...{\n                  format: this.props.book.format,\n                  title: this.props.book.name,\n                  scale: 1,\n                }}\n              />\n            </div>\n          )}\n\n          <p className=\"book-item-title\">{this.props.book.name}</p>\n\n          {this.state.isFavorite ? (\n            <span\n              className=\"icon-love book-loved-icon\"\n              onClick={() => {\n                this.handleCancelLoveBook();\n              }}\n            ></span>\n          ) : null}\n\n          {this.state.isOpenConfig ? (\n            <>\n              {this.props.book.format !== \"PDF\" && (\n                <div className=\"reading-progress-icon\">\n                  <div style={{ position: \"relative\", left: \"4px\" }}>\n                    {percentage\n                      ? Math.floor(percentage * 100) < 10\n                        ? \"0\" + Math.floor(percentage * 100)\n                        : Math.floor(percentage * 100) === 100\n                        ? \"完\"\n                        : Math.floor(percentage * 100)\n                      : \"00\"}\n                    <span className=\"reading-percentage-char\">%</span>\n                  </div>\n                </div>\n              )}\n              <span\n                className=\"icon-more book-more-action\"\n                onClick={(event) => {\n                  this.handleMoreAction(event);\n                }}\n              ></span>\n              <span\n                className=\"icon-love book-love-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n              ></span>\n            </>\n          ) : null}\n        </div>\n\n        {this.props.isOpenActionDialog &&\n        this.props.book.key === this.props.currentBook.key ? (\n          <div className=\"action-dialog-parent\">\n            <ActionDialog {...actionProps} />\n          </div>\n        ) : null}\n      </>\n    );\n  }\n}\nexport default withRouter(BookCardItem);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingBook,\n  handleDragItem,\n  handleDeleteDialog,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport {\n  handleDragToLove,\n  handleDragToDelete,\n} from \"../../store/actions/sidebar\";\nimport Book from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    isDragToLove: state.sidebar.isDragToLove,\n    isDragToDelete: state.sidebar.isDragToDelete,\n    dragItem: state.book.dragItem,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n  handleDragItem,\n  handleDragToLove,\n  handleDragToDelete,\n  handleDeleteDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(Book);\n","//控制列表模式下的图书显示\nimport React from \"react\";\nimport \"./bookListItem.css\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { BookItemProps, BookItemState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport { withRouter } from \"react-router-dom\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\nimport EmptyCover from \"../emptyCover\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\n\nclass BookListItem extends React.Component<BookItemProps, BookItemState> {\n  epub: any;\n  constructor(props: BookItemProps) {\n    super(props);\n    this.state = {\n      isDeleteDialog: false,\n      isFavorite: AddFavorite.getAllFavorite().indexOf(this.props.book.key) > 1,\n    };\n  }\n  componentDidMount() {\n    //控制是否自动打开本书\n    if (\n      OtherUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key\n    ) {\n      BookUtil.RedirectBook(this.props.book);\n    }\n    this.props.handleReadingBook(this.props.book);\n  }\n  componentWillReceiveProps(nextProps: BookItemProps) {\n    if (nextProps.isDragToLove !== this.props.isDragToLove) {\n      if (\n        nextProps.isDragToLove &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleLoveBook();\n        this.props.handleDragToLove(false);\n      }\n    }\n    if (nextProps.isDragToDelete !== this.props.isDragToDelete) {\n      if (\n        nextProps.isDragToDelete &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleDeleteBook();\n        this.props.handleDragToDelete(false);\n      }\n    }\n  }\n  handleDeleteBook = () => {\n    this.props.handleDeleteDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleEditBook = () => {\n    this.props.handleEditDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleAddShelf = () => {\n    this.props.handleAddDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    this.props.handleMessage(\"Cancel Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleResoreBook = () => {\n    AddTrash.clear(this.props.currentBook.key);\n    this.props.handleMessage(\"Restore Successfully\");\n    this.props.handleMessageBox(true);\n    this.props.handleFetchBooks();\n  };\n  handleJump = () => {\n    RecentBooks.setRecent(this.props.book.key);\n    BookUtil.RedirectBook(this.props.book);\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n\n    return (\n      <div className=\"book-list-item-container\">\n        {this.props.book.cover &&\n        this.props.book.cover !== \"noCover\" &&\n        this.props.book.publisher !== \"mobi\" &&\n        this.props.book.publisher !== \"azw3\" &&\n        this.props.book.publisher !== \"txt\" ? (\n          <img\n            className=\"book-item-list-cover\"\n            src={this.props.book.cover}\n            alt=\"\"\n            onClick={() => {\n              this.handleJump();\n            }}\n            onDragStart={() => {\n              this.props.handleDragItem(this.props.book.key);\n            }}\n            onDragEnd={() => {\n              this.props.handleDragItem(\"\");\n            }}\n          />\n        ) : (\n          <div\n            className=\"book-item-list-cover\"\n            onClick={() => {\n              this.handleJump();\n            }}\n            onDragStart={() => {\n              this.props.handleDragItem(this.props.book.key);\n            }}\n            onDragEnd={() => {\n              this.props.handleDragItem(\"\");\n            }}\n          >\n            <EmptyCover\n              {...{\n                format: this.props.book.format,\n                title: this.props.book.name,\n                scale: 0.54,\n              }}\n            />\n          </div>\n        )}\n        <p\n          className=\"book-item-list-title\"\n          onClick={() => {\n            this.handleJump();\n          }}\n        >\n          {this.props.book.name}\n        </p>\n\n        <p className=\"book-item-list-author\">\n          <Trans>\n            {this.props.book.author ? this.props.book.author : \"Unknown Authur\"}\n          </Trans>\n        </p>\n        <p className=\"book-item-list-percentage\">\n          {percentage ? Math.round(percentage * 100) : 0}%\n        </p>\n        {this.props.mode === \"trash\" ? (\n          <div className=\"book-item-list-config\">\n            <span\n              className=\"icon-clockwise list-icon\"\n              onClick={() => {\n                this.handleResoreBook();\n              }}\n            ></span>\n          </div>\n        ) : (\n          <div className=\"book-item-list-config\">\n            {this.state.isFavorite ? (\n              <span\n                className=\"icon-love list-icon\"\n                onClick={() => {\n                  this.handleCancelLoveBook();\n                }}\n                style={{ color: \"#f87356\" }}\n              ></span>\n            ) : (\n              <span\n                className=\"icon-love list-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n              ></span>\n            )}\n\n            <span\n              className=\"icon-shelf list-icon\"\n              onClick={() => {\n                this.handleAddShelf();\n              }}\n            ></span>\n            <span\n              className=\"icon-trash list-icon\"\n              onClick={() => {\n                this.handleDeleteBook();\n              }}\n            ></span>\n            <span\n              className=\"icon-edit list-icon\"\n              onClick={() => {\n                this.handleEditBook();\n              }}\n            ></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(BookListItem);\n","//控制列表模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleReadingBook,\n  handleDragItem,\n} from \"../../store/actions/book\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleFetchBooks,\n} from \"../../store/actions/manager\";\nimport {\n  handleDragToLove,\n  handleDragToDelete,\n} from \"../../store/actions/sidebar\";\nimport { stateType } from \"../../store\";\nimport BookItem from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isReading: state.book.isReading,\n    percentage: state.progressPanel.percentage,\n    currentBook: state.book.currentBook,\n    isDragToLove: state.sidebar.isDragToLove,\n    isDragToDelete: state.sidebar.isDragToDelete,\n    dragItem: state.book.dragItem,\n    mode: state.sidebar.mode,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleMessageBox,\n  handleMessage,\n  handleDragItem,\n  handleDragToLove,\n  handleDragToDelete,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(BookItem as any));\n","//卡片模式下的图书显示\nimport React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport \"./bookCoverItem.css\";\nimport { BookCoverProps, BookCoverState } from \"./interface\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport ActionDialog from \"../dialogs/actionDialog\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { withRouter } from \"react-router-dom\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { isElectron } from \"react-device-detect\";\nimport EmptyCover from \"../emptyCover\";\nimport Parser from \"html-react-parser\";\nimport { Trans } from \"react-i18next\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\n\ndeclare var window: any;\n\nclass BookCoverItem extends React.Component<BookCoverProps, BookCoverState> {\n  epub: any;\n  constructor(props: BookCoverProps) {\n    super(props);\n    this.state = {\n      isOpenConfig: false,\n      isFavorite:\n        AddFavorite.getAllFavorite().indexOf(this.props.book.key) > -1,\n      left: 0,\n      top: 0,\n    };\n  }\n\n  componentDidMount() {\n    let filePath = \"\";\n    //控制是否自动打开本书\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      filePath = ipcRenderer.sendSync(\"get-file-data\");\n    }\n\n    if (\n      OtherUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key &&\n      !filePath\n    ) {\n      BookUtil.RedirectBook(this.props.book);\n    }\n    this.props.handleReadingBook(this.props.book);\n  }\n  componentWillReceiveProps(nextProps: BookCoverProps) {\n    if (nextProps.isDragToLove !== this.props.isDragToLove) {\n      if (\n        nextProps.isDragToLove &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleLoveBook();\n        this.props.handleDragToLove(false);\n      }\n    }\n    if (nextProps.isDragToDelete !== this.props.isDragToDelete) {\n      if (\n        nextProps.isDragToDelete &&\n        this.props.dragItem === this.props.book.key\n      ) {\n        this.handleDeleteBook();\n        this.props.handleDragToDelete(false);\n      }\n    }\n  }\n  handleMoreAction = (event: any) => {\n    const e = event || window.event;\n    let x = e.clientX;\n    if (x > document.body.clientWidth - 300 && !this.props.isCollapsed) {\n      x = x - 180;\n    }\n    this.setState(\n      {\n        left: x,\n        top:\n          document.body.clientHeight - e.clientY > 300\n            ? e.clientY\n            : e.clientY - 300,\n      },\n      () => {\n        this.props.handleActionDialog(true);\n        this.props.handleReadingBook(this.props.book);\n      }\n    );\n  };\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.book);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    this.props.handleMessage(\"Add Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    this.props.handleMessage(\"Cancel Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  //控制按钮的弹出\n  handleConfig = (mode: boolean) => {\n    this.setState({ isOpenConfig: mode });\n  };\n  handleJump = () => {\n    RecentBooks.setRecent(this.props.book.key);\n\n    BookUtil.RedirectBook(this.props.book);\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n    const actionProps = { left: this.state.left, top: this.state.top };\n    return (\n      <>\n        <div\n          className=\"book-list-cover-item\"\n          onMouseOver={() => {\n            this.handleConfig(true);\n          }}\n          onMouseLeave={() => {\n            this.handleConfig(false);\n          }}\n        >\n          {this.props.book.cover &&\n          this.props.book.cover !== \"noCover\" &&\n          this.props.book.publisher !== \"mobi\" &&\n          this.props.book.publisher !== \"azw3\" &&\n          this.props.book.publisher !== \"txt\" ? (\n            <img\n              className=\"book-cover-item-cover\"\n              src={this.props.book.cover}\n              alt=\"\"\n              onClick={() => {\n                this.handleJump();\n              }}\n              onDragStart={() => {\n                this.props.handleDragItem(this.props.book.key);\n              }}\n              onDragEnd={() => {\n                this.props.handleDragItem(\"\");\n              }}\n            />\n          ) : (\n            <div\n              className=\"book-cover-item-cover\"\n              onClick={() => {\n                this.handleJump();\n              }}\n              onDragStart={() => {\n                this.props.handleDragItem(this.props.book.key);\n              }}\n              onDragEnd={() => {\n                this.props.handleDragItem(\"\");\n              }}\n            >\n              <EmptyCover\n                {...{\n                  format: this.props.book.format,\n                  title: this.props.book.name,\n                  scale: 1.15,\n                }}\n              />\n            </div>\n          )}\n\n          <p className=\"book-cover-item-title\">{this.props.book.name}</p>\n          <p className=\"book-cover-item-author\">\n            <Trans>Author</Trans>:&nbsp;\n            <Trans>{this.props.book.author}</Trans>\n          </p>\n          <p className=\"book-cover-item-author\">\n            <Trans>Publisher</Trans>:&nbsp;\n            <Trans>{this.props.book.publisher}</Trans>\n          </p>\n          <div className=\"book-cover-item-desc\">\n            <Trans>Description</Trans>:&nbsp;\n            {this.props.book.description ? (\n              Parser(this.props.book.description)\n            ) : (\n              <Trans>Empty</Trans>\n            )}\n          </div>\n          {this.state.isFavorite ? (\n            <span\n              className=\"icon-love book-loved-icon\"\n              onClick={() => {\n                this.handleCancelLoveBook();\n              }}\n              style={{ right: \"274px\", bottom: \"25px\" }}\n            ></span>\n          ) : null}\n\n          {this.state.isOpenConfig ? (\n            <>\n              {this.props.book.format !== \"PDF\" && (\n                <div\n                  className=\"reading-progress-icon\"\n                  style={{ right: \"270px\" }}\n                >\n                  <div style={{ position: \"relative\", left: \"4px\" }}>\n                    {percentage\n                      ? Math.floor(percentage * 100) < 10\n                        ? \"0\" + Math.floor(percentage * 100)\n                        : Math.floor(percentage * 100) === 100\n                        ? \"完\"\n                        : Math.floor(percentage * 100)\n                      : \"00\"}\n                    <span className=\"reading-percentage-char\">%</span>\n                  </div>\n                </div>\n              )}\n              <span\n                className=\"icon-more book-more-action\"\n                onClick={(event) => {\n                  this.handleMoreAction(event);\n                }}\n                style={{ right: \"270px\" }}\n              ></span>\n              <span\n                className=\"icon-love book-love-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n                style={{ right: \"275px\", bottom: \"25px\" }}\n              ></span>\n            </>\n          ) : null}\n        </div>\n        {this.props.isOpenActionDialog &&\n        this.props.book.key === this.props.currentBook.key ? (\n          <ActionDialog {...actionProps} />\n        ) : null}\n      </>\n    );\n  }\n}\nexport default withRouter(BookCoverItem);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingBook,\n  handleDragItem,\n  handleDeleteDialog,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport {\n  handleDragToLove,\n  handleDragToDelete,\n} from \"../../store/actions/sidebar\";\nimport BookCoverItem from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    isDragToLove: state.sidebar.isDragToLove,\n    isDragToDelete: state.sidebar.isDragToDelete,\n    isCollapsed: state.sidebar.isCollapsed,\n    dragItem: state.book.dragItem,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n  handleDragItem,\n  handleDragToLove,\n  handleDragToDelete,\n  handleDeleteDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(BookCoverItem);\n","import React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { DeletePopupProps } from \"./interface\";\n\nclass DeletePopup extends React.Component<DeletePopupProps> {\n  handleCancel = () => {\n    this.props.handleDeletePopup(false);\n  };\n  handleComfirm = () => {\n    //从列表删除和从图书库删除判断\n    this.props.handleDeletePopup(false);\n    this.props.handleDeleteOpearion();\n    this.props.handleMessage(\"Delete Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  render() {\n    return (\n      <div className=\"delete-dialog-container\">\n        <div className=\"delete-dialog-title\">\n          <Trans>{this.props.title}</Trans>\n        </div>\n\n        <div className=\"delete-dialog-book\">\n          <div className=\"delete-dialog-book-title\">{this.props.name}</div>\n        </div>\n\n        <div className=\"delete-dialog-other-option\">\n          <Trans>{this.props.description}</Trans>\n        </div>\n\n        <div\n          className=\"delete-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"delete-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Delete</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DeletePopup;\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchBooks,\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport DeletePopup from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DeletePopup as any));\n","export const emptyList = [\n  {\n    mode: \"home\",\n    main: \"Empty Library\",\n    sub: \"Click the top-right button to add books\",\n  },\n  {\n    mode: \"favorite\",\n    main: \"No Favorite Books\",\n    sub:\n      \"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\",\n  },\n  {\n    mode: \"bookmark\",\n    main: \"Empty Bookmark\",\n    sub: \"Move your mouse on the top edge of the reader\",\n  },\n  {\n    mode: \"note\",\n    main: \"Empty Note\",\n    sub: \"Select any text and click the Add-Note button on the popup Menu\",\n  },\n  {\n    mode: \"digest\",\n    main: \"Empty Digest\",\n    sub: \"Select any text and click the Highlight button on the popup Menu\",\n  },\n  {\n    mode: \"shelf\",\n    main: \"Empty Shelf\",\n    sub: \"Move your mouse on the top of any book\",\n  },\n\n  {\n    mode: \"trash\",\n    main: \"Empty Recycle Bin\",\n    sub: \"The deleted books will show up here\",\n  },\n];\n","//为空页面\nimport React from \"react\";\nimport \"./emptyPage.css\";\nimport { emptyList } from \"../../constants/emptyList\";\nimport { Trans } from \"react-i18next\";\nimport { EmptyPageProps, EmptyPageState } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\n\nclass EmptyPage extends React.Component<EmptyPageProps, EmptyPageState> {\n  render() {\n    const renderEmptyList = () => {\n      return emptyList.map((item) => {\n        return (\n          <div\n            className=\"empty-page-info-container\"\n            key={item.mode}\n            style={\n              this.props.mode === item.mode ? {} : { visibility: \"hidden\" }\n            }\n          >\n            <div className=\"empty-page-info-main\">\n              <Trans>{item.main}</Trans>\n            </div>\n            <div className=\"empty-page-info-sub\">\n              <Trans>{item.sub}</Trans>\n            </div>\n          </div>\n        );\n      });\n    };\n    return (\n      <div\n        className=\"empty-page-container\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 100px)\", left: \"100px\" }\n            : {}\n        }\n      >\n        <div\n          className=\"empty-illustration-container\"\n          style={{ width: \"calc(100% - 50px)\" }}\n        >\n          <img\n            src={\n              OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n                ? \"./assets/empty_light.svg\"\n                : \"./assets/empty.svg\"\n            }\n            alt=\"\"\n            className=\"empty-page-illustration\"\n          />\n        </div>\n\n        {renderEmptyList()}\n      </div>\n    );\n  }\n}\n\nexport default EmptyPage;\n","//为空页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport EmptyPage from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    mode: state.sidebar.mode,\n    isCollapsed: state.sidebar.isCollapsed,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(EmptyPage as any));\n","export const viewMode = [\n  {\n    name: \"Card Mode\",\n    icon: \"grid\",\n    mode: \"card\",\n  },\n  {\n    name: \"List Mode\",\n    icon: \"menu\",\n    mode: \"list\",\n  },\n\n  {\n    name: \"Cover Mode\",\n    icon: \"cover\",\n    mode: \"cover\",\n  },\n];\n","//为空页面\nimport React from \"react\";\nimport \"./viewMode.css\";\nimport { ViewModeProps, ViewModeState } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { viewMode } from \"../../constants/viewMode\";\n\nclass ViewMode extends React.Component<ViewModeProps, ViewModeState> {\n  constructor(props: ViewModeProps) {\n    super(props);\n    this.state = {};\n  }\n  handleChange = (mode: string) => {\n    OtherUtil.setReaderConfig(\"viewMode\", mode);\n    this.props.handleFetchList();\n  };\n  render() {\n    return (\n      <div className=\"book-list-view\">\n        {viewMode.map((item) => (\n          <Tooltip\n            key={item.name}\n            title={this.props.t(item.name)}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"card-list-mode\"\n              onClick={() => {\n                this.handleChange(item.mode);\n              }}\n              style={this.props.viewMode !== item.mode ? { opacity: 0.5 } : {}}\n            >\n              <span className={`icon-${item.icon}`}></span>\n            </div>\n          </Tooltip>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default ViewMode;\n","//为空页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ViewMode from \"./component\";\nimport { handleFetchList } from \"../../store/actions/manager\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    viewMode: state.manager.viewMode,\n  };\n};\nconst actionCreator = { handleFetchList };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ViewMode as any));\n","//全部图书，最近阅读，搜索结果，排序结果的数据\nimport React from \"react\";\nimport \"./booklist.css\";\nimport BookCardItem from \"../../../components/bookCardtem\";\nimport BookListItem from \"../../../components/bookListItem\";\nimport BookCoverItem from \"../../../components/bookCoverItem\";\nimport AddFavorite from \"../../../utils/readUtils/addFavorite\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../../model/Book\";\nimport { Trans } from \"react-i18next\";\nimport { BookListProps, BookListState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport localforage from \"localforage\";\nimport DeletePopup from \"../../../components/dialogs/deletePopup\";\nimport Empty from \"../../emptyPage\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport ViewMode from \"../../../components/viewMode\";\nimport BackUtil from \"../../../utils/syncUtils/backupUtil\";\nimport { isElectron } from \"react-device-detect\";\n\nclass BookList extends React.Component<BookListProps, BookListState> {\n  constructor(props: BookListProps) {\n    super(props);\n    this.state = {\n      shelfIndex: 0,\n      isOpenDelete: false,\n      favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n    };\n  }\n  componentWillMount() {\n    if (this.props.mode === \"trash\") {\n      this.props.handleFetchBooks(true);\n    } else {\n      this.props.handleFetchBooks(false);\n    }\n  }\n  componentDidMount() {\n    if (!this.props.books || !this.props.books[0]) {\n      return <Redirect to=\"manager/empty\" />;\n    }\n  }\n\n  handleKeyFilter = (items: any[], arr: string[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items.forEach((subItem: any) => {\n        if (subItem.key === item) {\n          itemArr.push(subItem);\n        }\n      });\n    });\n    return itemArr;\n  };\n\n  //获取书架数据\n  handleShelf(items: any, index: number) {\n    //获取书架名\n    if (index < 1) return items;\n    let shelfTitle = Object.keys(ShelfUtil.getShelf());\n    //获取当前书架名\n    let currentShelfTitle = shelfTitle[index];\n    if (!currentShelfTitle) return items;\n    //获取当前书架的图书列表\n    let currentShelfList = ShelfUtil.getShelf()[currentShelfTitle];\n    //根据图书列表获取到图书数据\n    let shelfItems = items.filter((item: { key: number }) => {\n      return currentShelfList.indexOf(item.key) > -1;\n    });\n    return shelfItems;\n  }\n  //控制卡片模式和列表模式的切换\n  handleChange = (mode: string) => {\n    OtherUtil.setReaderConfig(\"viewMode\", mode);\n    this.props.handleFetchList();\n  };\n  //根据搜索图书index获取到搜索出的图书\n  handleIndexFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n\n    return itemArr;\n  };\n  renderBookList = () => {\n    //根据不同的场景获取不同的图书数据\n    let books = this.props.isSearch\n      ? this.handleIndexFilter(this.props.books, this.props.searchResults)\n      : this.props.shelfIndex > 0\n      ? this.handleShelf(this.props.books, this.props.shelfIndex)\n      : this.props.mode === \"favorite\" && !this.props.isBookSort\n      ? this.handleKeyFilter(this.props.books, AddFavorite.getAllFavorite())\n      : this.props.mode === \"favorite\" && this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.handleKeyFilter(this.props.books, AddFavorite.getAllFavorite()),\n          //返回排序后的图书index\n          SortUtil.sortBooks(this.props.books, this.props.bookSortCode) || []\n        )\n      : this.props.isBookSort && this.props.bookSortCode.sort !== 0\n      ? this.handleIndexFilter(\n          this.props.books,\n          //返回排序后的图书index\n          SortUtil.sortBooks(this.props.books, this.props.bookSortCode) || []\n        )\n      : this.handleKeyFilter(\n          this.props.books,\n          this.props.bookSortCode.order === 1\n            ? RecordRecent.getAllRecent()\n            : RecordRecent.getAllRecent().reverse()\n        );\n    if (this.props.mode === \"shelf\" && books.length === 0) {\n      return (\n        <div\n          style={{\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100%\",\n            zIndex: -1,\n          }}\n        >\n          <Empty />\n        </div>\n      );\n    }\n\n    return books.map((item: BookModel, index: number) => {\n      return this.props.viewMode === \"list\" ? (\n        <BookListItem\n          {...{\n            key: item.key,\n            book: item,\n          }}\n        />\n      ) : this.props.viewMode === \"card\" ? (\n        <BookCardItem key={item.key} book={item} />\n      ) : (\n        <BookCoverItem\n          {...{\n            key: item.key,\n            book: item,\n          }}\n        />\n      );\n    });\n  };\n  //切换书架\n  handleShelfItem = (event: any) => {\n    let index = event.target.value.split(\",\")[1];\n    this.setState({ shelfIndex: index });\n    this.props.handleShelfIndex(index);\n    if (index > 0) {\n      this.props.handleMode(\"shelf\");\n    } else {\n      this.props.handleMode(\"home\");\n    }\n  };\n  handleDeleteShelf = () => {\n    if (this.state.shelfIndex < 1) return;\n    let shelfTitles = Object.keys(ShelfUtil.getShelf());\n    //获取当前书架名\n    let currentShelfTitle = shelfTitles[this.state.shelfIndex];\n    ShelfUtil.removeShelf(currentShelfTitle);\n    this.setState({ shelfIndex: 0 }, () => {\n      this.props.handleShelfIndex(0);\n      this.props.handleMode(\"shelf\");\n    });\n  };\n  renderShelfList = () => {\n    let shelfList = ShelfUtil.getShelf();\n    let shelfTitle = Object.keys(shelfList);\n    return shelfTitle.map((item, index) => {\n      return (\n        <option\n          value={[item, index.toString()]}\n          key={index}\n          className=\"add-dialog-shelf-list-option\"\n          selected={this.props.shelfIndex === index ? true : false}\n        >\n          {this.props.t(item === \"New\" ? \"All Books\" : item)}\n        </option>\n      );\n    });\n  };\n  handleDeletePopup = (isOpenDelete: boolean) => {\n    this.setState({ isOpenDelete });\n  };\n  render() {\n    if (\n      (this.state.favoriteBooks === 0 && this.props.mode === \"favorite\") ||\n      !this.props.books ||\n      !this.props.books[0]\n    ) {\n      return <Redirect to=\"/manager/empty\" />;\n    }\n    if (isElectron) {\n      //兼容之前的版本\n      localforage.getItem(this.props.books[0].key).then((result) => {\n        if (result) {\n          BackUtil.backup(\n            this.props.books,\n            this.props.notes,\n            this.props.bookmarks,\n            () => {},\n            4,\n            () => {}\n          );\n        }\n      });\n    }\n    const deletePopupProps = {\n      mode: \"shelf\",\n      name: Object.keys(ShelfUtil.getShelf())[this.state.shelfIndex],\n      title: \"Delete this shelf\",\n      description: \"This action will clear and remove this shelf\",\n      handleDeletePopup: this.handleDeletePopup,\n      handleDeleteOpearion: this.handleDeleteShelf,\n    };\n    OtherUtil.setReaderConfig(\"totalBooks\", this.props.books.length.toString());\n    return (\n      <>\n        {this.state.isOpenDelete && <DeletePopup {...deletePopupProps} />}\n        <ViewMode />\n\n        <div className=\"booklist-shelf-container\">\n          <p className=\"general-setting-title\" style={{ display: \"inline\" }}>\n            <Trans>My Shelves</Trans>\n          </p>\n          <select\n            className=\"booklist-shelf-list\"\n            onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\n              this.handleShelfItem(event);\n            }}\n          >\n            {this.renderShelfList()}\n          </select>\n          {this.state.shelfIndex > 0 ? (\n            <span\n              className=\"icon-trash delete-shelf-icon\"\n              onClick={() => {\n                this.handleDeletePopup(true);\n              }}\n            ></span>\n          ) : null}\n        </div>\n\n        <div\n          className=\"book-list-container-parent\"\n          style={\n            this.props.isCollapsed\n              ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n              : {}\n          }\n        >\n          <div className=\"book-list-container\">\n            <ul className=\"book-list-item-box\">{this.renderBookList()}</ul>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(BookList);\n","//全部图书，最近阅读，搜索结果，排序结果的数据\nimport { connect } from \"react-redux\";\nimport {\n  handleFetchList,\n  handleFetchBooks,\n} from \"../../../store/actions/manager\";\nimport { handleMode, handleShelfIndex } from \"../../../store/actions/sidebar\";\nimport { handleDeleteDialog } from \"../../../store/actions/book\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport BookList from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    mode: state.sidebar.mode,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n\n    shelfIndex: state.sidebar.shelfIndex,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n    isSearch: state.manager.isSearch,\n    isBookSort: state.manager.isBookSort,\n    viewMode: state.manager.viewMode,\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleFetchList,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n  handleFetchBooks,\n};\nexport default connect(\n  mappropsToProps,\n  actionCreator\n)(withTranslation()(BookList as any));\n","//全部图书，最近阅读，搜索结果，排序结果的数据\nimport React from \"react\";\nimport \"./booklist.css\";\nimport Book from \"../../../components/bookCardtem\";\nimport BookItem from \"../../../components/bookListItem\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../../model/Book\";\nimport { Trans } from \"react-i18next\";\nimport { BookListProps, BookListState } from \"./interface\";\nimport Empty from \"../../emptyPage\";\nimport { withRouter } from \"react-router-dom\";\nimport ViewMode from \"../../../components/viewMode\";\n\nclass BookList extends React.Component<BookListProps, BookListState> {\n  constructor(props: BookListProps) {\n    super(props);\n    this.state = {};\n  }\n  componentWillMount() {\n    this.props.handleFetchBooks(true);\n  }\n  handleKeyFilter = (items: any[], arr: string[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items.forEach((subItem: any) => {\n        if (subItem.key === item) {\n          itemArr.push(subItem);\n        }\n      });\n    });\n\n    return itemArr;\n  };\n\n  //根据搜索图书index获取到搜索出的图书\n  handleIndexFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n\n    return itemArr;\n  };\n  renderBookList = () => {\n    //根据不同的场景获取不同的图书数据\n    let books = !this.props.isBookSort\n      ? this.handleKeyFilter(this.props.deletedBooks, AddTrash.getAllTrash())\n      : this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.handleKeyFilter(this.props.deletedBooks, AddTrash.getAllTrash()),\n          //返回排序后的图书index\n          SortUtil.sortBooks(\n            this.props.deletedBooks,\n            this.props.bookSortCode\n          ) || []\n        )\n      : this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.props.deletedBooks,\n          //返回排序后的图书index\n          SortUtil.sortBooks(\n            this.props.deletedBooks,\n            this.props.bookSortCode\n          ) || []\n        )\n      : this.handleKeyFilter(\n          this.props.deletedBooks,\n          RecordRecent.getAllRecent()\n        );\n    if (books.length === 0) {\n      return (\n        <div\n          style={{\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100%\",\n            zIndex: -1,\n          }}\n        >\n          <Empty />\n        </div>\n      );\n    }\n\n    return books.map((item: BookModel, index: number) => {\n      return this.props.viewMode === \"list\" ? (\n        <BookItem\n          {...{\n            key: item.key,\n            book: item,\n          }}\n        />\n      ) : (\n        <Book key={item.key} book={item} />\n      );\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <ViewMode />\n        <div\n          className=\"booklist-delete-container\"\n          onClick={() => {\n            this.props.handleDeleteDialog(true);\n          }}\n        >\n          <Trans>Delete All Books</Trans>\n        </div>\n\n        <div\n          className=\"book-list-container-parent\"\n          style={\n            this.props.isCollapsed\n              ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n              : {}\n          }\n        >\n          <div className=\"book-list-container\">\n            <ul className=\"book-list-item-box\">{this.renderBookList()}</ul>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(BookList);\n","//全部图书，最近阅读，搜索结果，排序结果的数据\nimport { connect } from \"react-redux\";\nimport {\n  handleFetchList,\n  handleFetchBooks,\n} from \"../../../store/actions/manager\";\nimport { handleMode, handleShelfIndex } from \"../../../store/actions/sidebar\";\nimport { handleDeleteDialog } from \"../../../store/actions/book\";\nimport { stateType } from \"../../../store\";\nimport BookList from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    deletedBooks: state.manager.deletedBooks,\n    mode: state.sidebar.mode,\n    isBookSort: state.manager.isBookSort,\n    isCollapsed: state.sidebar.isCollapsed,\n    viewMode: state.manager.viewMode,\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleFetchList,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n  handleFetchBooks,\n};\nexport default connect(mappropsToProps, actionCreator)(BookList);\n","export function handleOpenMenu(isOpenMenu: boolean) {\n  return { type: \"HANDLE_OPEN_MENU\", payload: isOpenMenu };\n}\nexport function handleMenuMode(menuMode: string) {\n  return { type: \"HANDLE_MENU_MODE\", payload: menuMode };\n}\nexport function handleOpenHighlight(isOpenHighlight: boolean) {\n  return { type: \"HANDLE_OPEN_HIGHLIGHT\", payload: isOpenHighlight };\n}\nexport function handleChangeDirection(isChangeDirection: boolean) {\n  return { type: \"HANDLE_CHANGE_DIRECTION\", payload: isChangeDirection };\n}\nexport function handleShowBookmark(isShowBookmark: boolean) {\n  return { type: \"HANDLE_SHOW_BOOKMARK\", payload: isShowBookmark };\n}\nexport function handleSelection(selection: string) {\n  return { type: \"HANDLE_SELECTION\", payload: selection };\n}\n","class TagUtil {\n  static setTags(tagName: string) {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    const index = tagArr.indexOf(tagName);\n    if (index > -1) {\n      tagArr.splice(index, 1);\n      tagArr.unshift(tagName);\n    } else {\n      tagArr.unshift(tagName);\n    }\n\n    localStorage.setItem(\"noteTags\", JSON.stringify(tagArr));\n  }\n\n  static clear(tagName: string) {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    const index = tagArr.indexOf(tagName);\n    if (index > -1) {\n      tagArr.splice(index, 1);\n    }\n    localStorage.setItem(\"noteTags\", JSON.stringify(tagArr));\n  }\n  static getAllTags() {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    return tagArr || [];\n  }\n}\n\nexport default TagUtil;\n","//我的书摘页面\nimport React from \"react\";\nimport \"./deleteIcon.css\";\nimport { DeleteIconProps, DeleteIconStates } from \"./interface\";\nimport localforage from \"localforage\";\nimport TagUtil from \"../../utils/readUtils/tagUtil\";\nimport DeletePopup from \"../dialogs/deletePopup\";\n\nclass DeleteIcon extends React.Component<DeleteIconProps, DeleteIconStates> {\n  constructor(props: DeleteIconProps) {\n    super(props);\n    this.state = {\n      deleteIndex: -1,\n      isOpenDelete: false,\n    };\n  }\n\n  handleDelete = () => {\n    let deleteItems =\n      this.props.mode === \"notes\"\n        ? this.props.notes\n        : this.props.mode === \"tags\"\n        ? TagUtil.getAllTags()\n        : this.props.bookmarks;\n    let deleteFunc =\n      this.props.mode === \"notes\"\n        ? this.props.handleFetchNotes\n        : this.props.handleFetchBookmarks;\n    deleteItems.forEach((item: any, index: number) => {\n      if (this.props.mode === \"tags\") {\n        item === this.props.tagName && TagUtil.clear(item);\n        return;\n      }\n      if (item.key === this.props.itemKey) {\n        deleteItems.splice(index, 1);\n        if (deleteItems.length === 0) {\n          localforage\n            .removeItem(this.props.mode)\n            .then(() => {\n              deleteFunc();\n              this.props.handleMessage(\"Delete Successfully\");\n              this.props.handleMessageBox(true);\n            })\n            .catch(() => {\n              console.log(\"删除失败\");\n            });\n        } else {\n          localforage\n            .setItem(this.props.mode, deleteItems)\n            .then(() => {\n              deleteFunc();\n              this.props.handleMessage(\"Delete Successfully\");\n              this.props.handleMessageBox(true);\n            })\n            .catch(() => {\n              console.log(\"修改失败\");\n            });\n        }\n      }\n    });\n  };\n  handleDeletePopup = (isOpenDelete: boolean) => {\n    this.setState({ isOpenDelete });\n    if (!isOpenDelete) {\n      this.props.handleChangeTag(this.props.index);\n    }\n  };\n  render() {\n    const deletePopupProps = {\n      name: this.props.tagName,\n      title: \"Delete this tag\",\n      description: \"This action will clear and remove this tag\",\n      handleDeletePopup: this.handleDeletePopup,\n      handleDeleteOpearion: this.handleDelete,\n    };\n    return (\n      <>\n        {this.state.isOpenDelete && <DeletePopup {...deletePopupProps} />}\n        <div\n          className=\"delete-digest-button\"\n          onClick={() => {\n            this.props.mode === \"tags\"\n              ? this.handleDeletePopup(true)\n              : this.handleDelete();\n          }}\n        >\n          <span className=\"icon-close delete-digest-icon\"></span>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default DeleteIcon;\n","//我的书摘页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport {\n  handleFetchBookmarks,\n  handleFetchNotes,\n} from \"../../store/actions/reader\";\nimport { handleShowBookmark } from \"../../store/actions/viewArea\";\nimport DeleteIcon from \"./component\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleMessageBox,\n  handleMessage,\n  handleShowBookmark,\n};\nexport default connect(mapStateToProps, actionCreator)(DeleteIcon as any);\n","//笔记书摘的标签\nimport React from \"react\";\nimport \"./noteTag.css\";\nimport { NoteTagProps, NoteTagState } from \"./interface\";\nimport TagUtil from \"../../utils/readUtils/tagUtil\";\nimport DeleteIcon from \"../deleteIcon\";\nimport { Trans } from \"react-i18next\";\n\nclass NoteTag extends React.Component<NoteTagProps, NoteTagState> {\n  constructor(props: NoteTagProps) {\n    super(props);\n    this.state = {\n      tagIndex: [],\n      isInput: false,\n      deleteIndex: -1,\n      isShowTags: false,\n    };\n  }\n  componentDidMount() {\n    if (this.props.isReading) {\n      this.setState({ tagIndex: this.tagToIndex(this.props.tag) });\n    }\n  }\n  componentWillReceiveProps(nextProps: NoteTagProps) {\n    if (\n      this.props.isReading &&\n      nextProps.tag &&\n      nextProps.tag.length > 0 &&\n      this.props.tag !== nextProps.tag\n    ) {\n      this.setState({ tagIndex: this.tagToIndex(nextProps.tag) });\n    }\n  }\n  tagToIndex = (tag: string[]) => {\n    let temp: number[] = [];\n    if (!tag) return [];\n    for (let i = 0; i < TagUtil.getAllTags().length; i++) {\n      if (tag.indexOf(TagUtil.getAllTags()[i]) > -1) {\n        temp.push(i);\n      }\n    }\n    return temp;\n  };\n  indextoTag = (tagIndex: number[]) => {\n    let temp: any = [];\n    for (let i = 0; i < tagIndex.length; i++) {\n      temp.push(TagUtil.getAllTags()[tagIndex[i]]);\n    }\n    return temp;\n  };\n  handleChangeTag = (index: number) => {\n    let temp: number[] = [...this.state.tagIndex];\n    if (this.state.tagIndex.indexOf(index) > -1) {\n      temp = [...this.state.tagIndex];\n      let indexResult = temp.indexOf(index);\n      temp.splice(indexResult, 1);\n      this.setState({ tagIndex: temp });\n      this.props.handleTag(this.indextoTag(temp));\n    } else {\n      temp.push(index);\n      this.setState({ tagIndex: temp });\n      this.props.handleTag(this.indextoTag(temp));\n    }\n  };\n  handleAddTag = (event: any) => {\n    this.setState({ isInput: false });\n    if (!event.target.value) {\n      return;\n    }\n    TagUtil.setTags(event.target.value);\n    this.setState({ tagIndex: [] });\n    this.props.handleTag(this.indextoTag([]));\n  };\n  handleInput = () => {\n    this.setState({ isInput: true }, () => {\n      document.getElementById(\"newTag\")?.focus();\n    });\n  };\n  handleShowTags = (bool: boolean) => {\n    this.setState({ isShowTags: bool });\n  };\n  render() {\n    const renderTag = () => {\n      let noteTags = this.props.isCard ? this.props.tag : TagUtil.getAllTags();\n      return noteTags.map((item: any, index: number) => {\n        return (\n          <li\n            key={item}\n            className={\n              this.state.tagIndex.indexOf(index) > -1 && !this.props.isCard\n                ? \"tag-list-item active-tag \"\n                : \"tag-list-item\"\n            }\n          >\n            <div className=\"delete-tag-container\">\n              {this.state.tagIndex.indexOf(index) > -1 &&\n              !this.props.isReading &&\n              !this.props.isCard ? (\n                <DeleteIcon\n                  {...{\n                    tagName: item,\n                    mode: \"tags\",\n                    index: index,\n                    handleChangeTag: this.handleChangeTag,\n                  }}\n                />\n              ) : null}\n            </div>\n            <div\n              className=\"center\"\n              onClick={() => {\n                this.handleChangeTag(index);\n              }}\n            >\n              <Trans>{item}</Trans>\n            </div>\n          </li>\n        );\n      });\n    };\n    return (\n      <div\n        className=\"note-tag-container\"\n        style={this.props.isReading ? { width: \"1999px\" } : {}}\n      >\n        {this.props.isReading || this.props.isCard ? null : (\n          <div className=\"tag-title\">\n            <Trans>All Tags</Trans>\n            <span\n              className=\"icon-dropdown tag-dropdown-icon\"\n              onClick={() => {\n                this.handleShowTags(!this.state.isShowTags);\n              }}\n            ></span>\n          </div>\n        )}\n\n        {(this.state.isShowTags || this.props.isReading) && (\n          <ul className=\"tag-container\">\n            {!this.props.isCard && (\n              <li\n                className=\"tag-list-item-new\"\n                onClick={() => {\n                  this.handleInput();\n                }}\n                style={this.state.isInput ? { width: \"80px\" } : {}}\n              >\n                <div className=\"center\">\n                  {this.state.isInput ? (\n                    <input\n                      type=\"text\"\n                      name=\"newTag\"\n                      id=\"newTag\"\n                      onBlur={(event) => {\n                        this.handleAddTag(event);\n                      }}\n                    />\n                  ) : (\n                    <span className=\"icon-add\"></span>\n                  )}\n                </div>\n              </li>\n            )}\n            {renderTag()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\nexport default NoteTag;\n","import { connect } from \"react-redux\";\nimport { handleSearchResults, handleSearch } from \"../../store/actions/manager\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NoteTag from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isReading: state.book.isReading,\n    noteKey: state.reader.noteKey,\n  };\n};\nconst actionCreator = {\n  handleSearchResults,\n  handleSearch,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NoteTag as any));\n","//我的书摘，笔记的卡片\nimport React from \"react\";\nimport \"./cardList.css\";\nimport NoteModel from \"../../../model/Note\";\nimport { Trans } from \"react-i18next\";\nimport { CardListProps, CardListStates } from \"./interface\";\nimport DeleteIcon from \"../../../components/deleteIcon\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { withRouter } from \"react-router-dom\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport { Redirect } from \"react-router-dom\";\nimport NoteTag from \"../../../components/noteTag\";\nimport BookUtil from \"../../../utils/fileUtils/bookUtil\";\n\nclass CardList extends React.Component<CardListProps, CardListStates> {\n  constructor(props: CardListProps) {\n    super(props);\n    this.state = { deleteKey: \"\" };\n  }\n  //根据bookkey获取\n  handleBookName = (bookKey: string) => {\n    let { books } = this.props;\n    let bookName = \"\";\n    for (let i = 0; i < this.props.books.length; i++) {\n      if (books[i].key === bookKey) {\n        bookName = books[i].name;\n        break;\n      }\n    }\n    return bookName;\n  };\n  handleShowDelete = (deleteKey: string) => {\n    this.setState({ deleteKey });\n  };\n  handleJump = (cfi: string, bookKey: string, percentage: number) => {\n    let { books } = this.props;\n    let book: any;\n    //根据bookKey获取指定的book和epub\n    for (let i = 0; i < books.length; i++) {\n      if (books[i].key === bookKey) {\n        book = books[i];\n        break;\n      }\n    }\n    if (!book) {\n      this.props.handleMessage(\"Book not exist\");\n      this.props.handleMessageBox(true);\n      return;\n    }\n    RecordLocation.recordCfi(bookKey, cfi, percentage);\n    BookUtil.RedirectBook(book);\n  };\n  render() {\n    let { cards } = this.props;\n    if (cards.length === 0) {\n      return <Redirect to=\"/manager/empty\" />;\n    }\n\n    let noteObj = SortUtil.sortNotes(\n      cards,\n      this.props.noteSortCode,\n      this.props.books\n    );\n    const renderCardListItem = (title: string) => {\n      return noteObj![title].map((item: NoteModel, index: number) => {\n        const cardProps = {\n          itemKey: item.key,\n          mode: \"notes\",\n        };\n        return (\n          <li\n            className=\"card-list-item\"\n            key={index}\n            onMouseOver={() => {\n              this.handleShowDelete(item.key);\n            }}\n            onMouseLeave={() => {\n              this.handleShowDelete(\"\");\n            }}\n            style={\n              this.props.mode === \"note\" && !this.props.isCollapsed\n                ? { height: \"250px\" }\n                : this.props.mode === \"note\" && this.props.isCollapsed\n                ? { height: \"250px\", width: \"calc(50vw - 70px)\" }\n                : this.props.isCollapsed\n                ? { width: \"calc(50vw - 70px)\" }\n                : {}\n            }\n          >\n            <div className=\"card-list-item-card\">\n              <div style={{ position: \"relative\", bottom: \"25px\" }}>\n                {this.state.deleteKey === item.key ? (\n                  <DeleteIcon {...cardProps} />\n                ) : null}\n              </div>\n              <div className=\"card-list-item-text-parent\">\n                <div className=\"card-list-item-note\">\n                  {this.props.mode === \"note\" ? item.notes : item.text}\n                </div>\n              </div>\n              {this.props.mode === \"note\" ? (\n                <div className=\"card-list-item-text-note\">\n                  <div className=\"card-list-item-text\">{item.text}</div>\n                </div>\n              ) : null}\n\n              <div className=\"card-list-item-citation\">\n                <div className=\"card-list-item-title\">\n                  <Trans>From</Trans>《\n                </div>\n                <div className=\"card-list-item-chapter card-list-item-title\">\n                  {this.handleBookName(item.bookKey)}\n                </div>\n                <div className=\"card-list-item-chapter card-list-item-title\">\n                  》<Trans>{item.chapter}</Trans>\n                </div>\n              </div>\n              <div\n                className=\"note-tags\"\n                style={{\n                  position: \"absolute\",\n                  bottom: \"20px\",\n                  height: \"70px\",\n                }}\n              >\n                <NoteTag\n                  {...{\n                    handleTag: () => {},\n                    tag: item.tag || [],\n                    isCard: true,\n                  }}\n                />\n              </div>\n              <div\n                onClick={() => {\n                  this.handleJump(item.cfi, item.bookKey, item.percentage);\n                }}\n              >\n                <div\n                  className=\"card-list-item-show-more\"\n                  style={{ bottom: \"10px\" }}\n                >\n                  {this.props.mode === \"note\" ? (\n                    <Trans>{\"More Notes\"}</Trans>\n                  ) : (\n                    <Trans>{\"More Digests\"}</Trans>\n                  )}\n\n                  <span className=\"icon-dropdown icon-card-right\"></span>\n                </div>\n              </div>\n            </div>\n          </li>\n        );\n      });\n    };\n    const renderCardList = () => {\n      return Object.keys(noteObj!).map((item, index) => {\n        return (\n          <li className=\"card-page-item\" key={index}>\n            <div className=\"card-page-item-date\">{item}</div>\n            <ul className=\"card-list-container-box\">\n              {renderCardListItem(item)}\n            </ul>\n          </li>\n        );\n      });\n    };\n    return <div className=\"card-list-container\">{renderCardList()}</div>;\n  }\n}\n\nexport default withRouter(CardList);\n","//我的书摘页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport CardList from \"./component\";\nimport { handleReadingBook } from \"../../../store/actions/book\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    isCollapsed: state.sidebar.isCollapsed,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    chapters: state.reader.chapters,\n    books: state.manager.books,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(CardList as any));\n","//我的笔记页面\nimport React from \"react\";\nimport \"./noteList.css\";\nimport { NoteListProps, NoteListState } from \"./interface\";\nimport CardList from \"../cardList\";\nimport NoteTag from \"../../../components/noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport Empty from \"../../emptyPage\";\n\nclass NoteList extends React.Component<NoteListProps, NoteListState> {\n  constructor(props: NoteListProps) {\n    super(props);\n    this.state = {\n      tag: [],\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchNotes();\n  }\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  handleFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n    return itemArr;\n  };\n  filterTag = (notes: NoteModel[]) => {\n    let temp: NoteModel[] = [];\n    for (let i = 0; i < notes.length; i++) {\n      let flag = false;\n      for (let j = 0; j < this.state.tag.length; j++) {\n        if (notes[i].tag && notes[i].tag.indexOf(this.state.tag[j]) > -1) {\n          flag = true;\n          break;\n        }\n      }\n      if (flag) {\n        temp.push(notes[i]);\n      }\n    }\n    return temp;\n  };\n  render() {\n    const noteProps = {\n      cards: this.props.isSearch\n        ? this.handleFilter(\n            this.props.notes.filter((item) => item.notes !== \"\"),\n            this.props.searchResults\n          )\n        : this.state.tag.length > 0\n        ? this.filterTag(this.props.notes.filter((item) => item.notes !== \"\"))\n        : this.props.notes.filter((item) => item.notes !== \"\"),\n      mode: \"note\",\n    };\n    return (\n      <div\n        className=\"note-list-container-parent\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n            : {}\n        }\n      >\n        <div className=\"note-tags\">\n          <NoteTag {...{ handleTag: this.handleTag }} />\n        </div>\n        {noteProps.cards.length === 0 ? (\n          <div\n            style={{\n              position: \"fixed\",\n              left: 0,\n              top: 0,\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: -1,\n            }}\n          >\n            {this.state.tag.length === 0 && <Empty />}\n          </div>\n        ) : (\n          <CardList {...noteProps} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default NoteList;\n","//我的笔记页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport NoteList from \"./component\";\nimport { handleFetchNotes } from \"../../../store/actions/reader\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    notes: state.reader.notes,\n    isSearch: state.manager.isSearch,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n  };\n};\nconst actionCreator = { handleFetchNotes };\nexport default connect(mapStateToProps, actionCreator)(NoteList);\n","//我的书摘页面\nimport React from \"react\";\nimport \"./digestList.css\";\nimport { DigestListProps, DigestListStates } from \"./interface\";\nimport CardList from \"../cardList\";\nimport NoteTag from \"../../../components/noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport Empty from \"../../emptyPage\";\n\nclass DigestList extends React.Component<DigestListProps, DigestListStates> {\n  constructor(props: DigestListProps) {\n    super(props);\n    this.state = {\n      tag: [],\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchNotes();\n  }\n  handleFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n    return itemArr;\n  };\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  filterTag = (digests: NoteModel[]) => {\n    let temp: NoteModel[] = [];\n    for (let i = 0; i < digests.length; i++) {\n      let flag = false;\n      for (let j = 0; j < this.state.tag.length; j++) {\n        if (digests[i].tag && digests[i].tag.indexOf(this.state.tag[j]) > -1) {\n          flag = true;\n          break;\n        }\n      }\n      if (flag) {\n        temp.push(digests[i]);\n      }\n    }\n    return temp;\n  };\n  render() {\n    const noteProps = {\n      cards: this.props.isSearch\n        ? this.handleFilter(this.props.digests, this.props.searchResults)\n        : this.state.tag.length > 0\n        ? this.filterTag(this.props.digests)\n        : this.props.digests,\n      mode: \"digest\",\n    };\n\n    return (\n      <div\n        className=\"digest-list-container-parent\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n            : {}\n        }\n      >\n        <div className=\"note-tags\">\n          <NoteTag {...{ handleTag: this.handleTag }} />\n        </div>\n        {noteProps.cards.length === 0 ? (\n          <div\n            style={{\n              position: \"fixed\",\n              left: 0,\n              top: 0,\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: -1,\n            }}\n          >\n            {this.state.tag.length === 0 && <Empty />}\n          </div>\n        ) : (\n          <CardList {...noteProps} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default DigestList;\n","//我的书摘页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport DigestList from \"./component\";\nimport { handleFetchNotes } from \"../../../store/actions/reader\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    isSearch: state.manager.isSearch,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n  };\n};\nconst actionCreator = { handleFetchNotes };\nexport default connect(mapStateToProps, actionCreator)(DigestList);\n","//图书加载前的动画\nimport React from \"react\";\nimport \"./loadingPage.css\";\nimport { LoadingPageProps } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { Redirect } from \"react-router-dom\";\n\nclass LoadingPage extends React.Component<LoadingPageProps> {\n  render() {\n    if (this.props.books) {\n      return <Redirect to=\"/manager/home\" />;\n    }\n    let arr: number[] = [];\n    for (\n      let i = 0;\n      i < parseInt(OtherUtil.getReaderConfig(\"totalBooks\") || \"0\");\n      i++\n    ) {\n      arr.push(i);\n    }\n    if (OtherUtil.getReaderConfig(\"viewMode\") !== \"list\") {\n      const renderLoadingCard = () => {\n        return arr.map((item, index) => {\n          return (\n            <div className=\"loading-page-book\" key={item}>\n              <div\n                className=\"loading-page-cover\"\n                style={{ opacity: `${(index % 7) * 0.2}` }}\n              ></div>\n            </div>\n          );\n        });\n      };\n      return (\n        <div className=\"loading-page-container-parent\">\n          <div className=\"loading-page-container\">{renderLoadingCard()}</div>\n        </div>\n      );\n    } else {\n      const renderLoadingList = () => {\n        return arr.map((item, index) => {\n          return (\n            <div className=\"loading-page-list\" key={item}>\n              <div className=\"loading-page-list-cover\"></div>\n              <div className=\"loading-page-bar\">\n                <div className=\"loading-page-bar1\"></div>\n                <div className=\"loading-page-bar2\"></div>\n                <div className=\"loading-page-bar3\"></div>\n              </div>\n            </div>\n          );\n        });\n      };\n      return (\n        <div className=\"loading-page-container-parent\">\n          <div className=\"loading-page-container\" style={{ marginTop: \"8px\" }}>\n            {renderLoadingList()}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default LoadingPage;\n","//图书加载前的动画\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport LoadingPage from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n  };\n};\nconst actionCreator = {};\nexport default connect(mapStateToProps, actionCreator)(LoadingPage);\n","import BookList from \"../containers/lists/bookList\";\nimport DeletedBookList from \"../containers/lists/deletedBookList\";\nimport NoteList from \"../containers/lists/noteList\";\nimport DigestList from \"../containers/lists/digestList\";\nimport EmptyPage from \"../containers/emptyPage\";\nimport LoadingPage from \"../containers/loadingPage\";\n\nexport const routes = [\n  { path: \"/manager/empty\", component: EmptyPage },\n  { path: \"/manager/loading\", component: LoadingPage },\n  { path: \"/manager/note\", component: NoteList },\n  { path: \"/manager/digest\", component: DigestList },\n  { path: \"/manager/home\", component: BookList },\n  { path: \"/manager/favorite\", component: BookList },\n  { path: \"/manager/trash\", component: DeletedBookList },\n];\n","import React from \"react\";\nimport \"./arrow.css\";\nconst Arrow = () => {\n  return (\n    <div className=\"arrow-container\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"48\"\n        height=\"48\"\n        viewBox=\"0 0 48 48\"\n        className=\"circle\"\n      >\n        <g\n          transform=\"translate(48 48) rotate(180)\"\n          fill=\"none\"\n          stroke=\"rgba(75,75,75)\"\n          strokeWidth=\"1.5\"\n        >\n          <circle cx=\"24\" cy=\"24\" r=\"24\" stroke=\"none\" />\n          <circle cx=\"24\" cy=\"24\" r=\"23.25\" fill=\"none\" />\n        </g>\n      </svg>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"7\"\n        height=\"40.5\"\n        viewBox=\"0 0 9 64.5\"\n        className=\"arrow\"\n      >\n        <g transform=\"translate(-799.5 -100)\">\n          <line\n            y2=\"59\"\n            transform=\"translate(804 163.5) rotate(180)\"\n            fill=\"none\"\n            stroke=\"rgba(75,75,75)\"\n            strokeLinecap=\"round\"\n            strokeWidth=\"2\"\n          />\n          <path\n            d=\"M4.5,0,9,8H0Z\"\n            transform=\"translate(799.5 100)\"\n            fill=\"rgba(75,75,75)\"\n          />\n        </g>\n      </svg>\n    </div>\n  );\n};\n\nexport default Arrow;\n","import React from \"react\";\nimport \"./loadingDialog.css\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../../../assets/lotties/loading.json\";\nimport { Trans } from \"react-i18next\";\nconst defaultOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationData,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nconst LoadingDialog = (props) => {\n  return (\n    <div className=\"loading-dialog\">\n      <div className=\"loading-dialog-title\">\n        <Trans>Please Wait a moment</Trans>\n      </div>\n      <div className=\"loading-animation\">\n        <Lottie options={defaultOptions} height={250} width={280} />\n      </div>\n    </div>\n  );\n};\nexport default LoadingDialog;\n","//提示更新的文字\nimport React from \"react\";\nimport \"./updateInfo.css\";\nimport { TipDialogProps, TipDialogState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport Lottie from \"react-lottie\";\nimport animationDownload from \"../../../assets/lotties/download.json\";\n\nconst downloadOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationDownload,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\n\nclass TipDialog extends React.Component<TipDialogProps, TipDialogState> {\n  constructor(props: TipDialogProps) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClose = () => {\n    this.props.handleTipDialog(false);\n  };\n  render() {\n    return (\n      <div className=\"download-desk-container\">\n        <div\n          className=\"setting-close-container\"\n          onClick={() => {\n            this.handleClose();\n          }}\n        >\n          <span className=\"icon-close tip-close-icon\"></span>\n        </div>\n\n        <div className=\"download-desk-title\">\n          <Trans>Tips</Trans>\n        </div>\n\n        <div className=\"download-desk-feature-container\">\n          <div className=\"download-desk-feature-item\">\n            <Trans>{this.props.tip}</Trans>\n          </div>\n        </div>\n        <div\n          className=\"new-version-open\"\n          onClick={() => {\n            this.handleClose();\n          }}\n          style={{ marginTop: \"10px\" }}\n        >\n          <Trans>Understand</Trans>\n        </div>\n        <div className=\"download-desk-animation\">\n          <Lottie options={downloadOptions} height={220} width={300} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TipDialog;\n","//左下角的图标外链\nimport { connect } from \"react-redux\";\nimport { handleTipDialog } from \"../../../store/actions/manager\";\nimport TipDialog from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return { tip: state.manager.tip };\n};\nconst actionCreator = {\n  handleTipDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(TipDialog);\n","import React from \"react\";\nimport Sidebar from \"../../containers/sidebar\";\nimport Header from \"../../containers/header\";\nimport DeleteDialog from \"../../components/dialogs/deleteDialog\";\nimport EditDialog from \"../../components/dialogs/editDialog\";\nimport AddDialog from \"../../components/dialogs/addDialog\";\nimport SortDialog from \"../../components/dialogs/sortDialog\";\nimport AboutDialog from \"../../components/dialogs/aboutDialog\";\nimport MessageBox from \"../../containers/messageBox\";\nimport BackupDialog from \"../../components/dialogs/backupDialog\";\nimport \"./manager.css\";\nimport { ManagerProps, ManagerState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport SettingDialog from \"../../components/dialogs/settingDialog\";\nimport { isMobileOnly } from \"react-device-detect\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { routes } from \"../../router/routes\";\nimport Arrow from \"../../components/arrow\";\nimport LoadingDialog from \"../../components/dialogs/loadingDialog\";\nimport TipDialog from \"../../components/dialogs/TipDialog\";\n\n//判断是否为触控设备\nconst is_touch_device = () => {\n  return \"ontouchstart\" in window;\n};\n\nclass Manager extends React.Component<ManagerProps, ManagerState> {\n  timer!: NodeJS.Timeout;\n  constructor(props: ManagerProps) {\n    super(props);\n    this.state = {\n      totalBooks: parseInt(OtherUtil.getReaderConfig(\"totalBooks\") || \"0\") || 0,\n      favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n      isAuthed: false,\n      isError: false,\n      isCopied: false,\n      isUpdated: false,\n      isDrag: false,\n      token: \"\",\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: ManagerProps) {\n    if (nextProps.books && this.state.totalBooks !== nextProps.books.length) {\n      this.setState(\n        {\n          totalBooks: nextProps.books.length,\n        },\n        () => {\n          OtherUtil.setReaderConfig(\n            \"totalBooks\",\n            this.state.totalBooks.toString()\n          );\n        }\n      );\n    }\n    if (nextProps.books && nextProps.books.length === 1 && !this.props.books) {\n      this.props.history.push(\"/manager/home\");\n    }\n    if (this.props.mode !== nextProps.mode) {\n      this.setState({\n        favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n      });\n    }\n    if (nextProps.isMessage) {\n      this.timer = setTimeout(() => {\n        this.props.handleMessageBox(false);\n      }, 2000);\n    }\n  }\n  componentDidMount() {\n    if (is_touch_device() && !OtherUtil.getReaderConfig(\"isTouch\")) {\n      OtherUtil.setReaderConfig(\"isTouch\", \"yes\");\n    }\n    this.props.handleFetchBooks();\n    this.props.handleFetchNotes();\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchBookSortCode();\n    this.props.handleFetchList();\n  }\n\n  handleDrag = (isDrag: boolean) => {\n    this.setState({ isDrag });\n  };\n  render() {\n    let { books } = this.props;\n    if (isMobileOnly) {\n      return (\n        <>\n          <p className=\"waring-title\">\n            <Trans>Warning</Trans>\n          </p>\n          <div className=\"mobile-warning\">\n            <span>\n              <Trans>\n                For better user experince, please visit this site on a computer\n              </Trans>\n            </span>\n          </div>\n          <div>\n            <img\n              src={\n                OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n                  ? \"./assets/empty_light.svg\"\n                  : \"./assets/empty.svg\"\n              }\n              alt=\"\"\n              className=\"waring-pic\"\n            />\n          </div>\n        </>\n      );\n    }\n    return (\n      <div\n        className=\"manager\"\n        onDragEnter={() => {\n          !this.props.dragItem && this.handleDrag(true);\n          (document.getElementsByClassName(\n            \"import-from-local\"\n          )[0] as any).style.zIndex = \"50\";\n        }}\n      >\n        {this.state.isDrag && !this.props.dragItem && (\n          <div className=\"drag-background\">\n            <div className=\"drag-info\">\n              <Arrow />\n              <p className=\"arrow-text\">\n                <Trans>Drop your books here</Trans>\n              </p>\n            </div>\n          </div>\n        )}\n        <Sidebar />\n        <Header {...{ handleDrag: this.handleDrag }} />\n        {this.props.isOpenDeleteDialog && <DeleteDialog />}\n        {this.props.isOpenEditDialog && <EditDialog />}\n        {this.props.isOpenAddDialog && <AddDialog />}\n        {this.props.isShowLoading && <LoadingDialog />}\n        {\n          <div\n            className=\"drag-background\"\n            onClick={() => {\n              this.props.handleEditDialog(false);\n              this.props.handleDeleteDialog(false);\n              this.props.handleAddDialog(false);\n              this.props.handleTipDialog(false);\n              this.props.handleLoadingDialog(false);\n              this.props.handleNewDialog(false);\n              this.props.handleBackupDialog(false);\n              this.props.handleSetting(false);\n            }}\n            style={\n              this.props.isSettingOpen ||\n              this.props.isBackup ||\n              this.props.isShowNew ||\n              this.props.isOpenDeleteDialog ||\n              this.props.isOpenEditDialog ||\n              this.props.isOpenAddDialog ||\n              this.props.isTipDialog ||\n              this.props.isShowLoading\n                ? {}\n                : {\n                    display: \"none\",\n                  }\n            }\n          ></div>\n        }\n\n        {this.props.isMessage && <MessageBox />}\n        {this.props.isSortDisplay && <SortDialog />}\n        {this.props.isAboutOpen && <AboutDialog />}\n        {this.props.isBackup && <BackupDialog />}\n        {this.props.isSettingOpen && <SettingDialog />}\n        {this.props.isTipDialog && <TipDialog />}\n        {(!books || books.length === 0) && this.state.totalBooks ? (\n          <Redirect to=\"/manager/loading\" />\n        ) : (\n          <Switch>\n            {routes.map((ele) => (\n              <Route\n                render={() => <ele.component />}\n                key={ele.path}\n                path={ele.path}\n              />\n            ))}\n          </Switch>\n        )}\n      </div>\n    );\n  }\n}\nexport default Manager;\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchBooks,\n  handleFetchBookSortCode,\n  handleFetchList,\n  handleMessageBox,\n  handleTipDialog,\n  handleLoadingDialog,\n  handleNewDialog,\n  handleSetting,\n} from \"../../store/actions/manager\";\nimport { handleBackupDialog } from \"../../store/actions/backupPage\";\nimport {\n  handleFetchNotes,\n  handleFetchBookmarks,\n} from \"../../store/actions/reader\";\nimport {\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n} from \"../../store/actions/book\";\nimport \"./manager.css\";\nimport { stateType } from \"../../store\";\nimport Manager from \"./component\";\nimport { withRouter } from \"react-router-dom\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    bookmarks: state.reader.bookmarks,\n    isReading: state.book.isReading,\n    mode: state.sidebar.mode,\n    dragItem: state.book.dragItem,\n    shelfIndex: state.sidebar.shelfIndex,\n    isOpenEditDialog: state.book.isOpenEditDialog,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    isOpenAddDialog: state.book.isOpenAddDialog,\n    isSettingOpen: state.manager.isSettingOpen,\n    isAboutOpen: state.manager.isAboutOpen,\n    isBookSort: state.manager.isBookSort,\n    isSortDisplay: state.manager.isSortDisplay,\n    isShowLoading: state.manager.isShowLoading,\n    isShowNew: state.manager.isShowNew,\n    isTipDialog: state.manager.isTipDialog,\n    isMessage: state.manager.isMessage,\n    isBackup: state.backupPage.isBackup,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleFetchNotes,\n  handleSetting,\n  handleFetchBookmarks,\n  handleFetchBookSortCode,\n  handleFetchList,\n  handleMessageBox,\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleTipDialog,\n  handleLoadingDialog,\n  handleNewDialog,\n  handleBackupDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(withRouter(Manager));\n","import RecordLocation from \"../../utils/readUtils/recordLocation\";\nexport function handleLocations(locations: any) {\n  return { type: \"HANDLE_LOCATIONS\", payload: locations };\n}\nexport function handlePercentage(percentage: number) {\n  return { type: \"HANDLE_PERCENTAGE\", payload: percentage };\n}\nexport function handleFetchPercentage(book: { key: string }) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    let percentage;\n    if (RecordLocation.getScrollHeight(book.key).scroll) {\n      percentage =\n        RecordLocation.getScrollHeight(book.key).scroll /\n        RecordLocation.getScrollHeight(book.key).length;\n    } else {\n      percentage = RecordLocation.getCfi(book.key).percentage;\n    }\n    dispatch(handlePercentage(percentage));\n  };\n}\nexport function handleFetchLocations(epub: any) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    epub.locations\n      .generate()\n      .then((result: any) => {\n        dispatch(handleLocations(epub.locations));\n      })\n      .catch(() => {\n        console.log(\"Error occurs\");\n      });\n  };\n}\n","class Note {\n  key: string;\n  bookKey: string;\n  date: { year: number; month: number; day: number };\n  chapter: string;\n  chapterIndex: number;\n  text: string;\n  cfi: string;\n  range: string;\n  notes: string;\n  percentage: number;\n  color: number;\n  tag: string[];\n  constructor(\n    bookKey: string,\n    chapter: string,\n    chapterIndex: number,\n    text: string,\n    cfi: string,\n    range: string,\n    notes: string,\n    percentage: number,\n    color: number,\n    tag: string[]\n  ) {\n    this.key = new Date().getTime() + \"\"; //笔记的键值\n    this.bookKey = bookKey; //笔记的所在书的键值\n    this.date = {\n      year: new Date().getFullYear(),\n      month: new Date().getMonth() + 1,\n      day: new Date().getDate(),\n    }; //笔记的添加日期\n    this.chapter = chapter; //笔记的所在章节\n    this.chapterIndex = chapterIndex; //笔记的所在章节\n    this.text = text; //笔记对应的书本的内容\n    this.cfi = cfi; //添加笔记的位置\n    this.range = range; // Rangy.js产生的将Range对象序列化后的字符串\n    this.notes = notes || \"\"; //笔记的内容\n    this.percentage = percentage; //笔记在文中的进度\n    this.color = color; //笔记高亮的颜色\n    this.tag = tag; //笔记高亮的颜色\n  }\n}\n\nexport default Note;\n","//添加笔记的弹窗\nimport React from \"react\";\nimport \"./popupNote.css\";\nimport Note from \"../../../model/Note\";\nimport localforage from \"localforage\";\nimport { PopupNoteProps, PopupNoteState } from \"./interface\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport NoteTag from \"../../noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport { Trans } from \"react-i18next\";\n\ndeclare var window: any;\n\nclass PopupNote extends React.Component<PopupNoteProps, PopupNoteState> {\n  constructor(props: PopupNoteProps) {\n    super(props);\n    this.state = { tag: [] };\n  }\n  componentDidMount() {\n    let textArea: any = document.querySelector(\".editor-box\");\n    textArea && textArea.focus();\n  }\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  createNote() {\n    let notes = (document.querySelector(\".editor-box\") as HTMLInputElement)\n      .value;\n\n    if (this.props.noteKey) {\n      //编辑笔记\n      this.props.notes.forEach((item) => {\n        if (item.key === this.props.noteKey) {\n          item.notes = notes;\n          item.tag = this.state.tag;\n        }\n      });\n      localforage.setItem(\"notes\", this.props.notes).then(() => {\n        this.props.handleOpenMenu(false);\n        this.props.handleMessage(\"Add Successfully\");\n        this.props.handleMessageBox(true);\n        this.props.handleFetchNotes();\n        this.props.handleMenuMode(\"highlight\");\n        this.props.handleNoteKey(\"\");\n      });\n    } else {\n      //创建笔记\n      let bookKey = this.props.currentBook.key;\n      const currentLocation = this.props.currentEpub.rendition.currentLocation();\n      let chapterHref = currentLocation.start.href;\n      let chapterIndex = currentLocation.start.index;\n      let chapter = \"Unknown Chapter\";\n      let currentChapter = this.props.flattenChapters.filter(\n        (item: any) => item.href.split(\"#\")[0] === chapterHref\n      )[0];\n      if (currentChapter) {\n        chapter = currentChapter.label.trim(\" \");\n      }\n      const cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n      let iframe = document.getElementsByTagName(\"iframe\")[0];\n      if (!iframe) return;\n      let doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n      let charRange = window.rangy\n        .getSelection(iframe)\n        .saveCharacterRanges(doc.body)[0];\n      let range = JSON.stringify(charRange);\n      let text = doc.getSelection()?.toString();\n      if (!text) {\n        return;\n      }\n      text = text.replace(/\\s\\s/g, \"\");\n      text = text.replace(/\\r/g, \"\");\n      text = text.replace(/\\n/g, \"\");\n      text = text.replace(/\\t/g, \"\");\n      text = text.replace(/\\f/g, \"\");\n      let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n        .percentage\n        ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n        : 0;\n\n      let color = this.props.color || 0;\n      let tag = this.state.tag;\n      let note = new Note(\n        bookKey,\n        chapter,\n        chapterIndex,\n        text,\n        cfi,\n        range,\n        notes,\n        percentage,\n        color,\n        tag\n      );\n      let noteArr = this.props.notes;\n      noteArr.push(note);\n      localforage.setItem(\"notes\", noteArr).then(() => {\n        this.props.handleOpenMenu(false);\n        this.props.handleMessage(\"Add Successfully\");\n        this.props.handleMessageBox(true);\n        this.props.handleFetchNotes();\n        this.props.handleMenuMode(\"highlight\");\n      });\n    }\n  }\n  handleClose = () => {\n    let noteIndex = -1;\n    if (this.props.noteKey) {\n      this.props.notes.forEach((item, index) => {\n        if (item.key === this.props.noteKey) {\n          noteIndex = index;\n        }\n      });\n      if (noteIndex > -1) {\n        this.props.notes.splice(noteIndex, 1);\n        localforage.setItem(\"notes\", this.props.notes).then(() => {\n          this.props.handleOpenMenu(false);\n          this.props.handleMenuMode(\"menu\");\n          this.props.handleMessage(\"Delete Successfully\");\n          this.props.handleMessageBox(true);\n          this.props.handleMenuMode(\"highlight\");\n          this.props.handleFetchNotes();\n          this.props.handleNoteKey(\"\");\n        });\n      }\n    } else {\n      this.props.handleOpenMenu(false);\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleNoteKey(\"\");\n    }\n  };\n\n  render() {\n    let note: NoteModel;\n    if (this.props.noteKey) {\n      this.props.notes.forEach((item) => {\n        if (item.key === this.props.noteKey) {\n          note = item;\n        }\n      });\n    }\n\n    const renderNoteEditor = () => {\n      return (\n        <div className=\"note-editor\">\n          <div className=\"editor-box-parent\">\n            <textarea className=\"editor-box\" />\n          </div>\n          <div\n            className=\"note-tags\"\n            style={{ position: \"absolute\", bottom: \"0px\", height: \"70px\" }}\n          >\n            <NoteTag\n              {...{\n                handleTag: this.handleTag,\n                tag: this.props.noteKey && note ? note.tag : [],\n              }}\n            />\n          </div>\n\n          <div className=\"note-button-container\">\n            <span\n              className=\"cancel-button\"\n              onClick={() => {\n                this.handleClose();\n              }}\n            >\n              {this.props.noteKey ? (\n                <Trans>Delete</Trans>\n              ) : (\n                <Trans>Cancel</Trans>\n              )}\n            </span>\n            <span\n              className=\"confirm-button\"\n              onClick={() => {\n                this.createNote();\n              }}\n            >\n              <Trans>Confirm</Trans>\n            </span>\n          </div>\n        </div>\n      );\n    };\n    return renderNoteEditor();\n  }\n}\nexport default PopupNote;\n","import { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport {\n  handleOpenMenu,\n  handleMenuMode,\n} from \"../../../store/actions/viewArea\";\nimport { handleNoteKey, handleFetchNotes } from \"../../../store/actions/reader\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupNote from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    notes: state.reader.notes,\n    color: state.reader.color,\n    flattenChapters: state.reader.flattenChapters,\n    noteKey: state.reader.noteKey,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n  handleOpenMenu,\n  handleMenuMode,\n  handleNoteKey,\n  handleFetchNotes,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupNote as any));\n","//高亮，下划线颜色选择\nimport React from \"react\";\nimport \"./colorOption.css\";\nimport { ColorProps, ColorStates } from \"./interface\";\n\nclass ColorOption extends React.Component<ColorProps, ColorStates> {\n  constructor(props: ColorProps) {\n    super(props);\n    this.state = {\n      isLine: false,\n    };\n  }\n  handleChangeOptiion = () => {\n    this.setState({ isLine: !this.state.isLine });\n  };\n  render() {\n    const renderLine = () => {\n      return [\"#FF0000\", \"#000080\", \"#0000FF\", \"#2EFF2E\"].map((item, index) => {\n        return (\n          <div\n            className=\"line-option\"\n            style={{\n              border: `${this.props.color === index + 4 ? \"\" : \"2px\"}`,\n            }}\n            key={item}\n            onClick={() => {\n              this.props.handleColor(index + 4);\n            }}\n          >\n            <div\n              className=\"demo-line\"\n              style={{ borderBottom: `solid 2px ${item}` }}\n            ></div>\n          </div>\n        );\n      });\n    };\n    const renderColor = () => {\n      return [\"#FBF1D1\", \"#EFEEB0\", \"#CAEFC9\", \"#76BEE9\"].map((item, index) => {\n        return (\n          <div\n            className=\"color-option\"\n            style={{\n              backgroundColor: item,\n              border: `${this.props.color === index ? \"\" : \"0px\"}`,\n            }}\n            key={item}\n            onClick={() => {\n              this.props.handleColor(index);\n            }}\n          ></div>\n        );\n      });\n    };\n    return (\n      <div className=\"color-option-container\">\n        {!this.state.isLine && renderColor()}\n        <span\n          className=\"icon-sort popup-color-more\"\n          onClick={() => {\n            this.handleChangeOptiion();\n          }}\n        ></span>\n        {this.state.isLine && renderLine()}\n      </div>\n    );\n  }\n}\n\nexport default ColorOption;\n","//左下角的图标外链\nimport { connect } from \"react-redux\";\nimport { handleColor } from \"../../store/actions/reader\";\nimport { stateType } from \"../../store\";\nimport About from \"./component\";\nimport { handleSelection } from \"../../store/actions/viewArea\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    color: state.reader.color,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleColor,\n  handleSelection,\n};\nexport default connect(mapStateToProps, actionCreator)(About);\n","export const popupList = [\n  { name: \"note\", title: \"Take Notes\", icon: \"note\" },\n  { name: \"digest\", title: \"Highlight\", icon: \"collect\" },\n  { name: \"translation\", title: \"Translate\", icon: \"translation\" },\n  { name: \"copy\", title: \"Copy\", icon: \"copy\" },\n  { name: \"search-book\", title: \"Search in the book\", icon: \"search-book\" },\n  { name: \"google\", title: \"Search on the internet\", icon: \"google\" },\n  { name: \"speaker\", title: \"Speak the text\", icon: \"Speaker\" },\n];\n","//选中文字后的弹窗，四个按钮\nimport React from \"react\";\nimport \"./popupOption.css\";\nimport localforage from \"localforage\";\nimport Note from \"../../../model/Note\";\nimport { PopupOptionProps } from \"./interface\";\nimport ColorOption from \"../../colorOption\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { Tooltip } from \"react-tippy\";\nimport { popupList } from \"../../../constants/popupList\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { isElectron } from \"react-device-detect\";\n\ndeclare var window: any;\nconst getSelection = () => {\n  let iframe = document.getElementsByTagName(\"iframe\")[0];\n  if (!iframe) return;\n  let doc = iframe.contentDocument;\n  if (!doc) return;\n  let sel = doc.getSelection();\n  if (!sel) return;\n  let text = sel.toString();\n  text = text && text.trim();\n  return text;\n};\n\nclass PopupOption extends React.Component<PopupOptionProps> {\n  handleNote = () => {\n    this.props.handleChangeDirection(false);\n    this.props.handleMenuMode(\"note\");\n    this.handleEdge();\n  };\n  handleEdge = () => {\n    let popupMenu: any = document.querySelector(\".popup-menu-container\");\n    let posX = popupMenu?.style.left;\n    let posY = popupMenu?.style.top;\n    posX = parseInt(posX.substr(0, posX.length - 2));\n    posY = parseInt(posY.substr(0, posY.length - 2));\n    let rightEdge = this.props.currentEpub.rendition._layout.width - 310;\n    if (posX > rightEdge) {\n      popupMenu.setAttribute(\"style\", `left:${rightEdge}px;top:${posY}px`);\n    }\n  };\n  handleCopy = () => {\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let text = doc.execCommand(\"copy\", false);\n    !text\n      ? console.log(\"failed to copy text to clipboard\")\n      : console.log(\"copied!\");\n    this.props.handleOpenMenu(false);\n    doc.getSelection()!.empty();\n    this.props.handleMessage(\"Copy Successfully\");\n    this.props.handleMessageBox(true);\n  };\n  handleTrans = () => {\n    this.props.handleMenuMode(\"trans\");\n    this.props.handleOriginalText(getSelection() || \"\");\n    this.handleEdge();\n  };\n  handleDigest = () => {\n    let bookKey = this.props.currentBook.key;\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    let chapterHref = currentLocation.start.href;\n    let chapterIndex = currentLocation.start.index;\n    let chapter = \"Unknown Chapter\";\n    let currentChapter = this.props.flattenChapters.filter(\n      (item: any) => item.href.split(\"#\")[0] === chapterHref\n    )[0];\n    if (currentChapter) {\n      chapter = currentChapter.label.trim(\" \");\n    }\n    const cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n\n    let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n      .percentage\n      ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n      : 0;\n    let color = this.props.color;\n    let notes = \"\";\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let charRange = window.rangy\n      .getSelection(iframe)\n      .saveCharacterRanges(doc.body)[0];\n    let range = JSON.stringify(charRange);\n    let text = doc.getSelection()?.toString();\n    if (!text) return;\n    text = text.replace(/\\s\\s/g, \"\");\n    text = text.replace(/\\r/g, \"\");\n    text = text.replace(/\\n/g, \"\");\n    text = text.replace(/\\t/g, \"\");\n    text = text.replace(/\\f/g, \"\");\n    let digest = new Note(\n      bookKey,\n      chapter,\n      chapterIndex,\n      text,\n      cfi,\n      range,\n      notes,\n      percentage,\n      color,\n      []\n    );\n    let noteArr = this.props.notes;\n    noteArr.push(digest);\n    localforage.setItem(\"notes\", noteArr).then(() => {\n      this.props.handleOpenMenu(false);\n      this.props.handleMessage(\"Add Successfully\");\n      this.props.handleMessageBox(true);\n      this.props.handleFetchNotes();\n      this.props.handleMenuMode(\"highlight\");\n    });\n  };\n  handleJump = (url: string) => {\n    isElectron\n      ? window.require(\"electron\").shell.openExternal(url)\n      : window.open(url);\n  };\n  handleSearchInternet = () => {\n    switch (OtherUtil.getReaderConfig(\"searchEngine\")) {\n      case \"google\":\n        this.handleJump(\"https://www.google.com/search?q=\" + getSelection());\n        break;\n      case \"baidu\":\n        this.handleJump(\"https://www.baidu.com/s?wd=\" + getSelection());\n        break;\n      case \"bing\":\n        this.handleJump(\"https://www.bing.com/search?q=\" + getSelection());\n        break;\n      case \"duckduckgo\":\n        this.handleJump(\"https://duckduckgo.com/?q=\" + getSelection());\n        break;\n      case \"yandex\":\n        this.handleJump(\"https://yandex.com/search/?text=\" + getSelection());\n        break;\n      case \"yahoo\":\n        this.handleJump(\"https://search.yahoo.com/search?p=\" + getSelection());\n        break;\n      default:\n        this.handleJump(\n          navigator.language === \"zh-CN\"\n            ? \"https://www.baidu.com/s?wd=\" + getSelection()\n            : \"https://www.google.com/search?q=\" + getSelection()\n        );\n        break;\n    }\n  };\n  handleSearchBook = () => {\n    let leftPanel = document.querySelector(\".left-panel\");\n    const clickEvent = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    leftPanel!.dispatchEvent(clickEvent);\n    const focusEvent = new MouseEvent(\"focus\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    let searchBox: any = document.querySelector(\".header-search-box\");\n    searchBox.dispatchEvent(focusEvent);\n    let searchIcon = document.querySelector(\".header-search-icon\");\n    searchIcon?.dispatchEvent(clickEvent);\n    searchBox.value = getSelection() || \"\";\n    const keyEvent: any = new KeyboardEvent(\"keydown\", {\n      bubbles: true,\n      cancelable: true,\n      keyCode: 13,\n    } as any);\n    searchBox.dispatchEvent(keyEvent);\n  };\n\n  handleSpeak = () => {\n    var msg = new SpeechSynthesisUtterance();\n    msg.text = getSelection() || \"\";\n    msg.voice = window.speechSynthesis.getVoices()[0];\n    window.speechSynthesis.speak(msg);\n  };\n  render() {\n    const renderMenuList = () => {\n      return (\n        <>\n          <div className=\"menu-list\">\n            {popupList.map((item, index) => {\n              return (\n                <div\n                  key={item.name}\n                  className={item.name + \"-option\"}\n                  onClick={() => {\n                    switch (index) {\n                      case 0:\n                        this.handleNote();\n                        break;\n                      case 1:\n                        this.handleDigest();\n                        break;\n                      case 2:\n                        this.handleTrans();\n                        break;\n                      case 3:\n                        this.handleCopy();\n                        break;\n                      case 4:\n                        this.handleSearchBook();\n                        break;\n                      case 5:\n                        this.handleSearchInternet();\n                        break;\n                      case 6:\n                        this.handleSpeak();\n                        break;\n\n                      default:\n                        break;\n                    }\n                  }}\n                >\n                  <Tooltip\n                    title={this.props.t(item.title)}\n                    position=\"top\"\n                    trigger=\"mouseenter\"\n                  >\n                    <span\n                      className={`icon-${item.icon} ${item.name}-icon`}\n                    ></span>\n                  </Tooltip>\n                </div>\n              );\n            })}\n          </div>\n          <ColorOption />\n        </>\n      );\n    };\n    return renderMenuList();\n  }\n}\n\nexport default PopupOption;\n","import { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport {\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n} from \"../../../store/actions/viewArea\";\nimport {\n  handleFetchNotes,\n  handleOriginalText,\n} from \"../../../store/actions/reader\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupOption from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    currentEpub: state.book.currentEpub,\n    selection: state.viewArea.selection,\n    notes: state.reader.notes,\n    color: state.reader.color,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n  handleOpenMenu,\n  handleMenuMode,\n  handleFetchNotes,\n  handleOriginalText,\n  handleChangeDirection,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupOption as any));\n","//翻译弹窗\nimport React from \"react\";\nimport \"./popupTrans.css\";\nimport { PopupTransProps, PopupTransState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport md5 from \"md5\";\n\nclass PopupTrans extends React.Component<PopupTransProps, PopupTransState> {\n  constructor(props: PopupTransProps) {\n    super(props);\n    this.state = {\n      translatedText: \"\",\n    };\n  }\n  componentDidMount() {\n    let lng = OtherUtil.getReaderConfig(\"lang\");\n    //兼容之前的版本\n    if (lng === \"cn\") {\n      lng = \"zh\";\n    }\n    let originalText = this.props.originalText.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = `https://fanyi-api.baidu.com/api/trans/vip/translate?q=${originalText}&from=auto&to=${\n      lng || \"zh\"\n    }&appid=20200802000531425&salt=1435660288&sign=${md5(\n      // eslint-disable-next-line\n      \"20200802000531425\" + originalText + \"1435660288\" + \"sJRHTorJq8j8_ru2GkHl\"\n    )}&callback=handleCallback`;\n    document.head.appendChild(script);\n    (window as any).handleCallback = (res: any) => {\n      this.setState({\n        translatedText: res.trans_result ? res.trans_result[0].dst : \"出错了\",\n      });\n    };\n  }\n\n  render() {\n    const renderNoteEditor = () => {\n      return (\n        <div className=\"trans-container\">\n          <div className=\"original-text-box\">{this.props.originalText}</div>\n          <div className=\"trans-text-box\">{this.state.translatedText}</div>\n        </div>\n      );\n    };\n    return renderNoteEditor();\n  }\n}\nexport default PopupTrans;\n","import { connect } from \"react-redux\";\nimport {\n  handleOpenMenu,\n  handleMenuMode,\n} from \"../../../store/actions/viewArea\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupNote from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    originalText: state.reader.originalText,\n  };\n};\nconst actionCreator = {\n  handleOpenMenu,\n  handleMenuMode,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupNote as any));\n","//选中文字后的弹窗\nimport React from \"react\";\nimport \"./popupMenu.css\";\nimport PopupNote from \"../popupNote\";\nimport PopupOption from \"../popupOption\";\nimport PopupTrans from \"../popupTrans\";\nimport { PopupMenuProps, PopupMenuStates } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\n\ndeclare var window: any;\n\nclass PopupMenu extends React.Component<PopupMenuProps, PopupMenuStates> {\n  highlighter: any;\n  timer!: NodeJS.Timeout;\n  key: any;\n  mode: string;\n  showNote: boolean;\n  isFirstShow: boolean;\n  cfiRange: any;\n  contents: any;\n  rect: any;\n  constructor(props: PopupMenuProps) {\n    super(props);\n    this.showNote = false;\n    this.isFirstShow = false;\n    this.highlighter = null;\n    this.mode = \"\";\n    this.state = {\n      deleteKey: \"\",\n      cfiRange: this.props.cfiRange,\n      contents: this.props.contents,\n      rect: this.props.rect,\n    };\n  }\n\n  componentDidMount() {\n    this.props.rendition.on(\"rendered\", () => {\n      new Promise<void>((resolve, reject) => {\n        this.getHighlighter();\n        resolve();\n      }).then(() => {\n        this.renderHighlighters();\n      });\n      let iframe = document.getElementsByTagName(\"iframe\")[0];\n      if (!iframe) return;\n      let doc = iframe.contentDocument;\n      if (!doc) return;\n      doc.addEventListener(\"mousedown\", this.openMenu);\n    });\n  }\n  componentWillReceiveProps(nextProps: PopupMenuProps) {\n    if (nextProps.cfiRange !== this.props.cfiRange) {\n      this.setState(\n        {\n          cfiRange: nextProps.cfiRange,\n          contents: nextProps.contents,\n          rect: nextProps.rect,\n        },\n        () => {\n          this.openMenu();\n        }\n      );\n    }\n  }\n  //新建高亮\n  getHighlighter = () => {\n    // 注意点一\n    // 为了每次切换章节时都有与当前文档相关联的 pen\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    this.highlighter = window.rangy.createHighlighter(doc);\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n    classes.forEach((item) => {\n      let config = {\n        ignoreWhiteSpace: true,\n        elementTagName: \"span\",\n        elementProperties: {\n          onclick: (event: any) => {\n            let iframe = document.getElementsByTagName(\"iframe\")[0];\n            if (!iframe) return;\n            let doc = iframe.contentDocument;\n            if (!doc) return;\n            this.props.handleMenuMode(\"note\");\n            let sel = doc.getSelection();\n            if (!sel) return;\n            let range = sel.getRangeAt(0);\n            this.setState({ rect: range.getBoundingClientRect() }, () => {\n              this.showMenu();\n              this.handleClickHighlighter(event.currentTarget.dataset.key);\n              event.stopPropagation();\n            });\n          },\n        },\n        onElementCreate: (element: any) => {\n          element.dataset.key = this.key;\n        },\n      };\n      let applier = window.rangy.createClassApplier(item, config);\n      this.highlighter.addClassApplier(applier);\n    });\n  };\n  handleClickHighlighter = (key: string) => {\n    let dialog: HTMLInputElement | null = document.querySelector(\".editor-box\");\n    let note = this.props.notes.filter((item) => item.key === key)[0];\n    if (note && note.notes) {\n      dialog!.value = note.notes;\n    }\n    dialog?.focus();\n    this.props.handleNoteKey(key);\n  };\n  handleShowDelete = (deleteKey: string) => {\n    this.setState({ deleteKey });\n  };\n  showMenu = () => {\n    let rect = this.state.rect;\n    if (!rect) return;\n    this.props.handleChangeDirection(false);\n    // const rect = this.rect;\n    let height = 200;\n    let x =\n      OtherUtil.getReaderConfig(\"readerMode\") === \"single\"\n        ? rect.x\n        : OtherUtil.getReaderConfig(\"readerMode\") === \"continuous\"\n        ? rect.right\n        : rect.x % this.props.currentEpub.rendition._layout.width;\n    let y = rect.y % this.props.currentEpub.rendition._layout.height;\n    let posX = x + rect.width / 2 - 20;\n    //防止menu超出图书\n    let rightEdge =\n      this.props.menuMode === \"note\" || this.props.menuMode === \"trans\"\n        ? this.props.currentEpub.rendition._layout.width - 310\n        : this.props.currentEpub.rendition._layout.width - 200;\n    let posY: number;\n    //控制menu方向\n    if (y < height) {\n      this.props.handleChangeDirection(true);\n      posY = y + 67;\n    } else {\n      posY = y - height / 2 - 57;\n    }\n    posX = posX > rightEdge ? rightEdge : posX;\n    this.props.handleOpenMenu(true);\n    let popupMenu = document.querySelector(\".popup-menu-container\");\n\n    popupMenu!.setAttribute(\"style\", `left:${posX}px;top:${posY}px`);\n    this.setState({ rect: null });\n  };\n  //渲染高亮\n  renderHighlighters = () => {\n    let highlighters: any = this.props.notes;\n    if (!highlighters) return;\n    if (!this.props.rendition || !this.props.rendition.currentLocation) {\n      return;\n    }\n    const currentLocation = this.props.rendition.currentLocation();\n    if (!currentLocation || !currentLocation.start) return;\n    let chapterIndex = currentLocation.start.index;\n    let highlightersByChapter = highlighters.filter(\n      (item: any) => item.chapterIndex === chapterIndex\n    );\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    let iWin = iframe.contentWindow || iframe.contentDocument!.defaultView;\n    this.highlighter && this.highlighter.removeAllHighlights(); // 为了避免下次反序列化失败，必须先清除已有的高亮\n\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n    highlightersByChapter &&\n      highlightersByChapter.forEach((item: any) => {\n        this.key = item.key;\n        //控制渲染指定图书的指定高亮\n        if (item.bookKey === this.props.currentBook.key) {\n          try {\n            let temp = JSON.parse(item.range);\n            temp = [temp];\n            window.rangy\n              .getSelection(iframe)\n              .restoreCharacterRanges(iframe.contentDocument, temp);\n          } catch (e) {\n            console.warn(\n              \"Exception has been caught when restore character ranges.\"\n            );\n            return;\n          }\n          this.highlighter.highlightSelection(classes[item.color]);\n        }\n      });\n    if (!iWin || !iWin.getSelection()) return;\n    iWin.getSelection()!.empty(); // 清除文本选取\n    // this.props.isOpenMenu &&\n    //   window.rangy.deserializeSelection(serial, null, iWin); // （为了选取文本后不被上一行代码清除掉）恢复原本的文本选取\n  };\n  //控制弹窗\n  openMenu = () => {\n    this.setState({ deleteKey: \"\" });\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let sel = doc.getSelection();\n    this.props.handleChangeDirection(false);\n    // 如果 popmenu正在被展示，则隐藏\n    if (this.props.isOpenMenu) {\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleOpenMenu(false);\n      this.props.handleNoteKey(\"\");\n    }\n\n    // 使弹出菜单更加灵活可控;\n    if (sel!.isCollapsed) {\n      this.props.isOpenMenu && this.props.handleOpenMenu(false);\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleNoteKey(\"\");\n      return;\n    }\n    this.showMenu();\n    this.props.handleMenuMode(\"menu\");\n  };\n  //添加高亮\n  handleHighlight() {\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let color = this.props.color;\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n    if (!this.highlighter) return;\n    this.highlighter.highlightSelection(classes[color]);\n    this.props.handleMenuMode(\"menu\");\n    this.props.handleOpenMenu(false);\n    doc.getSelection()!.empty();\n    this.props.handleMenuMode(\"menu\");\n    this.highlighter && this.highlighter.removeAllHighlights();\n    new Promise<void>((resolve) => {\n      this.getHighlighter();\n      resolve();\n    }).then(() => {\n      this.renderHighlighters();\n    });\n  }\n  render() {\n    if (this.props.menuMode === \"highlight\") {\n      this.handleHighlight();\n    }\n    const PopupProps = {\n      cfiRange: this.props.cfiRange,\n      contents: this.props.contents,\n      rect: this.props.rect,\n    };\n    return (\n      <div>\n        <div\n          className=\"popup-menu-container\"\n          style={this.props.isOpenMenu ? {} : { display: \"none\" }}\n        >\n          <div className=\"popup-menu-box\">\n            {this.props.menuMode === \"menu\" ? (\n              <PopupOption {...PopupProps} />\n            ) : this.props.menuMode === \"note\" ? (\n              <PopupNote {...PopupProps} />\n            ) : this.props.menuMode === \"trans\" ? (\n              <PopupTrans {...PopupProps} />\n            ) : null}\n            <span\n              className=\"icon-close popup-close\"\n              onClick={() => {\n                this.props.handleOpenMenu(false);\n              }}\n              style={this.props.isChangeDirection ? { top: \"170px\" } : {}}\n            ></span>\n          </div>\n          {this.props.isChangeDirection ? (\n            <span\n              className=\"icon-popup popup-menu-triangle-up\"\n              style={\n                this.props.menuMode === \"highlight\" ? { bottom: \"110px\" } : {}\n              }\n            ></span>\n          ) : (\n            <span className=\"icon-popup popup-menu-triangle-down\"></span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PopupMenu;\n","//弹出菜单\nimport {\n  handleSelection,\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n} from \"../../../store/actions/viewArea\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { handleNoteKey } from \"../../../store/actions/reader\";\nimport PopupMenu from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    notes: state.reader.notes,\n    noteKey: state.reader.noteKey,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    isOpenMenu: state.viewArea.isOpenMenu,\n    menuMode: state.viewArea.menuMode,\n    color: state.reader.color,\n    isChangeDirection: state.viewArea.isChangeDirection,\n  };\n};\nconst actionCreator = {\n  handleSelection,\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n  handleMessageBox,\n  handleMessage,\n  handleNoteKey,\n};\nexport default connect(mapStateToProps, actionCreator)(PopupMenu);\n","//阅读器图书内容区域\nimport React from \"react\";\nimport \"./imageViewer.css\";\nimport { ImageViewerProps, ImageViewerStates } from \"./interface\";\nimport StyleUtil from \"../../utils/readUtils/styleUtil\";\nimport FileSaver from \"file-saver\";\nimport { isElectron } from \"react-device-detect\";\n\ndeclare var window: any;\n\nclass ImageViewer extends React.Component<ImageViewerProps, ImageViewerStates> {\n  constructor(props: ImageViewerProps) {\n    super(props);\n    this.state = {\n      isShowImage: false,\n      imageRatio: \"horizontal\",\n      zoomIndex: 0,\n      rotateIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.props.rendition.on(\"rendered\", () => {\n      let iframe = document.getElementsByTagName(\"iframe\")[0];\n      if (!iframe) return;\n      let doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n      StyleUtil.addDefaultCss();\n      doc.addEventListener(\"click\", this.showImage, false);\n    });\n  }\n\n  showImage = (event: any) => {\n    if (this.props.isShow) {\n      this.props.handleLeaveReader(\"left\");\n      this.props.handleLeaveReader(\"right\");\n      this.props.handleLeaveReader(\"top\");\n      this.props.handleLeaveReader(\"bottom\");\n    }\n    let href;\n    if (\n      event.target &&\n      event.target.parentNode &&\n      event.target.parentNode.parentNode\n    ) {\n      href =\n        event.target.src ||\n        event.target.href ||\n        event.target.parentNode.href ||\n        event.target.parentNode.parentNode.href ||\n        \"\";\n    }\n    if (\n      isElectron &&\n      href &&\n      href.indexOf(\"OEBPF\") === -1 &&\n      href.indexOf(\"OEBPS\") === -1 &&\n      href.indexOf(\"footnote\") === -1 &&\n      href.indexOf(\"blob\") === -1 &&\n      href.indexOf(\"data:application\") === -1 &&\n      href.indexOf(\".htm\") === -1\n    ) {\n      event.preventDefault();\n      const { shell } = window.require(\"electron\");\n      const { dialog } = window.require(\"electron\").remote;\n      dialog\n        .showMessageBox({\n          type: \"question\",\n          title: this.props.t(\"Open link in browser\"),\n          message: this.props.t(\"Do you want to open this link in browser\"),\n          buttons: [this.props.t(\"Confirm\"), this.props.t(\"Cancel\")],\n        })\n        .then((result) => {\n          result.response === 0 && shell.openExternal(href);\n        });\n    }\n    if (!event.target.src) {\n      return;\n    }\n    if (this.state.isShowImage) {\n      this.setState({\n        isShowImage: false,\n        zoomIndex: 0,\n        rotateIndex: 0,\n        imageRatio: \"horizontal\",\n      });\n    }\n    event.preventDefault();\n    const handleDirection = (direction: string) => {\n      this.setState({ imageRatio: direction });\n    };\n    var img = new Image();\n    img.addEventListener(\"load\", function () {\n      handleDirection(\n        this.naturalWidth / this.naturalHeight > 1 ? \"horizontal\" : \"vertical\"\n      );\n    });\n    img.src = event.target.src;\n    let image: HTMLImageElement | null = document.querySelector(\".image\");\n    if (image) {\n      image.src = event.target.src;\n      this.setState({ isShowImage: true });\n    }\n  };\n  hideImage = (event: any) => {\n    event.preventDefault();\n    if (event.target.src) {\n      let image: HTMLImageElement | null = document.querySelector(\".image\");\n      if (image) image.src = \"\";\n    }\n    this.setState({ isShowImage: false });\n  };\n  handleZoomIn = () => {\n    let image: any = document.querySelector(\".image\");\n    if (image.style.width === \"200vw\" || image.style.height === \"200vh\") return;\n    this.setState({ zoomIndex: this.state.zoomIndex + 1 }, () => {\n      if (this.state.imageRatio === \"horizontal\") {\n        image.style.width = `${60 + this.state.zoomIndex * 10}vw`;\n      } else {\n        image.style.height = `${90 + 10 * this.state.zoomIndex}vh`;\n      }\n    });\n  };\n  handleZoomOut = () => {\n    let image: any = document.querySelector(\".image\");\n    if (image.style.width === \"10vw\" || image.style.height === \"10vh\") return;\n    this.setState({ zoomIndex: this.state.zoomIndex - 1 }, () => {\n      if (this.state.imageRatio === \"horizontal\") {\n        image.style.width = `${60 + this.state.zoomIndex * 10}vw`;\n      } else {\n        image.style.height = `${90 + 10 * this.state.zoomIndex}vh`;\n      }\n    });\n  };\n  handleSave = async () => {\n    let image: any = document.querySelector(\".image\");\n    let blob = await fetch(image.src).then((r) => r.blob());\n    FileSaver.saveAs(blob, `${new Date().toLocaleDateString()}`);\n  };\n  handleClock = () => {\n    let image: any = document.querySelector(\".image\");\n    this.setState({ rotateIndex: this.state.rotateIndex + 1 }, () => {\n      image.style.transform = `rotate(${this.state.rotateIndex * 90}deg)`;\n    });\n  };\n  handleCounterClock = () => {\n    let image: any = document.querySelector(\".image\");\n    this.setState({ rotateIndex: this.state.rotateIndex - 1 }, () => {\n      image.style.transform = `rotate(${this.state.rotateIndex * 90}deg)`;\n    });\n  };\n  render() {\n    return (\n      <div\n        className=\"image-preview\"\n        style={this.state.isShowImage ? {} : { display: \"none\" }}\n      >\n        <div\n          className=\"image-background\"\n          style={\n            this.state.isShowImage\n              ? { backgroundColor: \"rgba(75,75,75,0.3)\" }\n              : {}\n          }\n          onClick={(event) => {\n            this.hideImage(event);\n          }}\n        ></div>\n        <img\n          src=\"\"\n          alt=\"\"\n          className=\"image\"\n          style={\n            this.state.imageRatio === \"horizontal\"\n              ? { width: \"60vw\" }\n              : { height: \"90vh\" }\n          }\n        />\n        <div className=\"image-operation\">\n          <span\n            className=\"icon-zoom-in zoom-in-icon\"\n            onClick={() => {\n              this.handleZoomIn();\n            }}\n          ></span>\n          <span\n            className=\"icon-zoom-out zoom-out-icon\"\n            onClick={() => {\n              this.handleZoomOut();\n            }}\n          ></span>\n          <span\n            className=\"icon-save save-icon\"\n            onClick={() => {\n              this.handleSave();\n            }}\n          ></span>\n          <span\n            className=\"icon-clockwise clockwise-icon\"\n            onClick={() => {\n              this.handleClock();\n            }}\n          ></span>\n          <span\n            className=\"icon-counterclockwise counterclockwise-icon\"\n            onClick={() => {\n              this.handleCounterClock();\n            }}\n          ></span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ImageViewer;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport ImageViewer from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = {};\n\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ImageViewer as any));\n","//阅读器图书内容区域\nimport React from \"react\";\nimport PopupMenu from \"../../components/popups/popupMenu\";\nimport { ViewAreaProps, ViewAreaStates } from \"./interface\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport StyleUtil from \"../../utils/readUtils/styleUtil\";\nimport ImageViewer from \"../../components/imageViewer\";\nimport Lottie from \"react-lottie\";\nimport animationSiri from \"../../assets/lotties/siri.json\";\n\nconst siriOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationSiri,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\ndeclare var window: any;\n\nclass EpubViewer extends React.Component<ViewAreaProps, ViewAreaStates> {\n  isFirst: boolean;\n  constructor(props: ViewAreaProps) {\n    super(props);\n    this.state = {\n      cfiRange: null,\n      contents: null,\n      rect: null,\n      loading: true,\n    };\n    this.isFirst = true;\n  }\n\n  componentDidMount() {\n    let epub = this.props.currentEpub;\n    window.rangy.init(); // 初始化\n    this.props.rendition.on(\"locationChanged\", () => {\n      this.props.handleReadingEpub(epub);\n      this.props.handleOpenMenu(false);\n      const currentLocation = this.props.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      const cfi = currentLocation.start.cfi;\n      this.props.handleShowBookmark(\n        this.props.bookmarks &&\n          this.props.bookmarks.filter(\n            (item: BookmarkModel) => item.cfi === cfi\n          )[0]\n          ? true\n          : false\n      );\n\n      if (!this.isFirst && this.props.locations) {\n        let percentage = this.props.locations.percentageFromCfi(cfi);\n        RecordLocation.recordCfi(this.props.currentBook.key, cfi, percentage);\n        this.props.handlePercentage(percentage);\n      } else if (!this.isFirst) {\n        //如果过暂时没有解析出locations，就直接记录cfi\n        RecordLocation.recordCfi(\n          this.props.currentBook.key,\n          cfi,\n          RecordLocation.getCfi(this.props.currentBook.key).percentage\n        );\n      }\n      this.isFirst = false;\n    });\n    this.props.rendition.on(\"rendered\", () => {\n      this.setState({ loading: false });\n      let iframe = document.getElementsByTagName(\"iframe\")[0];\n      if (!iframe) return;\n      let doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n      StyleUtil.addDefaultCss();\n      this.props.rendition.themes.default(StyleUtil.getCustomCss(false));\n    });\n    this.props.rendition.on(\"selected\", (cfiRange: any, contents: any) => {\n      var range = contents.range(cfiRange);\n      var rect = range.getBoundingClientRect();\n      this.setState({ cfiRange, contents, rect });\n    });\n    this.props.rendition.themes.default(StyleUtil.getCustomCss(false));\n    this.props.rendition.display(\n      RecordLocation.getCfi(this.props.currentBook.key) === null\n        ? null\n        : RecordLocation.getCfi(this.props.currentBook.key).cfi\n    );\n  }\n\n  render() {\n    const popupMenuProps = {\n      rendition: this.props.rendition,\n      cfiRange: this.state.cfiRange,\n      contents: this.state.contents,\n      rect: this.state.rect,\n    };\n    return (\n      <div className=\"view-area\">\n        <ImageViewer\n          {...{\n            isShow: this.props.isShow,\n            rendition: this.props.rendition,\n            handleEnterReader: this.props.handleEnterReader,\n            handleLeaveReader: this.props.handleLeaveReader,\n          }}\n        />\n        <PopupMenu {...popupMenuProps} />\n        {this.state.loading ? (\n          <div className=\"spinner\">\n            <Lottie options={siriOptions} height={100} width={300} />\n          </div>\n        ) : null}\n        <>\n          {this.props.isShowBookmark ? <div className=\"bookmark\"></div> : null}\n        </>\n      </div>\n    );\n  }\n}\n\nexport default EpubViewer;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport ViewArea from \"./component\";\nimport { handlePercentage } from \"../../store/actions/progressPanel\";\nimport {\n  handleOpenMenu,\n  handleShowBookmark,\n} from \"../../store/actions/viewArea\";\nimport { handleReadingEpub } from \"../../store/actions/book\";\nimport \"./index.css\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    chapters: state.reader.chapters,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    locations: state.progressPanel.locations,\n    bookmarks: state.reader.bookmarks,\n    isShowBookmark: state.viewArea.isShowBookmark,\n  };\n};\nconst actionCreator = {\n  handlePercentage,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleReadingEpub,\n};\n\nexport default connect(mapStateToProps, actionCreator)(ViewArea);\n","//图书下面的背景，包括页边和书脊\nimport React from \"react\";\nimport \"./background.css\";\nimport { BackgroundProps, BackgroundState } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { Trans } from \"react-i18next\";\n\nclass Background extends React.Component<BackgroundProps, BackgroundState> {\n  isFirst: Boolean;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isSingle:\n        OtherUtil.getReaderConfig(\"readerMode\") &&\n        OtherUtil.getReaderConfig(\"readerMode\") !== \"double\",\n      currentChapter: \"\",\n      prevPage: 0,\n      nextPage: 0,\n      scale: OtherUtil.getReaderConfig(\"scale\") || 1,\n      isHideFooter: OtherUtil.getReaderConfig(\"isHideFooter\") === \"yes\",\n      isHideHeader: OtherUtil.getReaderConfig(\"isHideHeader\") === \"yes\",\n      isUseBackground: OtherUtil.getReaderConfig(\"isUseBackground\") === \"yes\",\n    };\n    this.isFirst = true;\n  }\n\n  componentWillReceiveProps(nextProps: BackgroundProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation = this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      this.isFirst && this.props.handleFetchLocations(this.props.currentEpub);\n      this.isFirst = false;\n      this.setState({\n        prevPage: currentLocation.start.displayed.page,\n        nextPage: currentLocation.end.displayed.page,\n      });\n      let chapterHref = currentLocation.start.href;\n      let chapter = \"Unknown Chapter\";\n      let currentChapter = this.props.flattenChapters.filter(\n        (item: any) => item.href.split(\"#\")[0] === chapterHref\n      )[0];\n      if (currentChapter) {\n        chapter = currentChapter.label.trim(\" \");\n      }\n      this.setState({ currentChapter: chapter });\n    }\n  }\n\n  render() {\n    if (this.state.isUseBackground) {\n      return (\n        <div\n          className=\"background\"\n          style={{\n            color: OtherUtil.getReaderConfig(\"textColor\")\n              ? OtherUtil.getReaderConfig(\"textColor\")\n              : \"\",\n          }}\n        >\n          {!this.state.isHideHeader && this.state.currentChapter && (\n            <p\n              className=\"progress-chapter-name\"\n              style={\n                this.state.isSingle\n                  ? {\n                      left: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              <Trans>{this.state.currentChapter}</Trans>\n            </p>\n          )}\n          {!this.state.isHideHeader && !this.state.isSingle && (\n            <p\n              className=\"progress-book-name\"\n              style={\n                this.state.isSingle\n                  ? {\n                      right: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              <Trans>{this.props.currentBook.name}</Trans>\n            </p>\n          )}\n          {!this.state.isHideFooter && this.state.prevPage > 0 && (\n            <p\n              className=\"background-page-left\"\n              style={\n                this.state.isSingle\n                  ? {\n                      left: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              <Trans i18nKey=\"Book Page\" count={this.state.prevPage}>\n                Page\n                {{\n                  count: this.state.prevPage,\n                }}\n              </Trans>\n            </p>\n          )}\n          {!this.state.isHideFooter &&\n            this.state.nextPage > 0 &&\n            !this.state.isSingle && (\n              <p className=\"background-page-right\">\n                <Trans i18nKey=\"Book Page\" count={this.state.nextPage}>\n                  Page\n                  {{\n                    count: this.state.nextPage,\n                  }}\n                </Trans>\n              </p>\n            )}\n        </div>\n      );\n    }\n    return (\n      <div\n        className=\"background\"\n        style={{\n          color: OtherUtil.getReaderConfig(\"textColor\")\n            ? OtherUtil.getReaderConfig(\"textColor\")\n            : \"\",\n        }}\n      >\n        {!this.state.isHideHeader && this.state.currentChapter && (\n          <p\n            className=\"progress-chapter-name\"\n            style={\n              this.state.isSingle\n                ? {\n                    left: `calc(50vw - \n                      270px)`,\n                  }\n                : {}\n            }\n          >\n            <Trans>{this.state.currentChapter}</Trans>\n          </p>\n        )}\n\n        {!this.state.isHideHeader && !this.state.isSingle && (\n          <p\n            className=\"progress-book-name\"\n            style={\n              this.state.isSingle\n                ? {\n                    right: `calc(50vw - \n                      270px)`,\n                  }\n                : {}\n            }\n          >\n            <Trans>{this.props.currentBook.name}</Trans>\n          </p>\n        )}\n\n        {!this.state.isHideFooter && this.state.prevPage > 0 && (\n          <p\n            className=\"background-page-left\"\n            style={\n              this.state.isSingle\n                ? {\n                    left: `calc(50vw - \n                      270px)`,\n                  }\n                : {}\n            }\n          >\n            <Trans i18nKey=\"Book Page\" count={this.state.prevPage}>\n              Page\n              {{\n                count: this.state.prevPage,\n              }}\n            </Trans>\n          </p>\n        )}\n        {!this.state.isHideFooter &&\n          this.state.nextPage > 0 &&\n          !this.state.isSingle && (\n            <p className=\"background-page-right\">\n              <Trans i18nKey=\"Book Page\" count={this.state.nextPage}>\n                Page\n                {{\n                  count: this.state.nextPage,\n                }}\n              </Trans>\n            </p>\n          )}\n        <div\n          className=\"background-box2\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 8 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - ${this.state.isSingle ? \"9\" : \"5\"}px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 7px)`,\n                  boxShadow: \"0 0 0px rgba(191, 191, 191, 1)\",\n                }\n              : {}\n          }\n        ></div>\n\n        <div\n          className=\"background-box3\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 10 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 9px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 9px)`,\n                }\n              : {}\n          }\n        >\n          {(!OtherUtil.getReaderConfig(\"backgroundColor\") &&\n            OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\") ||\n          OtherUtil.getReaderConfig(\"backgroundColor\") ===\n            \"rgba(44,47,49,1)\" ? (\n            <div\n              className=\"dark-spine-shadow-left\"\n              style={\n                this.state.isSingle ||\n                (OtherUtil.getReaderConfig(\"backgroundColor\") &&\n                  OtherUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\"))\n                  ? { display: \"none\" }\n                  : {}\n              }\n            ></div>\n          ) : (\n            <div\n              className=\"spine-shadow-left\"\n              style={\n                this.state.isSingle ||\n                (OtherUtil.getReaderConfig(\"backgroundColor\") &&\n                  OtherUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\"))\n                  ? { display: \"none\" }\n                  : {}\n              }\n            ></div>\n          )}\n          <div\n            className=\"book-spine\"\n            style={this.state.isSingle ? { display: \"none\" } : {}}\n          ></div>\n          {(!OtherUtil.getReaderConfig(\"backgroundColor\") &&\n            OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\") ||\n          OtherUtil.getReaderConfig(\"backgroundColor\") ===\n            \"rgba(44,47,49,1)\" ? (\n            <div\n              className=\"dark-spine-shadow-right\"\n              style={\n                OtherUtil.getReaderConfig(\"backgroundColor\") &&\n                OtherUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\")\n                  ? { display: \"none\" }\n                  : this.state.isSingle\n                  ? {\n                      position: \"relative\",\n                      right: 0,\n                    }\n                  : {}\n              }\n            ></div>\n          ) : (\n            <div\n              className=\"spine-shadow-right\"\n              style={\n                OtherUtil.getReaderConfig(\"backgroundColor\") &&\n                OtherUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\")\n                  ? { display: \"none\" }\n                  : this.state.isSingle\n                  ? {\n                      position: \"relative\",\n                      right: 0,\n                    }\n                  : {}\n              }\n            ></div>\n          )}\n        </div>\n\n        <div\n          className=\"background-box1\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 6 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - ${this.state.isSingle ? \"9\" : \"5\"}px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 5px)`,\n                  boxShadow: \"0 0 0px rgba(191, 191, 191, 1)\",\n                }\n              : {}\n          }\n        ></div>\n      </div>\n    );\n  }\n}\n\nexport default Background;\n","//图书下面的背景，包括页边和书脊\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Background from \"./component\";\nimport { handleFetchLocations } from \"../../store/actions/progressPanel\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    flattenChapters: state.reader.flattenChapters,\n    locations: state.progressPanel.locations,\n  };\n};\nconst actionCreator = { handleFetchLocations };\nexport default connect(mapStateToProps, actionCreator)(Background);\n","class ThemeUtil {\n  static setThemes(themeName: string) {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    const index = themeArr.indexOf(themeName);\n    if (index > -1) {\n      themeArr.splice(index, 1);\n      themeArr.unshift(themeName);\n    } else {\n      themeArr.unshift(themeName);\n    }\n\n    localStorage.setItem(\"themeColors\", JSON.stringify(themeArr));\n  }\n\n  static clear(themeName: string) {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    const index = themeArr.indexOf(themeName);\n    if (index > -1) {\n      themeArr.splice(index, 1);\n    }\n    localStorage.setItem(\"themeColors\", JSON.stringify(themeArr));\n  }\n  static getAllThemes() {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    return themeArr || [];\n  }\n}\n\nexport default ThemeUtil;\n","//修改阅读器背景色\nimport React from \"react\";\nimport { backgroundList, textList } from \"../../../constants/themeList\";\nimport StyleUtil from \"../../../utils/readUtils/styleUtil\";\nimport \"./themeList.css\";\nimport { Trans } from \"react-i18next\";\nimport { ThemeListProps, ThemeListState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { Panel as ColorPickerPanel } from \"rc-color-picker\";\nimport \"rc-color-picker/assets/index.css\";\nimport ThemeUtil from \"../../../utils/readUtils/themeUtil\";\nimport { Tooltip } from \"react-tippy\";\n\nclass ThemeList extends React.Component<ThemeListProps, ThemeListState> {\n  constructor(props: ThemeListProps) {\n    super(props);\n    this.state = {\n      currentBackgroundIndex: backgroundList\n        .concat(ThemeUtil.getAllThemes())\n        .findIndex((item) => {\n          return (\n            item ===\n            (OtherUtil.getReaderConfig(\"backgroundColor\") ||\n              \"rgba(255,255,255,1)\")\n          );\n        }),\n      currentTextIndex: textList\n        .concat(ThemeUtil.getAllThemes())\n        .findIndex((item) => {\n          return (\n            item === (OtherUtil.getReaderConfig(\"textColor\") || \"rgba(0,0,0,1)\")\n          );\n        }),\n      isShowTextPicker: false,\n      isShowBgPicker: false,\n    };\n  }\n  handleChangeBgColor = (color: string, index: number = -1) => {\n    OtherUtil.setReaderConfig(\"backgroundColor\", color);\n    this.setState({\n      currentBackgroundIndex: index,\n    });\n    if (index === 1) {\n      this.props.currentEpub.rendition &&\n        this.props.currentEpub.rendition.themes.default({\n          \"a, article, cite, code, div, li, p, pre, span, table\": {\n            color: `white !important`,\n          },\n        });\n      OtherUtil.setReaderConfig(\"textColor\", \"rgba(255,255,255,1)\");\n    } else if (\n      index === 0 &&\n      OtherUtil.getReaderConfig(\"backgroundColor\") === \"rgba(255,255,255,1)\"\n    ) {\n      this.props.currentEpub.rendition &&\n        this.props.currentEpub.rendition.themes.default({\n          \"a, article, cite, code, div, li, p, pre, span, table\": {\n            color: `black !important`,\n          },\n        });\n      OtherUtil.setReaderConfig(\"textColor\", \"rgba(0,0,0,1)\");\n    } else {\n      this.props.currentEpub.rendition &&\n        this.props.currentEpub.rendition.themes.default({\n          \"a, article, cite, code, div, li, p, pre, span, table\": {\n            color: `inherit !important`,\n          },\n        });\n    }\n    if (!this.props.currentEpub.rendition) {\n      this.handleRest();\n    } else {\n      StyleUtil.addDefaultCss();\n    }\n  };\n  handleRest = () => {\n    this.props.renderFunc();\n  };\n  handleChooseBgColor = (color) => {\n    OtherUtil.setReaderConfig(\"backgroundColor\", color.color);\n    StyleUtil.addDefaultCss();\n  };\n  handleColorTextPicker = (isShowTextPicker: boolean) => {\n    if (\n      !isShowTextPicker &&\n      textList.concat(ThemeUtil.getAllThemes()).findIndex((item) => {\n        return (\n          item === (OtherUtil.getReaderConfig(\"textColor\") || \"rgba(0,0,0,1)\")\n        );\n      }) === -1\n    ) {\n      ThemeUtil.setThemes(OtherUtil.getReaderConfig(\"textColor\"));\n    }\n    this.setState({ isShowTextPicker });\n  };\n  handleColorBgPicker = (isShowBgPicker: boolean) => {\n    if (\n      !isShowBgPicker &&\n      backgroundList.concat(ThemeUtil.getAllThemes()).findIndex((item) => {\n        return (\n          item ===\n          (OtherUtil.getReaderConfig(\"backgroundColor\") ||\n            \"rgba(255,255,255,1)\")\n        );\n      }) === -1\n    ) {\n      ThemeUtil.setThemes(OtherUtil.getReaderConfig(\"backgroundColor\"));\n    }\n    this.setState({ isShowBgPicker });\n  };\n  handleChooseTextColor = (color) => {\n    if (typeof color !== \"object\") {\n      this.setState({\n        currentTextIndex: textList\n          .concat(ThemeUtil.getAllThemes())\n          .indexOf(color),\n      });\n    }\n    OtherUtil.setReaderConfig(\n      \"textColor\",\n      typeof color === \"object\" ? color.color : color\n    );\n    this.props.currentEpub.rendition &&\n      this.props.currentEpub.rendition.themes.default({\n        \"a, article, cite, code, div, li, p, pre, span, table\": {\n          color: `${\n            typeof color === \"object\" ? color.color : color\n          } !important`,\n        },\n      });\n    this.handleRest();\n  };\n  render() {\n    const renderBackgroundColorList = () => {\n      return backgroundList\n        .concat(ThemeUtil.getAllThemes())\n        .map((item, index) => {\n          return (\n            <li\n              key={item + index}\n              className={\n                index === this.state.currentBackgroundIndex\n                  ? \"active-color background-color-circle\"\n                  : \"background-color-circle\"\n              }\n              onClick={() => {\n                this.handleChangeBgColor(item, index);\n              }}\n              style={{ backgroundColor: item }}\n            >\n              {index > 3 && index === this.state.currentBackgroundIndex && (\n                <span\n                  className=\"icon-close\"\n                  onClick={() => {\n                    ThemeUtil.clear(item);\n                  }}\n                ></span>\n              )}\n            </li>\n          );\n        });\n    };\n    const renderTextColorList = () => {\n      return textList.concat(ThemeUtil.getAllThemes()).map((item, index) => {\n        return (\n          <li\n            key={item + index}\n            className={\n              index === this.state.currentTextIndex\n                ? \"active-color background-color-circle\"\n                : \"background-color-circle\"\n            }\n            onClick={() => {\n              this.handleChooseTextColor(item);\n            }}\n            style={{ backgroundColor: item }}\n          >\n            {index > 3 && index === this.state.currentTextIndex && (\n              <span\n                className=\"icon-close\"\n                onClick={() => {\n                  ThemeUtil.clear(item);\n                }}\n              ></span>\n            )}\n          </li>\n        );\n      });\n    };\n    return (\n      <div className=\"background-color-setting\">\n        <div className=\"background-color-text\">\n          <Trans>Background Color</Trans>\n        </div>\n        <ul className=\"background-color-list\">\n          <Tooltip\n            title={this.props.t(\"Customize\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n            style={{ display: \"inline-block\" }}\n          >\n            <li\n              className=\"background-color-circle\"\n              onClick={() => {\n                this.handleColorBgPicker(!this.state.isShowBgPicker);\n              }}\n            >\n              <span\n                className={\n                  this.state.isShowBgPicker ? \"icon-check\" : \"icon-more\"\n                }\n              ></span>\n            </li>\n          </Tooltip>\n\n          {renderBackgroundColorList()}\n        </ul>\n        {this.state.isShowBgPicker && (\n          <ColorPickerPanel\n            enableAlpha={false}\n            color={OtherUtil.getReaderConfig(\"backgroundColor\")}\n            onChange={this.handleChooseBgColor}\n            mode=\"RGB\"\n            style={{\n              margin: 20,\n              animation: \"fade-in 0.2s ease-in-out 0s 1\",\n            }}\n          />\n        )}\n        <div className=\"background-color-text\">\n          <Trans>Text Color</Trans>\n        </div>\n        <ul className=\"background-color-list\">\n          <Tooltip\n            title={this.props.t(\"Customize\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n            style={{ display: \"inline-block\" }}\n          >\n            <li\n              className=\"background-color-circle\"\n              onClick={() => {\n                this.handleColorTextPicker(!this.state.isShowTextPicker);\n              }}\n            >\n              <span\n                className={\n                  this.state.isShowTextPicker ? \"icon-check\" : \"icon-more\"\n                }\n              ></span>\n            </li>\n          </Tooltip>\n\n          {renderTextColorList()}\n        </ul>\n        {this.state.isShowTextPicker && (\n          <ColorPickerPanel\n            enableAlpha={false}\n            color={OtherUtil.getReaderConfig(\"textColor\")}\n            onChange={this.handleChooseTextColor}\n            mode=\"RGB\"\n            style={{\n              margin: 20,\n              animation: \"fade-in 0.2s ease-in-out 0s 1\",\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default ThemeList;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport ThemeList from \"./component\";\nimport { stateType } from \"../../../store\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ThemeList as any));\n","//字体大小选择页面\nimport React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { SliderListProps, SliderListState } from \"./interface\";\nimport \"./sliderList.css\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { isElectron } from \"react-device-detect\";\n\nclass SliderList extends React.Component<SliderListProps, SliderListState> {\n  constructor(props: SliderListProps) {\n    super(props);\n    this.state = {\n      value:\n        this.props.mode === \"fontSize\"\n          ? OtherUtil.getReaderConfig(\"fontSize\") || \"17\"\n          : this.props.mode === \"scale\"\n          ? OtherUtil.getReaderConfig(\"scale\") || \"1\"\n          : this.props.mode === \"letterSpacing\"\n          ? OtherUtil.getReaderConfig(\"letterSpacing\") || \"0\"\n          : this.props.mode === \"paraSpacing\"\n          ? OtherUtil.getReaderConfig(\"paraSpacing\") || \"0\"\n          : this.props.mode === \"brightness\"\n          ? OtherUtil.getReaderConfig(\"brightness\") || \"1\"\n          : OtherUtil.getReaderConfig(\"margin\") || \"60\",\n    };\n  }\n  handleRest = () => {\n    if (this.props.mode === \"scale\" || this.props.mode === \"margin\") {\n      if (isElectron) {\n        this.props.handleMessage(\"Take effect at next startup\");\n        this.props.handleMessageBox(true);\n      } else {\n        window.location.reload();\n      }\n      return;\n    }\n    this.props.renderFunc();\n  };\n  onValueChange = (event: any) => {\n    if (this.props.mode === \"fontSize\") {\n      const fontSize = event.target.value;\n      this.setState({ value: fontSize });\n      OtherUtil.setReaderConfig(\"fontSize\", fontSize);\n    } else if (this.props.mode === \"scale\") {\n      const scale = event.target.value;\n      this.setState({ value: scale });\n      OtherUtil.setReaderConfig(\"scale\", scale);\n    } else if (this.props.mode === \"letterSpacing\") {\n      const letterSpacing = event.target.value;\n      this.setState({ value: letterSpacing });\n      OtherUtil.setReaderConfig(\"letterSpacing\", letterSpacing);\n    } else if (this.props.mode === \"paraSpacing\") {\n      const paraSpacing = event.target.value;\n      this.setState({ value: paraSpacing });\n      OtherUtil.setReaderConfig(\"paraSpacing\", paraSpacing);\n    } else if (this.props.mode === \"brightness\") {\n      const brightness = event.target.value;\n      this.setState({ value: brightness });\n      OtherUtil.setReaderConfig(\"brightness\", brightness);\n    } else {\n      const margin = event.target.value;\n      this.setState({ value: margin });\n      OtherUtil.setReaderConfig(\"margin\", margin);\n    }\n  };\n  //使进度百分比随拖动实时变化\n  onValueInput = (event: any) => {\n    this.setState({ value: event.target.value });\n  };\n  handleMinus = (step: number) => {\n    this.setState({ value: parseFloat(this.state.value) - step + \"\" });\n    this.onValueChange({\n      target: { value: parseFloat(this.state.value) - step + \"\" },\n    });\n  };\n  handleAdd = (step: number) => {\n    this.setState({ value: parseFloat(this.state.value) + step + \"\" });\n    this.onValueChange({\n      target: { value: parseFloat(this.state.value) + step + \"\" },\n    });\n  };\n  render() {\n    return (\n      <div className=\"font-size-setting\">\n        <div className=\"font-size-title\">\n          <Trans>{this.props.title}</Trans>\n          <input\n            className=\"input-value\"\n            defaultValue={this.state.value}\n            type=\"number\"\n            step={\n              this.props.title === \"Scale\" || this.props.title === \"Brightness\"\n                ? \"0.1\"\n                : \"1\"\n            }\n            onBlur={(event) => {\n              this.onValueChange(event);\n              this.handleRest();\n            }}\n          />\n          <span style={{ marginLeft: \"10px\" }}>{this.state.value}</span>\n        </div>\n\n        <span className=\"ultra-small-size\">{this.props.minLabel}</span>\n        <div className=\"font-size-selector\">\n          <input\n            className=\"input-progress\"\n            defaultValue={this.state.value}\n            type=\"range\"\n            max={this.props.maxValue}\n            min={this.props.minValue}\n            step={this.props.step}\n            onInput={(event) => {\n              this.onValueChange(event);\n            }}\n            onChange={(event) => {\n              this.onValueInput(event);\n            }}\n            onMouseUp={() => {\n              this.handleRest();\n            }}\n          />\n        </div>\n        {\n          <span\n            className=\"ultra-large-size\"\n            style={{ fontSize: \"16px\", right: \"5px\" }}\n          >\n            {this.props.maxLabel}\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SliderList;\n","//字体大小选择页面\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport SliderList from \"./component\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SliderList as any));\n","//图书样式设置的下拉菜单页面\nimport React from \"react\";\nimport { dropdownList } from \"../../../constants/dropdownList\";\nimport \"./dropdownList.css\";\nimport { Trans } from \"react-i18next\";\nimport { DropdownListProps, DropdownListState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nclass DropdownList extends React.Component<\n  DropdownListProps,\n  DropdownListState\n> {\n  constructor(props: DropdownListProps) {\n    super(props);\n    this.state = {\n      currentFontFamilyIndex: dropdownList[0].option.findIndex((item: any) => {\n        return (\n          item === (OtherUtil.getReaderConfig(\"fontFamily\") || \"Built-in font\")\n        );\n      }),\n      currentLineHeightIndex: dropdownList[1].option.findIndex((item: any) => {\n        return item === (OtherUtil.getReaderConfig(\"lineHeight\") || \"1.25\");\n      }),\n      currentTextAlignIndex: dropdownList[2].option.findIndex((item: any) => {\n        return item === (OtherUtil.getReaderConfig(\"textAlign\") || \"left\");\n      }),\n    };\n  }\n  componentDidMount() {\n    //使下拉菜单选中预设的值\n\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[0].children[1].children[\n        this.state.currentFontFamilyIndex === -1\n          ? 0\n          : this.state.currentFontFamilyIndex\n      ].setAttribute(\"selected\", \"selected\");\n\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[1].children[1].children[\n        this.state.currentLineHeightIndex\n      ].setAttribute(\"selected\", \"selected\");\n\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[2].children[1].children[\n        this.state.currentTextAlignIndex\n      ].setAttribute(\"selected\", \"selected\");\n  }\n  handleRest = () => {\n    this.props.renderFunc();\n  };\n  //切换不同的样式\n  handleView(event: any, option: string) {\n    let arr = event.target.value.split(\",\");\n    OtherUtil.setReaderConfig(option, arr[0]);\n    switch (option) {\n      case \"fontFamily\":\n        this.setState({\n          currentFontFamilyIndex: arr[1],\n        });\n\n        break;\n\n      case \"lineHeight\":\n        this.setState({\n          currentLineHeightIndex: arr[1],\n        });\n\n        break;\n      case \"textAlign\":\n        this.setState({\n          currentTextAlignIndex: arr[1],\n        });\n\n        break;\n      default:\n        break;\n    }\n    this.handleRest();\n  }\n  render() {\n    const renderParagraphCharacter = () => {\n      return dropdownList.map((item) => (\n        <li className=\"paragraph-character-container\" key={item.id}>\n          <p className=\"general-setting-title\">\n            <Trans>{item.title}</Trans>\n          </p>\n          <select\n            name=\"\"\n            className=\"general-setting-dropdown\"\n            onChange={(event) => {\n              this.handleView(event, item.value);\n            }}\n          >\n            {item.option.map((subItem: string, index: number) => (\n              <option\n                value={[subItem, index.toString()]}\n                key={index}\n                className=\"general-setting-option\"\n              >\n                {this.props.t(subItem)}\n              </option>\n            ))}\n          </select>\n        </li>\n      ));\n    };\n\n    return (\n      <ul className=\"paragraph-character-setting\">\n        {renderParagraphCharacter()}\n      </ul>\n    );\n  }\n}\n\nexport default DropdownList;\n","//图书样式设置的下拉菜单页面\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport DropdownList from \"./component\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DropdownList as any));\n","//阅读模式切换\nimport React from \"react\";\nimport \"./modeControl.css\";\nimport { ModeControlProps, ModeControlState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { Trans } from \"react-i18next\";\nimport { Tooltip } from \"react-tippy\";\nimport { isElectron } from \"react-device-detect\";\n\nclass ModeControl extends React.Component<ModeControlProps, ModeControlState> {\n  constructor(props: ModeControlProps) {\n    super(props);\n    this.state = {\n      readerMode: OtherUtil.getReaderConfig(\"readerMode\") || \"double\",\n    };\n  }\n\n  handleChangeMode = (mode: string) => {\n    this.setState({ readerMode: mode });\n    OtherUtil.setReaderConfig(\"readerMode\", mode);\n    if (isElectron) {\n      this.props.handleMessage(\"Take effect at next startup\");\n      this.props.handleMessageBox(true);\n    } else {\n      window.location.reload();\n    }\n  };\n  render() {\n    return (\n      <div className=\"background-color-setting\">\n        <div\n          className=\"background-color-text\"\n          style={{ position: \"relative\", bottom: \"15px\" }}\n        >\n          <Trans>View Mode</Trans>\n        </div>\n        <div className=\"single-control-container\">\n          <Tooltip\n            title={this.props.t(\"Single-Page Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"single-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"single\");\n              }}\n              style={this.state.readerMode === \"single\" ? {} : { opacity: 0.4 }}\n            >\n              <span className=\"icon-single-page single-page-icon\"></span>\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={this.props.t(\"Double-Page Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"double-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"double\");\n              }}\n              style={this.state.readerMode === \"double\" ? {} : { opacity: 0.4 }}\n            >\n              <span className=\"icon-two-page two-page-icon\"></span>\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={this.props.t(\"Scroll Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"double-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"continuous\");\n              }}\n              style={\n                this.state.readerMode === \"continuous\" ? {} : { opacity: 0.4 }\n              }\n            >\n              <span className=\"icon-scroll two-page-icon\"></span>\n            </div>\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n}\nexport default ModeControl;\n","//单双页切换\nimport { connect } from \"react-redux\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nimport { withTranslation } from \"react-i18next\";\nimport ModeControl from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ModeControl as any));\n","//右侧阅读选项面板\nimport React from \"react\";\nimport { TextToSpeechProps, TextToSpeechState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport { speedList } from \"../../constants/dropdownList\";\nimport OtherUtil from \"../../utils/otherUtil\";\n\nclass TextToSpeech extends React.Component<\n  TextToSpeechProps,\n  TextToSpeechState\n> {\n  constructor(props: TextToSpeechProps) {\n    super(props);\n    this.state = {\n      isSupported: false,\n      isAudioOn: false,\n      voices: [],\n    };\n  }\n  componentDidMount() {\n    if (\"speechSynthesis\" in window) {\n      this.setState({ isSupported: true });\n    }\n    if (this.state.isAudioOn) {\n      window.speechSynthesis && window.speechSynthesis.cancel();\n      this.setState({ isAudioOn: false });\n    }\n  }\n  handleChangeAudio = () => {\n    if (this.state.isAudioOn) {\n      window.speechSynthesis.cancel();\n      this.setState({ isAudioOn: false });\n    } else {\n      const setSpeech = () => {\n        return new Promise(function (resolve, reject) {\n          let synth = window.speechSynthesis;\n          let id;\n\n          id = setInterval(() => {\n            if (synth.getVoices().length !== 0) {\n              resolve(synth.getVoices());\n              clearInterval(id);\n            }\n          }, 10);\n        });\n      };\n\n      let s = setSpeech();\n      s.then((voices) => {\n        this.setState({ voices }, () => {\n          this.setState({ isAudioOn: true }, () => {\n            this.handleAudio();\n            if (\n              document.querySelector(\"#text-speech-speed\")!.children[0] &&\n              document.querySelector(\"#text-speech-voice\")!.children[0]\n            ) {\n              document\n                .querySelector(\"#text-speech-speed\")!\n                .children[\n                  speedList.option.indexOf(\n                    OtherUtil.getReaderConfig(\"voiceSpeed\") || \"1\"\n                  )\n                ].setAttribute(\"selected\", \"selected\");\n              document\n                .querySelector(\"#text-speech-voice\")!\n                .children[\n                  OtherUtil.getReaderConfig(\"voiceIndex\") || 0\n                ].setAttribute(\"selected\", \"selected\");\n            }\n          });\n        });\n      });\n    }\n  };\n  handleAudio = () => {\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    const cfibase = currentLocation.start.cfi\n      .replace(/!.*/, \"\")\n      .replace(\"epubcfi(\", \"\");\n    const cfistart = currentLocation.start.cfi\n      .replace(/.*!/, \"\")\n      .replace(/\\)/, \"\");\n    const cfiend = currentLocation.end.cfi.replace(/.*!/, \"\").replace(/\\)/, \"\");\n    const cfiRange = `epubcfi(${cfibase}!,${cfistart},${cfiend})`;\n    this.props.currentEpub.getRange(cfiRange).then((range: any) => {\n      let text = range.toString();\n      text = text\n        .replace(/\\s\\s/g, \"\")\n        .replace(/\\r/g, \"\")\n        .replace(/\\n/g, \"\")\n        .replace(/\\t/g, \"\")\n        .replace(/\\f/g, \"\");\n      this.handleSpeech(\n        text,\n        OtherUtil.getReaderConfig(\"voiceIndex\") || 0,\n        OtherUtil.getReaderConfig(\"voiceSpeed\") || 1\n      );\n    });\n  };\n  handleSpeech = (text: string, voiceIndex: number, speed: number) => {\n    var msg = new SpeechSynthesisUtterance();\n    msg.text = text;\n    msg.voice = window.speechSynthesis.getVoices()[voiceIndex];\n    msg.rate = speed;\n    window.speechSynthesis.speak(msg);\n    msg.onerror = (err) => {\n      console.log(err);\n    };\n    msg.onend = (event) => {\n      if (!(this.state.isAudioOn && this.props.isReading)) {\n        return;\n      }\n\n      this.props.currentEpub.rendition.next().then(() => {\n        this.handleAudio();\n      });\n    };\n  };\n\n  render() {\n    return (\n      <>\n        {this.state.isSupported ? (\n          <>\n            <div className=\"single-control-switch-container\">\n              <span className=\"single-control-switch-title\">\n                <Trans>Turn on audio</Trans>\n              </span>\n\n              <span\n                className=\"single-control-switch\"\n                onClick={() => {\n                  if (this.props.locations) {\n                    this.handleChangeAudio();\n                  } else {\n                    this.props.handleMessage(\"Audio is not ready yet\");\n                    this.props.handleMessageBox(true);\n                  }\n                }}\n                style={\n                  this.props.locations && this.state.isAudioOn\n                    ? {}\n                    : { opacity: 0.6 }\n                }\n              >\n                <span\n                  className=\"single-control-button\"\n                  style={\n                    this.state.isAudioOn\n                      ? {\n                          transform: \"translateX(20px)\",\n                          transition: \"transform 0.5s ease\",\n                        }\n                      : {\n                          transform: \"translateX(0px)\",\n                          transition: \"transform 0.5s ease\",\n                        }\n                  }\n                ></span>\n              </span>\n            </div>\n            {this.state.isAudioOn && this.state.voices.length > 0 && (\n              <div\n                className=\"setting-dialog-new-title\"\n                style={{\n                  marginLeft: \"20px\",\n                  width: \"88%\",\n                  marginTop: \"20px\",\n                  fontWeight: 500,\n                }}\n              >\n                <Trans>Voice</Trans>\n                <select\n                  name=\"\"\n                  className=\"lang-setting-dropdown\"\n                  id=\"text-speech-voice\"\n                  onChange={(event) => {\n                    OtherUtil.setReaderConfig(\"voiceIndex\", event.target.value);\n                    window.speechSynthesis.cancel();\n                  }}\n                >\n                  {this.state.voices.map((item, index) => {\n                    return (\n                      <option value={index} className=\"lang-setting-option\">\n                        {item.name}\n                      </option>\n                    );\n                  })}\n                </select>\n              </div>\n            )}\n            {this.state.isAudioOn && (\n              <div\n                className=\"setting-dialog-new-title\"\n                style={{ marginLeft: \"20px\", width: \"88%\", fontWeight: 500 }}\n              >\n                <Trans>Speed</Trans>\n                <select\n                  name=\"\"\n                  id=\"text-speech-speed\"\n                  className=\"lang-setting-dropdown\"\n                  onChange={(event) => {\n                    OtherUtil.setReaderConfig(\"voiceSpeed\", event.target.value);\n                    window.speechSynthesis.cancel();\n                  }}\n                >\n                  {speedList.option.map((item) => (\n                    <option value={item} className=\"lang-setting-option\">\n                      {item}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n          </>\n        ) : null}\n      </>\n    );\n  }\n}\n\nexport default TextToSpeech;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport TextToSpeech from \"./component\";\nimport { stateType } from \"../../store\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(TextToSpeech as any));\n","//右侧阅读选项面板\nimport React from \"react\";\nimport { SettingSwitchProps, SettingSwitchState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport TextToSpeech from \"../../textToSpeech\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport {\n  readerSettingList,\n  htmlSettingList,\n} from \"../../../constants/settingList\";\nimport { isElectron } from \"react-device-detect\";\n\nclass SettingSwitch extends React.Component<\n  SettingSwitchProps,\n  SettingSwitchState\n> {\n  constructor(props: SettingSwitchProps) {\n    super(props);\n    this.state = {\n      isBold: OtherUtil.getReaderConfig(\"isBold\") === \"yes\",\n      isUnderline: OtherUtil.getReaderConfig(\"isUnderline\") === \"yes\",\n      isShadow: OtherUtil.getReaderConfig(\"isShadow\") === \"yes\",\n      isItalic: OtherUtil.getReaderConfig(\"isItalic\") === \"yes\",\n      isInvert: OtherUtil.getReaderConfig(\"isInvert\") === \"yes\",\n      isUseBackground: OtherUtil.getReaderConfig(\"isUseBackground\") === \"yes\",\n      isHideFooter: OtherUtil.getReaderConfig(\"isHideFooter\") === \"yes\",\n      isHideHeader: OtherUtil.getReaderConfig(\"isHideHeader\") === \"yes\",\n    };\n  }\n  handleRest = () => {\n    this.props.renderFunc();\n  };\n  _handleRest = () => {\n    if (isElectron) {\n      this.props.handleMessage(\"Take effect at next startup\");\n      this.props.handleMessageBox(true);\n    } else {\n      window.location.reload();\n    }\n  };\n  handleBold = () => {\n    this.setState({ isBold: !this.state.isBold }, () => {\n      OtherUtil.setReaderConfig(\"isBold\", this.state.isBold ? \"yes\" : \"no\");\n      setTimeout(() => {\n        this.handleRest();\n      }, 500);\n    });\n  };\n  handleItalic = () => {\n    this.setState({ isItalic: !this.state.isItalic }, () => {\n      OtherUtil.setReaderConfig(\"isItalic\", this.state.isItalic ? \"yes\" : \"no\");\n      setTimeout(() => {\n        this.handleRest();\n      }, 500);\n    });\n  };\n  handleShadow = () => {\n    this.setState({ isShadow: !this.state.isShadow }, () => {\n      OtherUtil.setReaderConfig(\"isShadow\", this.state.isShadow ? \"yes\" : \"no\");\n      setTimeout(() => {\n        this.handleRest();\n      }, 500);\n    });\n  };\n  handleInvert = () => {\n    this.setState({ isInvert: !this.state.isInvert }, () => {\n      OtherUtil.setReaderConfig(\"isInvert\", this.state.isInvert ? \"yes\" : \"no\");\n      setTimeout(() => {\n        this.handleRest();\n      }, 500);\n    });\n  };\n  handleUnderline = () => {\n    this.setState({ isUnderline: !this.state.isUnderline }, () => {\n      OtherUtil.setReaderConfig(\n        \"isUnderline\",\n        this.state.isUnderline ? \"yes\" : \"no\"\n      );\n      setTimeout(() => {\n        this.handleRest();\n      }, 500);\n    });\n  };\n  handleChangeBackground = () => {\n    this.setState({ isUseBackground: !this.state.isUseBackground });\n    OtherUtil.setReaderConfig(\n      \"isUseBackground\",\n      this.state.isUseBackground ? \"no\" : \"yes\"\n    );\n    this.state.isUseBackground\n      ? this.props.handleMessage(\"Turn Off Successfully\")\n      : this.props.handleMessage(\"Turn On Successfully\");\n    this.props.handleMessageBox(true);\n    setTimeout(() => {\n      this._handleRest();\n    }, 500);\n  };\n  handleFooter = () => {\n    this.setState({ isHideFooter: !this.state.isHideFooter });\n    OtherUtil.setReaderConfig(\n      \"isHideFooter\",\n      this.state.isHideFooter ? \"no\" : \"yes\"\n    );\n    this.state.isHideFooter\n      ? this.props.handleMessage(\"Turn On Successfully\")\n      : this.props.handleMessage(\"Turn Off Successfully\");\n    this.props.handleMessageBox(true);\n    setTimeout(() => {\n      this._handleRest();\n    }, 500);\n  };\n  handleHeader = () => {\n    this.setState({ isHideHeader: !this.state.isHideHeader });\n    OtherUtil.setReaderConfig(\n      \"isHideHeader\",\n      this.state.isHideHeader ? \"no\" : \"yes\"\n    );\n    this.state.isHideHeader\n      ? this.props.handleMessage(\"Turn On Successfully\")\n      : this.props.handleMessage(\"Turn Off Successfully\");\n    this.props.handleMessageBox(true);\n    setTimeout(() => {\n      this._handleRest();\n    }, 500);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.currentEpub.archived && <TextToSpeech />}\n        {(this.props.currentEpub.rendition\n          ? readerSettingList\n          : htmlSettingList\n        ).map((item) => (\n          <div className=\"single-control-switch-container\" key={item.title}>\n            <span className=\"single-control-switch-title\">\n              <Trans>{item.title}</Trans>\n            </span>\n\n            <span\n              className=\"single-control-switch\"\n              onClick={() => {\n                switch (item.propName) {\n                  case \"isBold\":\n                    this.handleBold();\n                    break;\n                  case \"isItalic\":\n                    this.handleItalic();\n                    break;\n                  case \"isUnderline\":\n                    this.handleUnderline();\n                    break;\n                  case \"isShadow\":\n                    this.handleShadow();\n                    break;\n                  case \"isInvert\":\n                    this.handleInvert();\n                    break;\n                  case \"isHideFooter\":\n                    this.handleFooter();\n                    break;\n                  case \"isHideHeader\":\n                    this.handleHeader();\n                    break;\n                  case \"isUseBackground\":\n                    this.handleChangeBackground();\n                    break;\n                  default:\n                    break;\n                }\n              }}\n              style={this.state[item.propName] ? {} : { opacity: 0.6 }}\n            >\n              <span\n                className=\"single-control-button\"\n                style={\n                  !this.state[item.propName]\n                    ? {\n                        transform: \"translateX(0px)\",\n                        transition: \"transform 0.5s ease\",\n                      }\n                    : {\n                        transform: \"translateX(20px)\",\n                        transition: \"transform 0.5s ease\",\n                      }\n                }\n              ></span>\n            </span>\n          </div>\n        ))}\n      </>\n    );\n  }\n}\n\nexport default SettingSwitch;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport SettingSwitch from \"./component\";\nimport { stateType } from \"../../../store\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingSwitch as any));\n","//右侧阅读选项面板\nimport React from \"react\";\nimport \"./settingPanel.css\";\nimport ThemeList from \"../../../components/readerSettings/themeList\";\nimport SliderList from \"../../../components/readerSettings/sliderList\";\nimport DropdownList from \"../../../components/readerSettings/dropdownList\";\nimport ModeControl from \"../../../components/readerSettings/modeControl\";\nimport ReaderSwitch from \"../../../components/readerSettings/settingSwitch\";\nimport { SettingPanelProps, SettingPanelState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { Tooltip } from \"react-tippy\";\n\nclass SettingPanel extends React.Component<\n  SettingPanelProps,\n  SettingPanelState\n> {\n  constructor(props: SettingPanelProps) {\n    super(props);\n    this.state = {\n      readerMode: OtherUtil.getReaderConfig(\"readerMode\") || \"double\",\n      isSettingLocked:\n        OtherUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n    };\n  }\n\n  handleLock = () => {\n    this.setState({ isSettingLocked: !this.state.isSettingLocked }, () => {\n      OtherUtil.setReaderConfig(\n        \"isSettingLocked\",\n        this.state.isSettingLocked ? \"yes\" : \"no\"\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"setting-panel-parent\">\n        <Tooltip\n          title={this.props.t(this.state.isSettingLocked ? \"Unlock\" : \"Lock\")}\n          position=\"bottom\"\n          trigger=\"mouseenter\"\n          style={{ height: \"30px\", display: \"inline-block\", float: \"left\" }}\n        >\n          <span\n            className={\n              this.state.isSettingLocked\n                ? \"icon-lock lock-icon\"\n                : \"icon-unlock lock-icon\"\n            }\n            onClick={() => {\n              this.handleLock();\n            }}\n          ></span>\n        </Tooltip>\n        <div className=\"setting-panel-title\">\n          <Trans>Reading Option</Trans>\n        </div>\n        <div className=\"setting-panel\">\n          {this.props.currentEpub.archived && <ModeControl />}\n          <ThemeList />\n          <SliderList\n            {...{\n              maxValue: 31,\n              minValue: 13,\n              mode: \"fontSize\",\n              minLabel: \"13\",\n              maxLabel: \"31\",\n              step: 1,\n              title: \"Font Size\",\n            }}\n          />\n          {this.props.currentEpub.archived && (\n            <SliderList\n              {...{\n                maxValue: 80,\n                minValue: 0,\n                mode: \"margin\",\n                minLabel: \"0\",\n                maxLabel: \"100\",\n                step: 5,\n                title: \"Margin\",\n              }}\n            />\n          )}\n          <SliderList\n            {...{\n              maxValue: 20,\n              minValue: 0,\n              mode: \"letterSpacing\",\n              minLabel: \"0\",\n              maxLabel: \"20\",\n              step: 1,\n              title: \"Letter Spacing\",\n            }}\n          />\n          {this.props.currentEpub.archived && (\n            <SliderList\n              {...{\n                maxValue: 60,\n                minValue: 0,\n                mode: \"paraSpacing\",\n                minLabel: \"0\",\n                maxLabel: \"60\",\n                step: 1,\n                title: \"Paragraph Spacing\",\n              }}\n            />\n          )}\n          {(this.state.readerMode && this.state.readerMode !== \"double\") ||\n          !this.props.currentEpub.archived ? (\n            <SliderList\n              {...{\n                maxValue: 3,\n                minValue: 0.5,\n                mode: \"scale\",\n                minLabel: \"0.5\",\n                maxLabel: \"3\",\n                step: 0.1,\n                title: \"Scale\",\n              }}\n            />\n          ) : null}\n          <SliderList\n            {...{\n              maxValue: 2,\n              minValue: 0.5,\n              mode: \"brightness\",\n              minLabel: \"0.5\",\n              maxLabel: \"2\",\n              step: 0.1,\n              title: \"Brightness\",\n            }}\n          />\n          <DropdownList />\n          <ReaderSwitch />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SettingPanel;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport SettingPanel from \"./component\";\nimport { stateType } from \"../../../store\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingPanel as any));\n","//图书导航栏的目录列表\nimport React from \"react\";\nimport \"./contentList.css\";\nimport { ContentListProps, ContentListState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nclass ContentList extends React.Component<ContentListProps, ContentListState> {\n  constructor(props: ContentListProps) {\n    super(props);\n    this.state = {\n      chapters: [],\n      isCollapsed: true,\n      currentIndex: -1,\n      isExpandContent: OtherUtil.getReaderConfig(\"isExpandContent\") === \"yes\",\n    };\n    this.handleJump = this.handleJump.bind(this);\n  }\n\n  componentWillMount() {\n    //获取目录\n    if (this.props.currentEpub.loaded) {\n      this.props.currentEpub.loaded.navigation\n        .then((chapters: any) => {\n          this.setState({ chapters: chapters.toc });\n        })\n        .catch(() => {\n          console.log(\"Error occurs\");\n        });\n    }\n  }\n  componentDidMount() {\n    this.props.htmlBook &&\n      this.setState({\n        chapters: this.props.htmlBook.chapters,\n      });\n  }\n  handleJump(event: any) {\n    event.preventDefault();\n    let href = event.target.getAttribute(\"href\");\n    if (this.props.currentEpub.rendition) {\n      this.props.currentEpub.rendition.display(href);\n    } else {\n      let id = href.substr(1);\n\n      var top = window.frames[0].document.getElementById(id)?.offsetTop;\n      if (!top) return;\n      window.frames[0].scrollTo(0, top);\n    }\n  }\n  UNSAFE_componentWillReceiveProps(nextProps: ContentListProps) {\n    if (nextProps.htmlBook !== this.props.htmlBook) {\n      this.setState({ chapters: nextProps.htmlBook.chapters });\n    }\n  }\n  render() {\n    const renderContentList = (items: any, level: number) => {\n      level++;\n      return items.map((item: any, index: number) => {\n        return (\n          <li key={index} className=\"book-content-list\">\n            {item.subitems.length > 0 &&\n              level <= 2 &&\n              !this.state.isExpandContent && (\n                <span\n                  className=\"icon-dropdown content-dropdown\"\n                  onClick={() => {\n                    this.setState({\n                      currentIndex:\n                        this.state.currentIndex === index ? -1 : index,\n                    });\n                  }}\n                  style={\n                    this.state.currentIndex === index\n                      ? {}\n                      : { transform: \"rotate(-90deg)\" }\n                  }\n                ></span>\n              )}\n\n            <a\n              href={item.href}\n              onClick={this.handleJump}\n              className=\"book-content-name\"\n            >\n              {item.label}\n            </a>\n            {item.subitems.length > 0 &&\n            (this.state.currentIndex === index ||\n              level > 2 ||\n              this.state.isExpandContent) ? (\n              <ul>{renderContentList(item.subitems, level)}</ul>\n            ) : null}\n          </li>\n        );\n      });\n    };\n\n    return (\n      <div className=\"book-content-container\">\n        <ul className=\"book-content\">\n          {this.state.chapters && renderContentList(this.state.chapters, 1)}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default ContentList;\n","//图书导航栏的目录列表\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport ContentList from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    chapters: state.reader.chapters,\n    htmlBook: state.reader.htmlBook,\n  };\n};\nconst actionCreator = {};\nexport default connect(mapStateToProps, actionCreator)(ContentList);\n","//图书导航栏页面的书签，笔记，书摘页面\nimport React from \"react\";\nimport \"./navList.css\";\nimport { Trans } from \"react-i18next\";\nimport { NavListProps, NavListState } from \"./interface\";\nimport DeleteIcon from \"../../../components/deleteIcon\";\nclass NavList extends React.Component<NavListProps, NavListState> {\n  constructor(props: NavListProps) {\n    super(props);\n    this.state = {\n      deleteIndex: -1,\n    };\n  }\n  //跳转到图书的指定位置\n  handleJump(cfi: string) {\n    if (!cfi) {\n      this.props.handleMessage(\"Wrong bookmark\");\n      this.props.handleMessageBox(true);\n      return;\n    }\n    this.props.currentEpub.rendition.display(cfi);\n  }\n  handleShowDelete = (index: number) => {\n    this.setState({ deleteIndex: index });\n  };\n  render() {\n    let currentData: any = ((this.props.currentTab === \"bookmarks\"\n      ? this.props.bookmarks\n      : this.props.currentTab === \"notes\"\n      ? this.props.notes.filter((item) => item.notes !== \"\")\n      : this.props.digests) as any).filter((item: any) => {\n      return item.bookKey === this.props.currentBook.key;\n    });\n    const renderBookNavList = () => {\n      return currentData.reverse().map((item: any, index: number) => {\n        const bookmarkProps = {\n          itemKey: item.key,\n          mode: this.props.currentTab === \"bookmarks\" ? \"bookmarks\" : \"notes\",\n        };\n        return (\n          <li\n            className=\"book-bookmark-list\"\n            key={item.key}\n            onMouseEnter={() => {\n              this.handleShowDelete(index);\n            }}\n            onMouseLeave={() => {\n              this.handleShowDelete(-1);\n            }}\n          >\n            <p className=\"book-bookmark-digest\">\n              {this.props.currentTab === \"bookmarks\"\n                ? item.label\n                : this.props.currentTab === \"notes\"\n                ? item.notes\n                : item.text}\n            </p>\n            <div className=\"bookmark-page-list-item-title\">\n              <Trans>{item.chapter}</Trans>\n            </div>\n            <div className=\"book-bookmark-progress\">\n              {Math.floor(item.percentage * 100)}%\n            </div>\n            {this.state.deleteIndex === index ? (\n              <DeleteIcon {...bookmarkProps} />\n            ) : null}\n            <div\n              className=\"book-bookmark-link\"\n              onClick={() => {\n                this.handleJump(item.cfi);\n              }}\n              style={{ cursor: \"pointer\" }}\n            >\n              <Trans>Go To</Trans>\n            </div>\n          </li>\n        );\n      });\n    };\n    if (!currentData[0]) {\n      return (\n        <div className=\"navigation-panel-empty-bookmark\">\n          <Trans>Empty</Trans>\n        </div>\n      );\n    }\n    return (\n      <div className=\"book-bookmark-container\">\n        <ul className=\"book-bookmark\">{renderBookNavList()}</ul>\n      </div>\n    );\n  }\n}\n\nexport default NavList;\n","//图书导航栏页面的书签页面\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NavList from \"./component\";\nimport {\n  handleMessageBox,\n  handleMessage,\n} from \"../../../store/actions/manager\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    currentEpub: state.book.currentEpub,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = { handleMessageBox, handleMessage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NavList as any));\n","//左侧图书导航面板\nimport React from \"react\";\nimport \"./navigationPanel.css\";\nimport ContentList from \"../../lists/contentList\";\nimport BookNavList from \"../../lists/navList\";\nimport { Trans } from \"react-i18next\";\nimport { NavigationPanelProps, NavigationPanelState } from \"./interface\";\nimport SearchBox from \"../../../components/searchBox\";\nimport Parser from \"html-react-parser\";\nimport EmptyCover from \"../../../components/emptyCover\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport { Tooltip } from \"react-tippy\";\n\nclass NavigationPanel extends React.Component<\n  NavigationPanelProps,\n  NavigationPanelState\n> {\n  timer: any;\n  constructor(props: NavigationPanelProps) {\n    super(props);\n    this.state = {\n      currentTab: \"contents\",\n      chapters: [],\n      cover: this.props.currentBook.cover,\n      isSearch: false,\n      searchList: null,\n      startIndex: 0,\n      currentIndex: 0,\n      isNavLocked:\n        OtherUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n    };\n  }\n  handleSearchState = (isSearch: boolean) => {\n    this.setState({ isSearch });\n  };\n  handleSearchList = (searchList: any) => {\n    this.setState({ searchList });\n  };\n  componentDidMount() {\n    this.props.handleFetchBookmarks();\n  }\n\n  handleChangeTab = (currentTab: string) => {\n    this.setState({ currentTab });\n  };\n  handleLock = () => {\n    this.setState({ isNavLocked: !this.state.isNavLocked }, () => {\n      OtherUtil.setReaderConfig(\n        \"isNavLocked\",\n        this.state.isNavLocked ? \"yes\" : \"no\"\n      );\n    });\n  };\n  renderSearchList = () => {\n    if (!this.state.searchList[0]) {\n      return (\n        <div className=\"navigation-panel-empty-bookmark\">\n          <Trans>Empty</Trans>\n        </div>\n      );\n    }\n    return this.state.searchList\n      .slice(\n        this.state.currentIndex * 10,\n        this.state.currentIndex * 10 + 10 > this.state.searchList.length\n          ? this.state.searchList.length\n          : this.state.currentIndex * 10 + 10\n      )\n      .map((item: any, index: number) => {\n        return (\n          <li\n            className=\"nav-search-list-item\"\n            key={index}\n            onClick={() => {\n              this.props.currentEpub.rendition.display(item.cfi);\n            }}\n          >\n            {Parser(item.excerpt)}\n          </li>\n        );\n      });\n  };\n  renderSearchPage = () => {\n    let startIndex = this.state.startIndex;\n    let currentIndex =\n      startIndex > 0 ? startIndex + 2 : this.state.currentIndex;\n    let pageList: any[] = [];\n    let total = Math.ceil(this.state.searchList.length / 10);\n    if (total <= 5) {\n      for (let i = 0; i < total; i++) {\n        pageList.push(\n          <li\n            className={\n              currentIndex === i\n                ? \"nav-search-page-item active-page \"\n                : \"nav-search-page-item\"\n            }\n            onClick={() => {\n              this.setState({ currentIndex: i });\n            }}\n          >\n            {i + 1}\n          </li>\n        );\n      }\n    } else {\n      for (let i = 0; i < 5; i++) {\n        let isShow = currentIndex > 2 ? i === 2 : currentIndex === i;\n        pageList.push(\n          <li\n            className={\n              isShow\n                ? \"nav-search-page-item active-page \"\n                : \"nav-search-page-item\"\n            }\n            onClick={() => {\n              if (i === 3 && startIndex === 0) {\n                this.setState({\n                  startIndex: 1,\n                  currentIndex: 3,\n                });\n                return;\n              }\n              this.setState({\n                startIndex: currentIndex > 2 ? i + startIndex - 2 : 0,\n                currentIndex: i + startIndex,\n              });\n            }}\n          >\n            {i + startIndex + 1}\n          </li>\n        );\n      }\n    }\n    return pageList;\n  };\n  render() {\n    const searchProps = {\n      mode: this.state.isSearch ? \"\" : \"nav\",\n      width: \"100px\",\n      height: \"35px\",\n      isNavSearch: this.state.isSearch,\n      handleSearchState: this.handleSearchState,\n      handleSearchList: this.handleSearchList,\n    };\n    const bookmarkProps = {\n      currentTab: this.state.currentTab,\n    };\n    return (\n      <div className=\"navigation-panel\">\n        {this.state.isSearch ? (\n          <>\n            <div\n              className=\"nav-close-icon\"\n              onClick={() => {\n                this.handleSearchState(false);\n                this.props.handleSearch(false);\n                this.setState({ searchList: null });\n              }}\n            >\n              <span className=\"icon-close\"></span>\n            </div>\n\n            <div\n              className=\"header-search-container\"\n              style={this.state.isSearch ? { left: 40 } : {}}\n            >\n              <div\n                className=\"navigation-search-title\"\n                style={{ height: \"20px\", margin: \"0px 25px 13px\" }}\n              >\n                <Trans>Search the book</Trans>\n              </div>\n              <SearchBox {...searchProps} />\n            </div>\n            <ul className=\"nav-search-list\">\n              {this.state.searchList ? this.renderSearchList() : null}\n            </ul>\n            <ul className=\"nav-search-page\">\n              {this.state.searchList ? this.renderSearchPage() : null}\n            </ul>\n          </>\n        ) : (\n          <>\n            <div className=\"navigation-header\">\n              <Tooltip\n                title={this.props.t(this.state.isNavLocked ? \"Unlock\" : \"Lock\")}\n                position=\"bottom\"\n                trigger=\"mouseenter\"\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  right: 0,\n                  height: \"30px\",\n                }}\n              >\n                <span\n                  className={\n                    this.state.isNavLocked\n                      ? \"icon-lock nav-lock-icon\"\n                      : \"icon-unlock nav-lock-icon\"\n                  }\n                  onClick={() => {\n                    this.handleLock();\n                  }}\n                ></span>\n              </Tooltip>\n\n              {this.state.cover &&\n              this.props.currentBook.cover !== \"noCover\" &&\n              this.props.currentBook.publisher !== \"mobi\" &&\n              this.props.currentBook.publisher !== \"azw3\" &&\n              this.props.currentBook.publisher !== \"txt\" ? (\n                <img className=\"book-cover\" src={this.state.cover} alt=\"\" />\n              ) : (\n                <div className=\"book-cover\">\n                  <EmptyCover\n                    {...{\n                      format: this.props.currentBook.format,\n                      title: this.props.currentBook.name,\n                      scale: 0.86,\n                    }}\n                  />\n                </div>\n              )}\n\n              <p className=\"book-title\">{this.props.currentBook.name}</p>\n              <p className=\"book-arthur\">\n                <Trans>Author</Trans>:{\" \"}\n                <Trans>\n                  {this.props.currentBook.author\n                    ? this.props.currentBook.author\n                    : \"Unknown Authur\"}\n                </Trans>\n              </p>\n              <span className=\"reading-duration\">\n                <Trans>Reading Time</Trans>: {Math.floor(this.props.time / 60)}\n                &nbsp;\n                <Trans>Minute</Trans>\n              </span>\n              {this.props.currentEpub.archived && (\n                <div className=\"navigation-search-box\">\n                  <SearchBox {...searchProps} />\n                </div>\n              )}\n\n              <div className=\"navigation-navigation\">\n                <span\n                  className=\"book-content-title\"\n                  onClick={() => {\n                    this.handleChangeTab(\"contents\");\n                  }}\n                  style={\n                    this.state.currentTab === \"contents\" ? {} : { opacity: 0.5 }\n                  }\n                >\n                  <Trans>Content</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"bookmarks\"\n                      ? {}\n                      : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"bookmarks\");\n                  }}\n                >\n                  <Trans>Bookmark</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"notes\" ? {} : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"notes\");\n                  }}\n                >\n                  <Trans>Note</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"digests\" ? {} : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"digests\");\n                  }}\n                >\n                  <Trans>Digest</Trans>\n                </span>\n              </div>\n            </div>\n            <div className=\"navigation-body-parent\">\n              <div className=\"navigation-body\">\n                {this.state.currentTab === \"contents\" ? (\n                  <ContentList />\n                ) : (\n                  <BookNavList {...bookmarkProps} />\n                )}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default NavigationPanel;\n","//图书导航栏\nimport { connect } from \"react-redux\";\nimport { handleFetchBookmarks } from \"../../../store/actions/reader\";\nimport { handleSearch } from \"../../../store/actions/manager\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NavigationPanel from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n  };\n};\nconst actionCreator = { handleFetchBookmarks, handleSearch };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NavigationPanel as any));\n","class Bookmark {\n  key: string;\n  bookKey: string;\n  cfi: string;\n  label: string;\n  percentage: number;\n  chapter: string;\n  constructor(\n    bookKey: string,\n    cfi: string,\n    label: string,\n    percentage: number,\n    chapter: string\n  ) {\n    this.key = new Date().getTime() + \"\"; // 唯一的键\n    this.bookKey = bookKey; // 所属的书籍的键\n    this.cfi = cfi; // 标记阅读位置的cfi\n    this.label = label; // 此项书签的别名\n    this.percentage = percentage; // 此项书签的摘要\n    this.chapter = chapter; // 此项书签的摘要\n  }\n}\n\nexport default Bookmark;\n","//顶部图书操作面板\nimport React from \"react\";\nimport \"./operationPanel.css\";\nimport Bookmark from \"../../../model/Bookmark\";\nimport { Trans } from \"react-i18next\";\nimport localforage from \"localforage\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { OperationPanelProps, OperationPanelState } from \"./interface\";\nimport OtherUtil from \"../../../utils/otherUtil\";\nimport ReadingTime from \"../../../utils/readUtils/readingTime\";\nimport { withRouter } from \"react-router-dom\";\n\ndeclare var document: any;\n\nclass OperationPanel extends React.Component<\n  OperationPanelProps,\n  OperationPanelState\n> {\n  timeStamp: number;\n  speed: number;\n  timer: any;\n\n  constructor(props: OperationPanelProps) {\n    super(props);\n    this.state = {\n      isFullScreen:\n        OtherUtil.getReaderConfig(\"isFullScreen\") === \"yes\" ? true : false, // 是否进入全屏模式\n      isBookmark: false, // 是否添加书签\n      time: 0,\n      currentPercentage: RecordLocation.getCfi(this.props.currentBook.key)\n        ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n        : 0,\n      timeLeft: 0,\n    };\n    this.timeStamp = Date.now();\n    this.speed = 30000;\n  }\n  componentDidMount() {\n    window.onbeforeunload = () => {\n      this.handleExit();\n    };\n  }\n  componentWillReceiveProps(nextProps: OperationPanelProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation = this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      if (\n        this.props.currentEpub.rendition.currentLocation().percentage !==\n        nextProps.currentEpub.rendition.currentLocation().percentage\n      ) {\n        this.speed = Date.now() - this.timeStamp;\n        this.timeStamp = Date.now();\n      }\n      this.setState({\n        timeLeft:\n          ((currentLocation.start.displayed.total -\n            currentLocation.start.displayed.page) *\n            this.speed) /\n          1000,\n      });\n      // let nextPercentage = section.start.percentage;\n    }\n  }\n  // 点击切换全屏按钮触发\n  handleScreen() {\n    !this.state.isFullScreen\n      ? this.handleFullScreen()\n      : this.handleExitFullScreen();\n  }\n\n  //控制进入全屏\n  handleFullScreen() {\n    let de: any = document.documentElement;\n    if (de.requestFullscreen) {\n      de.requestFullscreen();\n    } else if (de.mozRequestFullScreen) {\n      de.mozRequestFullScreen();\n    } else if (de.webkitRequestFullscreen) {\n      de.webkitRequestFullscreen();\n    } else if (de.msRequestFullscreen) {\n      de.msRequestFullscreen();\n    }\n\n    this.setState({ isFullScreen: true });\n    OtherUtil.setReaderConfig(\"isFullScreen\", \"yes\");\n  }\n  // 退出全屏模式\n  handleExitFullScreen() {\n    //解决使用esc退出全屏，再退出阅读时发生的bug\n    if (!document.fullscreenElement) return;\n\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n\n    this.setState({ isFullScreen: false });\n    OtherUtil.setReaderConfig(\"isFullScreen\", \"no\");\n  }\n  handleAddBookmark() {\n    let bookKey = this.props.currentBook.key;\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    let chapterHref = currentLocation.start.href;\n    let chapter = \"Unknown Chapter\";\n    let currentChapter = this.props.flattenChapters.filter(\n      (item: any) =>\n        chapterHref.indexOf(item.href.split(\"#\")[0]) > -1 ||\n        item.href.split(\"#\")[0].indexOf(chapterHref) > -1\n    )[0];\n    if (currentChapter) {\n      chapter = currentChapter.label.trim(\" \");\n    }\n    const cfibase = currentLocation.start.cfi\n      .replace(/!.*/, \"\")\n      .replace(\"epubcfi(\", \"\");\n    const cfistart = currentLocation.start.cfi\n      .replace(/.*!/, \"\")\n      .replace(/\\)/, \"\");\n    const cfiend = currentLocation.end.cfi.replace(/.*!/, \"\").replace(/\\)/, \"\");\n    const cfiRange = `epubcfi(${cfibase}!,${cfistart},${cfiend})`;\n    const cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n    this.props.currentEpub.getRange(cfiRange).then((range: any) => {\n      if (!range) return;\n      let text = range.toString();\n      text = text.replace(/\\s\\s/g, \"\");\n      text = text.replace(/\\r/g, \"\");\n      text = text.replace(/\\n/g, \"\");\n      text = text.replace(/\\t/g, \"\");\n      text = text.replace(/\\f/g, \"\");\n      let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n        .percentage\n        ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n        : 0;\n      let bookmark = new Bookmark(\n        bookKey,\n        cfi,\n        text.substr(0, 200),\n        percentage,\n        chapter\n      );\n      let bookmarkArr = this.props.bookmarks ?? [];\n      bookmarkArr.push(bookmark);\n      this.props.handleBookmarks(bookmarkArr);\n      localforage.setItem(\"bookmarks\", bookmarkArr);\n      this.setState({ isBookmark: true });\n      this.props.handleMessage(\"Add Successfully\");\n      this.props.handleMessageBox(true);\n      this.props.handleShowBookmark(true);\n    });\n  }\n\n  // 点击退出按钮的处理程序\n  handleExit() {\n    OtherUtil.setReaderConfig(\"isFullScreen\", \"no\");\n    window.speechSynthesis && window.speechSynthesis.cancel();\n\n    this.handleExitFullScreen();\n\n    this.props.handleReadingState(false);\n    this.props.handleSearch(false);\n    this.props.handleOpenMenu(false);\n    ReadingTime.setTime(this.props.currentBook.key, this.props.time);\n    OtherUtil.setReaderConfig(\"windowWidth\", document.body.clientWidth);\n    OtherUtil.setReaderConfig(\"windowHeight\", document.body.clientHeight);\n    OtherUtil.setReaderConfig(\"windowX\", window.screenX + \"\");\n    OtherUtil.setReaderConfig(\"windowY\", window.screenY + \"\");\n  }\n\n  render() {\n    return (\n      <div className=\"book-operation-panel\">\n        <div className=\"book-opeartion-info\">\n          <span>\n            <Trans\n              i18nKey=\"Current Reading Time\"\n              count={Math.floor(\n                (this.props.time -\n                  ReadingTime.getTime(this.props.currentBook.key)) /\n                  60\n              )}\n            >\n              Current Reading Time:\n              {{\n                count: Math.abs(\n                  Math.floor(\n                    (this.props.time -\n                      ReadingTime.getTime(this.props.currentBook.key)) /\n                      60\n                  )\n                ),\n              }}\n              Minutes\n            </Trans>\n          </span>\n          &nbsp;&nbsp;&nbsp;\n          <span>\n            <Trans\n              i18nKey=\"Finish Reading Time\"\n              count={Math.ceil(this.state.timeLeft / 60)}\n            >\n              Finish Reading Time:\n              {{\n                count: `${Math.ceil(this.state.timeLeft / 60)}`,\n              }}\n              Minutes\n            </Trans>\n          </span>\n        </div>\n        <div\n          className=\"exit-reading-button\"\n          onClick={() => {\n            this.handleExit();\n            window.close();\n          }}\n        >\n          <span className=\"icon-exit exit-reading-icon\"></span>\n          <span className=\"exit-reading-text\">\n            <Trans>Exit</Trans>\n          </span>\n        </div>\n        <div\n          className=\"add-bookmark-button\"\n          onClick={() => {\n            if (this.props.currentEpub.rendition) {\n              this.handleAddBookmark();\n            } else {\n              this.props.handleMessage(\"Not supported yet\");\n              this.props.handleMessageBox(true);\n            }\n          }}\n        >\n          <span className=\"icon-add add-bookmark-icon\"></span>\n          <span className=\"add-bookmark-text\">\n            <Trans>Add Bookmark</Trans>\n          </span>\n        </div>\n        <div\n          className=\"enter-fullscreen-button\"\n          onClick={() => {\n            this.handleScreen();\n          }}\n        >\n          <span className=\"icon-fullscreen enter-fullscreen-icon\"></span>\n          {!this.state.isFullScreen ? (\n            <span className=\"enter-fullscreen-text\">\n              <Trans>Enter Fullscreen</Trans>\n            </span>\n          ) : (\n            <span className=\"enter-fullscreen-text\">\n              <Trans>Exit Fullscreen</Trans>\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(OperationPanel);\n","//图书操作页面\nimport { connect } from \"react-redux\";\nimport {\n  handleBookmarks,\n  handleFetchBookmarks,\n} from \"../../../store/actions/reader\";\nimport {\n  handleOpenMenu,\n  handleShowBookmark,\n} from \"../../../store/actions/viewArea\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleSearch,\n} from \"../../../store/actions/manager\";\nimport { handleReadingState } from \"../../../store/actions/book\";\nimport OperationPanel from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    books: state.manager.books,\n    locations: state.progressPanel.locations,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = {\n  handleBookmarks,\n  handleReadingState,\n  handleFetchBookmarks,\n  handleMessageBox,\n  handleMessage,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleSearch,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(OperationPanel as any));\n","//底部阅读进度面板\nimport React from \"react\";\nimport \"./progressPanel.css\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { Trans } from \"react-i18next\";\nimport { ProgressPanelProps, ProgressPanelState } from \"./interface\";\nimport Lottie from \"react-lottie\";\nimport animationSiri from \"../../../assets/lotties/siri.json\";\n\nconst siriOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationSiri,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nclass ProgressPanel extends React.Component<\n  ProgressPanelProps,\n  ProgressPanelState\n> {\n  constructor(props: ProgressPanelProps) {\n    super(props);\n    this.state = {\n      displayPercentage: this.props.percentage ? this.props.percentage : 0,\n      currentChapter: \"\",\n      currentPage: 0,\n      totalPage: 0,\n      currentChapterIndex: 0,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: ProgressPanelProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation = this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      this.setState({\n        currentPage: currentLocation.start.displayed.page,\n        totalPage: currentLocation.start.displayed.total,\n        currentChapterIndex: currentLocation.start.index,\n      });\n      let chapterHref = currentLocation.start.href;\n      let chapter = \"Unknown Chapter\";\n      let currentChapter = this.props.flattenChapters.filter(\n        (item: any) => item.href.split(\"#\")[0] === chapterHref\n      )[0];\n      if (currentChapter) {\n        chapter = currentChapter.label.trim(\" \");\n      }\n      this.setState({ currentChapter: chapter });\n    }\n    if (nextProps.currentBook.key) {\n      this.props.handleFetchPercentage(this.props.currentBook);\n    }\n    if (nextProps.percentage) {\n      this.setState({ displayPercentage: nextProps.percentage });\n    }\n  }\n  //WARNING! To be deprecated in React v17. Use componentDidMount instead.\n  onProgressChange = (event: any) => {\n    const percentage = event.target.value / 100;\n    const location = percentage\n      ? this.props.locations.cfiFromPercentage(percentage)\n      : 0;\n    this.props.currentEpub.rendition.display(location);\n  };\n  //使进度百分比随拖动实时变化\n  onProgressInput = (event: any) => {\n    this.setState({ displayPercentage: event.target.value / 100 });\n  };\n  previourChapter = () => {\n    if (!this.props.currentEpub.rendition) {\n      return;\n    }\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    if (!currentLocation.start) return;\n    let chapterIndex = currentLocation.start.index;\n    this.setState({\n      currentChapterIndex: chapterIndex,\n    });\n    const section = this.props.currentEpub.section(chapterIndex - 1);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  nextChapter = () => {\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    if (!currentLocation.start) return;\n    let chapterIndex = currentLocation.start.index;\n    this.setState({\n      currentChapterIndex: chapterIndex,\n    });\n    const section = this.props.currentEpub.section(chapterIndex + 1);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  handleJumpChapter = (event: any) => {\n    if (!event.target.value) return;\n    const section = this.props.currentEpub.section(event.target.value);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  handleJumpPage = (event: any) => {};\n  render() {\n    if (!this.props.locations && this.props.currentEpub.rendition) {\n      return (\n        <div className=\"progress-panel\">\n          <Lottie options={siriOptions} height={100} width={300} />\n        </div>\n      );\n    }\n    return (\n      <div className=\"progress-panel\">\n        <p className=\"progress-text\" style={{ marginTop: 10 }}>\n          <span>\n            <Trans>Current Progress</Trans>:{\" \"}\n            {Math.round(\n              this.state.displayPercentage > 1\n                ? 100\n                : this.state.displayPercentage * 100\n            )}\n            %&nbsp;&nbsp;&nbsp;\n          </span>\n        </p>\n\n        <p className=\"progress-text\" style={{ marginTop: 0 }}>\n          {this.state.currentPage > 0 ? (\n            <>\n              <Trans>Current Chapter Pages</Trans>\n              <input\n                type=\"text\"\n                name=\"jumpPage\"\n                id=\"jumpPage\"\n                onBlur={(event) => {\n                  this.handleJumpPage(event);\n                }}\n                value={this.state.currentPage}\n              />\n              <span>/ {this.state.totalPage}</span>&nbsp;&nbsp;&nbsp;\n              <Trans>Chapter Redirect</Trans>\n              <input\n                type=\"text\"\n                name=\"jumpChapter\"\n                id=\"jumpChapter\"\n                onBlur={(event) => {\n                  this.handleJumpChapter(event);\n                }}\n                defaultValue={this.state.currentChapterIndex}\n              />\n              <span>\n                / {this.props.currentEpub.rendition.book.spine.length}\n              </span>\n            </>\n          ) : null}\n        </p>\n        <div>\n          <input\n            className=\"input-progress\"\n            defaultValue={Math.round(this.state.displayPercentage * 100)}\n            type=\"range\"\n            max=\"100\"\n            min=\"0\"\n            step=\"1\"\n            onMouseUp={(event) => {\n              this.onProgressChange(event);\n            }}\n            onTouchEnd={(event) => {\n              this.onProgressChange(event);\n            }}\n            onChange={(event) => {\n              this.onProgressInput(event);\n            }}\n            style={{ width: 300, left: 50, top: 73 }}\n          />\n        </div>\n\n        <div\n          className=\"previous-chapter\"\n          onClick={() => {\n            this.previourChapter();\n          }}\n        >\n          <span className=\"icon-dropdown previous-chapter-icon\"> </span>\n        </div>\n        <div\n          className=\"next-chapter\"\n          onClick={() => {\n            this.nextChapter();\n          }}\n        >\n          <span className=\"icon-dropdown next-chapter-icon\"></span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProgressPanel;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ProgressPanel from \"./component\";\nimport { handleFetchPercentage } from \"../../../store/actions/progressPanel\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    percentage: state.progressPanel.percentage,\n    locations: state.progressPanel.locations,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = { handleFetchPercentage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ProgressPanel as any));\n","import OtherUtil from \"./otherUtil\";\nlet Hammer = (window as any).Hammer;\ndeclare var document: any;\nexport const MouseEvent = (rendition: any) => {\n  let isFirefox = navigator.userAgent.indexOf(\"Firefox\") > -1;\n  let lock = false; // 暂时锁住翻页快捷键，避免快速点击产生的Bug\n  const arrowKeys = (event: any) => {\n    // event.preventDefault();\n    if (lock) return;\n\n    if (event.keyCode === 37 || event.keyCode === 38) {\n      rendition.prev();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n    if (event.keyCode === 39 || event.keyCode === 40) {\n      rendition.next();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n  };\n  const mouseFirefox = (event: any) => {\n    event.preventDefault();\n    if (lock) return;\n    if (event.detail < 0) {\n      rendition.prev();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n    if (event.detail > 0) {\n      rendition.next();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n  };\n\n  const mouseChrome = (event: any) => {\n    if (lock) return;\n    if (event.wheelDelta > 0) {\n      rendition.prev();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n    if (event.wheelDelta < 0) {\n      rendition.next();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n  };\n\n  const gesture = (event: any) => {\n    if (lock) return;\n    if (event.type === \"panleft\" || event.type === \"panup\") {\n      rendition.next();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n    if (event.type === \"panright\" || event.type === \"pandown\") {\n      rendition.prev();\n      lock = true;\n      setTimeout(function () {\n        lock = false;\n      }, 100);\n      return false;\n    }\n  };\n  const bindEvent = (doc: any) => {\n    doc.addEventListener(\"keydown\", arrowKeys); // 箭头按键翻页\n    // 鼠标滚轮翻页\n    if (isFirefox) {\n      doc.addEventListener(\"DOMMouseScroll\", mouseFirefox, false);\n    } else {\n      doc.addEventListener(\"mousewheel\", mouseChrome, false);\n    }\n  };\n\n  rendition.on(\"rendered\", () => {\n    let iframe = document.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) {\n      return;\n    }\n    if (OtherUtil.getReaderConfig(\"isTouch\") === \"yes\") {\n      const mc = new Hammer(doc);\n      mc.on(\"panleft panright panup pandown\", (event: any) => {\n        gesture(event);\n      });\n    }\n\n    // 鼠标滚轮翻页\n    window.addEventListener(\"keydown\", arrowKeys);\n    bindEvent(doc);\n  });\n};\n","import React from \"react\";\nimport EpubViewer from \"../epubViewer\";\nimport Background from \"../background\";\nimport SettingPanel from \"../panels/settingPanel\";\nimport NavigationPanel from \"../panels/navigationPanel\";\nimport OperationPanel from \"../panels/operationPanel\";\nimport MessageBox from \"../messageBox\";\nimport ProgressPanel from \"../panels/progressPanel\";\nimport { ReaderProps, ReaderState } from \"./interface\";\nimport { MouseEvent } from \"../../utils/mouseEvent\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport ReadingTime from \"../../utils/readUtils/readingTime\";\n\nclass Reader extends React.Component<ReaderProps, ReaderState> {\n  messageTimer!: NodeJS.Timeout;\n  tickTimer!: NodeJS.Timeout;\n  rendition: any;\n\n  constructor(props: ReaderProps) {\n    super(props);\n    this.state = {\n      isOpenRightPanel:\n        OtherUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n      isOpenTopPanel: false,\n      isOpenBottomPanel: false,\n      isOpenLeftPanel:\n        OtherUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n      isMessage: false,\n      rendition: null,\n      scale: OtherUtil.getReaderConfig(\"scale\") || 1,\n      margin: parseInt(OtherUtil.getReaderConfig(\"margin\")) || 30,\n      time: ReadingTime.getTime(this.props.currentBook.key),\n      isTouch: OtherUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      readerMode: OtherUtil.getReaderConfig(\"readerMode\") || \"double\",\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchPercentage(this.props.currentBook);\n    this.props.handleFetchNotes();\n    this.props.handleFetchBooks();\n    this.props.handleFetchChapters(this.props.currentEpub);\n  }\n  UNSAFE_componentWillReceiveProps(nextProps: ReaderProps) {\n    this.setState({\n      isMessage: nextProps.isMessage,\n    });\n\n    //控制消息提示两秒之后消失\n    if (nextProps.isMessage) {\n      this.messageTimer = setTimeout(() => {\n        this.props.handleMessageBox(false);\n        this.setState({ isMessage: false });\n      }, 2000);\n    }\n  }\n  componentDidMount() {\n    this.handleRenderBook();\n    this.props.handleRenderFunc(this.handleRenderBook);\n    window.addEventListener(\"resize\", () => {\n      this.handleRenderBook();\n    });\n    this.tickTimer = setInterval(() => {\n      let time = this.state.time;\n      time += 1;\n      let page = document.querySelector(\"#page-area\");\n      //解决快速翻页过程中图书消失的bug\n      let renderedBook = document.querySelector(\".epub-view\");\n      if (\n        renderedBook &&\n        !renderedBook.innerHTML &&\n        this.state.readerMode !== \"continuous\"\n      ) {\n        this.handleRenderBook();\n      }\n      let ele = page!.getElementsByClassName(\"epub-container\")[0];\n      if (page!.getElementsByClassName(\"epub-container\").length > 1 && ele) {\n        ele.parentNode?.removeChild(ele);\n      }\n      this.setState({ time });\n      this.handleRecord();\n    }, 1000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.tickTimer);\n  }\n  handleRenderBook = () => {\n    let page = document.querySelector(\"#page-area\");\n    let epub = this.props.currentEpub;\n    if (page!.innerHTML) {\n      page!.innerHTML = \"\";\n    }\n\n    this.setState({ rendition: null }, () => {\n      (window as any).rangy.init(); // 初始化\n      this.rendition = epub.renderTo(page, {\n        manager:\n          this.state.readerMode === \"continuous\" ? \"continuous\" : \"default\",\n        flow: this.state.readerMode === \"continuous\" ? \"scrolled\" : \"auto\",\n        width: \"100%\",\n        height: \"100%\",\n        snap: true,\n        spread:\n          OtherUtil.getReaderConfig(\"readerMode\") === \"single\" ? \"none\" : \"\",\n      });\n      this.setState({ rendition: this.rendition });\n      this.state.readerMode !== \"continuous\" && MouseEvent(this.rendition); // 绑定事件\n    });\n  };\n  handleRecord() {\n    OtherUtil.setReaderConfig(\"isFullScreen\", \"no\");\n\n    OtherUtil.setReaderConfig(\"windowWidth\", document.body.clientWidth + \"\");\n    OtherUtil.setReaderConfig(\"windowHeight\", document.body.clientHeight + \"\");\n    OtherUtil.setReaderConfig(\"windowX\", window.screenX + \"\");\n    OtherUtil.setReaderConfig(\"windowY\", window.screenY + \"\");\n  }\n  //进入阅读器\n  handleEnterReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        this.setState({\n          isOpenRightPanel: this.state.isOpenRightPanel ? false : true,\n        });\n        break;\n      case \"left\":\n        this.setState({\n          isOpenLeftPanel: this.state.isOpenLeftPanel ? false : true,\n        });\n        break;\n      case \"top\":\n        this.setState({\n          isOpenTopPanel: this.state.isOpenTopPanel ? false : true,\n        });\n        break;\n      case \"bottom\":\n        this.setState({\n          isOpenBottomPanel: this.state.isOpenBottomPanel ? false : true,\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  //退出阅读器\n  handleLeaveReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        if (OtherUtil.getReaderConfig(\"isSettingLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenRightPanel: false });\n          break;\n        }\n\n      case \"left\":\n        if (OtherUtil.getReaderConfig(\"isNavLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenLeftPanel: false });\n          break;\n        }\n      case \"top\":\n        this.setState({ isOpenTopPanel: false });\n        break;\n      case \"bottom\":\n        this.setState({ isOpenBottomPanel: false });\n        break;\n      default:\n        break;\n    }\n  };\n  nextPage = () => {\n    this.state.rendition.next();\n  };\n  prevPage = () => {\n    this.state.rendition.prev();\n  };\n  render() {\n    const renditionProps = {\n      rendition: this.state.rendition,\n      handleLeaveReader: this.handleLeaveReader,\n      handleEnterReader: this.handleEnterReader,\n      isShow:\n        this.state.isOpenLeftPanel ||\n        this.state.isOpenTopPanel ||\n        this.state.isOpenBottomPanel ||\n        this.state.isOpenRightPanel,\n    };\n    return (\n      <div className=\"viewer\">\n        <div\n          className=\"previous-chapter-single-container\"\n          onClick={() => {\n            this.prevPage();\n          }}\n        >\n          <span className=\"icon-dropdown previous-chapter-single\"></span>\n        </div>\n        <div\n          className=\"next-chapter-single-container\"\n          onClick={() => {\n            this.nextPage();\n          }}\n        >\n          <span className=\"icon-dropdown next-chapter-single\"></span>\n        </div>\n        <div\n          className=\"reader-setting-icon-container\"\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n            this.handleEnterReader(\"right\");\n            this.handleEnterReader(\"bottom\");\n            this.handleEnterReader(\"top\");\n          }}\n        >\n          <span className=\"icon-grid reader-setting-icon\"></span>\n        </div>\n        {this.state.isMessage ? <MessageBox /> : null}\n        <div\n          className=\"left-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenLeftPanel) {\n              return;\n            }\n            this.handleEnterReader(\"left\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n          }}\n        ></div>\n        <div\n          className=\"right-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenRightPanel) {\n              return;\n            }\n            this.handleEnterReader(\"right\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"right\");\n          }}\n        ></div>\n        <div\n          className=\"top-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenTopPanel) {\n              return;\n            }\n            this.handleEnterReader(\"top\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"top\");\n          }}\n        ></div>\n        <div\n          className=\"bottom-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenBottomPanel) {\n              return;\n            }\n            this.handleEnterReader(\"bottom\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"bottom\");\n          }}\n        ></div>\n\n        {this.state.rendition && this.props.currentEpub.rendition && (\n          <EpubViewer {...renditionProps} />\n        )}\n        <div\n          className=\"setting-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"right\");\n          }}\n          style={\n            this.state.isOpenRightPanel\n              ? {}\n              : {\n                  transform: \"translateX(309px)\",\n                }\n          }\n        >\n          <SettingPanel />\n        </div>\n        <div\n          className=\"navigation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"left\");\n          }}\n          style={\n            this.state.isOpenLeftPanel\n              ? {}\n              : {\n                  transform: \"translateX(-309px)\",\n                }\n          }\n        >\n          <NavigationPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"progress-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"bottom\");\n          }}\n          style={\n            this.state.isOpenBottomPanel\n              ? {}\n              : {\n                  transform: \"translateY(110px)\",\n                }\n          }\n        >\n          <ProgressPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"operation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"top\");\n          }}\n          style={\n            this.state.isOpenTopPanel\n              ? {}\n              : {\n                  transform: \"translateY(-110px)\",\n                }\n          }\n        >\n          <OperationPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"view-area-page\"\n          id=\"page-area\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 0, right: 0 }\n              : this.state.readerMode === \"continuous\"\n              ? {\n                  left: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  right: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  top: \"75px\",\n                  bottom: \"75px\",\n                }\n              : this.state.readerMode === \"single\"\n              ? {\n                  left: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  right: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                }\n              : this.state.readerMode === \"double\"\n              ? {\n                  left: this.state.margin - 40 + \"px\",\n                  right: this.state.margin - 40 + \"px\",\n                }\n              : {}\n          }\n        ></div>\n\n        <Background {...{ time: this.state.time }} />\n      </div>\n    );\n  }\n}\n\nexport default Reader;\n","import {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n} from \"../../store/actions/reader\";\nimport { handleFetchPercentage } from \"../../store/actions/progressPanel\";\nimport {\n  handleMessageBox,\n  handleFetchBooks,\n} from \"../../store/actions/manager\";\nimport { handleRenderFunc } from \"../../store/actions/book\";\nimport \"./index.css\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Reader from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    isMessage: state.manager.isMessage,\n  };\n};\nconst actionCreator = {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleMessageBox,\n  handleFetchPercentage,\n  handleFetchBooks,\n  handleRenderFunc,\n};\nexport default connect(mapStateToProps, actionCreator)(Reader);\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { EpubReaderProps, EpubReaderState } from \"./interface\";\nimport localforage from \"localforage\";\nimport Reader from \"../../containers/epubReader\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport Lottie from \"react-lottie\";\nimport \"../../assets/styles/reset.css\";\nimport animationSiri from \"../../assets/lotties/siri.json\";\n\nconst siriOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationSiri,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\ndeclare var window: any;\n\nclass EpubReader extends React.Component<EpubReaderProps, EpubReaderState> {\n  epub: any;\n  constructor(props: EpubReaderProps) {\n    super(props);\n    this.state = {};\n  }\n\n  componentWillMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n\n    localforage.getItem(\"books\").then((result: any) => {\n      let book = result[_.findIndex(result, { key })];\n      BookUtil.fetchBook(key).then((result) => {\n        this.props.handleReadingBook(book);\n        this.props.handleReadingEpub(window.ePub(result, {}));\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n      });\n    });\n  }\n\n  render() {\n    if (!this.props.isReading) {\n      return (\n        <div className=\"spinner\">\n          <Lottie options={siriOptions} height={100} width={300} />\n        </div>\n      );\n    }\n    return <Reader />;\n  }\n}\nexport default withRouter(EpubReader);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport EpubReader from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(mapStateToProps, actionCreator)(EpubReader);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport { handleHtmlBook } from \"../../store/actions/reader\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\nimport { handleRenderFunc } from \"../../store/actions/book\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n    htmlBook: state.reader.htmlBook,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n  handleHtmlBook,\n  handleRenderFunc,\n};\nexport default connect(mapStateToProps, actionCreator)(Viewer as any);\n","import React from \"react\";\nimport SettingPanel from \"../../containers/panels/settingPanel\";\nimport NavigationPanel from \"../../containers/panels/navigationPanel\";\nimport OperationPanel from \"../../containers/panels/operationPanel\";\nimport MessageBox from \"../../containers/messageBox\";\nimport ProgressPanel from \"../../containers/panels/progressPanel\";\nimport { ReaderProps, ReaderState } from \"./interface\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport ReadingTime from \"../../utils/readUtils/readingTime\";\nimport Viewer from \"../../containers/htmlViewer\";\n\nclass Reader extends React.Component<ReaderProps, ReaderState> {\n  messageTimer!: NodeJS.Timeout;\n  tickTimer!: NodeJS.Timeout;\n  rendition: any;\n\n  constructor(props: ReaderProps) {\n    super(props);\n    this.state = {\n      isOpenRightPanel:\n        OtherUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n      isOpenTopPanel: false,\n      isOpenBottomPanel: false,\n      isOpenLeftPanel:\n        OtherUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n      isMessage: false,\n      rendition: null,\n      scale: OtherUtil.getReaderConfig(\"scale\") || 1,\n      margin: parseInt(OtherUtil.getReaderConfig(\"margin\")) || 30,\n      time: ReadingTime.getTime(this.props.currentBook.key),\n      isTouch: OtherUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      readerMode: OtherUtil.getReaderConfig(\"readerMode\") || \"double\",\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: ReaderProps) {\n    this.setState({\n      isMessage: nextProps.isMessage,\n    });\n\n    //控制消息提示两秒之后消失\n    if (nextProps.isMessage) {\n      this.messageTimer = setTimeout(() => {\n        this.props.handleMessageBox(false);\n        this.setState({ isMessage: false });\n      }, 2000);\n    }\n  }\n\n  //进入阅读器\n  handleEnterReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        this.setState({\n          isOpenRightPanel: this.state.isOpenRightPanel ? false : true,\n        });\n        break;\n      case \"left\":\n        this.setState({\n          isOpenLeftPanel: this.state.isOpenLeftPanel ? false : true,\n        });\n        break;\n      case \"top\":\n        this.setState({\n          isOpenTopPanel: this.state.isOpenTopPanel ? false : true,\n        });\n        break;\n      case \"bottom\":\n        this.setState({\n          isOpenBottomPanel: this.state.isOpenBottomPanel ? false : true,\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  //退出阅读器\n  handleLeaveReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        if (OtherUtil.getReaderConfig(\"isSettingLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenRightPanel: false });\n          break;\n        }\n\n      case \"left\":\n        if (OtherUtil.getReaderConfig(\"isNavLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenLeftPanel: false });\n          break;\n        }\n      case \"top\":\n        this.setState({ isOpenTopPanel: false });\n        break;\n      case \"bottom\":\n        this.setState({ isOpenBottomPanel: false });\n        break;\n      default:\n        break;\n    }\n  };\n  nextPage = () => {\n    this.state.rendition.next();\n  };\n  prevPage = () => {\n    this.state.rendition.prev();\n  };\n  render() {\n    const renditionProps = {\n      rendition: this.state.rendition,\n      handleLeaveReader: this.handleLeaveReader,\n      handleEnterReader: this.handleEnterReader,\n      isShow:\n        this.state.isOpenLeftPanel ||\n        this.state.isOpenTopPanel ||\n        this.state.isOpenBottomPanel ||\n        this.state.isOpenRightPanel,\n    };\n    return (\n      <div className=\"viewer\">\n        <div\n          className=\"reader-setting-icon-container\"\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n            this.handleEnterReader(\"right\");\n            this.handleEnterReader(\"bottom\");\n            this.handleEnterReader(\"top\");\n          }}\n        >\n          <span className=\"icon-grid reader-setting-icon\"></span>\n        </div>\n        {this.state.isMessage ? <MessageBox /> : null}\n        <div\n          className=\"left-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenLeftPanel) {\n              return;\n            }\n            this.handleEnterReader(\"left\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n          }}\n        ></div>\n        <div\n          className=\"right-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenRightPanel) {\n              return;\n            }\n            this.handleEnterReader(\"right\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"right\");\n          }}\n        ></div>\n        <div\n          className=\"top-panel\"\n          onMouseEnter={() => {\n            if (this.state.isTouch || this.state.isOpenTopPanel) {\n              return;\n            }\n            this.handleEnterReader(\"top\");\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"top\");\n          }}\n        ></div>\n        {this.props.currentEpub.archived && (\n          <div\n            className=\"bottom-panel\"\n            onMouseEnter={() => {\n              if (this.state.isTouch || this.state.isOpenBottomPanel) {\n                return;\n              }\n              this.handleEnterReader(\"bottom\");\n            }}\n            onClick={() => {\n              this.handleEnterReader(\"bottom\");\n            }}\n          ></div>\n        )}\n        <Viewer {...renditionProps} />\n        <div\n          className=\"setting-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"right\");\n          }}\n          style={\n            this.state.isOpenRightPanel\n              ? {}\n              : {\n                  transform: \"translateX(309px)\",\n                }\n          }\n        >\n          <SettingPanel />\n        </div>\n        <div\n          className=\"navigation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"left\");\n          }}\n          style={\n            this.state.isOpenLeftPanel\n              ? {}\n              : {\n                  transform: \"translateX(-309px)\",\n                }\n          }\n        >\n          <NavigationPanel {...{ time: this.state.time }} />\n        </div>\n        {this.props.currentEpub.archived && (\n          <div\n            className=\"progress-panel-container\"\n            onMouseLeave={(event) => {\n              this.handleLeaveReader(\"bottom\");\n            }}\n            style={\n              this.state.isOpenBottomPanel\n                ? {}\n                : {\n                    transform: \"translateY(110px)\",\n                  }\n            }\n          >\n            <ProgressPanel {...{ time: this.state.time }} />\n          </div>\n        )}\n        <div\n          className=\"operation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"top\");\n          }}\n          style={\n            this.state.isOpenTopPanel\n              ? {}\n              : {\n                  transform: \"translateY(-110px)\",\n                }\n          }\n        >\n          <OperationPanel {...{ time: this.state.time }} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Reader;\n","import {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n} from \"../../store/actions/reader\";\n\nimport {\n  handleMessageBox,\n  handleFetchBooks,\n} from \"../../store/actions/manager\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Reader from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    isMessage: state.manager.isMessage,\n    percentage: state.progressPanel.percentage,\n  };\n};\nconst actionCreator = {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleMessageBox,\n  handleFetchBooks,\n};\nexport default connect(mapStateToProps, actionCreator)(Reader);\n","//卡片模式下的图书显示\nimport React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport \"./viewer.css\";\nimport OtherUtil from \"../../utils/otherUtil\";\n\ndeclare var window: any;\n\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n\n    localforage.getItem(\"books\").then((result: any) => {\n      let book = result[_.findIndex(result, { key })];\n      BookUtil.fetchBook(key, true).then((result) => {\n        this.props.handleReadingBook(book);\n        this.handleDjvu(result as ArrayBuffer);\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n      });\n    });\n    document\n      .querySelector(\".ebook-viewer\")\n      ?.setAttribute(\"style\", \"height:100%\");\n    window.onbeforeunload = () => {\n      this.handleExit();\n    };\n  }\n  // 点击退出按钮的处理程序\n  handleExit() {\n    this.props.handleReadingState(false);\n\n    OtherUtil.setReaderConfig(\"windowWidth\", document.body.clientWidth + \"\");\n    OtherUtil.setReaderConfig(\"windowHeight\", document.body.clientHeight + \"\");\n    OtherUtil.setReaderConfig(\"windowX\", window.screenX + \"\");\n    OtherUtil.setReaderConfig(\"windowY\", window.screenY + \"\");\n  }\n\n  handleDjvu = async (result: ArrayBuffer) => {\n    setTimeout(() => {\n      var ViewerInstance = new window.DjVu.Viewer();\n      ViewerInstance.render(document.querySelector(\".ebook-viewer\"));\n      ViewerInstance.loadDocument(result);\n    }, 100);\n  };\n\n  render() {\n    return <div className=\"ebook-viewer\">Loading</div>;\n  }\n}\nexport default withRouter(Viewer as any);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(mapStateToProps, actionCreator)(Viewer as any);\n","//卡片模式下的图书显示\nimport React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport \"./viewer.css\";\nimport untar from \"js-untar\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport { mimetype } from \"../../constants/mimetype\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\ndeclare var window: any;\n\nlet JSZip = window.JSZip;\nlet Unrar = window.Unrar;\n\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = {\n      key: \"\",\n      comicScale: OtherUtil.getReaderConfig(\"comicScale\") || \"100%\",\n    };\n  }\n\n  componentDidMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n    this.setState({ key });\n    this.handleRender(key);\n    document\n      .getElementsByClassName(\"lang-setting-dropdown\")[0]\n      ?.children[\n        [\"25%\", \"50%\", \"75%\", \"100%\"].indexOf(\n          OtherUtil.getReaderConfig(\"comicScale\") || \"100%\"\n        )\n      ].setAttribute(\"selected\", \"selected\");\n    window.frames[0].document.addEventListener(\"wheel\", (event) => {\n      RecordLocation.recordScrollHeight(\n        key,\n        document.body.clientWidth,\n        document.body.clientHeight,\n        window.frames[0].document.scrollingElement!.scrollTop,\n        window.frames[0].document.scrollingElement!.scrollHeight\n      );\n    });\n    window.onbeforeunload = () => {\n      this.handleExit(key);\n    };\n  }\n  handleRender = (key: string) => {\n    localforage.getItem(\"books\").then((result: any) => {\n      let book = result[_.findIndex(result, { key })];\n      BookUtil.fetchBook(key, true).then((result) => {\n        this.props.handleReadingBook(book);\n        if (book.format === \"CBR\") {\n          this.handleCbr(result as ArrayBuffer);\n        } else if (book.format === \"CBZ\") {\n          this.handleCbz(result as ArrayBuffer);\n        } else if (book.format === \"CBT\") {\n          this.handleCbt(result as ArrayBuffer);\n        }\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n      });\n    });\n  };\n  // 点击退出按钮的处理程序\n  handleExit(key: string) {\n    this.props.handleReadingState(false);\n\n    OtherUtil.setReaderConfig(\"windowWidth\", document.body.clientWidth + \"\");\n    OtherUtil.setReaderConfig(\"windowHeight\", document.body.clientHeight + \"\");\n    OtherUtil.setReaderConfig(\"windowX\", window.screenX + \"\");\n    OtherUtil.setReaderConfig(\"windowY\", window.screenY + \"\");\n  }\n  base64ArrayBuffer = (arrayBuffer) => {\n    var base64 = \"\";\n    var encodings =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var bytes = new Uint8Array(arrayBuffer);\n    var byteLength = bytes.byteLength;\n    var byteRemainder = byteLength % 3;\n    var mainLength = byteLength - byteRemainder;\n    var a, b, c, d;\n    var chunk;\n    for (var i = 0; i < mainLength; i = i + 3) {\n      chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n      a = (chunk & 16515072) >> 18;\n      b = (chunk & 258048) >> 12; // 258048   = (2^6 - 1) << 12\n      c = (chunk & 4032) >> 6; // 4032     = (2^6 - 1) << 6\n      d = chunk & 63; // 63       = 2^6 - 1\n      base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d];\n    }\n\n    if (byteRemainder === 1) {\n      chunk = bytes[mainLength];\n\n      a = (chunk & 252) >> 2; // 252 = (2^6 - 1) << 2\n      b = (chunk & 3) << 4; // 3   = 2^2 - 1\n      base64 += encodings[a] + encodings[b] + \"==\";\n    } else if (byteRemainder === 2) {\n      chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1];\n      a = (chunk & 64512) >> 10; // 64512 = (2^6 - 1) << 10\n      b = (chunk & 1008) >> 4; // 1008  = (2^6 - 1) << 4\n      c = (chunk & 15) << 2; // 15    = 2^4 - 1\n      base64 += encodings[a] + encodings[b] + encodings[c] + \"=\";\n    }\n\n    return base64;\n  };\n  addImage = (content: ArrayBuffer, extension: string) => {\n    let url = this.base64ArrayBuffer(content);\n\n    let imageDom = document.createElement(\"img\");\n    imageDom.src =\n      \"data:\" + mimetype[extension.toLowerCase()] + \";base64,\" + url;\n    imageDom.setAttribute(\n      \"style\",\n      `width:${OtherUtil.getReaderConfig(\"comicScale\") || \"100%\"};margin-left:${\n        OtherUtil.getReaderConfig(\"comicScale\") === \"75%\" ? \"12.5%\" : \"0%\"\n      }`\n    );\n    window.frames[0].document.body.appendChild(imageDom);\n    let loading = window.frames[0].document.querySelector(\"p\");\n    if (!loading) return;\n    window.frames[0].document.body.removeChild(loading);\n  };\n  handleJump = () => {\n    window.frames[0].document.scrollingElement!.scrollTo(\n      0,\n      RecordLocation.getScrollHeight(this.state.key).scroll\n    );\n  };\n  handleCbz = (result: ArrayBuffer) => {\n    let zip = new JSZip();\n    zip.loadAsync(result).then(async (contents) => {\n      for (let filename of Object.keys(contents.files).sort()) {\n        const content = await zip.file(filename).async(\"arraybuffer\");\n        const extension = filename.split(\".\").reverse()[0];\n        this.addImage(content, extension);\n      }\n      this.handleJump();\n    });\n  };\n  handleCbr = (result: ArrayBuffer) => {\n    let unrar = new Unrar(result);\n    var entries = unrar.getEntries();\n    for (let item of entries) {\n      var fileData = unrar.decompress(item.name);\n      if (!fileData) {\n        console.log(\"decompress failed...\");\n      }\n      const extension = item.name.split(\".\").reverse()[0];\n      this.addImage(fileData, extension);\n    }\n    document.scrollingElement!.scrollTo(\n      0,\n      RecordLocation.getScrollHeight(this.state.key).scroll\n    );\n  };\n  handleCbt = (result: ArrayBuffer) => {\n    untar(result).then(\n      (extractedFiles) => {\n        for (let item of extractedFiles) {\n          const extension = item.name.split(\".\").reverse()[0];\n          this.addImage(item.buffer, extension);\n        }\n        document.scrollingElement!.scrollTo(\n          0,\n          RecordLocation.getScrollHeight(this.state.key).scroll\n        );\n        // onSuccess\n      },\n      function (err) {\n        // onError\n      },\n      function (extractedFile) {\n        // onProgress\n      }\n    );\n  };\n  render() {\n    return (\n      <>\n        <iframe\n          className=\"ebook-viewer\"\n          title=\"html-viewer\"\n          width=\"100%\"\n          height=\"100%\"\n        >\n          <p>Loading</p>\n        </iframe>\n        <div className=\"comic-scale\">\n          <select\n            name=\"\"\n            className=\"lang-setting-dropdown\"\n            id=\"text-speech-voice\"\n            onChange={(event) => {\n              OtherUtil.setReaderConfig(\"comicScale\", event.target.value);\n              window.frames[0].document.body.innerHTML = \"\";\n              this.handleRender(this.state.key);\n            }}\n          >\n            {[\"25%\", \"50%\", \"75%\", \"100%\"].map((item, index) => {\n              return (\n                <option value={item} className=\"lang-setting-option\">\n                  {item}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n      </>\n    );\n  }\n}\nexport default withRouter(Viewer as any);\n","//卡片模式下的图书显示\nimport { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions/book\";\nimport { handleMessageBox, handleMessage } from \"../../store/actions/manager\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleMessageBox,\n  handleMessage,\n};\nexport default connect(mapStateToProps, actionCreator)(Viewer as any);\n","import React from \"react\";\nimport \"./manager.css\";\nimport { RedirectProps, RedirectState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport { getParamsFromUrl } from \"../../utils/syncUtils/common\";\nimport copy from \"copy-text-to-clipboard\";\nimport { withRouter } from \"react-router-dom\";\nimport OtherUtil from \"../../utils/otherUtil\";\nimport Lottie from \"react-lottie\";\nimport animationSuccess from \"../../assets/lotties/success.json\";\n\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\n\nclass Redirect extends React.Component<RedirectProps, RedirectState> {\n  timer!: NodeJS.Timeout;\n  constructor(props: RedirectProps) {\n    super(props);\n    this.state = {\n      isAuthed: false,\n      isError: false,\n      isCopied: false,\n      token: \"\",\n    };\n  }\n  handleFinish = () => {\n    this.props.handleLoadingDialog(false);\n    alert(\"数据恢复成功\");\n  };\n  showMessage = (message: string) => {\n    this.props.handleMessage(message);\n    this.props.handleMessageBox(true);\n  };\n  componentDidMount() {\n    //判断是否是获取token后的回调页面\n    let url = document.location.href;\n    if (document.location.hash === \"#/\") {\n      this.props.history.push(\"/manager/home\");\n    }\n    if (url.indexOf(\"error\") > -1) {\n      this.setState({ isError: true });\n      return false;\n    }\n    if (url.indexOf(\"code\") > -1) {\n      let params: any = getParamsFromUrl();\n      this.setState({ token: params.code });\n      this.setState({ isAuthed: true });\n      return false;\n    }\n    if (url.indexOf(\"access_token\") > -1) {\n      let params: any = getParamsFromUrl();\n      this.setState({ token: params.access_token });\n      this.setState({ isAuthed: true });\n      return false;\n    }\n  }\n\n  render() {\n    if (this.state.isError || this.state.isAuthed) {\n      return (\n        <div className=\"backup-page-finish-container\">\n          <div className=\"backup-page-finish\">\n            {this.state.isAuthed ? (\n              <Lottie options={successOptions} height={80} width={80} />\n            ) : (\n              <span className=\"icon-close auth-page-close-icon\"></span>\n            )}\n\n            <div className=\"backup-page-finish-text\">\n              <Trans>\n                {this.state.isAuthed\n                  ? \"Authorize Successfully\"\n                  : \"Authorize Failed\"}\n              </Trans>\n            </div>\n            {this.state.isAuthed ? (\n              <div\n                className=\"token-dialog-token-text\"\n                onClick={() => {\n                  copy(this.state.token);\n                  this.setState({ isCopied: true });\n                }}\n              >\n                {this.state.isCopied ? (\n                  <Trans>Copied</Trans>\n                ) : (\n                  <Trans>Copy Token</Trans>\n                )}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"manager\">\n        <img\n          src={\n            process.env.NODE_ENV === \"production\"\n              ? \"./assets/logo.png\"\n              : \"../../assets/logo.png\"\n          }\n          alt=\"\"\n          className=\"logo\"\n        />\n        <div className=\"empty-page-info-container\" style={{ margin: 100 }}>\n          <div className=\"empty-page-info-main\">\n            <Trans>It seems like you're lost</Trans>\n          </div>\n          <div\n            className=\"empty-page-info-sub\"\n            onClick={() => {\n              this.props.history.push(\"/manager/home\");\n            }}\n            style={{ marginTop: 10, cursor: \"pointer\" }}\n          >\n            <Trans>Return to home</Trans>\n          </div>\n        </div>\n        <img\n          src={\n            OtherUtil.getReaderConfig(\"isDisplayDark\") === \"yes\"\n              ? \"./assets/empty_light.svg\"\n              : \"./assets/empty.svg\"\n          }\n          alt=\"\"\n          className=\"empty-page-illustration\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Redirect);\n","import { connect } from \"react-redux\";\nimport \"./manager.css\";\nimport { stateType } from \"../../store\";\nimport {\n  handleMessageBox,\n  handleMessage,\n  handleLoadingDialog,\n} from \"../../store/actions/manager\";\nimport Redirect from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = { handleMessageBox, handleMessage, handleLoadingDialog };\nexport default connect(mapStateToProps, actionCreator)(Redirect);\n","import React, { useEffect } from \"react\";\nimport { Route, Switch, HashRouter } from \"react-router-dom\";\nimport Manager from \"../pages/manager\";\nimport EpubReader from \"../pages/epubPage\";\nimport HtmlReader from \"../pages/htmlReader\";\nimport DjvuReader from \"../pages/djvuReader\";\nimport ComicReader from \"../pages/comicReader\";\nimport _Redirect from \"../pages/redirect\";\nimport i18n from \"../i18n\";\nimport OtherUtil from \"../utils/otherUtil\";\n\nconst Router = () => {\n  useEffect(() => {\n    const lng = OtherUtil.getReaderConfig(\"lang\");\n    if (lng) {\n      i18n.changeLanguage(lng);\n    } else {\n      if (navigator.language === \"zh-CN\" || navigator.language === \"zh-SG\") {\n        i18n.changeLanguage(\"zh\");\n      } else if (\n        navigator.language === \"zh-TW\" ||\n        navigator.language === \"zh-HK\"\n      ) {\n        i18n.changeLanguage(\"cht\");\n      } else if (navigator.language === \"ru\") {\n        i18n.changeLanguage(\"ru\");\n      } else {\n        i18n.changeLanguage(\"en\");\n      }\n    }\n  }, []);\n  return (\n    <HashRouter>\n      <Switch>\n        <Route component={Manager} path=\"/manager\" />\n        <Route component={EpubReader} path=\"/epub\" />\n        <Route component={DjvuReader} path=\"/djvu\" />\n        <Route component={HtmlReader} path=\"/mobi\" />\n        <Route component={HtmlReader} path=\"/azw3\" />\n        <Route component={HtmlReader} path=\"/txt\" />\n        <Route component={HtmlReader} path=\"/docx\" />\n        <Route component={HtmlReader} path=\"/md\" />\n        <Route component={HtmlReader} path=\"/rtf\" />\n        <Route component={HtmlReader} path=\"/fb2\" />\n        <Route component={ComicReader} path=\"/cbr\" />\n        <Route component={ComicReader} path=\"/cbz\" />\n        <Route component={ComicReader} path=\"/cbt\" />{\" \"}\n        <Route component={HtmlReader} path=\"/html\" />\n        <Route component={HtmlReader} path=\"/htm\" />\n        <Route component={HtmlReader} path=\"/xml\" />\n        <Route component={HtmlReader} path=\"/xhtml\" />\n        <Route component={HtmlReader} path=\"/href\" />\n        <Route component={_Redirect} path=\"/\" />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default Router;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/styles/reset.css\";\nimport \"./assets/styles/global.css\";\nimport \"./assets/styles/style.css\";\nimport \"react-tippy/dist/tippy.css\";\nimport { Provider } from \"react-redux\";\nimport \"./i18n\";\nimport store from \"./store\";\nimport Router from \"./router/index\";\nimport StyleUtil from \"./utils/readUtils/styleUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport { dropdownList } from \"./constants/dropdownList\";\n\nlet coverLoading: any = document.querySelector(\".loading-cover\");\ncoverLoading && coverLoading.parentNode.removeChild(coverLoading);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nif (isElectron) {\n  const { ipcRenderer } = window.require(\"electron\");\n  const { ebtRenderer } = window.require(\"electron-baidu-tongji\");\n  const BAIDU_SITE_ID = \"358570be1bfc40e01db43adefade5ad5\";\n  ebtRenderer(ipcRenderer, BAIDU_SITE_ID, Router);\n}\nif (\n  isElectron &&\n  navigator.appVersion.indexOf(\"NT 6.1\") === -1 &&\n  navigator.appVersion.indexOf(\"NT 5.1\") === -1 &&\n  navigator.appVersion.indexOf(\"NT 6.0\") === -1\n) {\n  const { ipcRenderer } = window.require(\"electron\");\n  ipcRenderer.invoke(\"fonts-ready\", \"ping\").then((result) => {\n    dropdownList[0].option = result;\n    dropdownList[0].option.push(\"Built-in font\");\n  });\n}\nStyleUtil.applyTheme();\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","import BookModel from \"../../model/Book\";\nimport localforage from \"localforage\";\n\nexport function getParamsFromUrl() {\n  var hashParams: any = {};\n  var e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q =\n      window.location.hash.substring(2) ||\n      window.location.search.substring(1).split(\"#\")[0];\n\n  while ((e = r.exec(q))) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n  }\n  return hashParams;\n}\nexport const moveData = (\n  blob,\n  driveIndex,\n  books: BookModel[] = [],\n  handleFinish: () => void = () => {}\n) => {\n  let file = new File([blob], \"config.zip\", {\n    lastModified: new Date().getTime(),\n    type: blob.type,\n  });\n  const fs = window.require(\"fs\");\n  const path = window.require(\"path\");\n  const { remote, app } = window.require(\"electron\");\n  const AdmZip = window.require(\"adm-zip\");\n\n  const configDir = (app || remote.app).getPath(\"userData\");\n  const dirPath = path.join(configDir, \"uploads\");\n  const dataPath = localStorage.getItem(\"storageLocation\")\n    ? localStorage.getItem(\"storageLocation\")\n    : window\n        .require(\"electron\")\n        .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n  var reader = new FileReader();\n  reader.readAsArrayBuffer(file);\n  reader.onload = async (event) => {\n    fs.writeFileSync(\n      path.join(dirPath, file.name),\n      Buffer.from(event.target!.result as any)\n    );\n    var zip = new AdmZip(path.join(dirPath, file.name));\n    zip.extractAllTo(/*target path*/ dataPath, /*overwrite*/ true);\n    const fs_extra = window.require(\"fs-extra\");\n    fs_extra.copy(\n      path.join(dirPath, file.name),\n      path.join(dataPath, file.name),\n      function (err) {\n        if (err) return;\n      }\n    );\n    if (driveIndex === 4) {\n      let deleteBooks = books.map((item) => {\n        return localforage.removeItem(item.key);\n      });\n      await Promise.all(deleteBooks);\n    }\n    if (driveIndex === 5) {\n      handleFinish();\n    }\n  };\n};\n\nclass SyncUtil {\n  static changeLocation(\n    oldPath: string,\n    newPath: string,\n    handleMessage: (message: string) => void,\n    handleMessageBox: (isShow: boolean) => void,\n    syncFromLocation: () => void = () => {}\n  ) {\n    const fs = window.require(\"fs-extra\");\n    try {\n      fs.readdir(newPath, (err, files: string[]) => {\n        let isConfiged: boolean = false;\n        files.forEach((file: string) => {\n          if (file === \"config.zip\") {\n            isConfiged = true;\n          }\n        });\n        if (isConfiged) {\n          localStorage.setItem(\"storageLocation\", newPath);\n          syncFromLocation();\n        } else {\n          fs.copy(oldPath, newPath, function (err) {\n            if (err) return;\n            fs.emptyDirSync(oldPath);\n            handleMessage(\"Change Successfully\");\n            handleMessageBox(true);\n          });\n        }\n      });\n    } catch (error) {\n      handleMessage(\"Change Failed\");\n      handleMessageBox(true);\n    }\n  }\n  static syncData(\n    blob,\n    driveIndex,\n    books: BookModel[] = [],\n    handleFinish: () => void = () => {}\n  ) {\n    let file = new File([blob], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blob.type,\n    });\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const AdmZip = window.require(\"adm-zip\");\n    const dataPath = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    var reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = async (event) => {\n      fs.writeFileSync(\n        path.join(dataPath, file.name),\n        Buffer.from(event.target!.result as any)\n      );\n      var zip = new AdmZip(path.join(dataPath, file.name));\n      zip.extractAllTo(/*target path*/ dataPath, /*overwrite*/ true);\n\n      if (driveIndex === 4) {\n        let deleteBooks = books.map((item) => {\n          return localforage.removeItem(item.key);\n        });\n        await Promise.all(deleteBooks);\n      }\n      if (driveIndex === 5) {\n        handleFinish();\n      }\n    };\n  }\n}\n\nexport default SyncUtil;\n","class Book {\n  key: string;\n  name: string;\n  author: string;\n  description: string;\n  md5: string;\n  cover: string;\n  format: string;\n  publisher: string;\n  size: number;\n  constructor(\n    key: string,\n    name: string,\n    author: string,\n    description: string,\n    md5: string,\n    cover: string,\n    format: string,\n    publisher: string,\n    size: number\n  ) {\n    this.key = key; // 数据库的键\n    this.name = name; // 书籍名\n    this.author = author; // 作者\n    this.description = description; // 书籍的描述\n    this.md5 = md5; //epub的md5值，防止重复导入\n    this.cover = cover;\n    this.format = format;\n    this.publisher = publisher;\n    this.size = size;\n  }\n}\n\nexport default Book;\n"],"sourceRoot":""}