(this["webpackJsonpkoodo-reader"] = this["webpackJsonpkoodo-reader"] || []).push([
  [0], Array(52).concat([function (e, t, a) {}, function (e, t, a) {}, , , , , , , , , , , , function (e, t, a) {}, , , , function (e, t, a) {}, , , , , function (e) {
    e.exports = JSON.parse('{"Download Demo Book":"Download Demo Book","All Books":"All Books","Recent Books":"Recently","My Bookmarks":"Bookmarks","My Favorites":"My Favorites","My Notes":"Notes","My Digests":"Digests","My Shelves":"Shelves","Sort":"Sort","Import Failed":"Import Failed","New Version Available":"New Version Available","Access token expired":"Access token expired, refetching token","Access token received, please continue":"Access token received, please continue","Fetching Acess token failed":"Fetching Acess token failed","Authorizing":"Authorizing, please wait","Downloading":"Downloading, please wait","Uploading":"Uploading, please wait","Import from Local":"Import from Local","Backup and Restore":"Backup and Restore","Search My Library":"Search My Library","Card Mode":"Card","List Mode":"List","Work":"Work","Entertainment":"Entertainment","Study":"Study","Author":"Author","Duplicate Shelf":"Duplicate Shelf","Reading Time":"Reading Time","Content":"Content","Bookmark":"Bookmark","Single-Page Mode":"Single","Double-Page Mode":"Double","Background Color":"Background Color","Font Size":"Font Size","Font Family":"Font Family","Default":"Default","Small":"Small","Medium":"Mid","Large":"Large","Cancel Successfully":"Cancel Successfully","Please continue in desktop version":"Please continue in desktop version","Dont\'t use mimical background":"Hide mimical background","Auto hide cursor when reading":"Auto hide cursor when reading","Extra Large":"Extra","Ultra Large":"Ultra","Reading Option":"Reading Option","Current Progress":"Current Progress","Exit":"Exit","Enter Fullscreen":"Fullscreen","Exit Fullscreen":"Fullscreen","Add Bookmark":"Mark","Add to Shelf":"Add to Shelf","New Shelf":"New","New":"New Shelf","Cancel":"Cancel","Confirm":"Confirm","Delete":"Delete","Delete This Book":"Delete This Book","Edit Book":"Edit Book","Edit Successfully":"Edit Successfully","Book Name":"Name","Sort by Date":"by Date","Descending Order":"Descend","Ascending Order":"Ascend","Sort by Name":"by Name","Bind":"Bind","Token":"Token","Book not exsit":"Book not exsit","Token Info":"Please copy the following link and open in your browser to finish authorizing, once it\'s over, you\'ll get a bunch of codes, then fill the following box with the codes","Copy Link":"Copy Link","Copy Token":"Copy Token","Copied":"Copied","Empty Shelf Title":"Empty Shelf Title","Copy Link Successfully":"Copy Link Successfully","Add Successfully":"Add Successfully","Select":"Select","Coming Soon":"Coming Soon","Authorize Successfully":"Authorize Successfully","Authorize Failed":"Authorize Failed","You can turn off this tab now":"You can turn off this tab now","Do you want to backup or restore?":"Do You Want To Backup Or Restore?","Where is your data?":"Where is your data?","Where to keep your data?":"Where to keep your data?","I want to backup":"I want to backup","I want to restore":"I want to restore","Delete this shelf":"Delete this shelf","This action will clear and remove this shelf":"This action will clear and remove this shelf","Delete this tag":"Delete this tag","This action will clear and remove this tag":"This action will clear and remove this tag","Backup Successfully":"Backup Successfully","Restore Successfully":"Restore Successfully","Try refresh or restart":"Effective After Exiting Reader","Search the book":"Search the book","Turn on audio":"Turn on audio","Scroll Mode":"Scroll Mode","Loading":"Loading","Note":"Note","Scale":"Page Scale","Digest":"Digest","Default expand all content":"Default expand all content","Don\'t show footer and header":"Hide footer and header","Book size is over 20M":"Book size is over 20M","Current Font Size":"Current Font Size","Current Chapter":"Current Chapter","Turn off audio":"Turn off audio","Warning":"Warning","All Tags":"All Tags","Turn On Successfully":"Turn On Successfully","Turn Off Successfully":"Turn Off Successfully","Turn off touch mode":"Turn off touch mode","Use built-in font":"Use built-in font","Setting":"Setting","Turn on touch mode":"Turn on touch mode","Auto open latest book":"Auto open latest book","Project link":"Project link","About author":"About author","Official website":"Offcial website","Please import less than 10 books":"Please import less than 10 books","Please delete some books before import":"Please delete some books before import","For better user experince, please visit this site on a computer":"For better user experince, please visit this site on a computer","Wrong bookmark":"Wrong bookmark","Last Step":"Last Step","Next Step":"Next Step","Go To":"Go To","It seems like you\'re lost":"It seems like you\'re lost","Return to home":"Return to home","Only Desktop support this format":"Only Desktop support this format","Delete from Shelf":"Delete from Shelf","Delete Successfully":"Delete Successfully","This action will delete all the notes, bookmarks and digests of this book":"This action will delete all the notes, bookmarks and digests of this book","This action won\'t delete the original book":"This action won\'t delete the original book","From":"From","Duplicate Book":"Duplicate Book","Unknown Chapter":"Unknown Chapter","Unknown Authur":"Unknown Authur","Minute":"Minute","Empty":"Empty","Next Chapter":"Next Chapter","Prev Chapter":"Prev Chapter","Less":"Less","Current Reading Time":"Time Used\uff1a{{count}} Minutes","Finish Reading Time":"Time Remain\uff1a{{count}} Minutes","Book Page":"Page {{count}}","Current Chapter Pages":"Chapter Pages","Chapter Redirect":"Chapter Redirect","Translate":"Translate","Continuous Scroll":"Continuous","Chapter Scroll":"Scroll","More Digests":"More Digests","More Notes":"More Notes","Pick Up Color":"Pick Up Color","Highlight Successfully":"Highlight Successfully","Take Notes":"Take Notes","Highlight":"Highlight","Copy Successfully":"Copy Successfully","Copy ":"Copy","Hi! Stranger":"Hi! Friends","Skip":"Skip","Local":"Local","Line Height":"Line Height","Empty Library":"Empty Library","Click the top-right button to add books":"Click the top-right button to add books","No Favorite Books":"No Favorite Books","Move your mouse on the top of any book, click the heart icon to add it to your favorite books":"Move your mouse on the top of any book, click the heart icon to add it to your favorite books","Empty Reading Records":"Empty Reading Records","Click on any book to read":"Click on any book to read","Empty Bookmark":"Empty Bookmark","Move your mouse on the top edge of the reader":"Move your mouse on the top edge of the reader, then a menu will pop up showing an Add-Bookmark button","Empty Note":"Empty Notes","Select any text and click the Add-Note button on the popup Menu":"Select any text and click the Add-Note button on the popup Menu","Empty Digest":"Empty Digest","Select any text and click the Collect button on the popup Menu":"Select any text and click the Collect button on the popup Menu","Empty Shelf":"Empty Shelf","Move your mouse on the top of any book":"Move your mouse on the top of any book, then click the top-left icon to add the book to the shelf","This is a free and open-source Epub reader":"This is a free and open-source Epub reader","Koodo Reader works on multiple platforms with backup and restore support":"Koodo Reader works on multiple platforms with backup and restore support","For better reading experience":"For better reading experience","Supports for theme changing, reading history, book managerment, shelf managerment and more":"Supports for theme changing, reading history, book managerment, shelf managerment and more","Fluent and easy operation":"Fluent and easy operation","Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages":"Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages","Go to Add your first book":"Go to Add your first book","Download failed,network problem or no backup":"Download failed,network problem or no backup","Upload failed, check your connection":"Upload failed, check your connection","That\'s all for the tutorial":"That\'s all for the tutorial","Version":"Version: ","Date":"Date: "}')
  }, function (e) {
    e.exports = JSON.parse('{\"Download Demo Book\":\"Download Demo Book\",\"All Books\":\"All Books\",\"Recent Books\":\"Recent Books\",\"My Bookmarks\":\"My Bookmarks\",\"My Notes\":\"My Notes\",\"My Favorites\":\"My Favorites\",\"My Digests\":\"My Digests\",\"My Shelves\":\"My Shelves\",\"Please continue in desktop version\":\"Please continue in desktop version\",\"It seems like you\'re lost\":\"It seems like you\'re lost\",\"Return to home\":\"Return to home\",\"Only Desktop support this format\":\"Only Desktop support this format\",\"Book not exsit\":\"Book not exsit\",\"Delete this shelf\":\"Delete this shelf\",\"This action will clear and remove this shelf\":\"This action will clear and remove this shelf\",\"Scale\":\"Scale\",\"Delete this tag\":\"Delete this tag\",\"Don\'t show footer and header\":\"Don\'t show footer and header\",\"Default expand all content\":\"Default expand all content\",\"This action will clear and remove this tag\":\"This action will clear and remove this tag\",\"Dont\'t use mimical background\":\"Dont\'t use mimical background\",\"Auto hide cursor when reading\":\"Auto hide cursor when reading\",\"Sort\":\"Sort\",\"New Version Available\":\"New Version Available\",\"Access token expired\":\"Access token expired\",\"Access token received, please continue\":\"Access token received, please continue\",\"Fetching Acess token failed\":\"Fetching Acess token failed\",\"Authorizing\":\"Authorizing\",\"Downloading\":\"Downloading\",\"Uploading\":\"Uploading\",\"Loading\":\"Loading\",\"Current Font Size\":\"Current Font Size\",\"Import from Local\":\"Import from Local\",\"Backup and Restore\":\"Backup and Restore\",\"Search My Library\":\"Search My Library\",\"Card Mode\":\"Card Mode\",\"List Mode\":\"List Mode\",\"Work\":\"Work\",\"Entertainment\":\"Entertainment\",\"Study\":\"Study\",\"Author\":\"Author\",\"Reading Time\":\"Reading Time\",\"Content\":\"Content\",\"Bookmark\":\"Bookmark\",\"Single-Page Mode\":\"Single-Page Mode\",\"Double-Page Mode\":\"Double-Page Mode\",\"Background Color\":\"Background Color\",\"Font Size\":\"Font Size\",\"Font Family\":\"Font Family\",\"Default\":\"Default\",\"Small\":\"Small\",\"Medium\":\"Medium\",\"Large\":\"Large\",\"Extra Large\":\"Extra Large\",\"Ultra Large\":\"Ultra Large\",\"Reading Option\":\"Reading Option\",\"Current Progress\":\"Current Progress\",\"Current Chapter\":\"Current Chapter\",\"Exit\":\"Exit\",\"Empty Shelf Title\":\"Empty Shelf Title\",\"Enter Fullscreen\":\"Enter Fullscreen\",\"Exit Fullscreen\":\"Exit Fullscreen\",\"Add Bookmark\":\"Add Bookmark\",\"Add to Shelf\":\"Add to Shelf\",\"New Shelf\":\"New Shelf\",\"New\":\"New\",\"Copy Successfully\":\"Copy Successfully\",\"Cancel\":\"Cancel\",\"Confirm\":\"Confirm\",\"Delete\":\"Delete\",\"Delete This Book\":\"Delete This Book\",\"Edit Book\":\"Edit Book\",\"Edit Successfully\":\"Edit Successfully\",\"Turn On Successfully\":\"Turn On Successfully\",\"Turn Off Successfully\":\"Turn Off Successfully\",\"Book Name\":\"Book Name\",\"Sort by Date\":\"Sort by Date\",\"Descending Order\":\"Descending Order\",\"Ascending Order\":\"Ascending Order\",\"Sort by Name\":\"Sort by Name\",\"Copy Link Successfully\":\"Copy Link Successfully\",\"Add Successfully\":\"Add Successfully\",\"Cancel Successfully\":\"Cancel Successfully\",\"Select\":\"Select\",\"Coming Soon\":\"Coming Soon\",\"Authorize Successfully\":\"Authorize Successfully\",\"Authorize Failed\":\"Authorize Failed\",\"You can turn off this tab now\":\"You can turn off this tab now\",\"Do you want to backup or restore?\":\"Do you want to backup or restore?\",\"Where is your data?\":\"Where is your data?\",\"Where to keep your data?\":\"Where to keep your data?\",\"I want to backup\":\"I want to backup\",\"I want to restore\":\"I want to restore\",\"Backup Successfully\":\"Backup Successfully\",\"Restore Successfully\":\"Restore Successfully\",\"Try refresh or restart\":\"Try refresh or restart\",\"Turn on audio\":\"Turn on audi\",\"Warning\":\"Warning\",\"Please import less than 10 books\":\"Please import less than 10 books\",\"Please delete some books before import\":\"Please delete some books before import\",\"For better user experince, please visit this site on a computer\":\"For better user experince, please visit this site on a computer\",\"Continuous Scroll\":\"Continuous Scroll\",\"Chapter Scroll\":\"Chapter Scroll\",\"Turn off audio\":\"Turn off audio\",\"Search the book\":\"Search the book\",\"Book size is over 20M\":\"Book size is over 20M\",\"Wrong bookmark\":\"Wrong bookmark\",\"Last Step\":\"Last Step\",\"Next Step\":\"Next Step\",\"More Digests\":\"More Digests\",\"More Notes\":\"More Notes\",\"Note\":\"Note\",\"Digest\":\"Digest\",\"Translate\":\"Translate\",\"Go To\":\"Go To\",\"Delete from Shelf\":\"Delete from Shelf\",\"Delete Successfully\":\"Delete Successfully\",\"This action will delete all the notes, bookmarks and digests of this book\":\"This action will delete all the notes, bookmarks and digests of this book\",\"This action won\'t delete the original book\":\"This action won\'t delete the original book\",\"From\":\"From\",\"Duplicate Book\":\"Duplicate Book\",\"Turn off touch mode\":\"Turn off touch mode\",\"Use built-in font\":\"Use built-in font\",\"Duplicate Shelf\":\"Duplicate Shelf\",\"Unknown Chapter\":\"Unknown Chapter\",\"Unknown Authur\":\"Unknown Authur\",\"All Tags\":\"All Tags\",\"Setting\":\"Setting\",\"Turn on touch mode\":\"Turn on touch mode\",\"Auto open latest book\":\"Auto open latest book\",\"Project link\":\"Project link\",\"About author\":\"About author\",\"Official website\":\"Official website\",\"Minute\":\"Minute\",\"Empty\":\"Empty\",\"Less\":\"Less\",\"More\":\"More\",\"Pick Up Color\":\"Pick Up Color\",\"Highlight Successfully\":\"Highlight Successfully\",\"Take Notes\":\"Take Notes\",\"Collect\":\"Collect\",\"Highlight\":\"Highlight\",\"Copy\":\"Copy\",\"Bind\":\"Bind\",\"Token\":\"Token\",\"Token Info\":\"Token Info\",\"Copy Link\":\"Copy Link\",\"Copy Token\":\"Copy Token\",\"Copied\":\"Copied\",\"Hi! Stranger\":\"Hi! Stranger\",\"Skip\":\"Skip\",\"Local\":\"Local\",\"Next Chapter\":\"Next Chapter\",\"Prev Chapter\":\"Prev Chapter\",\"Current Reading Time\":\"Current Reading Time\",\"Finish Reading Time\":\"Finish Reading Time\",\"Book Page\":\"Book Page {{count}}\",\"Current Chapter Pages\":\"Current Chapter Pages\",\"Chapter Redirect\":\"Chapter Redirect\",\"Line Height\":\"Line Height\",\"Empty Library\":\"Empty Library\",\"Import Failed\":\"Import Failed\",\"Click the top-right button to add books\":\"Click the top-right button to add books\",\"No Favorite Books\":\"No Favorite Books\",\"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\":\"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\",\"Click on any book to read\":\"Click on any book to read\",\"Empty Bookmark\":\"Empty Bookmark\",\"Move your mouse on the top edge of the reader\":\"Move your mouse on the top edge of the reader\",\"Empty Note\":\"Empty Note\",\"Select any text and click the Add-Note button on the popup Menu\":\"Select any text and click the Add-Note button on the popup Menu\",\"Empty Digest\":\"Empty Digest\",\"Select any text and click the Collect button on the popup Menu\":\"Select any text and click the Collect button on the popup Menu\",\"Empty Shelf\":\"Empty Shelf\",\"Move your mouse on the top of any book\":\"Move your mouse on the top of any book\",\"This is a free and open-source Epub reader\":\"This is a free and open-source Epub reader\",\"Koodo Reader works on multiple platforms with backup and restore support\":\"Koodo Reader works on multiple platforms with backup and restore support\",\"For better reading experience\":\"For better reading experience\",\"Supports for theme changing, reading history, book managerment, shelf managerment and more\":\"Supports for theme changing, reading history, book managerment, shelf managerment and more\",\"Fluent and easy operation\":\"Fluent and easy operation\",\"Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages\":\"Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages\",\"Go to Add your first book\":\"Go to Add your first book\",\"That\'s all for the tutorial\":\"That\'s all for the tutorial\",\"Download failed,network problem or no backup\":\"Download failed,network problem or no backup\",\"Upload failed, check your connection\":\"Upload failed, check your connection\",\"For OneDrive, you must first backup your file\":\"For OneDrive, you must first backup your file\",\"Choose your action to this book\":\"Choose your action to this book\",\"Edit\":\"Edit\",\"Add\":\"Add\",\"What\'s new about this version\":\"What\'s new about this version\",\"Version\":\"Version\",\"Date\":\"Date\",\"Our Website\":\"Our Website\",\"What\'s New\":\"What\'s New\",\"What\'s been fixed\":\"What\'s been fixed\"}')
  }, function (e) {
    e.exports = JSON.parse('{\"Download Demo Book\":\"Download Demo Book\",\"All Books\":\"All Books\",\"Recent Books\":\"Recent Books\",\"My Bookmarks\":\"My Bookmarks\",\"My Favorites\":\"My Favorites\",\"My Notes\":\"My Notes\",\"My Digests\":\"My Digests\",\"My Shelves\":\"My Shelves\",\"Sort\":\"Sort\",\"Import Failed\":\"Import Failed\",\"New Version Available\":\"New Version Available\",\"Access token expired\":\"Access token expired\",\"Access token received, please continue\":\"Access token received, please continue\",\"Fetching Acess token failed\":\"Fetching Acess token failed\",\"Authorizing\":\"Authorizing\",\"Downloading\":\"Downloading\",\"Uploading\":\"Uploading\",\"Import from Local\":\"Import from Local\",\"Backup and Restore\":\"Backup and Restore\",\"Search My Library\":\"Search My Library\",\"Card Mode\":\"Card Mode\",\"List Mode\":\"List Mode\",\"More Digests\":\"More Digests\",\"Translate\":\"Translate\",\"More Notes\":\"More Notes\",\"Work\":\"Work\",\"Entertainment\":\"Entertainment\",\"Study\":\"Study\",\"Author\":\"Author\",\"Reading Time\":\"Reading Time\",\"Content\":\"Content\",\"Bookmark\":\"Bookmark\",\"Single-Page Mode\":\"Single-Page Mode\",\"Double-Page Mode\":\"Double-Page Mode\",\"Background Color\":\"Background Color\",\"Font Size\":\"Font Size\",\"Font Family\":\"Font Family\",\"Default\":\"Default\",\"Small\":\"Small\",\"Medium\":\"Medium\",\"Large\":\"Large\",\"Extra Large\":\"Extra Large\",\"Ultra Large\":\"Ultra Large\",\"Reading Option\":\"Reading Option\",\"Current Progress\":\"Current Progress\",\"Exit\":\"Exit\",\"Empty Shelf Title\":\"Empty Shelf Title\",\"Enter Fullscreen\":\"Enter Fullscreen\",\"Exit Fullscreen\":\"Exit Fullscreen5\",\"Add Bookmark\":\"Add Bookmark\",\"Add to Shelf\":\"Add to Shelf\",\"New Shelf\":\"New Shelf\",\"New\":\"New\",\"Copy Successfully\":\"Copy Successfully\",\"Cancel\":\"Cancel\",\"Confirm\":\"Confirm\",\"Delete\":\"Delete\",\"Delete This Book\":\"Delete This Book\",\"Edit Book\":\"Edit Book\",\"Edit Successfully\":\"Edit Successfully\",\"Book Name\":\"Book Name\",\"Sort by Date\":\"Sort by Date\",\"Descending Order\":\"Descending Order\",\"Ascending Order\":\"Ascending Order\",\"Sort by Name\":\"Sort by Name\",\"Copy Link Successfully\":\"Copy Link Successfully\",\"Add Successfully\":\"Add Successfully\",\"Select\":\"Select\",\"Coming Soon\":\"Coming Soon\",\"Authorize Successfully\":\"Authorize Successfully\",\"Authorize Failed\":\"Authorize Failed\",\"You can turn off this tab now\":\"You can turn off this tab now\",\"Do you want to backup or restore?\":\"Do you want to backup or restore?\",\"Where is your data?\":\"Where is your data?\",\"Where to keep your data?\":\"Where to keep your data?\",\"I want to backup\":\"I want to backup\",\"I want to restore\":\"I want to restore\",\"Backup Successfully\":\"Backup Successfully\",\"Restore Successfully\":\"Restore Successfully\",\"Try refresh or restart\":\"Try refresh or restart\",\"Search the book\":\"Search the book\",\"Wrong bookmark\":\"Wrong bookmark\",\"Last Step\":\"Last Step\",\"Next Step\":\"Next Step\",\"Go To\":\"Go To\",\"Delete from Shelf\":\"Delete from Shelf\",\"Delete Successfully\":\"Delete Successfully\",\"This action will delete all the notes, bookmarks and digests of this book\":\"This action will delete all the notes, bookmarks and digests of this book\",\"This action won\'t delete the original book\":\"This action won\'t delete the original book\",\"From\":\"From\",\"Duplicate Book\":\"Duplicate Book\",\"Unknown Chapter\":\"Unknown Chapter\",\"Unknown Authur\":\"Unknown Authur\",\"Minute\":\"Minute\",\"Empty\":\"Empty\",\"Note\":\"Note\",\"Digest\":\"Digest\",\"Turn on audio\":\"Turn on audio\",\"Scroll Mode\":\"Scroll Mode\",\"Turn off audio\":\"Turn off audio\",\"Please import less than 10 books\":\"Please import less than 10 books\",\"Please delete some books before import\":\"Please delete some books before import\",\"For better user experince, please visit this site on a computer\":\"For better user experince, please visit this site on a computer\",\"Book size is over 20M\":\"Book size is over 20M\",\"Less\":\"Less\",\"All Tags\":\"All Tags\",\"Setting\":\"Setting\",\"Turn on touch mode\":\"Turn on touch mode\",\"Auto open latest book\":\"Auto open latest book\",\"Project link\":\"Project link\",\"About author\":\"About author\",\"Official website\":\"Official website\",\"Warning\":\"Warning\",\"Turn On Successfully\":\"Turn On Successfully\",\"Turn Off Successfully\":\"Turn Off Successfully\",\"Turn off touch mode\":\"Turn off touch mode\",\"Use built-in font\":\"Use built-in font\",\"Current Font Size\":\"Current Font Size\",\"Current Chapter\":\"Current Chapter\",\"Loading\":\"Loading\",\"Pick Up Color\":\"Pick Up Color\",\"Highlight Successfully\":\"Highlight Successfully\",\"Take Notes\":\"Take Notes\",\"Collect\":\"Collect\",\"Highlight\":\"Highlight\",\"Copy\":\"Copy\",\"Bind\":\"Bind\",\"Token\":\"Token\",\"Token Info\":\"Token Info\",\"Copy Link\":\"Copy Link\",\"Copy Token\":\"Copy Token\",\"Copied\":\"Copied\",\"Hi! Stranger\":\"Hi! Stranger\",\"Skip\":\"Skip\",\"Local\":\"Local\",\"Line Height\":\"Line Height\",\"Empty Library\":\"Empty Library\",\"No Favorite Books\":\"No Favorite Books\",\"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\":\"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\",\"Click the top-right button to add books\":\"Click the top-right button to add books\",\"Empty Reading Records\":\"Empty Reading Records\",\"Click on any book to read\":\"Click on any book to read\",\"Empty Bookmark\":\"Empty Bookmark\",\"Move your mouse on the top edge of the reader\":\"Move your mouse on the top edge of the reader\",\"Empty Note\":\"Empty Note\",\"Select any text and click the Add-Note button on the popup Menu\":\"Select any text and click the Add-Note button on the popup Menu\",\"Empty Digest\":\"Empty Digest\",\"Select any text and click the Collect button on the popup Menu\":\"Select any text and click the Collect button on the popup Menu\",\"Empty Shelf\":\"Empty Shelf\",\"Move your mouse on the top of any book\":\"Move your mouse on the top of any book\",\"This is a free and open-source Epub reader\":\"This is a free and open-source Epub reader\",\"Koodo Reader works on multiple platforms with backup and restore support\":\"Koodo Reader works on multiple platforms with backup and restore support\",\"For better reading experience\":\"For better reading experience\",\"Supports for theme changing, reading history, book managerment, shelf managerment and more\":\"Supports for theme changing, reading history, book managerment, shelf managerment and more\",\"Fluent and easy operation\":\"Fluent and easy operation\",\"Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages\":\"Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages\",\"Go to Add your first book\":\"Go to Add your first book\",\"That\'s all for the tutorial\":\"That\'s all for the tutorial\",\"Download failed,network problem or no backup\":\"Download failed,network problem or no backup\",\"Upload failed, check your connection\":\"Upload failed, check your connection\",\"Duplicate Shelf\":\"Duplicate Shelf\",\"For OneDrive, you must first backup your file\":\"For OneDrive, you must first backup your file\",\"Choose your action to this book\":\"Choose your action to this book\",\"Edit\":\"Edit\",\"Add\":\"Add\",\"What\'s new about this version\":\"What\'s new about this version\",\"Version\":\"Version\",\"Date\":\"Date\",\"Our Website\":\"Our Website\",\"What\'s New\":\"What\'s New\",\"What\'s been fixed\":\"What\'s been fixed\",\"Choose \/ Language\":\"Choose \/ Language\",\"Cancel Successfully\":\"Cancel Successfully\",\"Don\'t use mimical background\":\"Don\'t use mimical background\",\"Please continue in desktop version\":\"Please continue in desktop version\",\"Auto hide cursor when reading\":\"Auto hide cursor when reading\",\"Book not exsit\":\"Book not exsit\",\"Delete this shelf\":\"Delete this shelf\",\"This action will clear and remove this shelf\":\"This action will clear and remove this shelf\",\"Delete this tag\":\"Delete this tag\",\"This action will clear and remove this tag\":\"This action will clear and remove this tag\",\"Scale\":\"Scale\",\"Next Chapter\":\"Next Chapter\",\"Don\'t show footer and header\":\"Don\'t show footer and header\",\"Default expand all content\":\"Default expand all content\",\"Prev Chapter\":\"Prev Chapter\",\"Current Reading Time\":\"Current Reading Time {{count}}\",\"Finish Reading Time\":\"Finish Reading Time {{count}}\",\"Book Page\":\"Book Page {{count}}\",\"Current Chapter Pages\":\"Current Chapter Pages\",\"Chapter Redirect\":\"Chapter Redirec\",\"Continuous Scroll\":\"Continuous Scroll\",\"Chapter Scroll\":\"Chapter Scroll\",\"Only Desktop support this format\":\"Only Desktop support this format\",\"It seems like you\'re lost\":\"It seems like you\'re lost\",\"Return to home\":\"Return to home\"}')
  }, , , , , , , , , , , function (e, t, a) {
    e.exports = a(210)
  }, , , , , function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, , , , , , , , , , , , , , , , , , function (e, t, a) {}, , function (e, t, a) {}, function (e, t, a) {}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, , function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, , , function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {}, , , , , , , , , , , , function (e, t, a) {}, function (e, t, a) {}, function (e, t, a) {
    "use strict";
    a.r(t);
    var n = a(0),
      o = a.n(n),
      r = a(37),
      s = a.n(r),
      i = (a(92), a(93), a(94), a(4)),
      l = a(49),
      c = a(1),
      u = a(73),
      d = {
        en: {
          translation: a(74)
        },
        zh: {
          translation: a(75)
        },
        cht: {
          translation: a(76)
        }
      };
    l.a.use(u.a).use(c.c).init({
      resources: d,
      lng: "zh",
      fallbackLng: "en",
      keySeparator: !1,
      interpolation: {
        escapeValue: !1
      }
    });
    var p = l.a,
      h = a(32),
      m = a(77),
      g = a(7),
      f = {
        isOpenEditDialog: !1,
        isOpenDeleteDialog: !1,
        isOpenAddDialog: !1,
        isOpenActionDialog: !1,
        isReading: !1,
        currentBook: {},
        currentEpub: {}
      };
    var k = {
      books: null,
      searchResults: [],
      isSearch: !1,
      isSort: !1,
      isFirst: "no",
      isSettingOpen: !1,
      isList: "card",
      isSortDisplay: !1,
      sortCode: {
        sort: 2,
        order: 2
      },
      isMessage: !1,
      message: "Add Successfully"
    };
    var b = {
      percentage: null,
      locations: null
    };
    var v = a(2),
      y = a(3),
      E = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "fuzzyQuery",
          value: function (e, t) {
            for (var a = [], n = 0; n < e.length; n++) null != e[n].match(t) && a.push(n);
            return a
          }
        }, {
          key: "MergeArray",
          value: function (e, t) {
            for (var a = [], n = 0; n < e.length; n++) a.push(e[n]);
            for (var o = 0; o < t.length; o++) {
              for (var r = !0, s = 0; s < e.length; s++)
                if (t[o] === e[s]) {
                  r = !1;
                  break
                } r && a.push(t[o])
            }
            return a
          }
        }, {
          key: "MouseSearch",
          value: function (e) {
            var t = document.querySelector(".header-search-box").value,
              a = [],
              n = [];
            e.forEach((function (e) {
              a.push(e.name.toLowerCase()), n.push(e.author.toLowerCase())
            }));
            var o = this.fuzzyQuery(a, t),
              r = this.fuzzyQuery(n, t);
            return this.MergeArray(o, r)
          }
        }, {
          key: "KeySearch",
          value: function (e, t) {
            if (e && 13 === e.keyCode) {
              var a = [],
                n = [];
              t.forEach((function (e) {
                a.push(e.name.toLowerCase()), n.push(e.author.toLowerCase())
              }));
              var o = this.fuzzyQuery(a, e.target.value),
                r = this.fuzzyQuery(n, e.target.value);
              return this.MergeArray(o, r)
            }
          }
        }, {
          key: "MouseNoteSearch",
          value: function (e) {
            var t = document.querySelector(".header-search-box").value,
              a = [],
              n = [];
            e.forEach((function (e) {
              a.push(e.notes.toLowerCase()), n.push(e.text.toLowerCase())
            }));
            var o = this.fuzzyQuery(a, t),
              r = this.fuzzyQuery(n, t);
            return this.MergeArray(o, r)
          }
        }, {
          key: "KeyNoteSearch",
          value: function (e, t) {
            if (e && 13 === e.keyCode) {
              var a = [],
                n = [];
              t.forEach((function (e) {
                a.push(e.notes.toLowerCase()), n.push(e.text.toLowerCase())
              }));
              var o = this.fuzzyQuery(a, e.target.value),
                r = this.fuzzyQuery(n, e.target.value);
              return this.MergeArray(o, r)
            }
          }
        }, {
          key: "setSortCode",
          value: function (e, t) {
            var a = localStorage.getItem("sordCode") || JSON.stringify({
                sort: 2,
                order: 2
              }),
              n = a ? JSON.parse(a) : {
                sort: 2,
                order: 2
              };
            n.sort = e, n.order = t, localStorage.setItem("sortCode", JSON.stringify(n))
          }
        }, {
          key: "getSortCode",
          value: function () {
            var e = localStorage.getItem("sordCode") || JSON.stringify({
              sort: 2,
              order: 2
            });
            return JSON.parse(e) || {
              sort: 2,
              order: 2
            } || null
          }
        }, {
          key: "getReaderConfig",
          value: function (e) {
            return (JSON.parse(localStorage.getItem("readerConfig")) || {})[e]
          }
        }, {
          key: "setReaderConfig",
          value: function (e, t) {
            var a = JSON.parse(localStorage.getItem("readerConfig")) || {};
            a[e] = t, localStorage.setItem("readerConfig", JSON.stringify(a))
          }
        }]), e
      }(),
      S = {
        bookmarks: [],
        notes: [],
        digests: [],
        chapters: null,
        currentChapter: "",
        flattenChapters: null,
        color: 0,
        noteKey: "",
        originalText: "",
        readerMode: E.getReaderConfig("readerMode") || "double"
      };
    var O = {
      selection: null,
      isOpenMenu: !1,
      menuMode: "menu",
      isChangeDirection: !1,
      isShowBookmark: !1
    };
    var N = {
      mode: "home",
      shelfIndex: -1
    };
    var C = {
      isBackup: !1,
      isOpenTokenDialog: !1
    };
    var x = Object(h.c)({
        book: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : f,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_EDIT_DIALOG":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenEditDialog: t.payload
              });
            case "HANDLE_DELETE_DIALOG":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenDeleteDialog: t.payload
              });
            case "HANDLE_ADD_DIALOG":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenAddDialog: t.payload
              });
            case "HANDLE_ACTION_DIALOG":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenActionDialog: t.payload
              });
            case "HANDLE_READING_STATE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isReading: t.payload
              });
            case "HANDLE_READING_BOOK":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                currentBook: t.payload
              });
            case "HANDLE_READING_EPUB":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                currentEpub: t.payload
              });
            case "HANDLE_REDIRECT":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isRedirect: !0
              });
            default:
              return e
          }
        },
        manager: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : k,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_BOOKS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                books: t.payload
              });
            case "HANDLE_SEARCH_BOOKS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                searchResults: t.payload
              });
            case "HANDLE_SEARCH":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isSearch: t.payload
              });
            case "HANDLE_SETTING":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isSettingOpen: t.payload
              });
            case "HANDLE_SORT":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isSort: t.payload
              });
            case "HANDLE_FIRST":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isFirst: t.payload
              });
            case "HANDLE_LIST":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isList: t.payload
              });
            case "HANDLE_SORT_DISPLAY":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isSortDisplay: t.payload
              });
            case "HANDLE_MESSAGE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                message: t.payload
              });
            case "HANDLE_MESSAGE_BOX":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isMessage: t.payload
              });
            case "HANDLE_SORT_CODE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                sortCode: {
                  sort: t.payload.sort,
                  order: t.payload.order
                }
              });
            case "HANDLE_NOTES":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                notes: t.payload
              });
            case "HANDLE_BOOKMARKS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                bookmarks: t.payload
              });
            default:
              return e
          }
        },
        reader: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : S,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_BOOKMARKS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                bookmarks: t.payload
              });
            case "HANDLE_NOTES":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                notes: t.payload
              });
            case "HANDLE_ORIGINAL_TEXT":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                originalText: t.payload
              });
            case "HANDLE_COLOR":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                color: t.payload
              });
            case "HANDLE_NOTE_KEY":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                noteKey: t.payload
              });
            case "HANDLE_DIGESTS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                digests: t.payload
              });
            case "HANDLE_SECTION":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                section: t.payload
              });
            case "HANDLE_CHAPTERS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                chapters: t.payload
              });
            case "HANDLE_FLATTEN_CHAPTERS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                flattenChapters: t.payload
              });
            default:
              return e
          }
        },
        progressPanel: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : b,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_PERCENTAGE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                percentage: t.payload
              });
            case "HANDLE_SECTION":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                section: t.payload
              });
            case "HANDLE_LOCATIONS":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                locations: t.payload
              });
            default:
              return e
          }
        },
        viewArea: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : O,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_OPEN_MENU":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenMenu: t.payload
              });
            case "HANDLE_OPEN_HIGHLIGHT":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenHighlight: t.payload
              });
            case "HANDLE_SHOW_BOOKMARK":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isShowBookmark: t.payload
              });
            case "HANDLE_SELECTION":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                selection: t.payload
              });
            case "HANDLE_DIALOG_LOCATION":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                dialogLocation: t.payload
              });
            case "HANDLE_MENU_MODE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                menuMode: t.payload
              });
            case "HANDLE_CHANGE_DIRECTION":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isChangeDirection: t.payload
              });
            default:
              return e
          }
        },
        sidebar: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : N,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_MODE":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                mode: t.payload
              });
            case "HANDLE_SHELF_INDEX":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                shelfIndex: t.payload
              });
            default:
              return e
          }
        },
        backupPage: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : C,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case "HANDLE_BACKUP":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isBackup: t.payload
              });
            case "HANDLE_TOKEN_DIALOG":
              return Object(g.a)(Object(g.a)({}, e), {}, {
                isOpenTokenDialog: t.payload
              });
            default:
              return e
          }
        }
      }),
      w = Object(h.e)(x, Object(h.d)(Object(h.a)(m.a), window.devToolsExtension ? window.devToolsExtension() : function (e) {
        return e
      })),
      D = a(84),
      B = a(13),
      M = a(12),
      j = a(10),
      A = a.n(j),
      T = a(14),
      I = a(9),
      F = a.n(I);

    function R(e) {
      return {
        type: "HANDLE_SEARCH_BOOKS",
        payload: e
      }
    }

    function L(e) {
      return {
        type: "HANDLE_SEARCH",
        payload: e
      }
    }

    function _(e) {
      return {
        type: "HANDLE_SETTING",
        payload: e
      }
    }

    function P(e) {
      return {
        type: "HANDLE_MESSAGE",
        payload: e
      }
    }

    function U(e) {
      return {
        type: "HANDLE_MESSAGE_BOX",
        payload: e
      }
    }

    function H(e) {
      return {
        type: "HANDLE_SORT_DISPLAY",
        payload: e
      }
    }

    function z(e) {
      return {
        type: "HANDLE_FIRST",
        payload: e
      }
    }

    function K(e) {
      return {
        type: "HANDLE_SORT_CODE",
        payload: e
      }
    }

    function J() {
      return function (e) {
        F.a.getItem("books", function () {
          var t = Object(T.a)(A.a.mark((function t(a, n) {
            return A.a.wrap((function (t) {
              for (;;) switch (t.prev = t.next) {
                case 0:
                  e({
                    type: "HANDLE_BOOKS",
                    payload: n
                  });
                case 2:
                case "end":
                  return t.stop()
              }
            }), t)
          })));
          return function (e, a) {
            return t.apply(this, arguments)
          }
        }())
      }
    }

    function W() {
      return function (e) {
        var t = E.getReaderConfig("isList") || "card";
        e({
          type: "HANDLE_LIST",
          payload: t
        })
      }
    }

    function G(e) {
      return {
        type: "HANDLE_BOOKMARKS",
        payload: e
      }
    }

    function q(e) {
      return {
        type: "HANDLE_NOTE_KEY",
        payload: e
      }
    }

    function V() {
      return function (e) {
        F.a.getItem("notes", (function (t, a) {
          var n;
          e({
            type: "HANDLE_NOTES",
            payload: n = null === a || a === [] ? [] : a
          }), e({
            type: "HANDLE_DIGESTS",
            payload: n.filter((function (e) {
              return "" === e.notes
            }))
          })
        }))
      }
    }

    function Y() {
      return function (e) {
        F.a.getItem("bookmarks", (function (t, a) {
          e(G(null === a || a === [] ? [] : a))
        }))
      }
    }
    a(52);
    var Q = a(6),
      X = a(5);

    function Z(e) {
      return {
        type: "HANDLE_SHELF_INDEX",
        payload: e
      }
    }

    function $(e) {
      return {
        type: "HANDLE_MODE",
        payload: e
      }
    }
    a(112);
    var ee = [{
        id: 1,
        theme: "rgba(235,255,231,1)"
      }, {
        id: 2,
        theme: "rgba(244,232,211,0.4)"
      }, {
        id: 3,
        theme: "rgba(242,219,187,0.8)"
      }, {
        id: 4,
        theme: "rgba(255,255,255,1)"
      }, {
        id: 5,
        theme: "rgba(44,47,49,1)"
      }],
      te = "2020.10.18",
      ae = "1.1.7",
      ne = ["Added support for pdf format, currently does not support notes, bookmarks and other functions", "Added support for the mobi format, only supported by the client, and currently not supporting the image function", "Added support for txt format, only supported by the client", "Refactor code using React Router", "Further reduce memory usage", "Set whether to expand all directories by default", "The web version supports opening multiple books at the same time", "When the client opens the book, the window is automatically maximized", "For technical reasons, the OneDrive synchronization function is temporarily offline"],
      oe = ["Fix the problem that multi-level directories cannot be expanded", "Fix the problem of invalid font and font size change", "Fix the problem that the progress bar cannot jump", "Fix the typesetting problem of the English interface"],
      re = [{
        id: 1,
        title: "Font Family",
        value: "fontFamily",
        option: ["Helvetica", "Times New Roman", "Microsoft YaHei", "SimSun", "SimHei", "Arial"]
      }, {
        id: 2,
        title: "Line Height",
        value: "lineHeight",
        option: ["1.25", "1", "1.25", "1.5", "1.75", "2"]
      }],
      se = [{
        name: "All Books",
        icon: "home",
        mode: "home"
      }, {
        name: "My Favorites",
        icon: "love",
        mode: "favorite"
      }, {
        name: "My Bookmarks",
        icon: "bookmark",
        mode: "bookmark"
      }, {
        name: "My Notes",
        icon: "idea",
        mode: "note"
      }, {
        name: "My Digests",
        icon: "digest",
        mode: "digest"
      }],
      ie = {
        callback_url: "https://reader.960960.xyz",
        token_url: "http://localhost:3366",
        dropbox_client_id: "e3zgg310xbizvaf",
        googledrive_client_id: "99440516227-ifr1ann33f2j610i3ri17ej0i51c7m6e.apps.googleusercontent.com",
        onedrive_client_id: "ac96f9bf-94f2-49c0-8418-999b919bc236"
      },
      le = [{
        id: 1,
        name: "Local",
        icon: "local",
        url: ""
      }, {
        id: 2,
        name: "Dropbox",
        icon: "dropbox",
        url: "https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=".concat(ie.dropbox_client_id, "&redirect_uri=").concat(ie.callback_url)
      }, {
        id: 3,
        name: "Google Drive",
        icon: "googledrive",
        url: ""
      }, {
        id: 5,
        name: "WebDav",
        icon: "webdav",
        url: ""
      }],
      ce = [{
        mode: "home",
        main: "Empty Library",
        sub: "Click the top-right button to add books"
      }, {
        mode: "favorite",
        main: "No Favorite Books",
        sub: "Move your mouse on the top of any book, click the heart icon to add it to your favorite books"
      }, {
        mode: "bookmark",
        main: "Empty Bookmark",
        sub: "Move your mouse on the top edge of the reader"
      }, {
        mode: "note",
        main: "Empty Note",
        sub: "Select any text and click the Add-Note button on the popup Menu"
      }, {
        mode: "digest",
        main: "Empty Digest",
        sub: "Select any text and click the Collect button on the popup Menu"
      }, {
        mode: "shelf",
        main: "Empty Shelf",
        sub: "Move your mouse on the top of any book"
      }],
      ue = [{
        main: "This is a free and open-source Epub reader",
        sub: "Koodo Reader works on multiple platforms with backup and restore support"
      }, {
        main: "For better reading experience",
        sub: "Supports for theme changing, reading history, book managerment, shelf managerment and more"
      }, {
        main: "Fluent and easy operation",
        sub: "Move your mouse to the edge of the reader to trigger menu,use mouse wheel and keyborad to switch pages"
      }, {
        main: "Go to Add your first book",
        sub: "That's all for the tutorial"
      }],
      de = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleSidebar = function (e, t) {
            n.setState({
              index: t
            }), n.setState({
              shelfIndex: -1
            }), n.setState({
              isCollapse: !0
            }), n.props.history.push("/manager/".concat(e)), n.props.handleMode(e), n.props.handleSearch(!1)
          }, n.state = {
            index: ["home", "favorite", "bookmark", "note", "digest"].indexOf(n.props.mode),
            isCollapse: !0,
            shelfIndex: -1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "sidebar"
            }, o.a.createElement("img", {
              src: "./assets/logo.png",
              alt: "",
              className: "logo"
            }), o.a.createElement("div", {
              className: "side-menu-container-parent"
            }, o.a.createElement("ul", {
              className: "side-menu-container"
            }, se.map((function (t, a) {
              return o.a.createElement("li", {
                key: t.name,
                className: e.state.index === a && -1 === e.state.shelfIndex ? "active side-menu-item" : "side-menu-item",
                id: "sidebar-".concat(t.icon),
                onClick: function () {
                  e.handleSidebar(t.mode, a)
                }
              }, e.state.index === a && -1 === e.state.shelfIndex ? o.a.createElement("div", {
                className: "side-menu-selector-container"
              }) : null, o.a.createElement("div", {
                className: e.state.index === a && -1 === e.state.shelfIndex ? "side-menu-selector active-selector" : "side-menu-selector "
              }, o.a.createElement("span", {
                className: e.state.index === a && -1 === e.state.shelfIndex ? "icon-".concat(t.icon, " side-menu-icon  active-icon") : "icon-".concat(t.icon, " side-menu-icon")
              }), o.a.createElement(c.b, null, t.name)))
            })))))
          }
        }]), a
      }(o.a.Component),
      pe = Object(M.g)(de),
      he = {
        handleMode: $,
        handleSearch: L
      },
      me = Object(i.b)((function (e) {
        return {
          mode: e.sidebar.mode
        }
      }), he)(Object(c.d)()(pe));

    function ge(e) {
      return {
        type: "HANDLE_BACKUP",
        payload: e
      }
    }

    function fe(e) {
      return {
        type: "HANDLE_TOKEN_DIALOG",
        payload: e
      }
    }
    a(114), a(115);
    var ke = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleMouse = function () {
            var t = e.refs.searchBox.value;
            if (e.props.isNavSearch && t && e.search(t), "nav" !== e.props.mode) {
              var a = "note" === e.props.tabMode ? E.MouseNoteSearch(e.props.notes.filter((function (e) {
                return "" !== e.notes
              }))) : "digest" === e.props.tabMode ? E.MouseNoteSearch(e.props.digests) : E.MouseSearch(e.props.books);
              e.props.handleSearchResults(a), e.props.handleSearch(!0)
            } else e.props.handleSearchState(!0)
          }, e.handleKey = function (t) {
            if (13 === t.keyCode) {
              var a = e.refs.searchBox.value;
              e.props.isNavSearch && a && e.search(a);
              var n = "note" === e.props.tabMode ? E.KeyNoteSearch(t, e.props.notes.filter((function (e) {
                return "" !== e.notes
              }))) : "digest" === e.props.tabMode ? E.KeyNoteSearch(t, e.props.digests) : E.KeySearch(t, e.props.books);
              n && (e.props.handleSearchResults(n), e.props.handleSearch(!0))
            }
          }, e.search = function (t) {
            e.doSearch(t).then((function (a) {
              var n = a.map((function (e) {
                return e.excerpt = e.excerpt.replace(t, '<span class="content-search-text">'.concat(t, "</span>")), e
              }));
              e.props.handleSearchList(n)
            }))
          }, e.doSearch = function (t) {
            return Promise.all(e.props.currentEpub.spine.spineItems.map((function (a) {
              return a.load(e.props.currentEpub.load.bind(e.props.currentEpub)).then(a.find.bind(a, t)).finally(a.unload.bind(a))
            }))).then((function (e) {
              return Promise.resolve([].concat.apply([], e))
            }))
          }, e.handleCancel = function () {
            e.props.isNavSearch && e.props.handleSearchList(null), e.props.handleSearch(!1), document.querySelector(".header-search-box").value = ""
          }, e
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            if (this.props.isNavSearch) {
              var e = document.querySelector(".header-search-box");
              e && e.focus()
            }
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              style: {
                position: "relative"
              }
            }, o.a.createElement("input", {
              type: "text",
              ref: "searchBox",
              className: "header-search-box",
              onKeyDown: function (t) {
                e.handleKey(t)
              },
              onFocus: function () {
                "nav" === e.props.mode && e.props.handleSearchState(!0)
              },
              placeholder: this.props.isNavSearch || "nav" === this.props.mode ? "Search the whole book" : "note" === this.props.tabMode ? "Search my notes" : "digest" === this.props.tabMode ? "Search my diggest" : "Search my library",
              style: "nav" === this.props.mode ? {
                width: this.props.width,
                height: this.props.height
              } : {
                paddingRight: "50px"
              }
            }), this.props.isSearch ? o.a.createElement("span", {
              className: "header-search-text",
              onClick: function () {
                e.handleCancel()
              },
              style: "nav" === this.props.mode ? {
                right: "-9px"
              } : {}
            }, o.a.createElement(c.b, null, "Cancel")) : o.a.createElement("span", {
              className: "icon-search header-search-icon",
              onClick: function () {
                e.handleMouse()
              },
              style: "nav" === this.props.mode ? {
                right: "5px"
              } : {}
            }))
          }
        }]), a
      }(o.a.Component),
      be = {
        handleSearchResults: R,
        handleSearch: L
      },
      ve = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          notes: e.reader.notes,
          digests: e.reader.digests,
          isSearch: e.manager.isSearch,
          currentEpub: e.book.currentEpub,
          tabMode: e.sidebar.mode,
          shelfIndex: e.sidebar.shelfIndex
        }
      }), be)(Object(c.d)()(ke)),
      ye = (a(53), function e(t, a, n, o, r, s) {
        Object(v.a)(this, e), this.key = void 0, this.name = void 0, this.author = void 0, this.description = void 0, this.md5 = void 0, this.cover = void 0, this.key = t, this.name = a, this.author = n, this.description = o, this.md5 = r, this.cover = s
      }),
      Ee = a(78),
      Se = a.n(Ee),
      Oe = a(86),
      Ne = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "setRecent",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("recentBooks") && localStorage.getItem("recentBooks") ? JSON.parse(localStorage.getItem("recentBooks") || "") : [],
              a = t.indexOf(e);
            a > -1 ? (t.splice(a, 1), t.unshift(e)) : t.unshift(e), localStorage.setItem("recentBooks", JSON.stringify(t))
          }
        }, {
          key: "setAllRecent",
          value: function (e) {
            var t = [];
            e.forEach((function (e) {
              t.push(e.key)
            })), localStorage.setItem("recentBooks", JSON.stringify(t))
          }
        }, {
          key: "clear",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("recentBooks") && localStorage.getItem("recentBooks") ? JSON.parse(localStorage.getItem("recentBooks") || "") : [],
              a = t.indexOf(e);
            a > -1 && t.splice(a, 1), localStorage.setItem("recentBooks", JSON.stringify(t))
          }
        }, {
          key: "getAllRecent",
          value: function () {
            return ("{}" !== localStorage.getItem("recentBooks") && localStorage.getItem("recentBooks") ? JSON.parse(localStorage.getItem("recentBooks") || "") : []) || []
          }
        }]), e
      }(),
      Ce = a(40),
      xe = a.n(Ce);

    function we(e) {
      return e instanceof ArrayBuffer && (e = new Uint8Array(e)), new TextDecoder("utf-8").decode(e)
    }
    var De = new DOMParser,
      Be = function () {
        function e(t) {
          Object(v.a)(this, e), this.capacity = t, this.fragment_list = [], this.cur_fragment = new Me(t), this.fragment_list.push(this.cur_fragment)
        }
        return Object(y.a)(e, [{
          key: "write",
          value: function (e) {
            this.cur_fragment.write(e) || (this.cur_fragment = new Me(this.capacity), this.fragment_list.push(this.cur_fragment), this.cur_fragment.write(e))
          }
        }, {
          key: "get",
          value: function (e) {
            for (var t = 0; t < this.fragment_list.length;) {
              var a = this.fragment_list[t];
              if (e < a.size) return a.get(e);
              e -= a.size, t += 1
            }
            return null
          }
        }, {
          key: "size",
          value: function () {
            for (var e = 0, t = 0; t < this.fragment_list.length; t++) e += this.fragment_list[t].size;
            return e
          }
        }, {
          key: "shrink",
          value: function () {
            for (var e = new Uint8Array(this.size()), t = 0, a = 0; a < this.fragment_list.length; a++) {
              var n = this.fragment_list[a];
              n.full() ? e.set(n.buffer, t) : e.set(n.buffer.slice(0, n.size), t), t += n.size
            }
            return e
          }
        }]), e
      }(),
      Me = function () {
        function e(t) {
          Object(v.a)(this, e), this.buffer = new Uint8Array(t), this.capacity = t, this.size = 0
        }
        return Object(y.a)(e, [{
          key: "write",
          value: function (e) {
            return !(this.size >= this.capacity) && (this.buffer[this.size] = e, this.size += 1, !0)
          }
        }, {
          key: "full",
          value: function () {
            return this.size === this.capacity
          }
        }, {
          key: "get",
          value: function (e) {
            return this.buffer[e]
          }
        }]), e
      }(),
      je = function () {
        function e(t) {
          Object(v.a)(this, e), this.view = new DataView(t), this.buffer = this.view.buffer, this.offset = 0, this.header = null
        }
        return Object(y.a)(e, [{
          key: "parse",
          value: function () {}
        }, {
          key: "getUint8",
          value: function () {
            var e = this.view.getUint8(this.offset);
            return this.offset += 1, e
          }
        }, {
          key: "getUint16",
          value: function () {
            var e = this.view.getUint16(this.offset);
            return this.offset += 2, e
          }
        }, {
          key: "getUint32",
          value: function () {
            var e = this.view.getUint32(this.offset);
            return this.offset += 4, e
          }
        }, {
          key: "getStr",
          value: function (e) {
            var t = we(this.buffer.slice(this.offset, this.offset + e));
            return this.offset += e, t
          }
        }, {
          key: "skip",
          value: function (e) {
            this.offset += e
          }
        }, {
          key: "setoffset",
          value: function (e) {
            this.offset = e
          }
        }, {
          key: "get_record_extrasize",
          value: function (e, t) {
            for (var a = e.length - 1, n = 0, o = 15; o > 0; o--)
              if (t & 1 << o) {
                var r = this.buffer_get_varlen(e, a),
                  s = r[0],
                  i = r[1];
                a = r[2], a -= s - i, n += s
              } 1 & t && (n += 1 + (3 & e[a]));
            return n
          }
        }, {
          key: "buffer_get_varlen",
          value: function (e, t) {
            for (var a = 0, n = 0, o = 0, r = 0, s = 0;; s++) {
              var i = e[t];
              if (n |= (127 & i) << r, r += 7, a += 1, t -= 1, (o += 1) >= 4 || (128 & i) > 0) break
            }
            return [n, a, t]
          }
        }, {
          key: "read_text",
          value: function () {
            for (var e = this.palm_header.record_count, t = [], a = 1; a <= e; a++) t.push(this.read_text_record(a));
            return we(function (e) {
              for (var t = 0, a = 0; a < e.length; a++) {
                var n = e[a];
                t += n.length
              }
              for (var o = new Uint8Array(t), r = 0, s = 0; s < e.length; s++) n = e[s], o.set(n, r), r += n.length;
              return o
            }(t))
          }
        }, {
          key: "read_text_record",
          value: function (e) {
            var t = this.mobi_header.extra_flags,
              a = this.reclist[e].offset,
              n = this.reclist[e + 1].offset,
              o = new Uint8Array(this.buffer.slice(a, n)),
              r = this.get_record_extrasize(o, t);
            return o = new Uint8Array(this.buffer.slice(a, n - r)), 2 === this.palm_header.compression ? function (e) {
              for (var t = e.length, a = 0, n = new Be(e.length); a < t;) {
                var o = e[a];
                if (a += 1, 0 === o) n.write(o);
                else if (o <= 8) {
                  for (var r = a; r < a + o; r++) n.write(e[r]);
                  a += o
                } else if (o <= 127) n.write(o);
                else if (o <= 191) {
                  var s = e[a];
                  a += 1;
                  for (var i = (o << 8 | s) >> 3 & 2047, l = 3 + (7 & s), c = n.size(), u = 0; u < l; u++) n.write(n.get(c - i)), c += 1
                } else n.write(32), n.write(128 ^ o)
              }
              return n
            }(o).shrink() : o
          }
        }, {
          key: "read_image",
          value: function (e) {
            var t = this.mobi_header.first_image_idx,
              a = this.reclist[t + e].offset,
              n = this.reclist[t + e + 1].offset,
              o = new Uint8Array(this.buffer.slice(a, n));
            return new Blob([o.buffer])
          }
        }, {
          key: "load",
          value: function () {
            this.header = this.load_pdbheader(), this.reclist = this.load_reclist(), this.load_record0()
          }
        }, {
          key: "load_pdbheader",
          value: function () {
            var e = {};
            return e.name = this.getStr(32), e.attr = this.getUint16(), e.version = this.getUint16(), e.ctime = this.getUint32(), e.mtime = this.getUint32(), e.btime = this.getUint32(), e.mod_num = this.getUint32(), e.appinfo_offset = this.getUint32(), e.sortinfo_offset = this.getUint32(), e.type = this.getStr(4), e.creator = this.getStr(4), e.uid = this.getUint32(), e.next_rec = this.getUint32(), e.record_num = this.getUint16(), e
          }
        }, {
          key: "load_reclist",
          value: function () {
            for (var e = [], t = 0; t < this.header.record_num; t++) {
              var a = {};
              a.offset = this.getUint32(), a.attr = this.getUint32(), e.push(a)
            }
            return e
          }
        }, {
          key: "load_record0",
          value: function () {
            this.palm_header = this.load_record0_header(), this.mobi_header = this.load_mobi_header()
          }
        }, {
          key: "load_record0_header",
          value: function () {
            var e = {},
              t = this.reclist[0];
            return this.setoffset(t.offset), e.compression = this.getUint16(), this.skip(2), e.text_length = this.getUint32(), e.record_count = this.getUint16(), e.record_size = this.getUint16(), e.encryption_type = this.getUint16(), this.skip(2), e
          }
        }, {
          key: "load_mobi_header",
          value: function () {
            var e = {},
              t = this.offset;
            return e.identifier = this.getUint32(), e.header_length = this.getUint32(), e.mobi_type = this.getUint32(), e.text_encoding = this.getUint32(), e.uid = this.getUint32(), e.generator_version = this.getUint32(), this.skip(40), e.first_nonbook_index = this.getUint32(), e.full_name_offset = this.getUint32(), e.full_name_length = this.getUint32(), e.language = this.getUint32(), e.input_language = this.getUint32(), e.output_language = this.getUint32(), e.min_version = this.getUint32(), e.first_image_idx = this.getUint32(), e.huff_rec_index = this.getUint32(), e.huff_rec_count = this.getUint32(), e.datp_rec_index = this.getUint32(), e.datp_rec_count = this.getUint32(), e.exth_flags = this.getUint32(), this.skip(36), e.drm_offset = this.getUint32(), e.drm_count = this.getUint32(), e.drm_size = this.getUint32(), e.drm_flags = this.getUint32(), this.skip(8), this.skip(4), this.skip(46), e.extra_flags = this.getUint16(), this.setoffset(t + e.header_length), e
          }
        }, {
          key: "load_exth_header",
          value: function () {
            return {}
          }
        }, {
          key: "render",
          value: function () {
            this.load();
            for (var e = this.read_text(), t = De.parseFromString(e, "text/html").documentElement, a = Array.from(t.getElementsByTagName("mbp:pagebreak")), n = [], o = 0, r = a.length; o < r - 1; o++) a[o].childNodes && a[o].childNodes.forEach((function (e) {
              e.innerText.length < 1e3 && n.push(e.innerText)
            }));
            return n.join("\n    \n")
          }
        }, {
          key: "render_image",
          value: function (e, t) {
            var a = e[t],
              n = +a.getAttribute("recindex"),
              o = this.read_image(n - 1),
              r = new FileReader;
            r.onload = function (e) {
              a.src = e.target.result
            }, r.readAsDataURL(o)
          }
        }]), e
      }(),
      Ae = a(80),
      Te = a.n(Ae),
      Ie = a(29),
      Fe = a.n(Ie),
      Re = window["pdfjs-dist/build/pdf"],
      Le = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleAddBook = function (t) {
            return new Promise((function (a, n) {
              var o = e.props.books;
              null == o && (o = []), o.push(t), Ne.setRecent(t.key), F.a.setItem("books", o).then((function () {
                e.props.handleFetchBooks(), e.props.handleMessage("Add Successfully"), e.props.handleMessageBox(!0), e.props.history.push("/manager/home"), a()
              })).catch((function () {
                n()
              }))
            }))
          }, e.doIncrementalTest = function (t) {
            return new Promise((function (a, n) {
              var o = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
                r = Math.ceil(t.size / 2097152),
                s = 0,
                i = new Se.a,
                l = new FileReader;
              l.onload = function () {
                var o = Object(T.a)(A.a.mark((function o(l) {
                  var u;
                  return A.a.wrap((function (o) {
                    for (;;) switch (o.prev = o.next) {
                      case 0:
                        if (l.target) {
                          o.next = 3;
                          break
                        }
                        throw n(), new Error;
                      case 3:
                        if (i.appendBinary(l.target.result), !((s += 1) < r)) {
                          o.next = 9;
                          break
                        }
                        c(), o.next = 13;
                        break;
                      case 9:
                        return u = i.end(), o.next = 12, e.handleBook(t, u);
                      case 12:
                        a();
                      case 13:
                      case "end":
                        return o.stop()
                    }
                  }), o)
                })));
                return function (e) {
                  return o.apply(this, arguments)
                }
              }();
              var c = function () {
                var e = 2097152 * s,
                  a = e + 2097152 >= t.size ? t.size : e + 2097152;
                l.readAsBinaryString(o.call(t, e, a))
              };
              c()
            }))
          }, e.handleBook = function (t, a) {
            var n = t.name.split(".")[t.name.split(".").length - 1];
            return new Promise((function (o, r) {
              var s = !1;
              if (e.props.books && e.props.books.forEach((function (t) {
                  t.md5 === a && (s = !0, e.props.handleMessage("Duplicate Book"), e.props.handleMessageBox(!0), o())
                })), !s) {
                var i = new FileReader;
                i.readAsArrayBuffer(t), i.onload = function () {
                  var s = Object(T.a)(A.a.mark((function s(i) {
                    var l, c, u, d;
                    return A.a.wrap((function (s) {
                      for (;;) switch (s.prev = s.next) {
                        case 0:
                          if (i.target) {
                            s.next = 5;
                            break
                          }
                          throw e.props.handleMessage("Import Failed"), e.props.handleMessageBox(!0), r(), new Error;
                        case 5:
                          if ("pdf" !== n) {
                            s.next = 12;
                            break
                          }
                          if (i.target) {
                            s.next = 9;
                            break
                          }
                          throw r(), new Error;
                        case 9:
                          Re.getDocument({
                            data: i.target.result
                          }).promise.then((function (n) {
                            var r = n;
                            r.getMetadata().then((function (n) {
                              r.getPage(1).then((function (r) {
                                var s = r.getViewport({
                                    scale: 1.5
                                  }),
                                  l = document.getElementById("the-canvas"),
                                  c = l.getContext("2d");
                                l.height = s.height || s.viewBox[3], l.width = s.width || s.viewBox[2], r.render({
                                  canvasContext: c,
                                  viewport: s
                                }).promise.then(Object(T.a)(A.a.mark((function r() {
                                  var s, c, u, d, p, h, m;
                                  return A.a.wrap((function (r) {
                                    for (;;) switch (r.prev = r.next) {
                                      case 0:
                                        return s = l.toDataURL("image/jpeg"), h = [n.info.Title || t.name, n.info.Author, "pdf"], u = h[0], d = h[1], p = h[2], c = (new Date).getTime() + "", m = new ye(c, u, d, p, a, s), r.next = 9, e.handleAddBook(m);
                                      case 9:
                                        F.a.setItem(c, i.target.result), o();
                                      case 11:
                                      case "end":
                                        return r.stop()
                                    }
                                  }), r)
                                }))))
                              }))
                            }))
                          })).catch((function (t) {
                            e.props.handleMessage("Import Failed"), e.props.handleMessageBox(!0), console.log("Error occurs"), r()
                          })), s.next = 39;
                          break;
                        case 12:
                          if ("mobi" !== n) {
                            s.next = 24;
                            break
                          }
                          if (Fe()()) {
                            s.next = 19;
                            break
                          }
                          return e.props.handleMessage("Only Desktop support this format"), e.props.handleMessageBox(!0), console.log("Error occurs"), r(), s.abrupt("return");
                        case 19:
                          (l = new FileReader).onload = function (a) {
                            var n = a.target.result,
                              o = new je(n).render(),
                              r = Te.a.encode(o, "GBK"),
                              s = new Blob([r], {
                                type: "text/plain"
                              }),
                              i = new File([s], t.name.split(".")[0] + ".txt", {
                                lastModified: (new Date).getTime(),
                                type: s.type
                              });
                            e.doIncrementalTest(i)
                          }, l.readAsArrayBuffer(t), s.next = 39;
                          break;
                        case 24:
                          if ("txt" !== n) {
                            s.next = 36;
                            break
                          }
                          if (Fe()()) {
                            s.next = 31;
                            break
                          }
                          return e.props.handleMessage("Only Desktop support this format"), e.props.handleMessageBox(!0), console.log("Error occurs"), r(), s.abrupt("return");
                        case 31:
                          (c = new FormData).append("file", t), xe.a.post("".concat(ie.token_url, "/ebook_parser"), c, {
                            headers: {
                              "Content-Type": "multipart/form-data"
                            },
                            responseType: "blob"
                          }).then((function (a) {
                            console.log(a, "res");
                            var n = new Blob([a.data], {
                                type: "application/octet-stream"
                              }),
                              o = new File([n], t.name.split(".")[0] + ".epub", {
                                lastModified: (new Date).getTime(),
                                type: n.type
                              });
                            e.doIncrementalTest(o)
                          })).catch((function (t) {
                            e.props.handleMessage("Import Failed"), e.props.handleMessageBox(!0), console.log(t, "Error occurs"), r()
                          })), s.next = 39;
                          break;
                        case 36:
                          u = "", (d = window.ePub(i.target.result)).loaded.metadata.then((function (t) {
                            if (!i.target) throw r(), new Error;
                            d.coverUrl().then(function () {
                              var n = Object(T.a)(A.a.mark((function n(r) {
                                var s, l, c, d, p, h, m, g;
                                return A.a.wrap((function (n) {
                                  for (;;) switch (n.prev = n.next) {
                                    case 0:
                                      if (!r) {
                                        n.next = 9;
                                        break
                                      }
                                      return s = new FileReader, n.next = 4, fetch(r).then((function (e) {
                                        return e.blob()
                                      }));
                                    case 4:
                                      l = n.sent, s.readAsDataURL(l), s.onloadend = Object(T.a)(A.a.mark((function n() {
                                        var r, l, c, d, p, h;
                                        return A.a.wrap((function (n) {
                                          for (;;) switch (n.prev = n.next) {
                                            case 0:
                                              return u = s.result, p = [t.title, t.creator, t.description], l = p[0], c = p[1], d = p[2], r = (new Date).getTime() + "", h = new ye(r, l, c, d, a, u), n.next = 9, e.handleAddBook(h);
                                            case 9:
                                              F.a.setItem(r, i.target.result), o();
                                            case 11:
                                            case "end":
                                              return n.stop()
                                          }
                                        }), n)
                                      }))), n.next = 20;
                                      break;
                                    case 9:
                                      return u = "noCover", m = [t.title, t.creator, t.description], d = m[0], p = m[1], h = m[2], c = (new Date).getTime() + "", g = new ye(c, d, p, h, a, u), n.next = 18, e.handleAddBook(g);
                                    case 18:
                                      F.a.setItem(c, i.target.result), o();
                                    case 20:
                                    case "end":
                                      return n.stop()
                                  }
                                }), n)
                              })));
                              return function (e) {
                                return n.apply(this, arguments)
                              }
                            }()).catch((function (e) {
                              console.log(e, "err"), r()
                            }))
                          })).catch((function () {
                            e.props.handleMessage("Import Failed"), e.props.handleMessageBox(!0), console.log("Error occurs"), r()
                          }));
                        case 39:
                        case "end":
                          return s.stop()
                      }
                    }), s)
                  })));
                  return function (e) {
                    return s.apply(this, arguments)
                  }
                }()
              }
            }))
          }, e
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            Fe()() && window.require("electron").ipcRenderer.sendSync("start-server", "ping")
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement(Oe.a, {
              onDrop: function () {
                var t = Object(T.a)(A.a.mark((function t(a) {
                  var n;
                  return A.a.wrap((function (t) {
                    for (;;) switch (t.prev = t.next) {
                      case 0:
                        if (!(a.length > 9)) {
                          t.next = 4;
                          break
                        }
                        return e.props.handleMessage("Please import less than 10 books"), e.props.handleMessageBox(!0), t.abrupt("return");
                      case 4:
                        n = 0;
                      case 5:
                        if (!(n < a.length)) {
                          t.next = 11;
                          break
                        }
                        return t.next = 8, e.doIncrementalTest(a[n]);
                      case 8:
                        n++, t.next = 5;
                        break;
                      case 11:
                      case "end":
                        return t.stop()
                    }
                  }), t)
                })));
                return function (e) {
                  return t.apply(this, arguments)
                }
              }(),
              accept: [".epub", ".pdf", ".txt", ".mobi"],
              multiple: !0
            }, (function (e) {
              var t = e.getRootProps,
                a = e.getInputProps;
              return o.a.createElement("div", Object.assign({
                className: "import-from-local"
              }, t()), o.a.createElement(c.b, null, "Import from Local"), o.a.createElement("input", Object.assign({
                type: "file",
                id: "import-book-box",
                className: "import-book-box",
                name: "file"
              }, a())))
            }))
          }
        }]), a
      }(o.a.Component),
      _e = Object(M.g)(Le),
      Pe = {
        handleMessageBox: U,
        handleMessage: P,
        handleFetchBooks: J
      },
      Ue = Object(i.b)((function (e) {
        return {
          books: e.manager.books
        }
      }), Pe)(Object(c.d)()(_e)),
      He = (a(155), a(29)),
      ze = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleJump = function () {
            He() && window.require("electron").shell.openExternal(n.state.downlownLink)
          }, n.compareVersion = function (e, t) {
            for (var a = e.split("."), n = t.split("."), o = 0; o < a.length; o++)
              if (parseInt(a[o]) < parseInt(n[o])) return !0;
            return !1
          }, n.state = {
            downlownLink: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this;
            !this.props.currentBook.key && xe.a.get("https://koodo.960960.xyz/api/update").then((function (t) {
              console.log(t);
              var a = t.data.download,
                n = t.data.log.version;
              e.compareVersion(ae, n) && ("Win32" === navigator.platform ? e.setState({
                downlownLink: a[0].url
              }) : e.setState({
                downlownLink: a[1].url
              }))
            })).catch((function (e) {
              console.log(e)
            }))
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "update-info-container",
              style: this.state.downlownLink ? {} : {
                display: "none"
              },
              onClick: function () {
                e.handleJump()
              }
            }, o.a.createElement(c.b, null, "New Version Available"))
          }
        }]), a
      }(o.a.Component),
      Ke = {
        handleMessageBox: U,
        handleMessage: P
      },
      Je = Object(i.b)((function (e) {
        return {
          currentBook: e.book.currentBook,
          books: e.manager.books
        }
      }), Ke)(Object(c.d)()(ze)),
      We = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleSortBooks = function () {
            n.props.isSortDisplay ? n.props.handleSortDisplay(!1) : n.props.handleSortDisplay(!0)
          }, n.state = {
            isOnlyLocal: !1,
            isBookImported: !!(E.getReaderConfig("totalBooks") && E.getReaderConfig("totalBooks") > 0),
            language: E.getReaderConfig("lang"),
            isNewVersion: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "header"
            }, o.a.createElement("div", {
              className: "header-search-container"
            }, o.a.createElement(ve, null)), o.a.createElement("div", {
              className: "header-sort-container",
              onClick: function () {
                e.handleSortBooks()
              }
            }, o.a.createElement("span", {
              className: "header-sort-text"
            }, o.a.createElement(c.b, null, "Sort")), o.a.createElement("span", {
              className: "icon-sort header-sort-icon"
            })), o.a.createElement("div", {
              className: "setting-icon-container"
            }, o.a.createElement("span", {
              className: "icon-setting setting-icon",
              onClick: function () {
                e.props.handleSetting(!0)
              }
            })), o.a.createElement("a", {
              href: "./assets/demo.epub",
              target: "_blank",
              rel: "noopener noreferrer"
            }, o.a.createElement("div", {
              className: "download-demo-book",
              style: this.state.isBookImported ? {
                display: "none"
              } : {}
            }, o.a.createElement(c.b, null, "Download Demo Book"))), o.a.createElement("div", {
              className: "import-from-cloud",
              onClick: function () {
                e.props.handleBackupDialog(!0)
              }
            }, o.a.createElement(c.b, null, "Backup and Restore")), o.a.createElement(Ue, null), o.a.createElement(Je, null))
          }
        }]), a
      }(o.a.Component),
      Ge = {
        handleSortDisplay: H,
        handleMessageBox: U,
        handleMessage: P,
        handleBackupDialog: ge,
        handleSetting: _
      },
      qe = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          isSearch: e.manager.isSearch,
          isSortDisplay: e.manager.isSortDisplay
        }
      }), Ge)(Object(c.d)()(We));

    function Ve(e) {
      return {
        type: "HANDLE_EDIT_DIALOG",
        payload: e
      }
    }

    function Ye(e) {
      return {
        type: "HANDLE_DELETE_DIALOG",
        payload: e
      }
    }

    function Qe(e) {
      return {
        type: "HANDLE_ADD_DIALOG",
        payload: e
      }
    }

    function Xe(e) {
      return {
        type: "HANDLE_ACTION_DIALOG",
        payload: e
      }
    }

    function Ze(e) {
      return {
        type: "HANDLE_READING_STATE",
        payload: e
      }
    }

    function $e(e) {
      return {
        type: "HANDLE_READING_BOOK",
        payload: e
      }
    }

    function et(e) {
      return {
        type: "HANDLE_READING_EPUB",
        payload: e
      }
    }
    a(156);
    var tt = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "deleteBook",
          value: function (e, t) {
            return e = e.filter((function (e) {
              return e.key !== t
            }))
          }
        }, {
          key: "deleteBookmarks",
          value: function (e, t) {
            return e = e.filter((function (e) {
              return e.bookKey !== t
            }))
          }
        }, {
          key: "deleteNotes",
          value: function (e, t) {
            return e = e.filter((function (e) {
              return e.bookKey !== t
            }))
          }
        }]), e
      }(),
      at = {
        New: null,
        Study: [],
        Work: [],
        Entertainment: []
      },
      nt = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "setShelf",
          value: function (e, t) {
            var a = localStorage.getItem("shelfList"),
              n = JSON.parse(a) || at;
            void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].unshift(t), localStorage.setItem("shelfList", JSON.stringify(n))
          }
        }, {
          key: "getShelf",
          value: function () {
            var e = localStorage.getItem("shelfList");
            return JSON.parse(e) || at
          }
        }, {
          key: "clearShelf",
          value: function (e, t) {
            var a = localStorage.getItem("shelfList"),
              n = JSON.parse(a) || at,
              o = Object.keys(n)[e],
              r = n[o].indexOf(t);
            n[o].splice(r, 1), localStorage.setItem("shelfList", JSON.stringify(n))
          }
        }, {
          key: "deletefromAllShelf",
          value: function (e) {
            var t = localStorage.getItem("shelfList"),
              a = JSON.parse(t) || at,
              n = Object.keys(a);
            n.splice(0, 1), n.forEach((function (t) {
              var n = a[t].indexOf(e);
              n > -1 && a[t].splice(n, 1)
            })), localStorage.setItem("shelfList", JSON.stringify(a))
          }
        }, {
          key: "removeShelf",
          value: function (e) {
            var t = localStorage.getItem("shelfList"),
              a = JSON.parse(t) || at;
            delete a[e], localStorage.setItem("shelfList", JSON.stringify(a))
          }
        }]), e
      }(),
      ot = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "recordCfi",
          value: function (e, t, a) {
            var n = localStorage.getItem("recordLocation"),
              o = JSON.parse(n) || {};
            o[e] = {
              cfi: t,
              percentage: a
            }, localStorage.setItem("recordLocation", JSON.stringify(o))
          }
        }, {
          key: "getCfi",
          value: function (e) {
            var t = localStorage.getItem("recordLocation");
            return (JSON.parse(t) || {})[e] || {}
          }
        }, {
          key: "clear",
          value: function (e) {
            var t = localStorage.getItem("recordLocation"),
              a = JSON.parse(t) || {};
            delete a[e], localStorage.setItem("recordLocation", JSON.stringify(a))
          }
        }]), e
      }(),
      rt = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "setFavorite",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("favoriteBooks") && localStorage.getItem("favoriteBooks") ? JSON.parse(localStorage.getItem("favoriteBooks") || "") : [],
              a = t.indexOf(e);
            a > -1 ? (t.splice(a, 1), t.unshift(e)) : t.unshift(e), localStorage.setItem("favoriteBooks", JSON.stringify(t))
          }
        }, {
          key: "setAllFavorite",
          value: function (e) {
            var t = [];
            e.forEach((function (e) {
              t.push(e.key)
            })), localStorage.setItem("favoriteBooks", JSON.stringify(t))
          }
        }, {
          key: "clear",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("favoriteBooks") && localStorage.getItem("favoriteBooks") ? JSON.parse(localStorage.getItem("favoriteBooks") || "") : [],
              a = t.indexOf(e);
            a > -1 && t.splice(a, 1), localStorage.setItem("favoriteBooks", JSON.stringify(t))
          }
        }, {
          key: "getAllFavorite",
          value: function () {
            return ("{}" !== localStorage.getItem("favoriteBooks") && localStorage.getItem("favoriteBooks") ? JSON.parse(localStorage.getItem("favoriteBooks") || "") : []) || []
          }
        }]), e
      }(),
      st = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleCancel = function () {
            e.props.handleDeleteDialog(!1)
          }, e.handleDeleteOther = function () {
            if (e.props.bookmarks[0]) {
              var t = tt.deleteBookmarks(e.props.bookmarks, e.props.currentBook.key);
              0 === t.length ? F.a.removeItem("bookmarks").then((function () {
                e.props.handleFetchBookmarks()
              })) : F.a.setItem("bookmarks", t).then((function () {
                e.props.handleFetchBookmarks()
              }))
            }
            if (e.props.notes) {
              var a = tt.deleteNotes(e.props.notes, e.props.currentBook.key);
              0 === a.length ? F.a.removeItem("notes").then((function () {
                e.props.handleFetchNotes()
              })) : F.a.setItem("notes", a).then((function () {
                e.props.handleFetchNotes()
              }))
            }
          }, e.handleComfirm = function () {
            "shelf" === e.props.mode ? (nt.clearShelf(e.props.shelfIndex, e.props.currentBook.key), e.props.handleDeleteDialog(!1)) : (e.props.books && F.a.setItem("books", tt.deleteBook(e.props.books, e.props.currentBook.key)).then((function () {
              F.a.removeItem(e.props.currentBook.key).then((function () {
                e.props.handleDeleteDialog(!1), e.props.handleFetchBooks()
              }))
            })), rt.clear(e.props.currentBook.key), nt.deletefromAllShelf(e.props.currentBook.key), Ne.clear(e.props.currentBook.key), ot.clear(e.props.currentBook.key), e.handleDeleteOther(), e.props.handleActionDialog(!1), 1 === e.props.books.length && e.props.history.push("/manager/empty")), e.props.handleMessage("Delete Successfully"), e.props.handleMessageBox(!0)
          }, e
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "delete-dialog-container"
            }, "shelf" !== this.props.mode ? o.a.createElement("div", {
              className: "delete-dialog-title"
            }, o.a.createElement(c.b, null, "Delete This Book")) : o.a.createElement("div", {
              className: "delete-dialog-title"
            }, o.a.createElement(c.b, null, "Delete from Shelf")), o.a.createElement("div", {
              className: "delete-dialog-book"
            }, o.a.createElement("div", {
              className: "delete-dialog-book-title"
            }, this.props.currentBook.name)), "shelf" !== this.props.mode ? o.a.createElement("div", {
              className: "delete-dialog-other-option"
            }, o.a.createElement(c.b, null, "This action will delete all the notes, bookmarks and digests of this book")) : o.a.createElement("div", {
              className: "delete-dialog-other-option"
            }, o.a.createElement(c.b, null, "This action won't delete the original book")), o.a.createElement("div", {
              className: "delete-dialog-cancel",
              onClick: function () {
                e.handleCancel()
              }
            }, o.a.createElement(c.b, null, "Cancel")), o.a.createElement("div", {
              className: "delete-dialog-comfirm",
              onClick: function () {
                e.handleComfirm()
              }
            }, o.a.createElement(c.b, null, "Delete")))
          }
        }]), a
      }(o.a.Component),
      it = Object(M.g)(st),
      lt = {
        handleFetchBooks: J,
        handleDeleteDialog: Ye,
        handleFetchBookmarks: Y,
        handleFetchNotes: V,
        handleMessageBox: U,
        handleMessage: P,
        handleActionDialog: Xe
      },
      ct = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          isOpenDeleteDialog: e.book.isOpenDeleteDialog,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests,
          mode: e.sidebar.mode,
          shelfIndex: e.sidebar.shelfIndex
        }
      }), lt)(Object(c.d)()(it)),
      ut = (a(65), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleCancel = function () {
            n.props.handleEditDialog(!1)
          }, n.handleComfirm = function () {
            var e = document.querySelector(".edit-dialog-book-name-box").value,
              t = document.querySelector(".edit-dialog-book-author-box").value,
              a = n.props.books;
            a.forEach((function (a) {
              if (a.key === n.props.currentBook.key) return a.name = e, a.author = t, !1
            })), F.a.setItem("books", a).then((function () {
              n.props.handleEditDialog(!1), n.props.handleFetchBooks()
            })), n.props.handleMessage("Edit Successfully"), n.props.handleMessageBox(!0), n.props.handleActionDialog(!1)
          }, n.state = {
            isCheck: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = document.querySelector(".edit-dialog-book-name-box"),
              t = document.querySelector(".edit-dialog-book-author-box");
            e.value = this.props.currentBook.name, t.value = this.props.currentBook.author
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "edit-dialog-container"
            }, o.a.createElement("div", {
              className: "edit-dialog-title"
            }, o.a.createElement(c.b, null, "Edit Book")), o.a.createElement("div", {
              className: "edit-dialog-book-name-container"
            }, o.a.createElement("div", {
              className: "edit-dialog-book-name-text"
            }, o.a.createElement(c.b, null, "Book Name")), o.a.createElement("input", {
              className: "edit-dialog-book-name-box"
            })), o.a.createElement("div", {
              className: "edit-dialog-book-author-container"
            }, o.a.createElement("div", {
              className: "edit-dialog-book-author-text"
            }, o.a.createElement(c.b, null, "Author")), o.a.createElement("input", {
              className: "edit-dialog-book-author-box"
            })), o.a.createElement("div", {
              className: "edit-dialog-cancel",
              onClick: function () {
                e.handleCancel()
              }
            }, o.a.createElement(c.b, null, "Cancel")), o.a.createElement("div", {
              className: "edit-dialog-comfirm",
              onClick: function () {
                e.handleComfirm()
              }
            }, o.a.createElement(c.b, null, "Confirm")))
          }
        }]), a
      }(o.a.Component)),
      dt = {
        handleFetchBooks: J,
        handleEditDialog: Ve,
        handleActionDialog: Xe,
        handleMessageBox: U,
        handleMessage: P
      },
      pt = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          isOpenDeleteDialog: e.book.isOpenDeleteDialog,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests
        }
      }), dt)(Object(c.d)()(ut)),
      ht = (a(157), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleCancel = function () {
            n.props.handleAddDialog(!1)
          }, n.handleComfirm = function () {
            var e = document.querySelector(".add-dialog-new-shelf-box"),
              t = n.state.shelfTitle,
              a = nt.getShelf(),
              o = Object.keys(nt.getShelf()),
              r = n.state.isNew ? o.length : o.indexOf(e.value);
            return n.state.isNew && (t = e.value, a.hasOwnProperty(t)) ? (n.props.handleMessage("Duplicate Shelf"), void n.props.handleMessageBox(!0)) : t ? a["".concat(t)] && a["".concat(t)].indexOf(n.props.currentBook.key) > -1 ? (n.props.handleMessage("Duplicate Book"), void n.props.handleMessageBox(!0)) : (nt.setShelf(t, n.props.currentBook.key), n.props.handleAddDialog(!1), n.props.handleMessage("Add Successfully"), n.props.handleMessageBox(!0), n.props.handleActionDialog(!1), n.props.handleMode("shelf"), void n.props.handleShelfIndex(r)) : (n.props.handleMessage("Empty Shelf Title"), void n.props.handleMessageBox(!0))
          }, n.handleChange = function (e) {
            "New" === e ? n.setState({
              isNew: !0
            }) : (n.setState({
              shelfTitle: e
            }), n.setState({
              isNew: !1
            }))
          }, n.state = {
            isNew: !0,
            shelfTitle: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "add-dialog-container"
            }, o.a.createElement("div", {
              className: "add-dialog-title"
            }, o.a.createElement(c.b, null, "Add to Shelf")), o.a.createElement("div", {
              className: "add-dialog-shelf-list-container"
            }, o.a.createElement("div", {
              className: "add-dialog-shelf-list-text"
            }, o.a.createElement(c.b, null, "Select")), o.a.createElement("select", {
              className: "add-dialog-shelf-list-box",
              onChange: function (t) {
                e.handleChange(t.target.value)
              }
            }, function () {
              var e = nt.getShelf();
              return Object.keys(e).map((function (e) {
                return o.a.createElement(c.a, null, (function (t) {
                  return o.a.createElement("option", {
                    value: e,
                    key: e,
                    className: "add-dialog-shelf-list-option"
                  }, t(e))
                }))
              }))
            }())), o.a.createElement("div", {
              className: "add-dialog-new-shelf-container"
            }, o.a.createElement("div", {
              className: "add-dialog-new-shelf-text"
            }, o.a.createElement(c.b, null, "New Shelf")), o.a.createElement("input", {
              className: "add-dialog-new-shelf-box",
              disabled: !this.state.isNew
            })), o.a.createElement("div", {
              className: "add-dialog-cancel",
              onClick: function () {
                e.handleCancel()
              }
            }, o.a.createElement(c.b, null, "Cancel")), o.a.createElement("div", {
              className: "add-dialog-comfirm",
              onClick: function () {
                e.handleComfirm()
              }
            }, o.a.createElement(c.b, null, "Confirm")))
          }
        }]), a
      }(n.Component)),
      mt = {
        handleAddDialog: Qe,
        handleActionDialog: Xe,
        handleMessageBox: U,
        handleMessage: P,
        handleMode: $,
        handleShelfIndex: Z
      },
      gt = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          isOpenDeleteDialog: e.book.isOpenDeleteDialog,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests
        }
      }), mt)(Object(c.d)()(ht)),
      ft = (a(158), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleSort = function (t) {
            var a = e.props.sortCode;
            a.sort = t, e.setState({
              sortCode: a
            }), e.props.handleSortCode(a), e.props.handleSort(!0), E.setSortCode(t, e.props.sortCode.order)
          }, e.handleOrder = function (t) {
            var a = e.props.sortCode;
            a.order = t, e.setState({
              sortCode: a
            }), e.props.handleSort(!0), E.setSortCode(e.props.sortCode.sort, t), e.props.handleSortCode(a)
          }, e.handleSortBooks = function () {
            e.props.isSortDisplay ? e.props.handleSortDisplay(!1) : e.props.handleSortDisplay(!0)
          }, e
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "sort-dialog-container",
              onMouseLeave: function () {
                e.handleSortBooks()
              }
            }, o.a.createElement("ul", {
              className: "sort-by-category"
            }, o.a.createElement("li", {
              className: "sort-by-category-list",
              onClick: function () {
                e.handleSort(1)
              },
              style: 1 === this.props.sortCode.sort ? {
                color: "rgba(75, 75, 75, 1)"
              } : {}
            }, o.a.createElement(c.b, null, "Sort by Name")), o.a.createElement("li", {
              className: "sort-by-category-list",
              onClick: function () {
                e.handleSort(2)
              },
              style: 2 === this.props.sortCode.sort ? {
                color: "rgba(75, 75, 75, 1)"
              } : {}
            }, o.a.createElement(c.b, null, "Sort by Date"))), o.a.createElement("div", {
              className: "sort-dialog-seperator"
            }), o.a.createElement("ul", {
              className: "sort-by-order"
            }, o.a.createElement("li", {
              className: "sort-by-order-list",
              onClick: function () {
                e.handleOrder(1)
              },
              style: 1 === this.props.sortCode.order ? {
                color: "rgba(75, 75, 75, 1)"
              } : {}
            }, o.a.createElement(c.b, null, "Ascending Order")), o.a.createElement("li", {
              className: "sort-by-order-list",
              onClick: function () {
                e.handleOrder(2)
              },
              style: 2 === this.props.sortCode.order ? {
                color: "rgba(75, 75, 75, 1)"
              } : {}
            }, o.a.createElement(c.b, null, "Descending Order"))))
          }
        }]), a
      }(o.a.Component)),
      kt = {
        handleSortCode: K,
        handleSortDisplay: H,
        handleSort: function (e) {
          return {
            type: "HANDLE_SORT",
            payload: e
          }
        }
      },
      bt = Object(i.b)((function (e) {
        return {
          sortCode: e.manager.sortCode,
          isSortDisplay: e.manager.isSortDisplay
        }
      }), kt)(Object(c.d)()(ft)),
      vt = (a(159), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          return Object(v.a)(this, a), t.apply(this, arguments)
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            return o.a.createElement("div", {
              className: "message-box-container"
            }, o.a.createElement("span", {
              className: "icon-success  message-box-icon"
            }), o.a.createElement("div", {
              className: "message-content"
            }, o.a.createElement(c.b, null, this.props.message)))
          }
        }]), a
      }(o.a.Component)),
      yt = Object(i.b)((function (e) {
        return {
          message: e.manager.message
        }
      }), {})(Object(c.d)()(vt)),
      Et = (a(160), a(41)),
      St = a.n(Et),
      Ot = window.JSZip,
      Nt = function e() {
        Object(v.a)(this, e), this.importBooks = function (e, t, a) {
          var n = new Ot;
          e.forEach((function (o, r) {
            n.loadAsync(t).then((function (e) {
              return e.files["epub/".concat(o.name, ".epub")].async("arraybuffer")
            })).then((function (e) {
              F.a.setItem(o.key, e)
            })).then((function () {
              r === e.length - 1 && F.a.setItem("books", e).then((function () {
                a()
              }))
            })).catch((function () {
              console.log("Error occurs")
            }))
          }))
        }
      };
    Nt.restore = function (e, t) {
      var a = new Ot;
      ["notes", "books", "bookmarks", "readerConfig", "noteTags", "sortCode", "readingTime", "recentBooks", "favoriteBooks", "shelfList", "recordLocation"].forEach((function (n) {
        a.loadAsync(e).then((function (e) {
          return e.files["data/".concat(n, ".json")].async("text")
        })).then((function (e) {
          e && ("notes" === n || "books" === n || "bookmarks" === n ? F.a.setItem(n, JSON.parse(e)) : localStorage.setItem(n, e))
        })).then((function () {
          "books" === n && F.a.getItem("books").then((function (a) {
            var n = new Ot;
            a && a.forEach((function (a) {
              n.loadAsync(e).then((function (e) {
                return e.files["epub/".concat(a.name, ".epub")].async("arraybuffer")
              })).then((function (e) {
                F.a.setItem(a.key, e).then((function () {
                  t()
                }))
              })).catch((function () {
                console.log("Error occurs")
              }))
            }))
          }))
        })).catch((function () {
          console.log("Error happen")
        }))
      }))
    };
    var Ct = Nt,
      xt = window.Dropbox,
      wt = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "UploadFile",
          value: function (e, t, a) {
            var n = E.getReaderConfig("dropbox_token") || "";
            return new xt.Dropbox({
              accessToken: n
            }).filesUpload({
              path: "/Apps/KoodoReader/data.zip",
              contents: e,
              mode: {
                ".tag": "overwrite"
              }
            }).then((function (e) {
              console.log(e, "\u4e0a\u4f20\u6210\u529f"), t()
            })).catch((function (e) {
              console.error(e, "\u4e0a\u4f20\u5931\u8d25"), a("Upload failed, check your connection")
            })), !1
          }
        }, {
          key: "DownloadFile",
          value: function (e, t) {
            var a = E.getReaderConfig("dropbox_token") || "";
            return new xt.Dropbox({
              accessToken: a
            }).filesDownload({
              path: "/Apps/KoodoReader/data.zip"
            }).then((function (t) {
              var a = t.fileBlob;
              a.lastModifiedDate = new Date, a.name = "data.zip", Ct.restore(a, e)
            })).catch((function (e) {
              t("Download failed,network problem or no backup"), console.error(e)
            })), !1
          }
        }]), e
      }(),
      Dt = window.JSZip,
      Bt = function e() {
        Object(v.a)(this, e)
      };
    Bt.backup = function () {
      var e = Object(T.a)(A.a.mark((function e(t, a, n, o, r, s) {
        var i, l, c, u, d, p, h, m, g;
        return A.a.wrap((function (e) {
          for (;;) switch (e.prev = e.next) {
            case 0:
              return i = new Dt, l = t, c = i.folder("epub"), u = [], l && l.forEach((function (e) {
                u.push(F.a.getItem(e.key))
              })), e.next = 7, Promise.all(u);
            case 7:
              for (d = e.sent, console.log(d), p = 0; p < l.length; p++) c.file("".concat(l[p].name, ".epub"), d[p]);
              i.folder("data").file("notes.json", JSON.stringify(a)).file("books.json", JSON.stringify(l)).file("bookmarks.json", JSON.stringify(n)).file("readerConfig.json", localStorage.getItem("readerConfig") || "").file("sortCode.json", localStorage.getItem("sortCode") || "{ sort: 2, order: 2 }").file("readingTime.json", localStorage.getItem("readingTime") || "").file("recentBooks.json", localStorage.getItem("recentBooks") || []).file("favoriteBooks.json", localStorage.getItem("favoriteBooks") || []).file("shelfList.json", localStorage.getItem("shelfList") || []).file("noteTags.json", localStorage.getItem("noteTags") || []).file("recordLocation.json", localStorage.getItem("recordLocation") || ""), h = (new Date).getFullYear(), m = (new Date).getMonth() + 1, g = (new Date).getDate(), i.generateAsync({
                type: "blob"
              }).then((function (e) {
                switch (r) {
                  case 0:
                    o(), St.a.saveAs(e, "".concat(h, "-").concat(m <= 9 ? "0" + m : m, "-").concat(g <= 9 ? "0" + g : g, ".zip"));
                    break;
                  case 1:
                    wt.UploadFile(e, o, s)
                }
              })).catch((function (e) {
                console.log(e)
              }));
            case 14:
            case "end":
              return e.stop()
          }
        }), e)
      })));
      return function (t, a, n, o, r, s) {
        return e.apply(this, arguments)
      }
    }();
    var Mt = Bt,
      jt = (a(161), a(42)),
      At = a.n(jt),
      Tt = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleCancel = function () {
            n.props.handleTokenDialog(!1)
          }, n.handleComfirm = function () {
            var e = document.querySelector(".token-dialog-token-box").value;
            E.setReaderConfig("".concat(n.props.driveName, "_token"), e), n.props.handleTokenDialog(!1), n.props.handleMessage("Add Successfully"), n.props.handleMessageBox(!0)
          }, n.state = {
            isNew: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "token-dialog-container"
            }, o.a.createElement("div", {
              className: "token-dialog-box"
            }, o.a.createElement("div", {
              className: "token-dialog-title"
            }, o.a.createElement(c.b, null, "Bind"), this.props.driveName, o.a.createElement(c.b, null, "Token")), o.a.createElement("div", {
              className: "token-dialog-info-text"
            }, o.a.createElement(c.b, null, "Token Info")), o.a.createElement("div", {
              className: "token-dialog-link-text",
              onClick: function () {
                At()(e.props.url), e.props.handleMessage("Copy Successfully"), e.props.handleMessageBox(!0)
              }
            }, o.a.createElement(c.b, null, "Copy Link")), o.a.createElement("textarea", {
              className: "token-dialog-token-box"
            }), o.a.createElement("div", {
              className: "token-dialog-cancel",
              onClick: function () {
                e.handleCancel()
              }
            }, o.a.createElement(c.b, null, "Cancel")), o.a.createElement("div", {
              className: "token-dialog-comfirm",
              onClick: function () {
                e.handleComfirm()
              }
            }, o.a.createElement(c.b, null, "Confirm"))))
          }
        }]), a
      }(n.Component),
      It = {
        handleTokenDialog: fe,
        handleMessageBox: U,
        handleMessage: P
      },
      Ft = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          isOpenDeleteDialog: e.book.isOpenDeleteDialog,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests
        }
      }), It)(Object(c.d)()(Tt)),
      Rt = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleClose = function () {
            n.props.handleBackupDialog(!1)
          }, n.handleFinish = function () {
            n.setState({
              currentStep: 2
            })
          }, n.handleRestoreToLocal = function (e) {
            e.preventDefault(), Ct.restore(e.target.files[0], n.handleFinish)
          }, n.showMessage = function (e) {
            n.props.handleMessage(e), n.props.handleMessageBox(!0)
          }, n.handleDrive = function (e) {
            n.setState({
              currentDrive: e
            }, (function () {
              switch (e) {
                case 0:
                  Mt.backup(n.props.books, n.props.notes, n.props.bookmarks, n.handleFinish, 0, n.showMessage);
                  break;
                case 1:
                  if (!E.getReaderConfig("dropbox_token")) {
                    n.props.handleTokenDialog(!0);
                    break
                  }
                  "yes" === n.state.isBackup ? (n.showMessage("Uploading"), Mt.backup(n.props.books, n.props.notes, n.props.bookmarks, n.handleFinish, 1, n.showMessage)) : (n.showMessage("Downloading"), wt.DownloadFile(n.handleFinish, n.showMessage));
                  break;
                case 2:
                case 3:
                  n.showMessage("Coming Soon")
              }
            }))
          }, n.state = {
            currentStep: 0,
            isBackup: "",
            currentDrive: 0
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this,
              t = {
                driveName: le[this.state.currentDrive].icon,
                url: le[this.state.currentDrive].url
              };
            return o.a.createElement("div", {
              className: "backup-page-container"
            }, this.props.isOpenTokenDialog ? o.a.createElement(Ft, t) : null, 0 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-title"
            }, o.a.createElement(c.b, null, "Do you want to backup or restore?")) : 1 === this.state.currentStep && "yes" === this.state.isBackup ? o.a.createElement("div", {
              className: "backup-page-title"
            }, o.a.createElement(c.b, null, "Where to keep your data?")) : 1 === this.state.currentStep && "no" === this.state.isBackup ? o.a.createElement("div", {
              className: "backup-page-title"
            }, o.a.createElement(c.b, null, "Where is your data?")) : null, 0 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-option"
            }, o.a.createElement("div", {
              className: "yes" === this.state.isBackup ? "backup-page-backup active" : "backup-page-backup",
              onClick: function () {
                e.setState({
                  isBackup: "yes"
                })
              }
            }, o.a.createElement("span", {
              className: "icon-backup"
            }), o.a.createElement("div", null, o.a.createElement(c.b, null, "I want to backup"))), o.a.createElement("div", {
              className: "no" === this.state.isBackup ? "backup-page-backup active" : "backup-page-backup",
              onClick: function () {
                e.setState({
                  isBackup: "no"
                })
              }
            }, o.a.createElement("span", {
              className: "icon-restore"
            }), o.a.createElement("div", null, o.a.createElement(c.b, null, "I want to restore")))) : 1 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-drive-container"
            }, o.a.createElement("div", null, le.map((function (t, a) {
              return o.a.createElement("li", {
                key: t.id,
                className: "backup-page-list-item",
                onClick: function () {
                  e.handleDrive(a)
                },
                style: 0 === a || 1 === a ? {
                  opacity: 1
                } : {}
              }, o.a.createElement("div", {
                className: "backup-page-list-item-container"
              }, o.a.createElement("span", {
                className: "icon-".concat(t.icon, " backup-page-list-icon")
              }), o.a.createElement("div", {
                className: "backup-page-list-title"
              }, o.a.createElement(c.b, null, t.name))))
            }))), "no" === this.state.isBackup ? o.a.createElement("input", {
              type: "file",
              id: "restore-file",
              accept: "application/zip",
              className: "restore-file",
              name: "file",
              multiple: !1,
              onChange: function (t) {
                e.handleRestoreToLocal(t)
              }
            }) : null) : o.a.createElement("div", {
              className: "backup-page-finish-container"
            }, o.a.createElement("div", {
              className: "backup-page-finish"
            }, o.a.createElement("span", {
              className: "icon-message backup-page-finish-icon"
            }), o.a.createElement("div", {
              className: "backup-page-finish-text"
            }, o.a.createElement(c.b, null, "yes" === this.state.isBackup ? "Backup Successfully" : "Restore Successfully")), this.state.isBackup ? null : o.a.createElement("div", {
              style: {
                opacity: .6
              }
            }, o.a.createElement(c.b, null, "Try refresh or restart")))), "yes" === this.state.isBackup && 0 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-backup-selector"
            }) : null, "no" === this.state.isBackup && 0 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-backup-selector",
              style: {
                marginLeft: "252px"
              }
            }) : null, o.a.createElement("span", {
              className: "icon-close backup-page-close-icon",
              onClick: function () {
                e.handleClose()
              }
            }), 1 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-next",
              onClick: function () {
                e.setState({
                  currentStep: 0
                })
              }
            }, o.a.createElement(c.b, null, "Last Step")) : 0 === this.state.currentStep ? o.a.createElement("div", {
              className: "backup-page-next",
              onClick: function () {
                e.setState({
                  currentStep: 1
                })
              },
              style: this.state.isBackup ? {} : {
                display: "none"
              }
            }, o.a.createElement(c.b, null, "Next Step")) : null)
          }
        }]), a
      }(o.a.Component),
      Lt = {
        handleBackupDialog: ge,
        handleMessageBox: U,
        handleMessage: P,
        handleTokenDialog: fe
      },
      _t = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests,
          isOpenTokenDialog: e.backupPage.isOpenTokenDialog
        }
      }), Lt)(Object(c.d)()(Rt)),
      Pt = (a(162), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleSkip = function () {
            n.handleCloseWelcome()
          }, n.handlePrevious = function () {
            n.state.currentIndex > 0 && n.setState({
              currentIndex: n.state.currentIndex - 1
            })
          }, n.handleNext = function () {
            n.state.currentIndex < 3 && n.setState({
              currentIndex: n.state.currentIndex + 1
            })
          }, n.handleCloseWelcome = function () {
            n.props.handleFirst("no"), E.setReaderConfig("isFirst", "no")
          }, n.state = {
            currentIndex: 0,
            isOpenWelcome: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "welcome-page-container"
            }, o.a.createElement("div", {
              className: "welcome-title"
            }, o.a.createElement(c.b, null, "Hi! Stranger")), o.a.createElement("div", {
              className: "welcome-previout-page",
              onClick: function () {
                e.handlePrevious()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown welcome-page-icon"
            })), o.a.createElement("div", {
              className: "welcome-next-page",
              onClick: function () {
                e.handleNext()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown welcome-page-icon"
            })), o.a.createElement("div", {
              className: "welcome-message-page-container",
              style: {
                left: "".concat(86 - 506 * this.state.currentIndex, "px")
              }
            }, ue.map((function (t, a) {
              return o.a.createElement("div", {
                className: e.state.currentIndex === a ? "welcome-message-page welcome-page-animation" : "welcome-message-page",
                key: t.sub
              }, o.a.createElement("div", {
                className: "welcome-message-main"
              }, o.a.createElement("div", null, o.a.createElement(c.b, null, t.main))), o.a.createElement("div", {
                className: "welcome-message-sub"
              }, o.a.createElement(c.b, null, t.sub)))
            }))), o.a.createElement("ul", {
              className: "welcome-dots-page"
            }, o.a.createElement("li", {
              className: "welcome-dots",
              style: 0 === this.state.currentIndex ? {
                backgroundColor: "rgba(112, 112, 112, 1)"
              } : {}
            }), o.a.createElement("li", {
              className: "welcome-dots",
              style: 1 === this.state.currentIndex ? {
                backgroundColor: "rgba(112, 112, 112, 1)"
              } : {}
            }), o.a.createElement("li", {
              className: "welcome-dots",
              style: 2 === this.state.currentIndex ? {
                backgroundColor: "rgba(112, 112, 112, 1)"
              } : {}
            }), o.a.createElement("li", {
              className: "welcome-dots",
              style: 3 === this.state.currentIndex ? {
                backgroundColor: "rgba(112, 112, 112, 1)"
              } : {}
            })), o.a.createElement("div", {
              className: "welcome-button-page",
              onClick: function () {
                e.handleSkip()
              }
            }, o.a.createElement("div", null, o.a.createElement(c.b, null, "Skip"))))
          }
        }]), a
      }(o.a.Component)),
      Ut = {
        handleFirst: z
      },
      Ht = Object(i.b)((function () {
        return {}
      }), Ut)(Object(c.d)()(Pt)),
      zt = (a(163), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).renderList = function (e) {
            return e.map((function (e, t) {
              return o.a.createElement("li", {
                className: "update-dialog-list",
                key: t
              }, o.a.createElement("span", {
                style: {
                  color: "black"
                }
              }, t + 1 + ". "), o.a.createElement("span", null, e))
            }))
          }, n.state = {
            downlownLink: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "update-dialog-container"
            }, o.a.createElement("p", {
              className: "update-dialog-title"
            }, o.a.createElement(c.b, null, "What's new about this version")), o.a.createElement("p", {
              className: "update-dialog-subtitle"
            }, o.a.createElement(c.b, null, "Version"), ae), o.a.createElement("p", {
              className: "update-dialog-subtitle"
            }, o.a.createElement(c.b, null, "Date"), te), o.a.createElement("div", {
              className: "update-dialog-info"
            }, o.a.createElement("p", {
              className: "update-dialog-new-title"
            }, o.a.createElement(c.b, null, "What's New")), o.a.createElement("ul", {
              className: "update-dialog-new-container"
            }, this.renderList(ne)), o.a.createElement("p", {
              className: "update-dialog-fix-title"
            }, o.a.createElement(c.b, null, "What's been fixed")), o.a.createElement("ul", {
              className: "update-dialog-fix-container"
            }, this.renderList(oe))), o.a.createElement("div", {
              className: "update-dialog-container-button",
              onClick: function () {
                e.props.handleUpdateDialog()
              }
            }, o.a.createElement(c.b, null, "Confirm")), o.a.createElement("p", {
              className: "update-dialog-url"
            }, o.a.createElement("span", {
              style: {
                color: "#959595"
              }
            }, o.a.createElement(c.b, null, "Our Website")), "koodo.960960.xyz"), o.a.createElement("img", {
              src: "./assets/empty.svg",
              alt: "",
              className: "update-dialog-illustration"
            }))
          }
        }]), a
      }(o.a.Component)),
      Kt = Object(c.d)()(zt),
      Jt = (a(164), a(29)),
      Wt = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).changeLanguage = function (e) {
            p.changeLanguage(e), n.setState({
              language: e
            }), E.setReaderConfig("lang", e)
          }, n.handleChangeTouch = function () {
            n.setState({
              isTouch: !n.state.isTouch
            }), E.setReaderConfig("isTouch", n.state.isTouch ? "no" : "yes"), n.state.isTouch ? n.props.handleMessage("Turn Off Successfully") : n.props.handleMessage("Turn On Successfully"), n.props.handleMessageBox(!0)
          }, n.handleJump = function (e) {
            Jt() ? window.require("electron").shell.openExternal(e) : window.open(e)
          }, n.handleChangeFont = function () {
            n.setState({
              isUseFont: !n.state.isUseFont
            }), E.setReaderConfig("isUseFont", n.state.isUseFont ? "no" : "yes"), n.state.isUseFont ? n.props.handleMessage("Turn Off Successfully") : n.props.handleMessage("Turn On Successfully"), n.props.handleMessageBox(!0)
          }, n.handleExpandContent = function () {
            n.setState({
              isExpandContent: !n.state.isExpandContent
            }), E.setReaderConfig("isExpandContent", n.state.isExpandContent ? "no" : "yes"), n.state.isExpandContent ? n.props.handleMessage("Turn Off Successfully") : n.props.handleMessage("Turn On Successfully"), n.props.handleMessageBox(!0)
          }, n.handleChangeOpen = function () {
            n.setState({
              isOpenBook: !n.state.isOpenBook
            }), E.setReaderConfig("isOpenBook", n.state.isOpenBook ? "no" : "yes"), n.state.isOpenBook ? n.props.handleMessage("Turn Off Successfully") : n.props.handleMessage("Turn On Successfully"), n.props.handleMessageBox(!0)
          }, n.handleChangeBackground = function () {
            n.setState({
              isUseBackground: !n.state.isUseBackground
            }), E.setReaderConfig("isUseBackground", n.state.isUseBackground ? "no" : "yes"), n.state.isUseBackground ? n.props.handleMessage("Turn Off Successfully") : n.props.handleMessage("Turn On Successfully"), n.props.handleMessageBox(!0)
          }, n.handleFooterHeader = function () {
            n.setState({
              isShowFooter: !n.state.isShowFooter
            }), E.setReaderConfig("isShowFooter", n.state.isShowFooter ? "no" : "yes"), n.state.isShowFooter ? n.props.handleMessage("Turn On Successfully") : n.props.handleMessage("Turn Off Successfully"), n.props.handleMessageBox(!0)
          }, n.state = {
            language: E.getReaderConfig("lang"),
            isTouch: "yes" === E.getReaderConfig("isTouch"),
            isOpenBook: "yes" === E.getReaderConfig("isOpenBook"),
            isUseFont: "yes" === E.getReaderConfig("isUseFont"),
            isExpandContent: "yes" === E.getReaderConfig("isExpandContent"),
            isUseBackground: "yes" === E.getReaderConfig("isUseBackground"),
            isShowFooter: "no" !== E.getReaderConfig("isShowFooter")
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = E.getReaderConfig("lang");
            e && (p.changeLanguage(e), this.setState({
              language: e
            }))
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "setting-dialog-container"
            }, o.a.createElement("p", {
              className: "setting-dialog-title"
            }, o.a.createElement(c.b, null, "Setting")), o.a.createElement("p", {
              className: "setting-subtitle"
            }, o.a.createElement(c.b, null, "Version"), ae), o.a.createElement("p", {
              className: "setting-subtitle"
            }, o.a.createElement(c.b, null, "Date"), te), o.a.createElement("span", {
              className: "icon-close setting-close",
              onClick: function () {
                e.props.handleSetting(!1)
              }
            }), o.a.createElement("div", {
              className: "setting-dialog-info"
            }, o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, this.state.isTouch ? o.a.createElement(c.b, null, "Turn off touch mode") : o.a.createElement(c.b, null, "Turn on touch mode"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleChangeTouch()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isTouch ? {
                float: "right"
              } : {}
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Auto open latest book"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleChangeOpen()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isOpenBook ? {
                float: "right"
              } : {}
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Use built-in font"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleChangeFont()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isUseFont ? {
                float: "right"
              } : {}
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Default expand all content"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleExpandContent()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isExpandContent ? {
                float: "right"
              } : {}
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Hide footer and header"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleFooterHeader()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isShowFooter ? {} : {
                float: "right"
              }
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Hide mimical background"), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleChangeBackground()
              },
              style: {
                float: "right"
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isUseBackground ? {
                float: "right"
              } : {}
            }))), o.a.createElement("div", {
              className: "setting-dialog-new-title"
            }, o.a.createElement(c.b, null, "Choose / Language"), o.a.createElement("div", {
              className: "setting-language"
            }, "cht" === this.state.language ? o.a.createElement("span", {
              className: "icon-english",
              onClick: function () {
                return e.changeLanguage("en")
              }
            }) : "en" === this.state.language ? o.a.createElement("span", {
              className: "icon-english",
              onClick: function () {
                return e.changeLanguage("en")
              }
            }) : o.a.createElement("span", {
              className: "icon-english",
              onClick: function () {
                return e.changeLanguage("en")
              }
            }))), o.a.createElement("div", {
              className: "about-this-project"
            }, o.a.createElement("div", {
              className: "setting-dialog-subtitle",
              onClick: function () {
                e.handleJump("https://github.com/troyeguo/koodo-reader")
              }
            }, o.a.createElement(c.b, null, "Project link")), o.a.createElement("div", {
              className: "setting-dialog-subtitle",
              onClick: function () {
                e.handleJump("https://koodo.960960.xyz/")
              }
            }, o.a.createElement(c.b, null, "Official website")), o.a.createElement("div", {
              className: "setting-dialog-subtitle",
              onClick: function () {
                e.handleJump("https://github.com/troyeguo")
              }
            }, o.a.createElement(c.b, null, "About author")))), o.a.createElement("img", {
              src: "./assets/empty.svg",
              alt: "",
              className: "setting-dialog-illustration"
            }))
          }
        }]), a
      }(o.a.Component),
      Gt = {
        handleSetting: _,
        handleMessageBox: U,
        handleMessage: P
      },
      qt = Object(i.b)((function (e) {
        return {}
      }), Gt)(Object(c.d)()(Wt)),
      Vt = a(81),
      Yt = (a(166), a(167), a(168), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleDeleteBook = function () {
            e.props.handleReadingBook(e.props.currentBook), e.props.handleDeleteDialog(!0), e.props.handleActionDialog(!1)
          }, e.handleEditBook = function () {
            e.props.handleEditDialog(!0), e.props.handleReadingBook(e.props.currentBook), e.props.handleActionDialog(!1)
          }, e.handleAddShelf = function () {
            e.props.handleAddDialog(!0), e.props.handleReadingBook(e.props.currentBook), e.props.handleActionDialog(!1)
          }, e
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "action-dialog-container",
              onMouseLeave: function () {
                e.props.handleActionDialog(!1)
              },
              style: {
                left: this.props.left,
                top: this.props.top
              }
            }, o.a.createElement("div", {
              className: "action-dialog-actions-container"
            }, o.a.createElement("div", {
              className: "action-dialog-add",
              onClick: function () {
                e.handleAddShelf()
              }
            }, o.a.createElement("span", {
              className: "icon-shelf view-icon"
            }), o.a.createElement("span", {
              className: "action-name"
            }, o.a.createElement(c.b, null, "Add"))), o.a.createElement("div", {
              className: "action-dialog-delete",
              onClick: function () {
                e.handleDeleteBook()
              }
            }, o.a.createElement("span", {
              className: "icon-trash view-icon"
            }), o.a.createElement("span", {
              className: "action-name"
            }, o.a.createElement(c.b, null, "Delete"))), o.a.createElement("div", {
              className: "action-dialog-edit",
              onClick: function () {
                e.handleEditBook()
              }
            }, o.a.createElement("span", {
              className: "icon-edit view-icon"
            }), o.a.createElement("span", {
              className: "action-name"
            }, o.a.createElement(c.b, null, "Edit")))))
          }
        }]), a
      }(o.a.Component)),
      Qt = {
        handleEditDialog: Ve,
        handleAddDialog: Qe,
        handleDeleteDialog: Ye,
        handleReadingBook: $e,
        handleActionDialog: Xe
      },
      Xt = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook
        }
      }), Qt)(Object(c.d)()(Yt)),
      Zt = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).epub = void 0, n.handleMoreAction = function (e) {
            var t = e || window.event,
              a = t.clientX;
            a > document.body.clientWidth - 100 && (a -= 80), n.setState({
              left: a - 210,
              top: t.clientY - 120
            }, (function () {
              n.props.handleActionDialog(!0), n.props.handleReadingBook(n.props.book)
            }))
          }, n.handleLoveBook = function () {
            rt.setFavorite(n.props.book.key), n.setState({
              isFavorite: !0
            }), n.props.handleMessage("Add Successfully"), n.props.handleMessageBox(!0)
          }, n.handleCancelLoveBook = function () {
            rt.clear(n.props.book.key), n.setState({
              isFavorite: !1
            }), n.props.handleMessage("Cancel Successfully"), n.props.handleMessageBox(!0)
          }, n.handleConfig = function (e) {
            n.setState({
              isOpenConfig: e
            })
          }, n.handleJump = function () {
            Ne.setRecent(n.props.book.key), "pdf" === n.props.book.description ? window.open("./lib/pdf/viewer.html?file=".concat(n.props.book.key)) : window.open("".concat(window.location.href.split("#")[0], "#/epub/").concat(n.props.book.key))
          }, n.state = {
            isOpenConfig: !1,
            isFavorite: rt.getAllFavorite().indexOf(n.props.book.key) > -1,
            left: 0,
            top: 0
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            "yes" !== E.getReaderConfig("isOpenBook") || Ne.getAllRecent()[0] !== this.props.book.key || this.props.currentBook.key || window.open("".concat(window.location.href.split("#")[0], "#/epub/").concat(this.props.book.key))
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = {
                left: this.state.left,
                top: this.state.top
              };
            return o.a.createElement(o.a.Fragment, null, o.a.createElement("div", {
              className: "book-list-item",
              onMouseOver: function () {
                e.handleConfig(!0)
              },
              onMouseLeave: function () {
                e.handleConfig(!1)
              }
            }, this.props.book.cover && "noCover" !== this.props.book.cover ? o.a.createElement("img", {
              className: "book-item-cover",
              src: this.props.book.cover,
              alt: "",
              onClick: function () {
                e.handleJump()
              }
            }) : o.a.createElement("div", {
              className: "book-item-cover",
              onClick: function () {
                e.handleJump()
              }
            }, o.a.createElement("img", {
              src: "./assets/cover.jpg",
              alt: "",
              style: {
                width: "100%"
              }
            })), o.a.createElement("p", {
              className: "book-item-title"
            }, this.props.book.name), this.state.isFavorite ? o.a.createElement("span", {
              className: "icon-love book-loved-icon",
              onClick: function () {
                e.handleCancelLoveBook()
              }
            }) : null, this.state.isOpenConfig ? o.a.createElement(o.a.Fragment, null, o.a.createElement("span", {
              className: "icon-more book-more-action",
              onClick: function (t) {
                e.handleMoreAction(t)
              }
            }), o.a.createElement("span", {
              className: "icon-love book-love-icon",
              onClick: function () {
                e.handleLoveBook()
              }
            })) : null), this.props.isOpenActionDialog && this.props.book.key === this.props.currentBook.key ? o.a.createElement(Xt, t) : null)
          }
        }]), a
      }(o.a.Component),
      $t = Object(M.g)(Zt),
      ea = {
        handleReadingBook: $e,
        handleActionDialog: Xe,
        handleMessageBox: U,
        handleMessage: P
      },
      ta = Object(i.b)((function (e) {
        return {
          isOpenActionDialog: e.book.isOpenActionDialog,
          currentBook: e.book.currentBook
        }
      }), ea)($t),
      aa = (a(169), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).epub = void 0, n.handleDeleteBook = function () {
            n.props.handleDeleteDialog(!0), n.props.handleReadingBook(n.props.book)
          }, n.handleEditBook = function () {
            n.props.handleEditDialog(!0), n.props.handleReadingBook(n.props.book)
          }, n.handleAddShelf = function () {
            n.props.handleAddDialog(!0), n.props.handleReadingBook(n.props.book)
          }, n.handleLoveBook = function () {
            rt.setFavorite(n.props.book.key), n.setState({
              isFavorite: !0
            }), n.props.handleMessage("Add Successfully"), n.props.handleMessageBox(!0)
          }, n.handleCancelLoveBook = function () {
            rt.clear(n.props.book.key), n.setState({
              isFavorite: !1
            }), n.props.handleMessage("Cancel Successfully"), n.props.handleMessageBox(!0)
          }, n.handleJump = function () {
            Ne.setRecent(n.props.book.key), "pdf" === n.props.book.description ? window.open("./lib/pdf/viewer.html?file=".concat(n.props.book.key)) : window.open("".concat(window.location.href.split("#")[0], "#/epub/").concat(n.props.book.key))
          }, n.state = {
            isDeleteDialog: !1,
            isFavorite: rt.getAllFavorite().indexOf(n.props.book.key) > -1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this,
              t = ot.getCfi(this.props.book.key) ? ot.getCfi(this.props.book.key).percentage : 0;
            return o.a.createElement("div", {
              className: "book-list-item-container"
            }, this.props.book.cover && "noCover" !== this.props.book.cover ? o.a.createElement("img", {
              className: "book-item-list-cover",
              src: this.props.book.cover,
              alt: "",
              onClick: function () {
                e.handleJump()
              }
            }) : o.a.createElement("div", {
              className: "book-item-list-cover book-item-list-cover-img",
              onClick: function () {
                e.handleJump()
              }
            }, o.a.createElement("img", {
              src: "./assets/cover.jpg",
              alt: "",
              style: {
                width: "100%"
              }
            })), o.a.createElement("p", {
              className: "book-item-list-title",
              onClick: function () {
                e.handleJump()
              }
            }, this.props.book.name), o.a.createElement("p", {
              className: "book-item-list-author"
            }, this.props.book.author ? this.props.book.author : o.a.createElement(c.b, null, "Unknown Authur")), o.a.createElement("p", {
              className: "book-item-list-percentage"
            }, t ? Math.round(100 * t) : 0, "%"), o.a.createElement("div", {
              className: "book-item-list-config"
            }, this.state.isFavorite ? o.a.createElement("span", {
              className: "icon-love list-icon",
              onClick: function () {
                e.handleCancelLoveBook()
              },
              style: {
                color: "#f87356"
              }
            }) : o.a.createElement("span", {
              className: "icon-love list-icon",
              onClick: function () {
                e.handleLoveBook()
              }
            }), o.a.createElement("span", {
              className: "icon-shelf list-icon",
              onClick: function () {
                e.handleAddShelf()
              },
              color: "rgba(75,75,75,1)"
            }), o.a.createElement("span", {
              className: "icon-trash list-icon",
              onClick: function () {
                e.handleDeleteBook()
              }
            }), o.a.createElement("span", {
              className: "icon-edit list-icon",
              onClick: function () {
                e.handleEditBook()
              }
            })))
          }
        }]), a
      }(o.a.Component)),
      na = Object(M.g)(aa),
      oa = {
        handleReadingBook: $e,
        handleEditDialog: Ve,
        handleDeleteDialog: Ye,
        handleAddDialog: Qe,
        handleMessageBox: U,
        handleMessage: P
      },
      ra = Object(i.b)((function (e) {
        return {
          isReading: e.book.isReading,
          percentage: e.progressPanel.percentage
        }
      }), oa)(Object(c.d)()(na)),
      sa = function (e) {
        var t = [];
        return e.forEach((function (e) {
          t.push(e.name)
        })), t
      },
      ia = function (e, t) {
        var a = [];
        return e.forEach((function (e) {
          a.push(t.indexOf(e))
        })), a
      },
      la = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "sortBooks",
          value: function (e, t) {
            if (1 === t.sort && 1 === t.order) {
              var a = sa(e),
                n = sa(e).sort();
              return ia(n, a)
            }
            if (1 === t.sort && 2 === t.order) {
              var o = sa(e),
                r = sa(e).sort().reverse();
              return ia(r, o)
            }
            if (2 === t.sort && 1 === t.order) {
              for (var s = [], i = 0; i < e.length; i++) s.push(i);
              return s
            }
            if (2 === t.sort && 2 === t.order) {
              for (var l = [], c = 0; c < e.length; c++) l.push(c);
              return l.reverse()
            }
          }
        }]), e
      }(),
      ca = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleCancel = function () {
            e.props.handleDeletePopup(!1)
          }, e.handleComfirm = function () {
            e.props.handleDeletePopup(!1), e.props.handleDeleteOpearion(), e.props.handleMessage("Delete Successfully"), e.props.handleMessageBox(!0)
          }, e
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "delete-dialog-container"
            }, o.a.createElement("div", {
              className: "delete-dialog-title"
            }, o.a.createElement(c.b, null, this.props.title)), o.a.createElement("div", {
              className: "delete-dialog-book"
            }, o.a.createElement("div", {
              className: "delete-dialog-book-title"
            }, this.props.name)), o.a.createElement("div", {
              className: "delete-dialog-other-option"
            }, o.a.createElement(c.b, null, this.props.description)), o.a.createElement("div", {
              className: "delete-dialog-cancel",
              onClick: function () {
                e.handleCancel()
              }
            }, o.a.createElement(c.b, null, "Cancel")), o.a.createElement("div", {
              className: "delete-dialog-comfirm",
              onClick: function () {
                e.handleComfirm()
              }
            }, o.a.createElement(c.b, null, "Delete")))
          }
        }]), a
      }(o.a.Component),
      ua = {
        handleFetchBooks: J,
        handleMessageBox: U,
        handleMessage: P
      },
      da = Object(i.b)((function (e) {
        return {}
      }), ua)(Object(c.d)()(ca)),
      pa = (a(170), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          return Object(v.a)(this, a), t.apply(this, arguments)
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "empty-page-container"
            }, o.a.createElement("img", {
              src: "./assets/empty.svg",
              alt: "",
              className: "empty-page-illustration"
            }), ce.map((function (t) {
              return o.a.createElement("div", {
                className: "empty-page-info-container",
                key: t.mode,
                style: e.props.mode === t.mode ? {} : {
                  visibility: "hidden"
                }
              }, o.a.createElement("div", {
                className: "empty-page-info-main"
              }, o.a.createElement(c.b, null, t.main)), o.a.createElement("div", {
                className: "empty-page-info-sub"
              }, o.a.createElement(c.b, null, t.sub)))
            })))
          }
        }]), a
      }(o.a.Component)),
      ha = Object(i.b)((function (e) {
        return {
          mode: e.sidebar.mode
        }
      }), {})(Object(c.d)()(pa)),
      ma = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleOldVersion = Object(T.a)(A.a.mark((function e() {
            return A.a.wrap((function (e) {
              for (;;) switch (e.prev = e.next) {
                case 0:
                  if (n.props.books[0].cover) {
                    e.next = 2;
                    break
                  }
                  return e.delegateYield(A.a.mark((function e() {
                    var t, a, o;
                    return A.a.wrap((function (e) {
                      for (;;) switch (e.prev = e.next) {
                        case 0:
                          t = n.props.books, a = A.a.mark((function e(a) {
                            return A.a.wrap((function (e) {
                              for (;;) switch (e.prev = e.next) {
                                case 0:
                                  return e.next = 2, new Promise(function () {
                                    var e = Object(T.a)(A.a.mark((function e(n, o) {
                                      var r, s, i, l, c;
                                      return A.a.wrap((function (e) {
                                        for (;;) switch (e.prev = e.next) {
                                          case 0:
                                            if (!t[a].content) {
                                              e.next = 5;
                                              break
                                            }
                                            r = window.ePub(t[a].content, {}), F.a.setItem(t[a].key, t[a].content).then((function () {
                                              delete t[a].content
                                            })), e.next = 9;
                                            break;
                                          case 5:
                                            return e.next = 7, new Promise((function (e, n) {
                                              F.a.getItem(t[a].key).then((function (t) {
                                                e(t)
                                              }))
                                            }));
                                          case 7:
                                            s = e.sent, r = window.ePub(s, {});
                                          case 9:
                                            return e.next = 11, r.coverUrl();
                                          case 11:
                                            return i = e.sent, l = new FileReader, e.next = 15, fetch(i).then((function (e) {
                                              return e.blob()
                                            }));
                                          case 15:
                                            c = e.sent, l.readAsDataURL(c), l.onloadend = function () {
                                              var e = l.result;
                                              t[a].cover = e, n()
                                            };
                                          case 18:
                                          case "end":
                                            return e.stop()
                                        }
                                      }), e)
                                    })));
                                    return function (t, a) {
                                      return e.apply(this, arguments)
                                    }
                                  }());
                                case 2:
                                case "end":
                                  return e.stop()
                              }
                            }), e)
                          })), o = 0;
                        case 3:
                          if (!(o < t.length)) {
                            e.next = 8;
                            break
                          }
                          return e.delegateYield(a(o), "t0", 5);
                        case 5:
                          o++, e.next = 3;
                          break;
                        case 8:
                          F.a.setItem("books", t).then((function () {
                            window.location.reload()
                          }));
                        case 9:
                        case "end":
                          return e.stop()
                      }
                    }), e)
                  }))(), "t0", 2);
                case 2:
                case "end":
                  return e.stop()
              }
            }), e)
          }))), n.handleFavorite = function (e, t) {
            var a = [];
            return t.forEach((function (t) {
              e.forEach((function (e) {
                e.key === t && a.push(e)
              }))
            })), a
          }, n.handleRecent = function (e, t) {
            var a = [];
            return t[0] && t.length === e.length ? (t.forEach((function (t) {
              e.forEach((function (e) {
                e.key === t && a.push(e)
              }))
            })), a) : (Ne.setAllRecent(e), e)
          }, n.handleChange = function (e) {
            E.setReaderConfig("isList", e), n.props.handleFetchList()
          }, n.handleFilter = function (e, t) {
            var a = [];
            return t.forEach((function (t) {
              e[t] && a.push(e[t])
            })), a
          }, n.renderBookList = function () {
            var e = n.props.isSearch ? n.handleFilter(n.props.books, n.props.searchResults) : n.props.shelfIndex > 0 ? n.handleShelf(n.props.books, n.props.shelfIndex) : "favorite" !== n.props.mode || n.props.isSort ? "favorite" === n.props.mode && n.props.isSort ? n.handleFilter(n.handleFavorite(n.props.books, rt.getAllFavorite()), la.sortBooks(n.props.books, n.props.sortCode) || []) : n.props.isSort ? n.handleFilter(n.props.books, la.sortBooks(n.props.books, n.props.sortCode) || []) : n.handleRecent(n.props.books, Ne.getAllRecent()) : n.handleFavorite(n.props.books, rt.getAllFavorite());
            return "shelf" === n.props.mode && 0 === e.length ? o.a.createElement("div", {
              style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                height: "100%",
                zIndex: -1
              }
            }, o.a.createElement(ha, null)) : e.map((function (e, t) {
              return "list" === n.props.isList ? o.a.createElement(ra, {
                key: e.key,
                book: e
              }) : o.a.createElement(ta, {
                key: e.key,
                book: e
              })
            }))
          }, n.handleShelfItem = function (e) {
            var t = e.target.value.split(",")[1];
            n.setState({
              shelfIndex: t
            }), n.props.handleShelfIndex(t), t > 0 ? n.props.handleMode("shelf") : n.props.handleMode("home")
          }, n.handleDeleteShelf = function () {
            if (!(n.state.shelfIndex < 1)) {
              var e = Object.keys(nt.getShelf())[n.state.shelfIndex];
              nt.removeShelf(e), n.setState({
                shelfIndex: 0
              }, (function () {
                n.props.handleShelfIndex(0), n.props.handleMode("shelf")
              }))
            }
          }, n.renderShelfList = function () {
            var e = nt.getShelf();
            return Object.keys(e).map((function (e, t) {
              return o.a.createElement(c.a, {
                key: t
              }, (function (a) {
                return o.a.createElement("option", {
                  value: [e, t.toString()],
                  key: t,
                  className: "add-dialog-shelf-list-option",
                  selected: n.props.shelfIndex === t
                }, a("New" === e ? "All Books" : e))
              }))
            }))
          }, n.handleDeletePopup = function (e) {
            n.setState({
              isOpenDelete: e
            })
          }, n.state = {
            shelfIndex: 0,
            isOpenDelete: !1,
            favoriteBooks: Object.keys(rt.getAllFavorite()).length
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            if (!this.props.books || !this.props.books[0]) return o.a.createElement(M.a, {
              to: "manager/empty"
            });
            this.handleOldVersion()
          }
        }, {
          key: "handleShelf",
          value: function (e, t) {
            if (t < 1) return e;
            var a = Object.keys(nt.getShelf())[t];
            if (!a) return e;
            var n = nt.getShelf()[a];
            return e.filter((function (e) {
              return n.indexOf(e.key) > -1
            }))
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            if (0 === this.state.favoriteBooks && "favorite" === this.props.mode || !this.props.books || !this.props.books[0]) return o.a.createElement(M.a, {
              to: "/manager/empty"
            });
            var t = {
              mode: "shelf",
              name: Object.keys(nt.getShelf())[this.state.shelfIndex],
              title: "Delete this shelf",
              description: "This action will clear and remove this shelf",
              handleDeletePopup: this.handleDeletePopup,
              handleDeleteOpearion: this.handleDeleteShelf
            };
            return E.setReaderConfig("totalBooks", this.props.books.length.toString()), o.a.createElement(o.a.Fragment, null, this.state.isOpenDelete && o.a.createElement(da, t), o.a.createElement("div", {
              className: "book-list-view"
            }, o.a.createElement("div", {
              className: "card-list-mode",
              onClick: function () {
                e.handleChange("card")
              },
              style: "card" === this.props.isList ? {} : {
                color: "rgba(75,75,75,0.5)"
              }
            }, o.a.createElement("span", {
              className: "icon-grid"
            }), o.a.createElement(c.b, null, "Card Mode")), o.a.createElement("div", {
              className: "list-view-mode",
              onClick: function () {
                e.handleChange("list")
              },
              style: "list" === this.props.isList ? {} : {
                color: "rgba(75,75,75,0.5)"
              }
            }, o.a.createElement("span", {
              className: "icon-list"
            }), " ", o.a.createElement(c.b, null, "List Mode"))), o.a.createElement("div", {
              className: "booklist-shelf-container"
            }, o.a.createElement("p", {
              className: "general-setting-title",
              style: {
                display: "inline"
              }
            }, o.a.createElement(c.b, null, "My Shelves")), o.a.createElement("select", {
              className: "booklist-shelf-list",
              onChange: function (t) {
                e.handleShelfItem(t)
              }
            }, this.renderShelfList()), this.state.shelfIndex > 0 ? o.a.createElement("span", {
              className: "icon-trash delete-shelf-icon",
              onClick: function () {
                e.handleDeletePopup(!0)
              }
            }) : null), o.a.createElement("div", {
              className: "book-list-container-parent"
            }, o.a.createElement("div", {
              className: "book-list-container"
            }, o.a.createElement("ul", {
              className: "book-list-item-box"
            }, this.renderBookList()))))
          }
        }]), a
      }(o.a.Component),
      ga = Object(M.g)(ma),
      fa = {
        handleFetchList: W,
        handleMode: $,
        handleShelfIndex: Z
      },
      ka = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          mode: e.sidebar.mode,
          shelfIndex: e.sidebar.shelfIndex,
          searchResults: e.manager.searchResults,
          isSearch: e.manager.isSearch,
          isSort: e.manager.isSort,
          isList: e.manager.isList,
          sortCode: e.manager.sortCode
        }
      }), fa)(Object(c.d)()(ga)),
      ba = (a(171), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleRedirect = function (t, a, n) {
            for (var o, r = e.props.books, s = 0; s < r.length; s++)
              if (r[s].key === t) {
                o = r[s];
                break
              } if (a && n || (a = ot.getCfi(o.key).cfi, n = ot.getCfi(o.key).percentage), !o) return e.props.handleMessage("Book not exsit"), void e.props.handleMessageBox(!0);
            ot.recordCfi(t, a, n), window.open("".concat(window.location.href.split("#")[0], "#/epub/").concat(o.key))
          }, e
        }
        return Object(y.a)(a, [{
          key: "UNSAFE_componentWillMount",
          value: function () {
            this.props.handleFetchBookmarks()
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = this.props,
              a = t.bookmarks,
              n = t.books,
              r = [];
            if (0 === a.length) return o.a.createElement(M.a, {
              to: "/manager/empty"
            });
            a.forEach((function (e) {
              if (-1 === r.indexOf(e.bookKey)) return r.push(e.bookKey), !1
            }));
            var s = n.filter((function (e) {
                return r.indexOf(e.key) > -1
              })),
              i = {};
            a.forEach((function (e) {
              return !i[e.bookKey] && r.indexOf(e.bookKey) > -1 && (i[e.bookKey] = []), r.indexOf(e.bookKey) > -1 && i[e.bookKey].push(e), !1
            }));
            return o.a.createElement("div", {
              className: "bookmark-page-container-parent"
            }, o.a.createElement("div", {
              className: "bookmark-page-container"
            }, s.map((function (t, a) {
              return o.a.createElement("li", {
                className: "bookmark-page-item",
                key: t.key
              }, o.a.createElement("img", {
                className: "bookmark-page-cover",
                src: t.cover,
                alt: "",
                onClick: function () {
                  e.handleRedirect(t.key, "", 0)
                }
              }), o.a.createElement("p", {
                className: "bookmark-page-name"
              }, s[a].name), o.a.createElement("div", {
                className: "bookmark-page-bookmark-container-parent"
              }, o.a.createElement("ul", {
                className: "bookmark-page-bookmark-container"
              }, function (t) {
                return i[t.key].reverse().map((function (t) {
                  return o.a.createElement("li", {
                    className: "bookmark-page-list-item",
                    key: t.key
                  }, o.a.createElement("div", {
                    className: "bookmark-page-list-item-title"
                  }, o.a.createElement(c.b, null, t.chapter)), o.a.createElement("div", {
                    className: "bookmark-page-progress"
                  }, Math.round(100 * t.percentage), "%"), o.a.createElement("div", {
                    className: "bookmark-page-list-item-link",
                    onClick: function () {
                      e.handleRedirect(t.bookKey, t.cfi, t.percentage)
                    }
                  }, o.a.createElement("div", {
                    className: "bookmark-page-list-item-link-text"
                  }, o.a.createElement(c.b, null, "Go To"))))
                }))
              }(t))))
            }))))
          }
        }]), a
      }(o.a.Component)),
      va = Object(M.g)(ba),
      ya = {
        handleFetchBookmarks: Y,
        handleMessageBox: U,
        handleMessage: P
      },
      Ea = Object(i.b)((function (e) {
        return {
          bookmarks: e.reader.bookmarks,
          books: e.manager.books
        }
      }), ya)(Object(c.d)()(va));
    a(172), a(173);

    function Sa(e) {
      return {
        type: "HANDLE_OPEN_MENU",
        payload: e
      }
    }

    function Oa(e) {
      return {
        type: "HANDLE_MENU_MODE",
        payload: e
      }
    }

    function Na(e) {
      return {
        type: "HANDLE_CHANGE_DIRECTION",
        payload: e
      }
    }

    function Ca(e) {
      return {
        type: "HANDLE_SHOW_BOOKMARK",
        payload: e
      }
    }

    function xa(e) {
      return {
        type: "HANDLE_SELECTION",
        payload: e
      }
    }
    a(174);
    var wa = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "setTags",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("noteTags") && localStorage.getItem("noteTags") ? JSON.parse(localStorage.getItem("noteTags") || "") : [],
              a = t.indexOf(e);
            a > -1 ? (t.splice(a, 1), t.unshift(e)) : t.unshift(e), localStorage.setItem("noteTags", JSON.stringify(t))
          }
        }, {
          key: "clear",
          value: function (e) {
            var t = "{}" !== localStorage.getItem("noteTags") && localStorage.getItem("noteTags") ? JSON.parse(localStorage.getItem("noteTags") || "") : [],
              a = t.indexOf(e);
            a > -1 && t.splice(a, 1), localStorage.setItem("noteTags", JSON.stringify(t))
          }
        }, {
          key: "getAllTags",
          value: function () {
            return ("{}" !== localStorage.getItem("noteTags") && localStorage.getItem("noteTags") ? JSON.parse(localStorage.getItem("noteTags") || "") : []) || []
          }
        }]), e
      }(),
      Da = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleDelete = function () {
            var e = "notes" === n.props.mode ? n.props.notes : "tags" === n.props.mode ? wa.getAllTags() : n.props.bookmarks,
              t = "notes" === n.props.mode ? n.props.handleFetchNotes : n.props.handleFetchBookmarks;
            e.forEach((function (a, o) {
              if ("tags" === n.props.mode) return console.log(n.props.tagName, n.props.mode), void(a === n.props.tagName && wa.clear(a));
              a.key === n.props.itemKey && (e.splice(o, 1), 0 === e.length ? F.a.removeItem(n.props.mode).then((function () {
                t(), n.props.handleMessage("Delete Successfully"), n.props.handleMessageBox(!0)
              })).catch((function () {
                console.log("\u5220\u9664\u5931\u8d25")
              })) : F.a.setItem(n.props.mode, e).then((function () {
                t(), n.props.handleMessage("Delete Successfully"), n.props.handleMessageBox(!0)
              })).catch((function () {
                console.log("\u4fee\u6539\u5931\u8d25")
              })))
            }))
          }, n.handleDeletePopup = function (e) {
            n.setState({
              isOpenDelete: e
            }), e || n.props.handleChangeTag(n.props.index)
          }, n.state = {
            deleteIndex: -1,
            isOpenDelete: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this,
              t = {
                name: this.props.tagName,
                title: "Delete this tag",
                description: "This action will clear and remove this tag",
                handleDeletePopup: this.handleDeletePopup,
                handleDeleteOpearion: this.handleDelete
              };
            return o.a.createElement(o.a.Fragment, null, this.state.isOpenDelete && o.a.createElement(da, t), o.a.createElement("div", {
              className: "delete-digest-button",
              onClick: function () {
                "tags" === e.props.mode ? e.handleDeletePopup(!0) : e.handleDelete()
              }
            }, o.a.createElement("span", {
              className: "icon-close delete-digest-icon"
            })))
          }
        }]), a
      }(o.a.Component),
      Ba = {
        handleFetchBookmarks: Y,
        handleFetchNotes: V,
        handleMessageBox: U,
        handleMessage: P,
        handleShowBookmark: Ca
      },
      Ma = Object(i.b)((function (e) {
        return {
          digests: e.reader.digests,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          isReading: e.book.isReading
        }
      }), Ba)(Da),
      ja = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleBookName = function (e) {
            for (var t = n.props.books, a = "", o = 0; o < n.props.books.length; o++)
              if (t[o].key === e) {
                a = t[o].name;
                break
              } return a
          }, n.handleShowDelete = function (e) {
            n.setState({
              deleteKey: e
            })
          }, n.handleJump = function (e, t, a) {
            for (var o, r = n.props.books, s = 0; s < r.length; s++)
              if (r[s].key === t) {
                o = r[s];
                break
              } if (!o) return n.props.handleMessage("Book not exsit"), void n.props.handleMessageBox(!0);
            ot.recordCfi(t, e, a), window.open("".concat(window.location.href.split("#")[0], "#/epub/").concat(o.key))
          }, n.state = {
            deleteKey: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this,
              t = this.props.cards;
            if (0 === t.length) return o.a.createElement(M.a, {
              to: "/manager/empty"
            });
            for (var a = [], n = t.length - 1; n >= 0; n--) a.push(t[n]);
            for (var r = [a[0].date], s = a[0].date, i = 1; i < a.length; i++) a[i].date.year === s.year && a[i].date.month === s.month && a[i].date.day === s.day || (r.push(a[i].date), s = a[i].date);
            var l = {};
            r.forEach((function (e) {
              l["" + e.year + e.month + e.day] = []
            })), a.forEach((function (e) {
              r.forEach((function (t) {
                t.year === e.date.year && t.month === e.date.month && t.day === e.date.day && l["" + t.year + t.month + t.day].push(e)
              }))
            }));
            return o.a.createElement("div", {
              className: "card-list-container"
            }, r.map((function (t, a) {
              return o.a.createElement("li", {
                className: "card-page-item",
                key: a
              }, o.a.createElement("div", {
                className: "card-page-item-date"
              }, "".concat(t.year, "-").concat(t.month, "-").concat(t.day)), o.a.createElement("ul", {
                className: "card-list-container-box"
              }, (n = "" + t.year + t.month + t.day, l[n].map((function (t, a) {
                var n = {
                  itemKey: t.key,
                  mode: "notes"
                };
                return o.a.createElement("li", {
                  className: "card-list-item",
                  key: a,
                  onMouseOver: function () {
                    e.handleShowDelete(t.key)
                  },
                  onMouseLeave: function () {
                    e.handleShowDelete("")
                  }
                }, e.state.deleteKey === t.key ? o.a.createElement(Ma, n) : null, o.a.createElement("div", {
                  className: "card-list-item-card"
                }, o.a.createElement("div", {
                  className: "card-list-item-text-parent"
                }, o.a.createElement("div", {
                  className: "card-list-item-text"
                }, "note" === e.props.mode ? t.notes : t.text)), o.a.createElement("div", {
                  className: "card-list-item-citation"
                }, o.a.createElement("div", {
                  className: "card-list-item-title"
                }, o.a.createElement(c.b, null, "From"), "\u300a"), o.a.createElement("div", {
                  className: "card-list-item-chapter card-list-item-title"
                }, e.handleBookName(t.bookKey)), o.a.createElement("div", {
                  className: "card-list-item-chapter card-list-item-title"
                }, "\u300b", o.a.createElement(c.b, null, t.chapter))), o.a.createElement("div", {
                  onClick: function () {
                    e.handleJump(t.cfi, t.bookKey, t.percentage)
                  }
                }, o.a.createElement("div", {
                  className: "card-list-item-show-more",
                  style: {
                    color: "rgba(75,75,75,0.8)",
                    bottom: "10px"
                  }
                }, "note" === e.props.mode ? o.a.createElement(c.b, null, "More Notes") : o.a.createElement(c.b, null, "More Digests"), o.a.createElement("span", {
                  className: "icon-dropdown icon-card-right"
                })))))
              })))));
              var n
            })))
          }
        }]), a
      }(o.a.Component),
      Aa = Object(M.g)(ja),
      Ta = {
        handleReadingBook: $e,
        handleMessageBox: U,
        handleMessage: P
      },
      Ia = Object(i.b)((function (e) {
        return {
          digests: e.reader.digests,
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          chapters: e.reader.chapters,
          books: e.manager.books
        }
      }), Ta)(Object(c.d)()(Aa)),
      Fa = a(50),
      Ra = (a(175), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).tagToIndex = function (e) {
            var t = [];
            if (!e) return [];
            for (var a = 0; a < wa.getAllTags().length; a++) e.indexOf(wa.getAllTags()[a]) > -1 && t.push(a);
            return t
          }, n.indextoTag = function (e) {
            for (var t = [], a = 0; a < e.length; a++) t.push(wa.getAllTags()[e[a]]);
            return t
          }, n.handleChangeTag = function (e) {
            var t = Object(Fa.a)(n.state.tagIndex);
            if (n.state.tagIndex.indexOf(e) > -1) {
              var a = (t = Object(Fa.a)(n.state.tagIndex)).indexOf(e);
              t.splice(a, 1), n.setState({
                tagIndex: t
              }), n.props.handleTag(n.indextoTag(t))
            } else t.push(e), n.setState({
              tagIndex: t
            }), n.props.handleTag(n.indextoTag(t))
          }, n.handleAddTag = function (e) {
            n.setState({
              isInput: !1
            }), e.target.value && (wa.setTags(e.target.value), n.setState({
              tagIndex: []
            }), n.props.handleTag(n.indextoTag([])))
          }, n.handleInput = function () {
            n.setState({
              isInput: !0
            })
          }, n.state = {
            tagIndex: [],
            isInput: !1,
            deleteIndex: -1
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            this.props.isReading && this.setState({
              tagIndex: this.tagToIndex(this.props.tag)
            })
          }
        }, {
          key: "componentWillReceiveProps",
          value: function (e) {
            this.props.isReading && e.tag && e.tag.length > 0 && this.props.tag !== e.tag && this.setState({
              tagIndex: this.tagToIndex(e.tag)
            })
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "note-tag-container",
              style: this.props.isReading ? {
                width: "1999px"
              } : {}
            }, this.props.isReading ? null : o.a.createElement("span", {
              className: "tag-title"
            }, o.a.createElement(c.b, null, "All Tags")), o.a.createElement("ul", {
              className: "tag-container"
            }, o.a.createElement("li", {
              className: "tag-list-item-new",
              onClick: function () {
                e.handleInput()
              },
              style: this.state.isInput ? {
                width: "80px"
              } : {}
            }, o.a.createElement("div", {
              className: "center"
            }, this.state.isInput ? o.a.createElement("input", {
              type: "text",
              name: "newTag",
              id: "newTag",
              onBlur: function (t) {
                e.handleAddTag(t)
              }
            }) : o.a.createElement("span", {
              className: "icon-add"
            }))), wa.getAllTags().map((function (t, a) {
              return o.a.createElement("li", {
                key: t,
                className: e.state.tagIndex.indexOf(a) > -1 ? "tag-list-item active-tag " : "tag-list-item"
              }, o.a.createElement("div", {
                className: "delete-tag-container"
              }, e.state.tagIndex.indexOf(a) > -1 && !e.props.isReading ? o.a.createElement(Ma, {
                tagName: t,
                mode: "tags",
                index: a,
                handleChangeTag: e.handleChangeTag
              }) : null), o.a.createElement("div", {
                className: "center",
                onClick: function () {
                  e.handleChangeTag(a)
                }
              }, o.a.createElement(c.b, null, t)))
            }))))
          }
        }]), a
      }(o.a.Component)),
      La = {
        handleSearchResults: R,
        handleSearch: L
      },
      _a = Object(i.b)((function (e) {
        return {
          isReading: e.book.isReading,
          noteKey: e.reader.noteKey
        }
      }), La)(Object(c.d)()(Ra)),
      Pa = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleTag = function (e) {
            n.setState({
              tag: e
            })
          }, n.handleFilter = function (e, t) {
            var a = [];
            return t.forEach((function (t) {
              e[t] && a.push(e[t])
            })), a
          }, n.filterTag = function (e) {
            for (var t = [], a = 0; a < e.length; a++) {
              for (var o = !1, r = 0; r < n.state.tag.length; r++)
                if (e[a].tag && e[a].tag.indexOf(n.state.tag[r]) > -1) {
                  o = !0;
                  break
                } o && t.push(e[a])
            }
            return t
          }, n.state = {
            tag: []
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentWillMount",
          value: function () {
            this.props.handleFetchNotes()
          }
        }, {
          key: "render",
          value: function () {
            var e = {
              cards: this.props.isSearch ? this.handleFilter(this.props.notes.filter((function (e) {
                return "" !== e.notes
              })), this.props.searchResults) : this.state.tag.length > 0 ? this.filterTag(this.props.notes.filter((function (e) {
                return "" !== e.notes
              }))) : this.props.notes.filter((function (e) {
                return "" !== e.notes
              })),
              mode: "note"
            };
            return o.a.createElement("div", {
              className: "note-list-container-parent"
            }, o.a.createElement("div", {
              className: "note-tags"
            }, o.a.createElement(_a, {
              handleTag: this.handleTag
            })), 0 === e.cards.length ? o.a.createElement("div", {
              style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                height: "100%",
                zIndex: -1
              }
            }, o.a.createElement(ha, null)) : o.a.createElement(Ia, e))
          }
        }]), a
      }(o.a.Component),
      Ua = {
        handleFetchNotes: V
      },
      Ha = Object(i.b)((function (e) {
        return {
          notes: e.reader.notes,
          isSearch: e.manager.isSearch,
          searchResults: e.manager.searchResults
        }
      }), Ua)(Object(c.d)()(Pa)),
      za = (a(176), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleFilter = function (e, t) {
            var a = [];
            return t.forEach((function (t) {
              e[t] && a.push(e[t])
            })), a
          }, n.handleTag = function (e) {
            n.setState({
              tag: e
            })
          }, n.filterTag = function (e) {
            for (var t = [], a = 0; a < e.length; a++) {
              for (var o = !1, r = 0; r < n.state.tag.length; r++)
                if (e[a].tag && e[a].tag.indexOf(n.state.tag[r]) > -1) {
                  o = !0;
                  break
                } o && t.push(e[a])
            }
            return t
          }, n.state = {
            tag: []
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentWillMount",
          value: function () {
            this.props.handleFetchNotes()
          }
        }, {
          key: "render",
          value: function () {
            var e = {
              cards: this.props.isSearch ? this.handleFilter(this.props.digests, this.props.searchResults) : this.state.tag.length > 0 ? this.filterTag(this.props.digests) : this.props.digests,
              mode: "digest"
            };
            return o.a.createElement("div", {
              className: "digest-list-container-parent"
            }, o.a.createElement("div", {
              className: "note-tags"
            }, o.a.createElement(_a, {
              handleTag: this.handleTag
            })), 0 === e.cards.length ? o.a.createElement("div", {
              style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                height: "100%",
                zIndex: -1
              }
            }, o.a.createElement(ha, null)) : o.a.createElement(Ia, e))
          }
        }]), a
      }(o.a.Component)),
      Ka = {
        handleFetchNotes: V
      },
      Ja = Object(i.b)((function (e) {
        return {
          digests: e.reader.digests,
          isSearch: e.manager.isSearch,
          searchResults: e.manager.searchResults
        }
      }), Ka)(Object(c.d)()(za)),
      Wa = (a(177), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          return Object(v.a)(this, a), t.apply(this, arguments)
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            if (this.props.books) return o.a.createElement(M.a, {
              to: "/manager/home"
            });
            for (var e = [], t = 0; t < parseInt(E.getReaderConfig("totalBooks") || "0"); t++) e.push(t);
            if ("list" !== E.getReaderConfig("isList")) {
              return o.a.createElement("div", {
                className: "loading-page-container-parent"
              }, o.a.createElement("div", {
                className: "loading-page-container"
              }, e.map((function (e, t) {
                return o.a.createElement("div", {
                  className: "loading-page-book",
                  key: e
                }, o.a.createElement("div", {
                  className: "loading-page-cover",
                  style: {
                    opacity: "".concat(t % 7 * .2)
                  }
                }))
              }))))
            }
            return o.a.createElement("div", {
              className: "loading-page-container-parent"
            }, o.a.createElement("div", {
              className: "loading-page-container",
              style: {
                marginTop: "8px"
              }
            }, e.map((function (e, t) {
              return o.a.createElement("div", {
                className: "loading-page-list",
                key: e
              }, o.a.createElement("div", {
                className: "loading-page-list-cover"
              }), o.a.createElement("div", {
                className: "loading-page-bar"
              }, o.a.createElement("div", {
                className: "loading-page-bar1"
              }), o.a.createElement("div", {
                className: "loading-page-bar2"
              }), o.a.createElement("div", {
                className: "loading-page-bar3"
              })))
            }))))
          }
        }]), a
      }(o.a.Component)),
      Ga = Object(i.b)((function (e) {
        return {
          books: e.manager.books
        }
      }), {})(Wa),
      qa = [{
        path: "/manager/empty",
        component: ha
      }, {
        path: "/manager/loading",
        component: Ga
      }, {
        path: "/manager/note",
        component: Ha
      }, {
        path: "/manager/digest",
        component: Ja
      }, {
        path: "/manager/home",
        component: ka
      }, {
        path: "/manager/favorite",
        component: ka
      }, {
        path: "/manager/bookmark",
        component: Ea
      }],
      Va = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).timer = void 0, n.handleUpdateDialog = function () {
            n.setState({
              isUpdated: !1
            }), E.setReaderConfig("version", ae)
          }, n.state = {
            totalBooks: parseInt(E.getReaderConfig("totalBooks") || "0") || 0,
            favoriteBooks: Object.keys(rt.getAllFavorite()).length,
            isAuthed: !1,
            isError: !1,
            isCopied: !1,
            isUpdated: !1,
            token: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "UNSAFE_componentWillMount",
          value: function () {
            this.props.handleFetchBooks(), this.props.handleFetchNotes(), this.props.handleFetchBookmarks(), this.props.handleFetchSortCode(), this.props.handleFetchList()
          }
        }, {
          key: "UNSAFE_componentWillReceiveProps",
          value: function (e) {
            var t = this;
            e.books && this.state.totalBooks !== e.books.length && (this.setState({
              totalBooks: e.books.length
            }), E.setReaderConfig("totalBooks", this.state.totalBooks.toString())), e.books && 1 === e.books.length && !this.props.books && this.props.history.push("/manager/home"), this.props.mode !== e.mode && this.setState({
              favoriteBooks: Object.keys(rt.getAllFavorite()).length
            }), e.isMessage && (this.timer = setTimeout((function () {
              t.props.handleMessageBox(!1)
            }), 2e3))
          }
        }, {
          key: "componentDidMount",
          value: function () {
            var e = this;
            setTimeout((function () {
              e.setState({
                isUpdated: E.getReaderConfig("version") !== ae
              }), e.props.handleFirst(E.getReaderConfig("isFirst") || "yes")
            }), 1e3)
          }
        }, {
          key: "componentWillUnmout",
          value: function () {
            clearTimeout(this.timer)
          }
        }, {
          key: "render",
          value: function () {
            var e = this.props.books,
              t = {
                handleUpdateDialog: this.handleUpdateDialog
              };
            return Vt.isMobileOnly ? o.a.createElement(o.a.Fragment, null, o.a.createElement("p", {
              className: "waring-title"
            }, o.a.createElement(c.b, null, "Warning")), o.a.createElement("div", {
              className: "mobile-warning"
            }, o.a.createElement("span", null, o.a.createElement(c.b, null, "For better user experince, please visit this site on a computer"))), o.a.createElement("div", null, o.a.createElement("img", {
              src: "./assets/empty.svg",
              alt: "",
              className: "waring-pic"
            }))) : o.a.createElement("div", {
              className: "manager"
            }, o.a.createElement(me, null), o.a.createElement(qe, null), o.a.createElement("div", {
              className: "manager-dialog-container"
            }, this.props.isOpenDeleteDialog ? o.a.createElement(ct, null) : this.props.isOpenEditDialog ? o.a.createElement(pt, null) : this.props.isOpenAddDialog ? o.a.createElement(gt, null) : null), this.props.isMessage ? o.a.createElement(yt, null) : null, this.props.isSortDisplay ? o.a.createElement(bt, null) : null, this.props.isBackup ? o.a.createElement(_t, null) : null, this.state.isUpdated || "yes" !== this.props.isFirst ? null : o.a.createElement(Ht, null), this.state.isUpdated ? o.a.createElement(Kt, t) : null, this.props.isSettingOpen ? o.a.createElement(qt, null) : null, !e && this.state.totalBooks ? o.a.createElement(M.a, {
              to: "/manager/loading"
            }) : o.a.createElement(M.d, null, qa.map((function (e) {
              return o.a.createElement(M.b, {
                render: function () {
                  return o.a.createElement(e.component, null)
                },
                key: e.path,
                path: e.path
              })
            }))))
          }
        }]), a
      }(o.a.Component),
      Ya = {
        handleFetchBooks: J,
        handleFetchNotes: V,
        handleFetchBookmarks: Y,
        handleFetchSortCode: function () {
          return function (e) {
            e(K(E.getSortCode()))
          }
        },
        handleFetchList: W,
        handleMessageBox: U,
        handleFirst: z
      },
      Qa = Object(i.b)((function (e) {
        return {
          books: e.manager.books,
          notes: e.reader.notes,
          digests: e.reader.digests,
          bookmarks: e.reader.bookmarks,
          isReading: e.book.isReading,
          mode: e.sidebar.mode,
          shelfIndex: e.sidebar.shelfIndex,
          isOpenEditDialog: e.book.isOpenEditDialog,
          isOpenDeleteDialog: e.book.isOpenDeleteDialog,
          isOpenAddDialog: e.book.isOpenAddDialog,
          isSettingOpen: e.manager.isSettingOpen,
          isSort: e.manager.isSort,
          isSortDisplay: e.manager.isSortDisplay,
          isMessage: e.manager.isMessage,
          isBackup: e.backupPage.isBackup,
          isFirst: e.manager.isFirst
        }
      }), Ya)(Object(M.g)(Va));

    function Xa(e) {
      return {
        type: "HANDLE_PERCENTAGE",
        payload: e
      }
    }
    a(178), a(179), a(180), a(181);
    var Za = function e(t, a, n, o, r, s, i, l, c, u) {
        Object(v.a)(this, e), this.key = void 0, this.bookKey = void 0, this.date = void 0, this.chapter = void 0, this.chapterIndex = void 0, this.text = void 0, this.cfi = void 0, this.range = void 0, this.notes = void 0, this.percentage = void 0, this.color = void 0, this.tag = void 0, this.key = (new Date).getTime() + "", this.bookKey = t, this.date = {
          year: (new Date).getFullYear(),
          month: (new Date).getMonth() + 1,
          day: (new Date).getDate()
        }, this.chapter = a, this.chapterIndex = n, this.text = o, this.cfi = r, this.range = s, this.notes = i || "", this.percentage = l, this.color = c, this.tag = u
      },
      $a = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleTag = function (e) {
            n.setState({
              tag: e
            })
          }, n.handleClose = function () {
            var e;
            n.props.noteKey ? (n.props.notes.forEach((function (t, a) {
              t.key === n.props.noteKey && (e = a)
            })), e && (n.props.notes.splice(e, 1), F.a.setItem("notes", n.props.notes).then((function () {
              n.props.handleOpenMenu(!1), n.props.handleMenuMode("menu"), n.props.handleMessage("Delete Successfully"), n.props.handleMessageBox(!0), n.props.handleMenuMode("highlight"), n.props.handleNoteKey("")
            })))) : (n.props.handleOpenMenu(!1), n.props.handleMenuMode("menu"), n.props.handleNoteKey(""))
          }, n.state = {
            tag: []
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = document.querySelector(".editor-box");
            e && e.focus()
          }
        }, {
          key: "createNote",
          value: function () {
            var e = this,
              t = document.querySelector(".editor-box").value;
            if (this.props.noteKey) this.props.notes.forEach((function (a) {
              a.key === e.props.noteKey && (a.notes = t, a.tag = e.state.tag)
            })), F.a.setItem("notes", this.props.notes).then((function () {
              e.props.handleOpenMenu(!1), e.props.handleMessage("Add Successfully"), e.props.handleMessageBox(!0), e.props.handleFetchNotes(), e.props.handleMenuMode("highlight"), e.props.handleNoteKey(""), console.log("edit")
            }));
            else {
              var a, n = this.props.currentBook.key,
                o = this.props.currentEpub.rendition.currentLocation(),
                r = o.start.href,
                s = o.start.index,
                i = "Unknown Chapter",
                l = this.props.flattenChapters.filter((function (e) {
                  return e.href.split("#")[0] === r
                }))[0];
              l && (i = l.label.trim(" "));
              var c = ot.getCfi(this.props.currentBook.key).cfi,
                u = document.getElementsByTagName("iframe")[0];
              if (!u) return;
              var d = u.contentDocument;
              if (!d) return;
              var p = window.rangy.getSelection(u).saveCharacterRanges(d.body)[0],
                h = JSON.stringify(p),
                m = null === (a = d.getSelection()) || void 0 === a ? void 0 : a.toString();
              if (!m) return;
              m = (m = (m = (m = (m = m.replace(/\s\s/g, "")).replace(/\r/g, "")).replace(/\n/g, "")).replace(/\t/g, "")).replace(/\f/g, "");
              var g = ot.getCfi(this.props.currentBook.key).percentage ? ot.getCfi(this.props.currentBook.key).percentage : 0,
                f = this.props.color || 0,
                k = this.state.tag,
                b = new Za(n, i, s, m, c, h, t, g, f, k),
                v = this.props.notes;
              v.push(b), F.a.setItem("notes", v).then((function () {
                e.props.handleOpenMenu(!1), e.props.handleMessage("Add Successfully"), e.props.handleMessageBox(!0), e.props.handleFetchNotes(), e.props.handleMenuMode("highlight"), console.log("new")
              }))
            }
          }
        }, {
          key: "render",
          value: function () {
            var e, t = this;
            this.props.noteKey && this.props.notes.forEach((function (a) {
              a.key === t.props.noteKey && (e = a)
            }));
            return o.a.createElement("div", {
              className: "note-editor"
            }, o.a.createElement("div", {
              className: "editor-box-parent"
            }, o.a.createElement("textarea", {
              className: "editor-box"
            })), o.a.createElement("div", {
              className: "note-tags",
              style: {
                position: "absolute",
                bottom: "0px",
                height: "70px"
              }
            }, o.a.createElement(_a, {
              handleTag: t.handleTag,
              tag: t.props.noteKey ? e.tag : []
            })), o.a.createElement("div", {
              className: "note-button-container"
            }, o.a.createElement("span", {
              className: "cancel-button",
              onClick: function () {
                t.handleClose()
              }
            }, t.props.noteKey ? o.a.createElement(c.b, null, "Delete") : o.a.createElement(c.b, null, "Cancel")), o.a.createElement("span", {
              className: "confirm-button",
              onClick: function () {
                t.createNote()
              }
            }, o.a.createElement(c.b, null, "Confirm"))))
          }
        }]), a
      }(o.a.Component),
      en = {
        handleMessageBox: U,
        handleMessage: P,
        handleOpenMenu: Sa,
        handleMenuMode: Oa,
        handleNoteKey: q,
        handleFetchNotes: V
      },
      tn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          notes: e.reader.notes,
          color: e.reader.color,
          flattenChapters: e.reader.flattenChapters,
          noteKey: e.reader.noteKey
        }
      }), en)(Object(c.d)()($a)),
      an = (a(182), a(183), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleChangeOptiion = function () {
            n.setState({
              isLine: !n.state.isLine
            })
          }, n.state = {
            isLine: !1
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "color-option-container"
            }, !this.state.isLine && ["#FBF1D1", "#EFEEB0", "#CAEFC9", "#76BEE9"].map((function (t, a) {
              return o.a.createElement("div", {
                className: "color-option",
                style: {
                  backgroundColor: t,
                  border: "".concat(e.props.color === a ? "2px solid rgba(75,75,75,1)" : "")
                },
                key: t,
                onClick: function () {
                  e.props.handleColor(a)
                }
              })
            })), o.a.createElement("span", {
              className: "icon-sort popup-color-more",
              onClick: function () {
                e.handleChangeOptiion()
              }
            }), this.state.isLine && ["#FF0000", "#000080", "#0000FF", "#2EFF2E"].map((function (t, a) {
              return o.a.createElement("div", {
                className: "line-option",
                style: {
                  border: "".concat(e.props.color === a + 4 ? "2px solid rgba(75,75,75,1)" : "")
                },
                key: t,
                onClick: function () {
                  e.props.handleColor(a + 4)
                }
              }, o.a.createElement("div", {
                className: "demo-line",
                style: {
                  borderBottom: "solid 2px ".concat(t)
                }
              }))
            })))
          }
        }]), a
      }(o.a.Component)),
      nn = {
        handleColor: function (e) {
          return {
            type: "HANDLE_COLOR",
            payload: e
          }
        },
        handleSelection: xa
      },
      on = Object(i.b)((function (e) {
        return {
          color: e.reader.color,
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook
        }
      }), nn)(an),
      rn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a() {
          var e;
          Object(v.a)(this, a);
          for (var n = arguments.length, o = new Array(n), r = 0; r < n; r++) o[r] = arguments[r];
          return (e = t.call.apply(t, [this].concat(o))).handleNote = function () {
            e.props.handleChangeDirection(!1), e.props.handleMenuMode("note");
            var t, a = e.props.rect,
              n = a.x % e.props.currentEpub.rendition._layout.width,
              o = a.y % e.props.currentEpub.rendition._layout.height,
              r = n + a.width / 2 - 20,
              s = e.props.currentEpub.rendition._layout.width - 200;
            o < 200 ? (e.props.handleChangeDirection(!0), t = o + 77) : t = o - 100 - a.height, t = t < 6 ? 6 : t, r = r < 10 ? 10 : n > s ? s : r;
            var i = document.querySelector(".popup-menu-container");
            i && i.setAttribute("style", "left:".concat(r, "px;top:").concat(t, "px"))
          }, e.handleCopy = function () {
            var t = document.getElementsByTagName("iframe")[0];
            if (t) {
              var a = t.contentDocument;
              if (a) a.execCommand("copy", !1) ? console.log("copied!") : console.log("failed to copy text to clipboard"), e.props.handleOpenMenu(!1), a.getSelection().empty(), e.props.handleMessage("Copy Successfully"), e.props.handleMessageBox(!0)
            }
          }, e.handleTrans = function () {
            var t = document.getElementsByTagName("iframe")[0];
            if (t) {
              var a = t.contentDocument;
              if (a) {
                var n = a.getSelection();
                if (n) {
                  var o = n.toString();
                  o = o && o.trim(), e.props.handleMenuMode("trans"), e.props.handleOriginalText(o)
                }
              }
            }
          }, e.handleDigest = function () {
            var t, a = e.props.currentBook.key,
              n = e.props.currentEpub.rendition.currentLocation(),
              o = n.start.href,
              r = n.start.index,
              s = "Unknown Chapter",
              i = e.props.flattenChapters.filter((function (e) {
                return e.href.split("#")[0] === o
              }))[0];
            i && (s = i.label.trim(" "));
            var l = ot.getCfi(e.props.currentBook.key).cfi,
              c = ot.getCfi(e.props.currentBook.key).percentage ? ot.getCfi(e.props.currentBook.key).percentage : 0,
              u = e.props.color,
              d = document.getElementsByTagName("iframe")[0];
            if (d) {
              var p = d.contentDocument;
              if (p) {
                var h = window.rangy.getSelection(d).saveCharacterRanges(p.body)[0],
                  m = JSON.stringify(h),
                  g = null === (t = p.getSelection()) || void 0 === t ? void 0 : t.toString();
                if (g) {
                  g = (g = (g = (g = (g = g.replace(/\s\s/g, "")).replace(/\r/g, "")).replace(/\n/g, "")).replace(/\t/g, "")).replace(/\f/g, "");
                  var f = new Za(a, s, r, g, l, m, "", c, u, []),
                    k = e.props.notes;
                  k.push(f), F.a.setItem("notes", k).then((function () {
                    e.props.handleOpenMenu(!1), e.props.handleMessage("Add Successfully"), e.props.handleMessageBox(!0), e.props.handleFetchNotes(), e.props.handleMenuMode("highlight")
                  }))
                }
              }
            }
          }, e
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement(o.a.Fragment, null, o.a.createElement("div", {
              className: "menu-list"
            }, o.a.createElement("div", {
              className: "note-option",
              onClick: function () {
                e.handleNote()
              }
            }, o.a.createElement("div", null, o.a.createElement("span", {
              className: "icon-note note-icon"
            }), o.a.createElement("p", null, o.a.createElement(c.b, null, "Take Notes")))), o.a.createElement("div", {
              className: "digest-option",
              onClick: function () {
                e.handleDigest()
              }
            }, o.a.createElement("div", null, o.a.createElement("span", {
              className: "icon-collect digest-icon"
            }), o.a.createElement("p", null, o.a.createElement(c.b, null, "Collect")))), o.a.createElement("div", {
              className: "translation-option",
              onClick: function () {
                e.handleTrans()
              }
            }, o.a.createElement("div", null, o.a.createElement("span", {
              className: "icon-translation translation-icon"
            }), o.a.createElement("p", null, o.a.createElement(c.b, null, "Translate")))), o.a.createElement("div", {
              className: "copy-option icon",
              onClick: function () {
                e.handleCopy()
              }
            }, o.a.createElement("div", null, o.a.createElement("span", {
              className: "icon-copy copy-icon"
            }), o.a.createElement("p", null, o.a.createElement(c.b, null, "Copy"))))), o.a.createElement(on, null))
          }
        }]), a
      }(o.a.Component),
      sn = {
        handleMessageBox: U,
        handleMessage: P,
        handleOpenMenu: Sa,
        handleMenuMode: Oa,
        handleFetchNotes: V,
        handleOriginalText: function (e) {
          return {
            type: "HANDLE_ORIGINAL_TEXT",
            payload: e
          }
        },
        handleChangeDirection: Na
      },
      ln = Object(i.b)((function (e) {
        return {
          currentBook: e.book.currentBook,
          currentEpub: e.book.currentEpub,
          selection: e.viewArea.selection,
          notes: e.reader.notes,
          color: e.reader.color,
          flattenChapters: e.reader.flattenChapters
        }
      }), sn)(Object(c.d)()(rn)),
      cn = (a(184), a(82)),
      un = a.n(cn),
      dn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).state = {
            translatedText: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this,
              t = E.getReaderConfig("lang");
            "cn" === t && (t = "zh");
            var a = document.createElement("script");
            a.type = "text/javascript", a.src = "https://fanyi-api.baidu.com/api/trans/vip/translate?q=".concat(this.props.originalText, "&from=auto&to=").concat(t || "zh", "&appid=20200802000531425&salt=1435660288&sign=").concat(un()("20200802000531425" + this.props.originalText + "1435660288sJRHTorJq8j8_ru2GkHl"), "&callback=handleCallback"), document.head.appendChild(a), window.handleCallback = function (t) {
              e.setState({
                translatedText: t.trans_result ? t.trans_result[0].dst : "\u51fa\u9519\u4e86"
              })
            }
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "trans-container"
            }, o.a.createElement("div", {
              className: "original-text-box"
            }, e.props.originalText), o.a.createElement("div", {
              className: "trans-text-box"
            }, e.state.translatedText))
          }
        }]), a
      }(o.a.Component),
      pn = {
        handleOpenMenu: Sa,
        handleMenuMode: Oa
      },
      hn = Object(i.b)((function (e) {
        return {
          originalText: e.reader.originalText
        }
      }), pn)(Object(c.d)()(dn)),
      mn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).highlighter = void 0, n.timer = void 0, n.key = void 0, n.mode = void 0, n.showNote = void 0, n.isFirstShow = void 0, n.cfiRange = void 0, n.contents = void 0, n.rect = void 0, n.getHighlighter = function () {
            var e = document.getElementsByTagName("iframe")[0];
            if (e) {
              var t = e.contentDocument;
              if (t) {
                n.highlighter = window.rangy.createHighlighter(t);
                ["color-0", "color-1", "color-2", "color-3", "line-0", "line-1", "line-2", "line-3"].forEach((function (e) {
                  var t = {
                      ignoreWhiteSpace: !0,
                      elementTagName: "span",
                      elementProperties: {
                        onclick: function (e) {
                          var t = document.getElementsByTagName("iframe")[0];
                          if (t) {
                            var a = t.contentDocument;
                            if (a) {
                              n.props.handleMenuMode("note");
                              var o = a.getSelection();
                              if (o) {
                                var r = o.getRangeAt(0);
                                n.setState({
                                  rect: r.getBoundingClientRect()
                                }, (function () {
                                  n.showMenu(), n.handleClickHighlighter(e.currentTarget.dataset.key), e.stopPropagation()
                                }))
                              }
                            }
                          }
                        }
                      },
                      onElementCreate: function (e) {
                        e.dataset.key = n.key
                      }
                    },
                    a = window.rangy.createClassApplier(e, t);
                  n.highlighter.addClassApplier(a)
                }))
              }
            }
          }, n.handleClickHighlighter = function (e) {
            var t = document.querySelector(".editor-box"),
              a = n.props.notes.filter((function (t) {
                return t.key === e
              }))[0];
            a && a.notes && (t.value = a.notes), n.props.handleNoteKey(e)
          }, n.handleShowDelete = function (e) {
            n.setState({
              deleteKey: e
            })
          }, n.showMenu = function () {
            var e = n.state.rect;
            if (e) {
              n.props.handleChangeDirection(!1);
              var t, a = e.x % n.props.currentEpub.rendition._layout.width,
                o = e.y % n.props.currentEpub.rendition._layout.height,
                r = a + e.width / 2 - 20,
                s = "note" === n.props.menuMode ? n.props.currentEpub.rendition._layout.width - 240 : n.props.currentEpub.rendition._layout.width - 150;
              o < 200 ? (n.props.handleChangeDirection(!0), t = o + 67) : t = o - 100 - 57, r = r > s ? s : r, n.props.handleOpenMenu(!0), document.querySelector(".popup-menu-container").setAttribute("style", "left:".concat(r, "px;top:").concat(t, "px")), n.setState({
                rect: null
              })
            }
          }, n.renderHighlighters = function () {
            var e = n.props.notes;
            if (e) {
              var t = n.props.currentEpub.rendition.currentLocation();
              if (t.start) {
                var a = t.start.index,
                  o = e.filter((function (e) {
                    return e.chapterIndex === a
                  })),
                  r = document.getElementsByTagName("iframe")[0],
                  s = r.contentWindow || r.contentDocument.defaultView;
                n.highlighter && n.highlighter.removeAllHighlights();
                var i = ["color-0", "color-1", "color-2", "color-3", "line-0", "line-1", "line-2", "line-3"];
                o && o.forEach((function (e) {
                  if (n.key = e.key, e.bookKey === n.props.currentBook.key) {
                    try {
                      var t = JSON.parse(e.range);
                      t = [t], window.rangy.getSelection(r).restoreCharacterRanges(r.contentDocument, t)
                    } catch (a) {
                      return void console.warn("Exception has been caught when restore character ranges.")
                    }
                    n.highlighter.highlightSelection(i[e.color])
                  }
                })), s && s.getSelection() && s.getSelection().empty()
              }
            }
          }, n.openMenu = function () {
            n.setState({
              deleteKey: ""
            });
            var e = document.getElementsByTagName("iframe")[0].contentDocument;
            if (e) {
              var t = e.getSelection();
              if (n.props.handleChangeDirection(!1), n.props.isOpenMenu && (n.props.handleMenuMode("menu"), n.props.handleOpenMenu(!1), n.props.handleNoteKey("")), t.isCollapsed) return n.props.isOpenMenu && n.props.handleOpenMenu(!1), n.props.handleMenuMode("menu"), void n.props.handleNoteKey("");
              n.showMenu(), n.props.handleMenuMode("menu")
            }
          }, n.showNote = !1, n.isFirstShow = !1, n.highlighter = null, n.mode = "", n.state = {
            deleteKey: "",
            cfiRange: n.props.cfiRange,
            contents: n.props.contents,
            rect: n.props.rect
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this;
            this.props.rendition.on("rendered", (function () {
              new Promise((function (t, a) {
                e.getHighlighter(), t()
              })).then((function () {
                e.renderHighlighters()
              }));
              var t = document.getElementsByTagName("iframe")[0];
              if (t) {
                var a = t.contentDocument;
                a && a.addEventListener("mousedown", e.openMenu)
              }
            }))
          }
        }, {
          key: "componentWillReceiveProps",
          value: function (e) {
            var t = this;
            e.cfiRange !== this.props.cfiRange && this.setState({
              cfiRange: e.cfiRange,
              contents: e.contents,
              rect: e.rect
            }, (function () {
              t.openMenu()
            }))
          }
        }, {
          key: "handleHighlight",
          value: function () {
            var e = this,
              t = document.getElementsByTagName("iframe")[0];
            if (t) {
              var a = t.contentDocument;
              if (a) {
                var n = this.props.color;
                this.highlighter.highlightSelection(["color-0", "color-1", "color-2", "color-3", "line-0", "line-1", "line-2", "line-3"][n]), this.props.handleMenuMode("menu"), this.props.handleOpenMenu(!1), a.getSelection().empty(), this.props.handleMenuMode("menu"), this.highlighter && this.highlighter.removeAllHighlights(), new Promise((function (t) {
                  e.getHighlighter(), t()
                })).then((function () {
                  e.renderHighlighters()
                }))
              }
            }
          }
        }, {
          key: "render",
          value: function () {
            "highlight" === this.props.menuMode && this.handleHighlight();
            var e = {
              cfiRange: this.props.cfiRange,
              contents: this.props.contents,
              rect: this.props.rect
            };
            return o.a.createElement("div", null, o.a.createElement("div", {
              className: "popup-menu-container",
              style: this.props.isOpenMenu ? {} : {
                display: "none"
              }
            }, o.a.createElement("div", {
              className: "popup-menu-box"
            }, "menu" === this.props.menuMode ? o.a.createElement(ln, e) : "note" === this.props.menuMode ? o.a.createElement(tn, e) : "trans" === this.props.menuMode ? o.a.createElement(hn, e) : null), this.props.isChangeDirection ? o.a.createElement("span", {
              className: "icon-popup popup-menu-triangle-up",
              style: "highlight" === this.props.menuMode ? {
                bottom: "110px"
              } : {}
            }) : o.a.createElement("span", {
              className: "icon-popup popup-menu-triangle-down"
            })))
          }
        }]), a
      }(o.a.Component),
      gn = {
        handleSelection: xa,
        handleOpenMenu: Sa,
        handleMenuMode: Oa,
        handleChangeDirection: Na,
        handleMessageBox: U,
        handleMessage: P,
        handleNoteKey: q
      },
      fn = Object(i.b)((function (e) {
        return {
          digests: e.reader.digests,
          notes: e.reader.notes,
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          isOpenMenu: e.viewArea.isOpenMenu,
          menuMode: e.viewArea.menuMode,
          color: e.reader.color,
          isChangeDirection: e.viewArea.isChangeDirection
        }
      }), gn)(mn),
      kn = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "addDefaultCss",
          value: function () {
            var e = document.getElementsByTagName("iframe")[0];
            if (e) {
              var t = e.contentDocument;
              if (t) {
                var a = this.getDefaultCss(),
                  n = t.getElementById("default-style"),
                  o = document.querySelector(".background");
                if (o && (o.setAttribute("style", "background-color:".concat(E.getReaderConfig("theme"))), t.head)) return n ? void(n.textContent = a) : ((n = t.createElement("style")).id = "default-style", n.textContent = a, void t.head.appendChild(n))
              }
            }
          }
        }, {
          key: "getDefaultCss",
          value: function () {
            var e = ["#FBF1D1", "#EFEEB0", "#CAEFC9", "#76BEE9"],
              t = ["#FF0000", "#000080", "#0000FF", "#2EFF2E"];
            return "::selection{background:#f3a6a68c}::-moz-selection{background:#f3a6a68c}[class*=color-]:hover{cursor:pointer;background-image:linear-gradient(0,rgba(0,0,0,.075),rgba(0,0,0,.075))}.color-0{background-color:".concat(e[0], "}.color-1{background-color:").concat(e[1], "}.color-2{background-color:").concat(e[2], "}.color-3{background-color:").concat(e[3], "}.line-0{border-bottom:2px solid ").concat(t[0], "}.line-1{border-bottom:2px solid ").concat(t[1], "}.line-2{border-bottom:2px solid ").concat(t[2], "}.line-3{border-bottom:2px solid ").concat(t[3], "}}")
          }
        }]), e
      }(),
      bn = (a(187), a(29)),
      vn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).showImage = function (e) {
            n.props.isShow && (n.props.handleLeaveReader("left"), n.props.handleLeaveReader("right"), n.props.handleLeaveReader("top"), n.props.handleLeaveReader("bottom"));
            var t = e.target.href || e.target.parentNode.href || e.target.parentNode.parentNode.href;
            if (bn() && t && (e.preventDefault(), window.require("electron").shell.openExternal(t)), e.target.src) {
              n.state.isShowImage && n.setState({
                isShowImage: !1
              }), e.preventDefault();
              var a = new Image;
              a.addEventListener("load", (function () {
                var e;
                e = this.naturalWidth / this.naturalHeight > 1 ? "horizontal" : "vertical", n.setState({
                  imageRatio: e
                })
              })), a.src = e.target.src;
              var o = document.querySelector(".image");
              o && (o.src = e.target.src, n.setState({
                isShowImage: !0
              }))
            }
          }, n.hideImage = function (e) {
            if (e.preventDefault(), e.target.src) {
              var t = document.querySelector(".image");
              t && (t.src = "")
            }
            n.setState({
              isShowImage: !1
            })
          }, n.handleZoomIn = function () {
            var e = document.querySelector(".image");
            "100vw" !== e.style.width && "100vh" !== e.style.height && n.setState({
              zoomIndex: n.state.zoomIndex + 1
            }, (function () {
              "horizontal" === n.state.imageRatio ? e.style.width = "".concat(60 + 10 * n.state.zoomIndex, "vw") : e.style.height = "".concat(90 + 10 * n.state.zoomIndex, "vh")
            }))
          }, n.handleZoomOut = function () {
            var e = document.querySelector(".image");
            "50vw" !== e.style.width && "50vh" !== e.style.height && n.setState({
              zoomIndex: n.state.zoomIndex - 1
            }, (function () {
              "horizontal" === n.state.imageRatio ? e.style.width = "".concat(60 + 10 * n.state.zoomIndex, "vw") : e.style.height = "".concat(90 + 10 * n.state.zoomIndex, "vh")
            }))
          }, n.handleSave = Object(T.a)(A.a.mark((function e() {
            var t, a;
            return A.a.wrap((function (e) {
              for (;;) switch (e.prev = e.next) {
                case 0:
                  return t = document.querySelector(".image"), e.next = 3, fetch(t.src).then((function (e) {
                    return e.blob()
                  }));
                case 3:
                  a = e.sent, St.a.saveAs(a, "".concat((new Date).toLocaleDateString()));
                case 5:
                case "end":
                  return e.stop()
              }
            }), e)
          }))), n.handleClock = function () {
            var e = document.querySelector(".image");
            n.setState({
              rotateIndex: n.state.rotateIndex + 1
            }, (function () {
              e.style.transform = "rotate(".concat(90 * n.state.rotateIndex, "deg)")
            }))
          }, n.handleCounterClock = function () {
            var e = document.querySelector(".image");
            n.setState({
              rotateIndex: n.state.rotateIndex - 1
            }, (function () {
              e.style.transform = "rotate(".concat(90 * n.state.rotateIndex, "deg)")
            }))
          }, n.state = {
            isShowImage: !1,
            imageRatio: "horizontal",
            zoomIndex: 0,
            rotateIndex: 0
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this;
            this.props.rendition.on("rendered", (function () {
              var t = document.getElementsByTagName("iframe")[0];
              if (t) {
                var a = t.contentDocument;
                a && (kn.addDefaultCss(), a.addEventListener("click", e.showImage, !0))
              }
            }))
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "image-preview",
              style: this.state.isShowImage ? {} : {
                display: "none"
              }
            }, o.a.createElement("div", {
              className: "image-background",
              style: this.state.isShowImage ? {
                backgroundColor: "rgba(75,75,75,0.3)"
              } : {},
              onClick: function (t) {
                e.hideImage(t)
              }
            }), o.a.createElement("img", {
              src: "",
              alt: "",
              className: "image",
              style: "horizontal" === this.state.imageRatio ? {
                width: "60vw"
              } : {
                height: "90vh"
              }
            }), o.a.createElement("div", {
              className: "image-operation"
            }, o.a.createElement("span", {
              className: "icon-zoom-in zoom-in-icon",
              onClick: function () {
                e.handleZoomIn()
              }
            }), o.a.createElement("span", {
              className: "icon-zoom-out zoom-out-icon",
              onClick: function () {
                e.handleZoomOut()
              }
            }), o.a.createElement("span", {
              className: "icon-save save-icon",
              onClick: function () {
                e.handleSave()
              }
            }), o.a.createElement("span", {
              className: "icon-clockwise clockwise-icon",
              onClick: function () {
                e.handleClock()
              }
            }), o.a.createElement("span", {
              className: "icon-counterclockwise counterclockwise-icon",
              onClick: function () {
                e.handleCounterClock()
              }
            })))
          }
        }]), a
      }(o.a.Component),
      yn = Object(i.b)((function (e) {
        return {}
      }), {})(vn),
      En = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).isFirst = void 0, n.previourChapter = function () {
            var e = n.props.rendition.currentLocation();
            if (e.start) {
              var t = e.start.index,
                a = n.props.currentEpub.section(t - 1);
              a && a.href && n.props.currentEpub.rendition.display(a.href)
            }
          }, n.nextChapter = function () {
            var e = n.props.rendition.currentLocation();
            if (e.start) {
              var t = e.start.index,
                a = n.props.currentEpub.section(t + 1);
              a && a.href && n.props.currentEpub.rendition.display(a.href)
            }
          }, n.state = {
            cfiRange: null,
            contents: null,
            rect: null,
            loading: !0
          }, n.isFirst = !0, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this,
              t = this.props.currentEpub;
            window.rangy.init(), this.props.rendition.on("locationChanged", (function () {
              e.props.handleReadingEpub(t), e.props.handleOpenMenu(!1);
              var a = e.props.rendition.currentLocation().start.cfi;
              if (e.props.handleShowBookmark(!(!e.props.bookmarks || !e.props.bookmarks.filter((function (e) {
                  return e.cfi === a
                }))[0])), !e.isFirst && e.props.locations) {
                var n = e.props.locations.percentageFromCfi(a);
                ot.recordCfi(e.props.currentBook.key, a, n), e.props.handlePercentage(n)
              }
              e.isFirst = !1
            })), this.props.rendition.on("rendered", (function () {
              e.setState({
                loading: !1
              });
              var t = document.getElementsByTagName("iframe")[0];
              t && (t.contentDocument && (kn.addDefaultCss(), e.props.rendition.themes.default({
                "a, article, cite, code, div, li, p, pre, span, table": {
                  "font-size": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("fontSize") || 17, "px !important"),
                  "line-height": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("lineHeight") || "1.25", " !important"),
                  "font-family": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("fontFamily") || "Helvetica", " !important"),
                  color: "".concat("rgba(44,47,49,1)" === E.getReaderConfig("theme") ? "white" : "", " !important")
                }
              })))
            })), this.props.rendition.on("selected", (function (t, a) {
              var n = a.range(t).getBoundingClientRect();
              e.setState({
                cfiRange: t,
                contents: a,
                rect: n
              })
            })), this.props.rendition.themes.default({
              "a, article, cite, code, div, li, p, pre, span, table": {
                "font-size": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("fontSize") || 17, "px !important"),
                "line-height": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("lineHeight") || "1.25", " !important"),
                "font-family": "".concat("yes" === E.getReaderConfig("isUseFont") ? "" : E.getReaderConfig("fontFamily") || "Helvetica", " !important"),
                color: "".concat("rgba(44,47,49,1)" === E.getReaderConfig("theme") ? "white" : "", " !important")
              }
            }), this.props.rendition.display(null === ot.getCfi(this.props.currentBook.key) ? null : ot.getCfi(this.props.currentBook.key).cfi)
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = {
                rendition: this.props.rendition,
                cfiRange: this.state.cfiRange,
                contents: this.state.contents,
                rect: this.state.rect
              };
            return o.a.createElement("div", {
              className: "view-area"
            }, E.getReaderConfig("readerMode") && "double" !== E.getReaderConfig("readerMode") && this.props.locations && o.a.createElement(o.a.Fragment, null, o.a.createElement("div", {
              className: "previous-chapter-single-container",
              onClick: function () {
                e.previourChapter()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown previous-chapter-single"
            })), o.a.createElement("div", {
              className: "next-chapter-single-container",
              onClick: function () {
                e.nextChapter()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown next-chapter-single"
            }))), o.a.createElement(yn, {
              isShow: this.props.isShow,
              rendition: this.props.rendition,
              handleEnterReader: this.props.handleEnterReader,
              handleLeaveReader: this.props.handleLeaveReader
            }), o.a.createElement(fn, t), this.state.loading ? o.a.createElement("div", {
              className: "spinner"
            }, o.a.createElement("div", {
              className: "sk-chase"
            }, o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }))) : null, o.a.createElement(o.a.Fragment, null, this.props.isShowBookmark ? o.a.createElement("div", {
              className: "bookmark"
            }) : null))
          }
        }]), a
      }(o.a.Component),
      Sn = {
        handlePercentage: Xa,
        handleOpenMenu: Sa,
        handleShowBookmark: Ca,
        handleReadingEpub: et
      },
      On = Object(i.b)((function (e) {
        return {
          chapters: e.reader.chapters,
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          locations: e.progressPanel.locations,
          bookmarks: e.reader.bookmarks,
          isShowBookmark: e.viewArea.isShowBookmark
        }
      }), Sn)(En),
      Nn = (a(188), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).isFirst = void 0, n.state = {
            isSingle: E.getReaderConfig("readerMode") && "double" !== E.getReaderConfig("readerMode"),
            currentChapter: "",
            prevPage: 0,
            nextPage: 0,
            scale: E.getReaderConfig("scale") || 1,
            isShowFooter: "no" !== E.getReaderConfig("isShowFooter"),
            isUseBackground: "yes" === E.getReaderConfig("isUseBackground")
          }, n.isFirst = !0, n
        }
        return Object(y.a)(a, [{
          key: "componentWillReceiveProps",
          value: function (e) {
            if (e.currentEpub.rendition && e.currentEpub.rendition.location && this.isFirst) {
              var t = this.props.currentEpub.rendition.currentLocation();
              if (!t.start) return;
              this.props.handleFetchLocations(this.props.currentEpub), this.isFirst = !1, this.setState({
                prevPage: t.start.displayed.page,
                nextPage: t.end.displayed.page
              });
              var a = t.start.href,
                n = "Unknown Chapter",
                o = this.props.flattenChapters.filter((function (e) {
                  return e.href.split("#")[0] === a
                }))[0];
              o && (n = o.label.trim(" ")), this.setState({
                currentChapter: n
              })
            }
          }
        }, {
          key: "render",
          value: function () {
            return this.state.isUseBackground ? o.a.createElement("div", {
              className: "background"
            }, this.state.isShowFooter && this.state.currentChapter && o.a.createElement("p", {
              className: "progress-chapter-name",
              style: this.state.isSingle ? {
                left: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, null, this.state.currentChapter)), this.state.isShowFooter && !this.state.isSingle && o.a.createElement("p", {
              className: "progress-book-name",
              style: this.state.isSingle ? {
                right: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, null, this.props.currentBook.name)), this.state.isShowFooter && this.state.prevPage > 0 && o.a.createElement("p", {
              className: "background-page-left",
              style: this.state.isSingle ? {
                left: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, {
              i18nKey: "Book Page",
              count: this.state.prevPage
            }, "Page", {
              count: this.state.prevPage
            })), this.state.isShowFooter && this.state.nextPage > 0 && !this.state.isSingle && o.a.createElement("p", {
              className: "background-page-right"
            }, o.a.createElement(c.b, {
              i18nKey: "Book Page",
              count: this.state.nextPage
            }, "Page", {
              count: this.state.nextPage
            }))) : o.a.createElement("div", {
              className: "background"
            }, this.state.isShowFooter && this.state.currentChapter && o.a.createElement("p", {
              className: "progress-chapter-name",
              style: this.state.isSingle ? {
                left: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, null, this.state.currentChapter)), this.state.isShowFooter && !this.state.isSingle && o.a.createElement("p", {
              className: "progress-book-name",
              style: this.state.isSingle ? {
                right: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, null, this.props.currentBook.name)), this.state.isShowFooter && this.state.prevPage > 0 && o.a.createElement("p", {
              className: "background-page-left",
              style: this.state.isSingle ? {
                left: "calc(50vw - \n                      270px)"
              } : {}
            }, o.a.createElement(c.b, {
              i18nKey: "Book Page",
              count: this.state.prevPage
            }, "Page", {
              count: this.state.prevPage
            })), this.state.isShowFooter && this.state.nextPage > 0 && !this.state.isSingle && o.a.createElement("p", {
              className: "background-page-right"
            }, o.a.createElement(c.b, {
              i18nKey: "Book Page",
              count: this.state.nextPage
            }, "Page", {
              count: this.state.nextPage
            })), o.a.createElement("div", {
              className: "background-box2",
              style: this.state.isSingle ? {
                left: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - ").concat(this.state.isSingle ? "9" : "5", "px)"),
                right: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - 7px)"),
                boxShadow: "0 0 0px rgba(191, 191, 191, 1)"
              } : {}
            }), o.a.createElement("div", {
              className: "background-box3",
              style: this.state.isSingle ? {
                left: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - 9px)"),
                right: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - 9px)")
              } : {}
            }, o.a.createElement("div", {
              className: "spine-shadow-left",
              style: this.state.isSingle || "rgba(44,47,49,1)" === E.getReaderConfig("theme") ? {
                display: "none"
              } : {}
            }), o.a.createElement("div", {
              className: "book-spine",
              style: this.state.isSingle ? {
                display: "none"
              } : {}
            }), o.a.createElement("div", {
              className: "spine-shadow-right",
              style: "rgba(44,47,49,1)" === E.getReaderConfig("theme") ? {
                display: "none"
              } : this.state.isSingle ? {
                position: "relative",
                right: 0
              } : {}
            })), o.a.createElement("div", {
              className: "background-box1",
              style: this.state.isSingle ? {
                left: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - ").concat(this.state.isSingle ? "9" : "5", "px)"),
                right: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px - 5px)"),
                boxShadow: "0 0 0px rgba(191, 191, 191, 1)"
              } : {}
            }))
          }
        }]), a
      }(o.a.Component)),
      Cn = {
        handleFetchLocations: function (e) {
          return function (t) {
            e.locations.generate().then((function (a) {
              t({
                type: "HANDLE_LOCATIONS",
                payload: e.locations
              })
            })).catch((function () {
              console.log("Error occurs")
            }))
          }
        }
      },
      xn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          flattenChapters: e.reader.flattenChapters,
          locations: e.progressPanel.locations
        }
      }), Cn)(Nn),
      wn = (a(189), a(190), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).state = {
            currentBackgroundIndex: ee.findIndex((function (e) {
              return e.theme === (E.getReaderConfig("theme") || "rgba(255,255,255,1)")
            }))
          }, n
        }
        return Object(y.a)(a, [{
          key: "handleChangeColor",
          value: function (e, t) {
            E.setReaderConfig("theme", e), this.setState({
              currentBackgroundIndex: t
            }), 4 === t ? this.props.currentEpub.rendition.themes.default({
              "a, article, cite, code, div, li, p, pre, span, table": {
                color: "white !important"
              }
            }) : this.props.currentEpub.rendition.themes.default({
              "a, article, cite, code, div, li, p, pre, span, table": {
                color: "inherit !important"
              }
            }), kn.addDefaultCss()
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "background-color-setting"
            }, o.a.createElement("div", {
              className: "background-color-text"
            }, o.a.createElement(c.b, null, "Background Color")), o.a.createElement("ul", {
              className: "background-color-list"
            }, ee.map((function (t, a) {
              return o.a.createElement("li", {
                key: t.id,
                className: a === e.state.currentBackgroundIndex ? "active-color background-color-circle" : "background-color-circle",
                onClick: function () {
                  e.handleChangeColor(t.theme, a)
                },
                style: {
                  backgroundColor: t.theme
                }
              })
            }))))
          }
        }]), a
      }(o.a.Component)),
      Dn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub
        }
      }), {})(Object(c.d)()(wn)),
      Bn = (a(191), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).onValueChange = function (e) {
            if ("fontSize" === n.props.mode) {
              var t = e.target.value;
              n.setState({
                value: t
              }), E.setReaderConfig("fontSize", t), n.props.currentEpub.rendition.themes.default({
                "a, article, cite, code, div, li, p, pre, span, table": {
                  "font-size": "".concat(t || 17, "px !important")
                }
              })
            } else {
              var a = e.target.value;
              n.setState({
                value: a
              }), E.setReaderConfig("scale", a), n.props.handleMessage("Try refresh or restart"), n.props.handleMessageBox(!0)
            }
          }, n.onValueInput = function (e) {
            n.setState({
              value: e.target.value
            })
          }, n.state = {
            value: "fontSize" === n.props.mode ? E.getReaderConfig("fontSize") || "17" : E.getReaderConfig("scale") || "1"
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "font-size-setting"
            }, o.a.createElement("div", {
              className: "font-size-title"
            }, "fontSize" === this.props.mode ? o.a.createElement(o.a.Fragment, null, o.a.createElement(c.b, null, "Font Size"), "\xa0\xa0 \xa0", o.a.createElement("span", null, this.state.value, "px")) : o.a.createElement(o.a.Fragment, null, o.a.createElement(c.b, null, "Scale"), "\xa0\xa0 \xa0", o.a.createElement("span", null, parseInt((100 * parseFloat(this.state.value)).toString()), "%"))), o.a.createElement("span", {
              className: "ultra-small-size",
              style: "fontSize" === this.props.mode ? {} : {
                position: "relative",
                right: 7
              }
            }, "fontSize" === this.props.mode ? "A" : "0.5"), o.a.createElement("div", {
              className: "font-size-selector"
            }, o.a.createElement("input", {
              className: "input-progress",
              defaultValue: this.state.value,
              type: "range",
              max: this.props.maxValue,
              min: this.props.minValue,
              step: "fontSize" === this.props.mode ? "1" : "0.1",
              onInput: function (t) {
                e.onValueChange(t)
              },
              onChange: function (t) {
                e.onValueInput(t)
              }
            })), "fontSize" === this.props.mode ? o.a.createElement("span", {
              className: "ultra-large-size"
            }, "A") : o.a.createElement("span", {
              className: "ultra-large-size",
              style: {
                fontSize: "16px",
                left: 5
              }
            }, "1.5"))
          }
        }]), a
      }(o.a.Component)),
      Mn = {
        handleMessageBox: U,
        handleMessage: P
      },
      jn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub
        }
      }), Mn)(Object(c.d)()(Bn));
    a(192);
    if (a(29)()) {
      var An = window.require("electron").ipcRenderer;
      re[0].option = An.sendSync("fonts-ready", "ping")
    }
    var Tn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).state = {
            currentFontFamilyIndex: re[0].option.findIndex((function (e) {
              return e === (E.getReaderConfig("fontFamily") || "Arial")
            })),
            currentLineHeightIndex: re[1].option.findIndex((function (e) {
              return e === (E.getReaderConfig("lineHeight") || "1.25")
            }))
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            document.querySelector(".paragraph-character-setting").children[0].children[1].children[-1 === this.state.currentFontFamilyIndex ? 0 : this.state.currentFontFamilyIndex].setAttribute("selected", "selected"), document.querySelector(".paragraph-character-setting").children[1].children[1].children[this.state.currentLineHeightIndex].setAttribute("selected", "selected")
          }
        }, {
          key: "handleView",
          value: function (e, t) {
            var a = e.target.value.split(",");
            switch (E.setReaderConfig(t, a[0]), t) {
              case "fontFamily":
                this.setState({
                  currentFontFamilyIndex: a[1]
                }), this.props.currentEpub.rendition.themes.default({
                  "a, article, cite, code, div, li, p, pre, span, table": {
                    "font-family": "".concat(a[0] || "Helvetica", " !important")
                  }
                });
                break;
              case "lineHeight":
                this.setState({
                  currentLineHeightIndex: a[1]
                }), this.props.currentEpub.rendition.themes.default({
                  "a, article, cite, code, div, li, p, pre, span, table": {
                    "line-height": "".concat(a[0] || "1.25", " !important")
                  }
                })
            }
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("ul", {
              className: "paragraph-character-setting"
            }, re.map((function (t) {
              return o.a.createElement("li", {
                className: "paragraph-character-container",
                key: t.id
              }, o.a.createElement("p", {
                className: "general-setting-title"
              }, o.a.createElement(c.b, null, t.title)), o.a.createElement("select", {
                name: "",
                className: "general-setting-dropdown",
                onChange: function (a) {
                  e.handleView(a, t.value)
                }
              }, t.option.map((function (e, a) {
                return o.a.createElement("option", {
                  value: [e, a.toString()],
                  className: "general-setting-option",
                  key: a,
                  style: 1 === t.id ? {
                    fontFamily: e
                  } : {}
                }, e)
              }))))
            })))
          }
        }]), a
      }(o.a.Component),
      In = {
        handleMessageBox: U,
        handleMessage: P
      },
      Fn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub
        }
      }), In)(Object(c.d)()(Tn)),
      Rn = (a(193), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleChangeMode = function (e) {
            n.setState({
              readerMode: e
            }), E.setReaderConfig("readerMode", e), n.props.handleMessage("Try refresh or restart"), n.props.handleMessageBox(!0)
          }, n.state = {
            readerMode: E.getReaderConfig("readerMode") || "double"
          }, n
        }
        return Object(y.a)(a, [{
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "single-control-container"
            }, o.a.createElement("div", {
              className: "single-mode-container",
              onClick: function () {
                e.handleChangeMode("single")
              },
              style: "single" === this.state.readerMode ? {} : {
                opacity: .4
              }
            }, o.a.createElement("span", {
              className: "icon-single-page single-page-icon"
            }), o.a.createElement("div", {
              className: "single-mode-text"
            }, o.a.createElement(c.b, null, "Single-Page Mode"))), o.a.createElement("div", {
              className: "double-mode-container",
              onClick: function () {
                e.handleChangeMode("double")
              },
              style: "double" === this.state.readerMode ? {} : {
                opacity: .4
              }
            }, o.a.createElement("span", {
              className: "icon-two-page two-page-icon"
            }), o.a.createElement("div", {
              className: "double-mode-text"
            }, o.a.createElement(c.b, null, "Double-Page Mode"))), o.a.createElement("div", {
              className: "double-mode-container",
              onClick: function () {
                e.handleChangeMode("scroll")
              },
              style: "scroll" === this.state.readerMode ? {} : {
                opacity: .4
              }
            }, o.a.createElement("span", {
              className: "icon-scroll1 two-page-icon"
            }), o.a.createElement("div", {
              className: "double-mode-text"
            }, o.a.createElement(c.b, null, "Chapter Scroll"))), o.a.createElement("div", {
              className: "double-mode-container",
              onClick: function () {
                e.handleChangeMode("continuous")
              },
              style: "continuous" === this.state.readerMode ? {} : {
                opacity: .4
              }
            }, o.a.createElement("span", {
              className: "icon-scroll two-page-icon"
            }), o.a.createElement("div", {
              className: "double-mode-text"
            }, o.a.createElement(c.b, null, "Continuous Scroll"))))
          }
        }]), a
      }(o.a.Component)),
      Ln = {
        handleMessageBox: U,
        handleMessage: P
      },
      _n = Object(i.b)((function (e) {
        return {}
      }), Ln)(Object(c.d)()(Rn)),
      Pn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleChangeAudio = function () {
            n.state.isAudioOn ? (window.speechSynthesis.cancel(), n.setState({
              isAudioOn: !1
            })) : n.setState({
              isAudioOn: !0
            }, (function () {
              n.handleAudio()
            }))
          }, n.handleAudio = function () {
            var e = n.props.currentEpub.rendition.currentLocation(),
              t = e.start.cfi.replace(/!.*/, "").replace("epubcfi(", ""),
              a = e.start.cfi.replace(/.*!/, "").replace(/\)/, ""),
              o = e.end.cfi.replace(/.*!/, "").replace(/\)/, ""),
              r = "epubcfi(".concat(t, "!,").concat(a, ",").concat(o, ")");
            n.props.currentEpub.getRange(r).then((function (e) {
              var t = e.toString();
              t = (t = (t = (t = (t = t.replace(/\s\s/g, "")).replace(/\r/g, "")).replace(/\n/g, "")).replace(/\t/g, "")).replace(/\f/g, "");
              var a = new SpeechSynthesisUtterance;
              a.text = t, window.speechSynthesis.speak(a), a.onend = function (e) {
                console.log("Utterance has finished being spoken after " + e.elapsedTime + " milliseconds."), n.state.isAudioOn && !n.props.isReading && (n.props.currentEpub.rendition.next(), n.handleAudio())
              }
            }))
          }, n.state = {
            isSupported: !1,
            isAudioOn: !1,
            readerMode: E.getReaderConfig("readerMode")
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            "speechSynthesis" in window && this.setState({
              isSupported: !0
            }), this.state.isAudioOn && (window.speechSynthesis && window.speechSynthesis.cancel(), this.setState({
              isAudioOn: !1
            }))
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "setting-panel-parent"
            }, o.a.createElement("div", {
              className: "setting-panel"
            }, o.a.createElement("div", {
              className: "setting-panel-title"
            }, o.a.createElement(c.b, null, "Reading Option")), o.a.createElement(_n, null), this.state.isSupported && this.props.locations ? o.a.createElement("div", {
              className: "single-control-switch-container"
            }, o.a.createElement("span", {
              className: "single-control-switch-title"
            }, this.state.isAudioOn ? o.a.createElement(c.b, null, "Turn off audio") : o.a.createElement(c.b, null, "Turn on audio")), o.a.createElement("span", {
              className: "single-control-switch",
              onClick: function () {
                e.handleChangeAudio()
              }
            }, o.a.createElement("span", {
              className: "single-control-button",
              style: this.state.isAudioOn ? {
                float: "right"
              } : {}
            }))) : null, o.a.createElement(Dn, null), o.a.createElement(jn, {
              maxValue: 31,
              minValue: 13,
              mode: "fontSize"
            }), this.state.readerMode && "double" !== this.state.readerMode ? o.a.createElement(jn, {
              maxValue: 1.5,
              minValue: .5,
              mode: "scale"
            }) : null, o.a.createElement(Fn, null)))
          }
        }]), a
      }(o.a.Component),
      Un = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          locations: e.progressPanel.locations,
          isReading: e.book.isReading
        }
      }), {})(Object(c.d)()(Pn)),
      Hn = (a(194), a(39)),
      zn = (a(195), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).state = {
            chapters: [],
            isCollapsed: !0,
            currentIndex: -1,
            isExpandContent: "yes" === E.getReaderConfig("isExpandContent")
          }, n.handleJump = n.handleJump.bind(Object(Hn.a)(n)), n
        }
        return Object(y.a)(a, [{
          key: "componentWillMount",
          value: function () {
            var e = this;
            this.props.currentEpub.loaded.navigation.then((function (t) {
              e.setState({
                chapters: t.toc
              })
            })).catch((function () {
              console.log("Error occurs")
            }))
          }
        }, {
          key: "handleJump",
          value: function (e) {
            e.preventDefault();
            var t = e.target.getAttribute("href");
            this.props.currentEpub.rendition.display(t)
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "book-content-container"
            }, o.a.createElement("ul", {
              className: "book-content"
            }, this.state.chapters && function t(a, n) {
              return n++, a.map((function (a, r) {
                return o.a.createElement("li", {
                  key: r,
                  className: "book-content-list"
                }, a.subitems.length > 0 && n <= 2 && !e.state.isExpandContent && o.a.createElement("span", {
                  className: "icon-dropdown content-dropdown",
                  onClick: function () {
                    e.setState({
                      currentIndex: e.state.currentIndex === r ? -1 : r
                    })
                  },
                  style: e.state.currentIndex === r ? {} : {
                    transform: "rotate(-90deg)"
                  }
                }), o.a.createElement("a", {
                  href: a.href,
                  onClick: e.handleJump,
                  className: "book-content-name"
                }, a.label), a.subitems.length > 0 && (e.state.currentIndex === r || n > 2 || e.state.isExpandContent) ? o.a.createElement("ul", null, t(a.subitems, n)) : null)
              }))
            }(this.state.chapters, 1)))
          }
        }]), a
      }(o.a.Component)),
      Kn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          chapters: e.reader.chapters
        }
      }), {})(zn),
      Jn = (a(196), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).handleShowDelete = function (e) {
            n.setState({
              deleteIndex: e
            })
          }, n.state = {
            deleteIndex: -1
          }, n
        }
        return Object(y.a)(a, [{
          key: "handleJump",
          value: function (e) {
            if (!e) return this.props.handleMessage("Wrong bookmark"), void this.props.handleMessageBox(!0);
            this.props.currentEpub.rendition.display(e)
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = ("bookmarks" === this.props.currentTab ? this.props.bookmarks : "notes" === this.props.currentTab ? this.props.notes.filter((function (e) {
                return "" !== e.notes
              })) : this.props.digests).filter((function (t) {
                return t.bookKey === e.props.currentBook.key
              }));
            return t[0] ? o.a.createElement("div", {
              className: "book-bookmark-container"
            }, o.a.createElement("ul", {
              className: "book-bookmark"
            }, t.reverse().map((function (t, a) {
              var n = {
                itemKey: t.key,
                mode: "bookmarks" === e.props.currentTab ? "bookmarks" : "notes"
              };
              return o.a.createElement("li", {
                className: "book-bookmark-list",
                key: t.key,
                onMouseEnter: function () {
                  e.handleShowDelete(a)
                },
                onMouseLeave: function () {
                  e.handleShowDelete(-1)
                }
              }, o.a.createElement("p", {
                className: "book-bookmark-digest"
              }, "bookmarks" === e.props.currentTab ? t.label : "notes" === e.props.currentTab ? t.notes : t.text), o.a.createElement("span", {
                className: "bookmark-page-list-item-title"
              }, o.a.createElement(c.b, null, t.chapter)), e.state.deleteIndex === a ? o.a.createElement(Ma, n) : null, o.a.createElement("div", {
                className: "book-bookmark-link",
                onClick: function () {
                  e.handleJump(t.cfi)
                },
                style: {
                  cursor: "pointer"
                }
              }, o.a.createElement(c.b, null, "Go To")), o.a.createElement("div", {
                className: "book-bookmark-progress"
              }, Math.floor(100 * t.percentage), "%"))
            })))) : o.a.createElement("div", {
              className: "navigation-panel-empty-bookmark"
            }, o.a.createElement(c.b, null, "Empty"))
          }
        }]), a
      }(o.a.Component)),
      Wn = {
        handleMessageBox: U,
        handleMessage: P
      },
      Gn = Object(i.b)((function (e) {
        return {
          currentBook: e.book.currentBook,
          currentEpub: e.book.currentEpub,
          bookmarks: e.reader.bookmarks,
          notes: e.reader.notes,
          digests: e.reader.digests
        }
      }), Wn)(Object(c.d)()(Jn)),
      qn = a(83),
      Vn = a.n(qn),
      Yn = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).timer = void 0, n.handleSearchState = function (e) {
            n.setState({
              isSearch: e
            })
          }, n.handleSearchList = function (e) {
            n.setState({
              searchList: e
            })
          }, n.handleChangeTab = function (e) {
            n.setState({
              currentTab: e
            })
          }, n.renderSearchList = function () {
            return n.state.searchList[0] ? n.state.searchList.slice(10 * n.state.currentIndex, 10 * n.state.currentIndex + 10 > n.state.searchList.length ? n.state.searchList.length : 10 * n.state.currentIndex + 10).map((function (e, t) {
              return o.a.createElement("li", {
                className: "nav-search-list-item",
                key: e.cfi,
                onClick: function () {
                  n.props.currentEpub.rendition.display(e.cfi)
                }
              }, Vn()(e.excerpt))
            })) : o.a.createElement("div", {
              className: "navigation-panel-empty-bookmark"
            }, o.a.createElement(c.b, null, "Empty"))
          }, n.renderSearchPage = function () {
            var e = n.state.startIndex,
              t = e > 0 ? e + 2 : n.state.currentIndex,
              a = [],
              r = Math.ceil(n.state.searchList.length / 10);
            if (r <= 5)
              for (var s = function (e) {
                  a.push(o.a.createElement("li", {
                    className: t === e ? "nav-search-page-item active-page " : "nav-search-page-item",
                    onClick: function () {
                      n.setState({
                        currentIndex: e
                      })
                    }
                  }, e + 1))
                }, i = 0; i < r; i++) s(i);
            else
              for (var l = function (r) {
                  var s = t > 2 ? 2 === r : t === r;
                  a.push(o.a.createElement("li", {
                    className: s ? "nav-search-page-item active-page " : "nav-search-page-item",
                    onClick: function () {
                      3 !== r || 0 !== e ? n.setState({
                        startIndex: t > 2 ? r + e - 2 : 0,
                        currentIndex: r + e
                      }) : n.setState({
                        startIndex: 1,
                        currentIndex: 3
                      })
                    }
                  }, r + e + 1))
                }, c = 0; c < 5; c++) l(c);
            return a
          }, n.state = {
            currentTab: "contents",
            chapters: [],
            cover: "",
            isSearch: !1,
            searchList: null,
            startIndex: 0,
            currentIndex: 0
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = this;
            this.props.currentEpub.coverUrl().then((function (t) {
              e.setState({
                cover: t
              })
            })).catch((function () {
              console.log("Error occurs")
            })), this.props.handleFetchBookmarks()
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = {
                mode: this.state.isSearch ? "" : "nav",
                width: "100px",
                height: "35px",
                isNavSearch: this.state.isSearch,
                handleSearchState: this.handleSearchState,
                handleSearchList: this.handleSearchList
              },
              a = {
                currentTab: this.state.currentTab
              };
            return o.a.createElement("div", {
              className: "navigation-panel"
            }, this.state.isSearch ? o.a.createElement(o.a.Fragment, null, o.a.createElement("span", {
              className: "icon-close nav-close-icon",
              onClick: function () {
                e.handleSearchState(!1), e.props.handleSearch(!1), e.setState({
                  searchList: null
                })
              }
            }), o.a.createElement("div", {
              className: "header-search-container",
              style: this.state.isSearch ? {
                left: 40
              } : {}
            }, o.a.createElement("div", {
              className: "navigation-search-title",
              style: {
                height: "20px",
                margin: "0px 25px 13px"
              }
            }, o.a.createElement(c.b, null, "Search the book")), o.a.createElement(ve, t)), o.a.createElement("ul", {
              className: "nav-search-list"
            }, this.state.searchList ? this.renderSearchList() : null), o.a.createElement("ul", {
              className: "nav-search-page"
            }, this.state.searchList ? this.renderSearchPage() : null)) : o.a.createElement(o.a.Fragment, null, o.a.createElement("div", {
              className: "navigation-header"
            }, o.a.createElement("img", {
              className: "book-cover",
              src: this.state.cover,
              alt: ""
            }), o.a.createElement("p", {
              className: "book-title"
            }, this.props.currentBook.name), o.a.createElement("p", {
              className: "book-arthur"
            }, o.a.createElement(c.b, null, "Author"), ":", " ", o.a.createElement(c.b, null, this.props.currentBook.author ? this.props.currentBook.author : "Unknown Authur")), o.a.createElement("span", {
              className: "reading-duration"
            }, o.a.createElement(c.b, null, "Reading Time"), ": ", Math.floor(this.props.time / 60), "\xa0", o.a.createElement(c.b, null, "Minute")), o.a.createElement("div", {
              className: "navigation-search-box"
            }, o.a.createElement(ve, t)), o.a.createElement("div", {
              className: "navigation-navigation"
            }, o.a.createElement("span", {
              className: "book-content-title",
              onClick: function () {
                e.handleChangeTab("contents")
              },
              style: "contents" === this.state.currentTab ? {
                color: "rgba(112, 112, 112, 1)"
              } : {
                color: "rgba(217, 217, 217, 1)"
              }
            }, o.a.createElement(c.b, null, "Content")), o.a.createElement("span", {
              className: "book-bookmark-title",
              style: "bookmarks" === this.state.currentTab ? {
                color: "rgba(112, 112, 112, 1)"
              } : {
                color: "rgba(217, 217, 217, 1)"
              },
              onClick: function () {
                e.handleChangeTab("bookmarks")
              }
            }, o.a.createElement(c.b, null, "Bookmark")), o.a.createElement("span", {
              className: "book-bookmark-title",
              style: "notes" === this.state.currentTab ? {
                color: "rgba(112, 112, 112, 1)"
              } : {
                color: "rgba(217, 217, 217, 1)"
              },
              onClick: function () {
                e.handleChangeTab("notes")
              }
            }, o.a.createElement(c.b, null, "Note")), o.a.createElement("span", {
              className: "book-bookmark-title",
              style: "digests" === this.state.currentTab ? {
                color: "rgba(112, 112, 112, 1)"
              } : {
                color: "rgba(217, 217, 217, 1)"
              },
              onClick: function () {
                e.handleChangeTab("digests")
              }
            }, o.a.createElement(c.b, null, "Digest")))), o.a.createElement("div", {
              className: "navigation-body-parent"
            }, o.a.createElement("div", {
              className: "navigation-body"
            }, "contents" === this.state.currentTab ? o.a.createElement(Kn, null) : o.a.createElement(Gn, a)))))
          }
        }]), a
      }(o.a.Component),
      Qn = {
        handleFetchBookmarks: Y,
        handleSearch: L
      },
      Xn = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks
        }
      }), Qn)(Object(c.d)()(Yn)),
      Zn = (a(208), function e(t, a, n, o, r) {
        Object(v.a)(this, e), this.key = void 0, this.bookKey = void 0, this.cfi = void 0, this.label = void 0, this.percentage = void 0, this.chapter = void 0, this.key = (new Date).getTime() + "", this.bookKey = t, this.cfi = a, this.label = n, this.percentage = o, this.chapter = r
      }),
      $n = function () {
        function e() {
          Object(v.a)(this, e)
        }
        return Object(y.a)(e, null, [{
          key: "setTime",
          value: function (e, t) {
            var a = localStorage.getItem("readingTime"),
              n = JSON.parse(a) || {};
            n[e] = t, localStorage.setItem("readingTime", JSON.stringify(n))
          }
        }, {
          key: "getTime",
          value: function (e) {
            var t = localStorage.getItem("readingTime");
            return (JSON.parse(t) || {})[e] || 0
          }
        }, {
          key: "clearTime",
          value: function (e) {
            var t = localStorage.getItem("readingTime"),
              a = JSON.parse(t) || {};
            delete a[e], localStorage.setItem("readingTime", JSON.stringify(a))
          }
        }]), e
      }(),
      eo = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).timeStamp = void 0, n.speed = void 0, n.state = {
            isFullScreen: "yes" === E.getReaderConfig("isFullScreen"),
            isBookmark: !1,
            time: 0,
            currentPercentage: ot.getCfi(n.props.currentBook.key) ? ot.getCfi(n.props.currentBook.key).percentage : 0,
            timeLeft: 0
          }, n.timeStamp = Date.now(), n.speed = 3e4, n
        }
        return Object(y.a)(a, [{
          key: "componentWillReceiveProps",
          value: function (e) {
            if (e.currentEpub.rendition && e.currentEpub.rendition.location) {
              var t = this.props.currentEpub.rendition.currentLocation();
              if (!t.start) return;
              this.props.currentEpub.rendition.currentLocation().percentage !== e.currentEpub.rendition.currentLocation().percentage && (this.speed = Date.now() - this.timeStamp, this.timeStamp = Date.now()), this.setState({
                timeLeft: (t.start.displayed.total - t.start.displayed.page) * this.speed / 1e3
              })
            }
          }
        }, {
          key: "handleScreen",
          value: function () {
            this.state.isFullScreen ? this.handleExitFullScreen() : this.handleFullScreen()
          }
        }, {
          key: "handleFullScreen",
          value: function () {
            var e = document.documentElement;
            e.requestFullscreen ? e.requestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.msRequestFullscreen && e.msRequestFullscreen(), this.setState({
              isFullScreen: !0
            }), E.setReaderConfig("isFullScreen", "yes")
          }
        }, {
          key: "handleExitFullScreen",
          value: function () {
            document.fullscreenElement && (document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen(), this.setState({
              isFullScreen: !1
            }), E.setReaderConfig("isFullScreen", "no"))
          }
        }, {
          key: "handleAddBookmark",
          value: function () {
            var e = this,
              t = this.props.currentBook.key,
              a = this.props.currentEpub.rendition.currentLocation(),
              n = a.start.href,
              o = "Unknown Chapter",
              r = this.props.flattenChapters.filter((function (e) {
                return n.indexOf(e.href.split("#")[0]) > -1 || e.href.split("#")[0].indexOf(n) > -1
              }))[0];
            r && (o = r.label.trim(" "));
            var s = a.start.cfi.replace(/!.*/, "").replace("epubcfi(", ""),
              i = a.start.cfi.replace(/.*!/, "").replace(/\)/, ""),
              l = a.end.cfi.replace(/.*!/, "").replace(/\)/, ""),
              c = "epubcfi(".concat(s, "!,").concat(i, ",").concat(l, ")"),
              u = ot.getCfi(this.props.currentBook.key).cfi;
            this.props.currentEpub.getRange(c).then((function (a) {
              var n;
              if (a) {
                var r = a.toString();
                r = (r = (r = (r = (r = r.replace(/\s\s/g, "")).replace(/\r/g, "")).replace(/\n/g, "")).replace(/\t/g, "")).replace(/\f/g, "");
                var s = ot.getCfi(e.props.currentBook.key).percentage ? ot.getCfi(e.props.currentBook.key).percentage : 0,
                  i = new Zn(t, u, r, s, o),
                  l = null !== (n = e.props.bookmarks) && void 0 !== n ? n : [];
                l.push(i), e.props.handleBookmarks(l), F.a.setItem("bookmarks", l), e.setState({
                  isBookmark: !0
                }), e.props.handleMessage("Add Successfully"), e.props.handleMessageBox(!0), e.props.handleShowBookmark(!0)
              }
            }))
          }
        }, {
          key: "handleExit",
          value: function () {
            E.setReaderConfig("isFullScreen", "no"), window.speechSynthesis && window.speechSynthesis.cancel(), this.state.isFullScreen && this.handleExitFullScreen(), this.props.handleSearch(!1), this.props.handleOpenMenu(!1), window.close()
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return o.a.createElement("div", {
              className: "book-operation-panel"
            }, o.a.createElement("div", {
              className: "book-opeartion-info"
            }, o.a.createElement("span", null, o.a.createElement(c.b, {
              i18nKey: "Current Reading Time",
              count: Math.floor((this.props.time - $n.getTime(this.props.currentBook.key)) / 60)
            }, "Current Reading Time:", {
              count: Math.abs(Math.floor((this.props.time - $n.getTime(this.props.currentBook.key)) / 60))
            }, "Minutes")), "\xa0\xa0\xa0", o.a.createElement("span", null, o.a.createElement(c.b, {
              i18nKey: "Finish Reading Time",
              count: Math.ceil(this.state.timeLeft / 60)
            }, "Finish Reading Time:", {
              count: "".concat(Math.ceil(this.state.timeLeft / 60))
            }, "Minutes"))), o.a.createElement("div", {
              className: "exit-reading-button",
              onClick: function () {
                e.handleExit()
              }
            }, o.a.createElement("span", {
              className: "icon-exit exit-reading-icon"
            }), o.a.createElement("span", {
              className: "exit-reading-text"
            }, o.a.createElement(c.b, null, "Exit"))), o.a.createElement("div", {
              className: "add-bookmark-button",
              onClick: function () {
                e.handleAddBookmark()
              }
            }, o.a.createElement("span", {
              className: "icon-add add-bookmark-icon"
            }), o.a.createElement("span", {
              className: "add-bookmark-text"
            }, o.a.createElement(c.b, null, "Add Bookmark"))), o.a.createElement("div", {
              className: "enter-fullscreen-button",
              onClick: function () {
                e.handleScreen()
              }
            }, o.a.createElement("span", {
              className: "icon-fullscreen enter-fullscreen-icon"
            }), this.state.isFullScreen ? o.a.createElement("span", {
              className: "enter-fullscreen-text"
            }, o.a.createElement(c.b, null, "Exit Fullscreen")) : o.a.createElement("span", {
              className: "enter-fullscreen-text"
            }, o.a.createElement(c.b, null, "Enter Fullscreen"))))
          }
        }]), a
      }(o.a.Component),
      to = Object(M.g)(eo),
      ao = {
        handleBookmarks: G,
        handleReadingState: Ze,
        handleFetchBookmarks: Y,
        handleMessageBox: U,
        handleMessage: P,
        handleOpenMenu: Sa,
        handleShowBookmark: Ca,
        handleSearch: L
      },
      no = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          bookmarks: e.reader.bookmarks,
          locations: e.progressPanel.locations,
          flattenChapters: e.reader.flattenChapters
        }
      }), ao)(Object(c.d)()(to)),
      oo = (a(209), function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).onProgressChange = function (e) {
            var t = e.target.value / 100,
              a = t ? n.props.locations.cfiFromPercentage(t) : 0;
            n.props.currentEpub.rendition.display(a)
          }, n.onProgressInput = function (e) {
            n.setState({
              displayPercentage: e.target.value / 100
            })
          }, n.previourChapter = function () {
            var e = n.props.currentEpub.rendition.currentLocation();
            if (e.start) {
              var t = e.start.index;
              n.setState({
                currentChapterIndex: t
              });
              var a = n.props.currentEpub.section(t - 1);
              a && a.href && n.props.currentEpub.rendition.display(a.href).then((function () {
                var e = ot.getCfi(n.props.currentBook.key).percentage ? ot.getCfi(n.props.currentBook.key).percentage : 0;
                n.setState({
                  displayPercentage: e
                })
              }))
            }
          }, n.nextChapter = function () {
            var e = n.props.currentEpub.rendition.currentLocation();
            if (e.start) {
              var t = e.start.index;
              n.setState({
                currentChapterIndex: t
              });
              var a = n.props.currentEpub.section(t + 1);
              a && a.href && n.props.currentEpub.rendition.display(a.href).then((function () {
                var e = ot.getCfi(n.props.currentBook.key).percentage ? ot.getCfi(n.props.currentBook.key).percentage : 0;
                n.setState({
                  displayPercentage: e
                })
              }))
            }
          }, n.handleJumpChapter = function (e) {
            if (e.target.value) {
              var t = n.props.currentEpub.section(e.target.value);
              t && t.href && n.props.currentEpub.rendition.display(t.href).then((function () {
                var e = ot.getCfi(n.props.currentBook.key).percentage ? ot.getCfi(n.props.currentBook.key).percentage : 0;
                n.setState({
                  displayPercentage: e
                })
              }))
            }
          }, n.handleJumpPage = function (e) {}, n.state = {
            displayPercentage: n.props.percentage ? n.props.percentage : 0,
            currentChapter: "",
            currentPage: 0,
            totalPage: 0,
            currentChapterIndex: 0
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentWillReceiveProps",
          value: function (e) {
            if (e.currentEpub.rendition && e.currentEpub.rendition.location) {
              var t = this.props.currentEpub.rendition.currentLocation();
              if (!t.start) return;
              this.setState({
                currentPage: t.start.displayed.page,
                totalPage: t.start.displayed.total,
                currentChapterIndex: t.start.index
              });
              var a = t.start.href,
                n = "Unknown Chapter",
                o = this.props.flattenChapters.filter((function (e) {
                  return e.href.split("#")[0] === a
                }))[0];
              o && (n = o.label.trim(" ")), this.setState({
                currentChapter: n
              })
            }
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return this.props.locations ? o.a.createElement("div", {
              className: "progress-panel"
            }, o.a.createElement("p", {
              className: "progress-text",
              style: {
                marginTop: 10
              }
            }, o.a.createElement("span", null, o.a.createElement(c.b, null, "Current Progress"), ":", " ", Math.round(this.state.displayPercentage > 1 ? 100 : 100 * this.state.displayPercentage), "%\xa0\xa0\xa0")), o.a.createElement("p", {
              className: "progress-text",
              style: {
                marginTop: 0
              }
            }, this.state.currentPage > 0 ? o.a.createElement(o.a.Fragment, null, o.a.createElement(c.b, null, "Current Chapter Pages"), o.a.createElement("input", {
              type: "text",
              name: "jumpPage",
              id: "jumpPage",
              onBlur: function (t) {
                e.handleJumpPage(t)
              },
              value: this.state.currentPage
            }), o.a.createElement("span", null, "/ ", this.state.totalPage), "\xa0\xa0\xa0", o.a.createElement(c.b, null, "Chapter Redirect"), o.a.createElement("input", {
              type: "text",
              name: "jumpChapter",
              id: "jumpChapter",
              onBlur: function (t) {
                e.handleJumpChapter(t)
              },
              defaultValue: this.state.currentChapterIndex
            }), o.a.createElement("span", null, "/ ", this.props.currentEpub.rendition.book.spine.length)) : null), o.a.createElement("div", null, o.a.createElement("input", {
              className: "input-progress",
              defaultValue: Math.round(100 * this.state.displayPercentage),
              type: "range",
              max: "100",
              min: "0",
              step: "1",
              onMouseUp: function (t) {
                e.onProgressChange(t)
              },
              onTouchEnd: function (t) {
                e.onProgressChange(t)
              },
              onChange: function (t) {
                e.onProgressInput(t)
              },
              style: {
                width: 300,
                left: 50,
                top: 73
              }
            })), o.a.createElement("div", {
              className: "previous-chapter",
              onClick: function () {
                e.previourChapter()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown previous-chapter-icon"
            }, " ")), o.a.createElement("div", {
              className: "next-chapter",
              onClick: function () {
                e.nextChapter()
              }
            }, o.a.createElement("span", {
              className: "icon-dropdown next-chapter-icon"
            }))) : o.a.createElement("div", {
              className: "progress-panel"
            }, o.a.createElement("p", {
              className: "progress-text"
            }, o.a.createElement(c.b, null, "Loading")))
          }
        }]), a
      }(o.a.Component)),
      ro = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          percentage: e.progressPanel.percentage,
          locations: e.progressPanel.locations,
          flattenChapters: e.reader.flattenChapters
        }
      }), {})(Object(c.d)()(oo)),
      so = window.Hammer,
      io = function (e) {
        var t = -1 !== navigator.userAgent.indexOf("Firefox"),
          a = !1,
          n = function (t) {
            if (!a) return 37 === t.keyCode || 38 === t.keyCode ? (e.prev(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : 39 === t.keyCode || 40 === t.keyCode ? (e.next(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : void 0
          },
          o = function (t) {
            if (t.preventDefault(), !a) return t.detail < 0 ? (e.prev(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : t.detail > 0 ? (e.next(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : void 0
          },
          r = function (t) {
            if (!a) return t.wheelDelta > 0 ? (e.prev(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : t.wheelDelta < 0 ? (e.next(), a = !0, setTimeout((function () {
              a = !1
            }), 100), !1) : void 0
          };
        e.on("rendered", (function () {
          var s = document.getElementsByTagName("iframe")[0];
          if (s) {
            var i = s.contentDocument;
            if (i) {
              if ("yes" === E.getReaderConfig("isTouch")) new so(i).on("panleft panright panup pandown", (function (t) {
                ! function (t) {
                  if (!a) "panleft" === t.type || "panup" === t.type ? (e.next(), a = !0, setTimeout((function () {
                    a = !1
                  }), 100)) : ("panright" === t.type || "pandown" === t.type) && (e.prev(), a = !0, setTimeout((function () {
                    a = !1
                  }), 100))
                }(t)
              }));
              window.addEventListener("keydown", n),
                function (e) {
                  e.addEventListener("keydown", n), t ? e.addEventListener("DOMMouseScroll", o, !1) : e.addEventListener("mousewheel", r, !1)
                }(i)
            }
          }
        }))
      },
      lo = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).messageTimer = void 0, n.tickTimer = void 0, n.rendition = void 0, n.handleEnterReader = function (e) {
            switch (e) {
              case "right":
                n.setState({
                  isOpenSettingPanel: !n.state.isOpenSettingPanel
                });
                break;
              case "left":
                n.setState({
                  isOpenNavPanel: !n.state.isOpenNavPanel
                });
                break;
              case "top":
                n.setState({
                  isOpenOperationPanel: !n.state.isOpenOperationPanel
                });
                break;
              case "bottom":
                n.setState({
                  isOpenProgressPanel: !n.state.isOpenProgressPanel
                })
            }
          }, n.handleLeaveReader = function (e) {
            switch (e) {
              case "right":
                n.setState({
                  isOpenSettingPanel: !1
                });
                break;
              case "left":
                n.setState({
                  isOpenNavPanel: !1
                });
                break;
              case "top":
                n.setState({
                  isOpenOperationPanel: !1
                });
                break;
              case "bottom":
                n.setState({
                  isOpenProgressPanel: !1
                })
            }
          }, n.state = {
            isOpenSettingPanel: !1,
            isOpenOperationPanel: !1,
            isOpenProgressPanel: !1,
            isOpenNavPanel: !1,
            isMessage: !1,
            rendition: null,
            scale: E.getReaderConfig("scale") || 1,
            time: $n.getTime(n.props.currentBook.key),
            isTouch: "yes" === E.getReaderConfig("isTouch"),
            readerMode: E.getReaderConfig("readerMode") || "double"
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentWillMount",
          value: function () {
            this.props.handleFetchBookmarks(), this.props.handleFetchPercentage(this.props.currentBook), this.props.handleFetchNotes(), this.props.handleFetchChapters(this.props.currentEpub)
          }
        }, {
          key: "UNSAFE_componentWillReceiveProps",
          value: function (e) {
            var t = this;
            this.setState({
              isMessage: e.isMessage
            }), e.isMessage && (this.messageTimer = setTimeout((function () {
              t.props.handleMessageBox(!1), t.setState({
                isMessage: !1
              })
            }), 2e3))
          }
        }, {
          key: "componentDidMount",
          value: function () {
            var e = this,
              t = document.querySelector("#page-area"),
              a = this.props.currentEpub;
            window.rangy.init(), this.rendition = a.renderTo(t, {
              manager: "continuous" === this.state.readerMode ? "continuous" : "default",
              flow: "scroll" === this.state.readerMode ? "scrolled-doc" : "continuous" === this.state.readerMode ? "scrolled" : "auto",
              width: "100%",
              height: "100%",
              snap: !0
            }), this.setState({
              rendition: this.rendition
            }), "scroll" !== this.state.readerMode && "continuous" !== this.state.readerMode && io(this.rendition), this.tickTimer = setInterval((function () {
              var t = e.state.time;
              t += 1, e.setState({
                time: t
              })
            }), 1e3)
          }
        }, {
          key: "componentWillUnmount",
          value: function () {
            clearTimeout(this.messageTimer), setTimeout((function () {}), 5e3), clearInterval(this.tickTimer), $n.setTime(this.props.currentBook.key, this.state.time)
          }
        }, {
          key: "render",
          value: function () {
            var e = this,
              t = {
                rendition: this.state.rendition,
                handleLeaveReader: this.handleLeaveReader,
                handleEnterReader: this.handleEnterReader,
                isShow: this.state.isOpenNavPanel || this.state.isOpenOperationPanel || this.state.isOpenProgressPanel || this.state.isOpenSettingPanel
              };
            return o.a.createElement("div", {
              className: "viewer"
            }, this.state.isMessage ? o.a.createElement(yt, null) : null, o.a.createElement("div", {
              className: "left-panel",
              onMouseEnter: function () {
                e.state.isTouch || e.state.isOpenNavPanel || e.handleEnterReader("left")
              },
              onClick: function () {
                e.handleEnterReader("left")
              }
            }), o.a.createElement("div", {
              className: "right-panel",
              onMouseEnter: function () {
                e.state.isTouch || e.state.isOpenSettingPanel || e.handleEnterReader("right")
              },
              onClick: function () {
                e.handleEnterReader("right")
              }
            }), o.a.createElement("div", {
              className: "top-panel",
              onMouseEnter: function () {
                e.state.isTouch || e.state.isOpenOperationPanel || e.handleEnterReader("top")
              },
              onClick: function () {
                e.handleEnterReader("top")
              }
            }), o.a.createElement("div", {
              className: "bottom-panel",
              onMouseEnter: function () {
                e.state.isTouch || e.state.isOpenProgressPanel || e.handleEnterReader("bottom")
              },
              onClick: function () {
                e.handleEnterReader("bottom")
              }
            }), this.state.rendition && this.props.currentEpub.rendition && o.a.createElement(On, t), o.a.createElement("div", {
              className: "setting-panel-container",
              onMouseLeave: function (t) {
                e.handleLeaveReader("right")
              },
              style: this.state.isOpenSettingPanel ? {} : {
                transform: "translateX(309px)"
              }
            }, o.a.createElement(Un, null)), o.a.createElement("div", {
              className: "navigation-panel-container",
              onMouseLeave: function (t) {
                e.handleLeaveReader("left")
              },
              style: this.state.isOpenNavPanel ? {} : {
                transform: "translateX(-309px)"
              }
            }, o.a.createElement(Xn, {
              time: this.state.time
            })), o.a.createElement("div", {
              className: "progress-panel-container",
              onMouseLeave: function (t) {
                e.handleLeaveReader("bottom")
              },
              style: this.state.isOpenProgressPanel ? {} : {
                transform: "translateY(110px)"
              }
            }, o.a.createElement(ro, {
              time: this.state.time
            })), o.a.createElement("div", {
              className: "operation-panel-container",
              onMouseLeave: function (t) {
                e.handleLeaveReader("top")
              },
              style: this.state.isOpenOperationPanel ? {} : {
                transform: "translateY(-110px)"
              }
            }, o.a.createElement(no, {
              time: this.state.time
            })), o.a.createElement("div", {
              className: "view-area-page",
              id: "page-area",
              style: "scroll" === this.state.readerMode || "continuous" === this.state.readerMode ? {
                left: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px)"),
                right: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px)"),
                top: "75px",
                bottom: "75px"
              } : "single" === this.state.readerMode ? {
                left: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px)"),
                right: "calc(50vw - ".concat(270 * parseFloat(this.state.scale), "px)")
              } : {}
            }), o.a.createElement(xn, {
              time: this.state.time
            }))
          }
        }]), a
      }(o.a.Component),
      co = {
        handleFetchNotes: V,
        handleFetchBookmarks: Y,
        handleFetchChapters: function (e) {
          return function (t) {
            e.loaded.navigation.then((function (e) {
              t(function (e) {
                return {
                  type: "HANDLE_CHAPTERS",
                  payload: e
                }
              }(e.toc)), t({
                type: "HANDLE_FLATTEN_CHAPTERS",
                payload: function e(t) {
                  for (var a = [], n = 0; n < t.length; n++) t[n].subitems[0] ? (a.push(t[n]), a = a.concat(e(t[n].subitems))) : a.push(t[n]);
                  return a
                }(e.toc)
              })
            })).catch((function () {
              console.log("Error occurs")
            }))
          }
        },
        handleMessageBox: U,
        handleFetchPercentage: function (e) {
          return function (t) {
            t(Xa(ot.getCfi(e.key).percentage))
          }
        }
      },
      uo = Object(i.b)((function (e) {
        return {
          currentEpub: e.book.currentEpub,
          currentBook: e.book.currentBook,
          isMessage: e.manager.isMessage
        }
      }), co)(Object(c.d)()(lo)),
      po = a(85),
      ho = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).epub = void 0, n.state = {}, n
        }
        return Object(y.a)(a, [{
          key: "componentWillMount",
          value: function () {
            var e = this,
              t = document.location.href.split("/"),
              a = t[t.length - 1];
            F.a.getItem("books").then((function (t) {
              var n = t[po.a.findIndex(t, {
                key: a
              })];
              F.a.getItem(a).then((function (t) {
                e.props.handleReadingBook(n), e.props.handleReadingEpub(window.ePub(t, {})), e.props.handleReadingState(!0), Ne.setRecent(a)
              }))
            }))
          }
        }, {
          key: "render",
          value: function () {
            return this.props.isReading ? o.a.createElement(uo, null) : o.a.createElement("div", {
              className: "spinner"
            }, o.a.createElement("div", {
              className: "sk-chase"
            }, o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            }), o.a.createElement("div", {
              className: "sk-chase-dot"
            })))
          }
        }]), a
      }(o.a.Component),
      mo = Object(M.g)(ho),
      go = {
        handleReadingState: Ze,
        handleReadingBook: $e,
        handleReadingEpub: et,
        handleActionDialog: Xe,
        handleMessageBox: U,
        handleMessage: P
      },
      fo = Object(i.b)((function (e) {
        return {
          isOpenActionDialog: e.book.isOpenActionDialog,
          currentBook: e.book.currentBook,
          isReading: e.book.isReading
        }
      }), go)(mo);
    a(69);

    function ko() {
      for (var e, t = {}, a = /([^&;=]+)=?([^&;]*)/g, n = window.location.hash.substring(2) || window.location.search.substring(1).split("#")[0]; e = a.exec(n);) t[e[1]] = decodeURIComponent(e[2]);
      return t
    }
    var bo = function (e) {
        Object(Q.a)(a, e);
        var t = Object(X.a)(a);

        function a(e) {
          var n;
          return Object(v.a)(this, a), (n = t.call(this, e)).timer = void 0, n.state = {
            isAuthed: !1,
            isError: !1,
            isCopied: !1,
            token: ""
          }, n
        }
        return Object(y.a)(a, [{
          key: "componentDidMount",
          value: function () {
            var e = document.location.href;
            if ("#/" === document.location.hash && this.props.history.push("/manager/home"), e.indexOf("error") > -1) return this.setState({
              isError: !0
            }), !1;
            if (e.indexOf("code") > -1) {
              var t = ko();
              return console.log(t, "params"), this.setState({
                token: t.code
              }), this.setState({
                isAuthed: !0
              }), !1
            }
            if (e.indexOf("access_token") > -1) {
              var a = ko();
              return console.log(a, "params"), this.setState({
                token: a.access_token
              }), this.setState({
                isAuthed: !0
              }), !1
            }
          }
        }, {
          key: "render",
          value: function () {
            var e = this;
            return this.state.isError || this.state.isAuthed ? o.a.createElement("div", {
              className: "backup-page-finish-container"
            }, o.a.createElement("div", {
              className: "backup-page-finish"
            }, this.state.isAuthed ? o.a.createElement("span", {
              className: "icon-message backup-page-finish-icon"
            }) : o.a.createElement("span", {
              className: "icon-close auth-page-close-icon"
            }), o.a.createElement("div", {
              className: "backup-page-finish-text"
            }, o.a.createElement(c.b, null, this.state.isAuthed ? "Authorize Successfully" : "Authorize Failed")), this.state.isAuthed ? o.a.createElement("div", {
              className: "token-dialog-token-text",
              onClick: function () {
                At()(e.state.token), e.setState({
                  isCopied: !0
                })
              }
            }, this.state.isCopied ? o.a.createElement(c.b, null, "Copied") : o.a.createElement(c.b, null, "Copy Token")) : null)) : o.a.createElement("div", {
              className: "manager"
            }, o.a.createElement("img", {
              src: "./assets/logo.png",
              alt: "",
              className: "logo"
            }), o.a.createElement("div", {
              className: "empty-page-info-container",
              style: {
                margin: 100
              }
            }, o.a.createElement("div", {
              className: "empty-page-info-main"
            }, o.a.createElement(c.b, null, "It seems like you're lost")), o.a.createElement("div", {
              className: "empty-page-info-sub",
              onClick: function () {
                e.props.history.push("/manager/home")
              },
              style: {
                marginTop: 10,
                cursor: "pointer"
              }
            }, o.a.createElement(c.b, null, "Return to home"))), o.a.createElement("img", {
              src: "./assets/empty.svg",
              alt: "",
              className: "empty-page-illustration"
            }))
          }
        }]), a
      }(o.a.Component),
      vo = Object(M.g)(bo),
      yo = Object(i.b)((function (e) {
        return {}
      }), {})(vo),
      Eo = Object(D.hot)((function () {
        return o.a.createElement(B.a, null, o.a.createElement(M.d, null, o.a.createElement(M.b, {
          component: Qa,
          path: "/manager"
        }), o.a.createElement(M.b, {
          component: fo,
          path: "/epub"
        }), o.a.createElement(M.b, {
          component: yo,
          path: "/"
        })))
      }));
    Boolean("localhost" === window.location.hostname || "[::1]" === window.location.hostname || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));
    s.a.render(o.a.createElement(i.a, {
      store: w
    }, o.a.createElement(Eo, null)), document.getElementById("root")), "serviceWorker" in navigator && navigator.serviceWorker.ready.then((function (e) {
      e.unregister()
    })).catch((function (e) {
      console.error(e.message)
    }))
  }]), [
    [87, 1, 2]
  ]
]);
//# sourceMappingURL=main.cd00813c.chunk.js.map