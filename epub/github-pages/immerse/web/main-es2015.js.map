{"version":3,"sources":["./src/app/reader/reader.module.ts","./src/app/reader/settings/settings.component.ts","./src/app/reader/settings/settings.component.html","./src/app/library/book-cards/book-cards.component.ts","./src/app/library/book-cards/book-cards.component.html","./src/app/library/filters/filters.component.ts","./src/app/library/filters/filters.component.html","./src/app/models/Book.ts","./src/environments/environment.ts","./src/app/config/config.service.ts","./src/app/library/import-books/import-books.component.ts","./src/app/library/import-books/import-books.component.html","./src/app/reader/reader.component.ts","./src/app/reader/reader.component.html","./src/app/reader/toc/toc.component.ts","./src/app/reader/toc/toc.component.html","./src/app/reader/buttons/buttons.component.ts","./src/app/reader/buttons/buttons.component.html","./src/app/reader/reading-location.service.ts","./src/app/library/library.component.ts","./src/app/library/library.component.html","./src/app/message.service.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/library/services/library.service.ts","./src/app/app.module.ts","./src/app/reader/background/background.component.ts","./src/app/reader/background/background.component.html","./src/app/library/library-routing.module.ts","./src/app/reader/reader.service.ts","./src/app/reader/mouse.service.ts","./src/app/library/buttons/buttons.component.ts","./src/app/library/buttons/buttons.component.html","./src/app/reader/navigation/navigation.component.ts","./src/app/reader/navigation/navigation.component.html","./src/app/app-routing.module.ts","./src/app/library/library.module.ts","./src/app/models/ReadingProgress.ts","./src/app/reader/reader-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { ReaderComponent } from './reader.component';\nimport { BackgroundComponent } from './background/background.component';\nimport { ButtonsComponent } from './buttons/buttons.component';\nimport { SettingsComponent } from './settings/settings.component';\nimport { NavigationComponent } from './navigation/navigation.component';\n\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatSelectModule } from '@angular/material/select';\nimport { TocComponent } from './toc/toc.component';\n\n@NgModule({\n  declarations: [ReaderComponent, BackgroundComponent, SettingsComponent, ButtonsComponent, NavigationComponent, TocComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MatButtonModule,\n    MatCheckboxModule,\n    MatInputModule,\n    MatDialogModule,\n    MatSliderModule,\n    MatRadioModule,\n    MatSelectModule\n  ]\n})\nexport class ReaderModule { }\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ConfigService } from 'src/app/config/config.service';\nimport { FormGroup, FormBuilder, FormControl } from '@angular/forms';\n\nexport interface SettingsDialogData {\n  theme: string; // background color\n  pageMode: string;\n  pageScale: number;\n  fontFamily: string;\n  fontSize: number;\n  lineHeight: number;\n};\n\ntype Controls = { [key: string]: FormControl };\n\n@Component({\n  selector: 'app-reader-settings',\n  templateUrl: './settings.component.html',\n  styleUrls: ['./settings.component.scss']\n})\nexport class SettingsComponent {\n  public themes = [\n    { id: 1, theme: 'rgba(235,255,231,1)' },\n    { id: 2, theme: 'rgba(244,232,211,0.4)' },\n    { id: 3, theme: 'rgba(242,219,187,0.8)' },\n    { id: 4, theme: 'rgba(255,254,252,1)' },\n    { id: 5, theme: 'rgba(44,47,49,1)' },\n  ];\n\n  public pageModes = [\n    { value: 'single', icon: 'icon-single-page' },\n    { value: 'double', icon: 'icon-two-page' },\n    { value: 'scroll', icon: 'icon-scroll1' },\n    { value: 'continuous', icon: 'icon-scroll' },\n  ];\n\n  public fontFamilies = [\n    'Helvetica',\n    'Times New Roman',\n    'Microsoft YaHei',\n    'SimSun',\n    'SimHei',\n    'Arial',\n  ];\n\n  public lineHeights = ['1', '1.25', '1.5', '1.75', '2'];\n\n  public settings: FormGroup;\n  public controls: Controls = {};\n\n  constructor(\n    private configService: ConfigService,\n    private fb: FormBuilder,\n    public dialogRef: MatDialogRef<SettingsComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: SettingsDialogData\n  ) {\n    this.settings = fb.group({\n      theme: new FormControl(data.theme),\n      pageMode: new FormControl(data.pageMode),\n      pageScale: new FormControl(data.pageScale),\n      fontFamily: new FormControl(data.fontFamily),\n      fontSize: new FormControl(data.fontSize),\n      lineHeight: new FormControl(data.lineHeight),\n    });\n\n    this.controls = this.settings.controls as Controls;\n\n\n    // this.settings.valueChanges.subscribe((value) => {\n    //   console.log('valueChanges ->', value);\n    // });\n\n    // this.theme.valueChanges.subscribe((value) => {\n    //   console.log('theme valueChanges ->', value);\n    // });\n\n    Object.keys(this.controls).forEach(key => {\n      this.controls[key].valueChanges.subscribe(value => {\n        console.log('value change', key, value);\n        this.configService.setItem(`reader.${key}`, value);\n      });\n    });\n\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n}\n","<div class=\"reader-settings\">\n  <h1 mat-dialog-title>阅读设置</h1>\n  <div mat-dialog-content>\n    <form [formGroup]=\"settings\" class=\"settings-form\">\n      <div class=\"settings-form-field\">\n        <mat-label>主题</mat-label>\n        <div class=\"fat-ratio-group\">\n          <button\n            class=\"fat-ratio\"\n            mat-mini-fab\n            *ngFor=\"let t of themes\"\n            (click)=\"controls.theme.setValue(t.theme)\"\n            [ngStyle]=\"{ 'background-color': t.theme, color: 'red' }\">\n            <mat-icon *ngIf=\"t.theme === controls.theme.value\">check</mat-icon>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"settings-form-field\">\n        <mat-label>页面模式</mat-label>\n        <!-- <input matInput [formControl]=\"controls.pageMode\"> -->\n        <div class=\"fat-ratio-group\">\n          <button\n            class=\"fat-ratio\"\n            mat-mini-fab\n            *ngFor=\"let mode of pageModes\"\n            (click)=\"controls.pageMode.setValue(mode.value)\"\n            [ngStyle]=\"{ 'background-color': '#eeeeee33' }\">\n            <span [class]=\"mode.icon\" [ngStyle]=\"{ color: mode.value === controls.pageMode.value ? 'red' : '#aaa' }\"></span>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"settings-form-field\">\n        <mat-label>缩放比例</mat-label>\n        <mat-slider\n          class=\"settings-slider\"\n          min=\"50\"\n          max=\"150\"\n          thumbLabel\n          tickInterval=\"10\"\n          [formControl]=\"controls.pageScale\"\n        ></mat-slider>\n      </div>\n\n      <mat-form-field>\n        <mat-label>字体</mat-label>\n        <mat-select [formControl]=\"controls.fontFamily\">\n          <mat-option *ngFor=\"let ff of fontFamilies\" [value]=\"ff\">\n            {{ff}}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <div class=\"settings-form-field\">\n        <mat-label>字体大小</mat-label>\n        <mat-slider\n          class=\"settings-slider\"\n          min=\"13\"\n          max=\"32\"\n          thumbLabel\n          tickInterval=\"1\"\n          [formControl]=\"controls.fontSize\"\n        ></mat-slider>\n      </div>\n\n      <mat-form-field>\n        <mat-label>行高</mat-label>\n        <mat-select [formControl]=\"controls.lineHeight\">\n          <mat-option *ngFor=\"let lh of lineHeights\" [value]=\"lh\">\n            {{lh}}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n\n    </form>\n  </div>\n  <div mat-dialog-actions>\n    <!-- <button mat-button (click)=\"onNoClick()\">No Thanks</button>\n    <button mat-button [mat-dialog-close]=\"settings.value\" cdkFocusInitial>Ok</button> -->\n  </div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FileSystemFileEntry, NgxFileDropEntry } from 'ngx-file-drop';\nimport { Book } from 'src/app/models/Book';\nimport { LibraryService } from '../services/library.service';\nimport { MessageService } from 'src/app/message.service';\n\n@Component({\n  selector: 'app-lib-book-cards',\n  templateUrl: './book-cards.component.html',\n  styleUrls: ['./book-cards.component.scss']\n})\nexport class BookCardsComponent implements OnInit {\n  @Input() public books: Book[];\n\n  public isFileOver = false;\n\n  constructor(\n    private router: Router,\n    private msgService: MessageService,\n    private libraryService: LibraryService\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  openBook(book: Book) {\n    this.router.navigate(['/reader', book.key]);\n  }\n\n  public droped(files: NgxFileDropEntry[]) {\n    console.log(files);\n    this.isFileOver = false;\n    this.msgService.startSpinner();\n\n    let importedCount = 1;\n    for (const droppedFile of files) {\n      // Is it a file?\n      if (droppedFile.fileEntry.isFile) {\n        const fileEntry = droppedFile.fileEntry as FileSystemFileEntry;\n        fileEntry.file(async (file: File) => {\n          // Here you can access the real file\n          // console.log(droppedFile.relativePath, file);\n          await this.libraryService.importBookFile(file);\n          importedCount += 1;\n          if (importedCount >= files.length) {\n            this.msgService.stopSpinner();\n          }\n        });\n      } else {\n        // It was a directory (empty directories are added, otherwise only files)\n        // const fileEntry = droppedFile.fileEntry as FileSystemDirectoryEntry;\n        // console.log(droppedFile.relativePath, fileEntry);\n      }\n    }\n  }\n\n  public fileOver(event) {\n    console.log('over', event);\n    this.isFileOver = true;\n  }\n\n  public fileLeave(event) {\n    console.log('leave', event);\n    this.isFileOver = false;\n  }\n\n}\n","<div class=\"book-cards\">\n  <ngx-file-drop\n    dropZoneLabel=\"Drop files here\"\n    dropZoneClassName=\"book-cords-drop-zone-class\"\n    contentClassName=\"book-cords-drop-zone-content-class\"\n    (onFileDrop)=\"droped($event)\"\n    (onFileOver)=\"fileOver($event)\"\n    (onFileLeave)=\"fileLeave($event)\"\n    accept=\".epub\"\n  >\n  <ng-template ngx-file-drop-content-tmp let-openFileSelector=\"openFileSelector\">\n    <div class=\"book-card-grid\">\n      <div class=\"book-card\" *ngFor=\"let book of books\">\n        <div class=\"book-card-cover\">\n          <img\n            class=\"book-card-cover-img\"\n            [src]=\"book.cover !== 'noCover' ? book.cover : 'assets/cover.svg'\"\n            alt=\"\"\n            (click)=\"openBook(book)\"\n          />\n          <p class=\"book-card-cover-title\" *ngIf=\"book.cover === 'noCover'\"><span>{{book.name}}</span></p>\n        </div>\n        <div class=\"book-card-title\"><span>{{book.name}}</span></div>\n      </div>\n    </div>\n    <div *ngIf=\"isFileOver\" class=\"drop-over-info\">Release to Add books to Library</div>\n  </ng-template>\n  </ngx-file-drop>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-lib-filters',\n  templateUrl: './filters.component.html',\n  styleUrls: ['./filters.component.scss']\n})\nexport class FiltersComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"lib-filters\">\n  <div class=\"lib-filters-group\">\n    <div class=\"lib-filters-subtitle\">\n      Library\n    </div>\n    <div class=\"lib-filters-item active\">\n      <mat-icon>local_library</mat-icon>\n      All books\n    </div>\n    <div class=\"lib-filters-item\">\n      <mat-icon>favorite</mat-icon>\n      Favorites\n    </div>\n  </div>\n</div>\n","export class Book {\n  key: string;\n  name: string;\n  author: string;\n  description: string;\n  md5: string;\n  cover: string;\n  constructor(\n    key: string,\n    name: string,\n    author: string,\n    description: string,\n    md5: string,\n    cover: string\n  ) {\n    this.key = key; // 数据库的键\n    this.name = name; // 书籍名\n    this.author = author; // 作者\n    this.description = description; // 书籍的描述\n    this.md5 = md5; // epub的md5值，防止重复导入\n    this.cover = cover;\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n// import * as localforage from 'localforage';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n\n  private subject = new BehaviorSubject<[string, any]>(['', null]);\n\n  constructor() { }\n\n  save() {}\n\n  load() {}\n\n  setItem(key: string, value: any) {\n    localStorage.setItem(key, value);\n    this.subject.next([key, value]);\n  }\n\n  getItem(key: string) {\n    return localStorage.getItem(key);\n  }\n\n  listen<T>(key: string): Observable<T> {\n    return this.subject\n      .pipe(\n        filter(item => item[0] === key),\n        map(item => item[1])\n      );\n  }\n\n  getReadingSettings() {\n    return {\n      theme: this.getItem('reader.theme'),\n      pageMode: this.getItem('reader.pageMode'),\n      pageScale: this.getItem('reader.pageScale'),\n      fontFamily: this.getItem('reader.fontFamily'),\n      fontSize: this.getItem('reader.fontSize'),\n      lineHeight: this.getItem('reader.lineHeight'),\n    };\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { FileSystemFileEntry, NgxFileDropEntry } from 'ngx-file-drop';\nimport { LibraryService } from '../services/library.service';\n\n@Component({\n  selector: 'app-import-books',\n  templateUrl: './import-books.component.html',\n  styleUrls: ['./import-books.component.scss']\n})\nexport class ImportBooksComponent implements OnInit {\n  public data = {};\n  public isFileOver = false;\n  public status: 'waiting'|'uploading'|'ready' = 'waiting';\n  public uploadProgress = 0;\n\n  constructor(\n    private libraryService: LibraryService,\n    public dialogRef: MatDialogRef<ImportBooksComponent>\n  ) { }\n\n  ngOnInit(): void {}\n\n  async importBookFromLocal(event) {\n    const file = event.target.files[0]\n    await this.libraryService.importBookFile(file);\n  }\n\n  public droped(files: NgxFileDropEntry[]) {\n    this.isFileOver = false;\n    this.status = 'uploading';\n    this.uploadProgress = 0;\n\n    let importedCount = 1;\n    const ratio = 1 / files.length;\n    for (const droppedFile of files) {\n      // Is it a file?\n      if (droppedFile.fileEntry.isFile) {\n        const fileEntry = droppedFile.fileEntry as FileSystemFileEntry;\n        fileEntry.file(async (file: File) => {\n          // Here you can access the real file\n          // console.log(droppedFile.relativePath, file);\n          await this.libraryService.importBookFile(file, (percent: number) => {\n            this.uploadProgress = importedCount * ratio + percent / 100 * ratio;\n          });\n          importedCount += 1;\n          if (importedCount >= files.length) {\n            this.status = 'ready';\n            this.close();\n          }\n        });\n      } else {\n        // It was a directory (empty directories are added, otherwise only files)\n        // const fileEntry = droppedFile.fileEntry as FileSystemDirectoryEntry;\n        // console.log(droppedFile.relativePath, fileEntry);\n      }\n    }\n  }\n\n  fileOver() {\n    this.isFileOver = true;\n  }\n\n  fileLeave() {\n    this.isFileOver = false;\n  }\n\n  close() {\n    this.dialogRef.close();\n  }\n}\n","<h1 mat-dialog-title>Select Files</h1>\n<div mat-dialog-content [ngClass]=\"isFileOver ? 'file-over' : ''\">\n  <ngx-file-drop\n    dropZoneLabel=\"Drop files here\"\n    dropZoneClassName=\"import-books-drop-zone-class\"\n    contentClassName=\"import-books-drop-zone-content-class\"\n    (onFileDrop)=\"droped($event)\"\n    (onFileOver)=\"fileOver()\"\n    (onFileLeave)=\"fileLeave()\"\n    accept=\".epub\"\n  >\n  <ng-template ngx-file-drop-content-tmp let-openFileSelector=\"openFileSelector\">\n    <!-- <div *ngIf=\"isFileOver\" class=\"drop-over-info\">Release to Add books to Library</div> -->\n    <div *ngIf=\"status === 'waiting'\" class=\"hint-and-actions\">\n      <h1>Drag epub files here</h1>\n      <p>or you can selec files...</p>\n      <button mat-flat-button color=\"accent\">\n        Select files on your device\n        <input class=\"hidden-file-input\" type=\"file\" (change)=\"importBookFromLocal($event)\"/>\n      </button>\n    </div>\n\n    <div *ngIf=\"status === 'uploading'\" class=\"uploading\">\n      <div>Uplading...</div>\n      <mat-progress-bar mode=\"determinate\" [value]=\"uploadProgress\"></mat-progress-bar>\n    </div>\n\n    <div *ngIf=\"status === 'ready'\" class=\"ready\">\n      Ready\n    </div>\n  </ng-template>\n  </ngx-file-drop>\n</div>\n<div mat-dialog-actions>\n  <!-- <button mat-flat-button color=\"accent\" [mat-dialog-close]=\"data\" cdkFocusInitial>Ok</button> -->\n  <button mat-flat-button mat-dialog-close>Cancel</button>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ReaderService } from './reader.service';\nimport { ConfigService } from '../config/config.service';\nimport { ReadingLocationService } from './reading-location.service';\nimport { ReadingProgress } from '../models/ReadingProgress';\nimport { MouseService } from './mouse.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { MessageService } from '../message.service';\n\n@Component({\n  selector: 'app-reader',\n  templateUrl: './reader.component.html',\n  styleUrls: ['./reader.component.scss'],\n})\nexport class ReaderComponent implements OnInit, OnDestroy {\n  private subscribesForSettings: Subscription[] = [];\n  private pageMode = 'continuous';\n\n  private readingProgress = new ReadingProgress();\n\n  get isSingleMode() {\n    return this.pageMode !== 'double';\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    private msgService: MessageService,\n    private rlService: ReadingLocationService,\n    private readerService: ReaderService,\n    private configService: ConfigService,\n    private mouseService: MouseService,\n    ) {}\n\n  async ngOnInit() {\n    const key = this.route.snapshot.paramMap.get('key');\n\n    // this.msgService.startSpinner();\n    const settings = this.getSettings();\n\n    this.read(await this.readerService.openBook(key), this.buildRenderOptions(settings.pageMode), settings);\n  }\n\n  ngOnDestroy() {\n    // 记得，watch settings 变化，避免 read 生成多个 [epub文档dom: 即 .epub-container].\n    this.unwatchSettings();\n  }\n\n  buildRenderOptions(pageMode: string) {\n    const options = {\n      manager:\n        pageMode === 'continuous' ? 'continuous' : 'default',\n      flow:\n        pageMode === 'scroll'\n          ? 'scrolled-doc'\n          : pageMode === 'continuous'\n          ? 'scrolled'\n          : 'auto',\n      width: '100%',\n      height: '100%',\n      snap: true,\n    };\n\n    // console.log('pageMode', this.pageMode);\n    // console.log('isSingleMode', this.isSingleMode);\n    // console.log('options', options);\n\n    return options;\n  }\n\n  /**\n   * 监听阅读设置的变化，同步设置到阅读界面\n   */\n  watchSettings() {\n    // 去掉之前的监听，避免重复\n    this.unwatchSettings();\n\n    this.subscribesForSettings = [\n      this.configService.listen('reader.theme').subscribe((theme: string) => {\n        this.readerService.setTheme(theme);\n      }),\n\n      this.configService.listen('reader.pageMode').subscribe(async (pageMode: string) => {\n        if (this.pageMode === pageMode) {\n          return;\n        }\n\n        this.pageMode = pageMode;\n        setTimeout(async () => {\n          // 书籍内容页面模式变更时，需要重新渲染内容，且使用 setTimeout, 将渲染人物排到\"浏览器重排\"之后\n          // 书籍内容页面模式变化后，书籍内容页面尺寸发生变化，会引起浏览器重排和重绘\n          this.read(this.readerService.currentEpub, this.buildRenderOptions(pageMode), this.getSettings());\n        }, 0);\n      }),\n\n      this.configService.listen('reader.fontSize').subscribe((fontSize: string) => {\n        this.readerService.setFontSize(Number(fontSize));\n      }),\n      this.configService.listen('reader.fontFamily').subscribe((fontFamily: string) => {\n        this.readerService.setFontFamily(fontFamily);\n      }),\n      this.configService.listen('reader.lineHeight').subscribe((lineHeight: string) => {\n        this.readerService.setLineHeight(Number(lineHeight));\n      }),\n    ];\n  }\n\n  unwatchSettings() {\n    this.subscribesForSettings.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n\n  public getSettings() {\n    const settings = this.configService.getReadingSettings();\n    this.pageMode = settings.pageMode as string;\n    return settings;\n  }\n\n  read(epub, renderOptions, settings) {\n    this.msgService.startSpinner();\n    this.readingProgress.fetchLocations(epub);\n\n    const pageArea = document.getElementById('page-area');\n    // 删除原来的渲染结果，避免渲染多个\n    pageArea.innerHTML = '';\n\n    epub.renderTo('page-area', renderOptions);\n\n    // 监听 epub 事件\n    this.watchEpub(epub, settings);\n\n    // 注册鼠标事件\n    this.mouseService.bind(epub, !(settings.pageMode === 'single' || settings.pageMode === 'double'));\n\n    // 设置 阅读设置\n    this.readerService.applySettings(epub, settings);\n\n    // 根据记录的阅读位置显示\n    epub.rendition.display(\n      this.rlService.getCfi(this.readerService.currentBook.key) === null\n        ? null\n        : this.rlService.getCfi(this.readerService.currentBook.key).cfi\n    );\n  }\n\n  watchEpub(epub, settings) {\n    // (window as any).rangy.init(); // 初始化\n    epub.rendition.on('locationChanged', () => {\n      this.readerService.touchCurrentChapter(epub);\n      // this.props.handleReadingEpub(epub);\n      // this.props.handleOpenMenu(false);\n      const currentLocation = epub.rendition.currentLocation();\n      const cfi = currentLocation.start.cfi;\n      // this.props.handleShowBookmark(\n      //   this.props.bookmarks &&\n      //     this.props.bookmarks.filter(\n      //       (item: BookmarkModel) => item.cfi === cfi\n      //     )[0]\n      //     ? true\n      //     : false\n      // );\n      if (this.readingProgress.locations) {\n        const percentage = this.readingProgress.locations.percentageFromCfi(cfi);\n        this.rlService.recordCfi(this.readerService.currentBook.key, cfi, percentage);\n        this.readingProgress.percentage = percentage;\n      }\n    });\n    epub.rendition.on('rendered', () => {\n      // this.setState({ loading: false });\n      const iframe = document.getElementsByTagName('iframe')[0];\n      if (!iframe) {\n        return;\n      }\n      const doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n\n      // 要在第一 read 只后再监听 settings, 避免两次“几乎同时” read,\n      // 造成在 [epub 渲染 dom: 即 #page-area] 上生成两个 [epub文档dom: 即 .epub-container].\n      this.watchSettings();\n      // ReaderConfig.addDefaultCss();\n\n      this.msgService.stopSpinner();\n    });\n    epub.rendition.on('selected', (cfiRange: any, contents: any) => {\n      const range = contents.range(cfiRange);\n      const rect = range.getBoundingClientRect();\n      // this.setState({ cfiRange, contents, rect });\n    });\n  }\n\n}\n","<div class=\"viewer\">\n  <div id=\"page-area\" class=\"view-page-area\" [ngClass]=\"isSingleMode ? 'single' : ''\"></div>\n  <app-reader-background></app-reader-background>\n  <app-reader-buttons></app-reader-buttons>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ReaderService } from '../reader.service';\n\n@Component({\n  selector: 'app-reader-toc',\n  templateUrl: './toc.component.html',\n  styleUrls: ['./toc.component.scss']\n})\nexport class TocComponent implements OnInit {\n  public toc = null;\n  public openedMenus = {};\n\n  constructor(private readerService: ReaderService) { }\n\n  ngOnInit(): void {\n    this.readerService.tocSubject.subscribe((toc) => {\n      this.toc = toc;\n    });\n  }\n\n  jump(event: any) {\n    event.preventDefault();\n    const href = event.target.getAttribute('href');\n    this.readerService.jump(href);\n  }\n\n  toggleSubtree(href: string) {\n    this.openedMenus[href] = !this.openedMenus[href];\n  }\n\n}\n","<!-- see: https://www.bennadel.com/blog/3512-playing-with-recursive-ng-template-references-in-angular-6-1-10.htm -->\n\n<ng-template #listTemplateRef let-list let-index=\"index\">\n<ul class=\"book-content\">\n    <li class=\"book-content-list\" *ngFor=\"let item of list\">\n      <span class=\"content-dropdown\" *ngIf=\"item.subitems.length > 0\">\n        <mat-icon (click)=\"toggleSubtree(item.href)\">navigate_next</mat-icon>\n      </span>\n      <a [href]=\"item.href\" (click)=\"jump($event)\" class=\"book-content-name\">{{item.label}}</a>\n      <div *ngIf=\"item.subitems.length > 0 && openedMenus[item.href]\">\n        <ng-template\n          [ngTemplateOutlet]=\"listTemplateRef\"\n          [ngTemplateOutletContext]=\"{ $implicit: item.subitems }\"\n        ></ng-template>\n      </div>\n    </li>\n  </ul>\n</ng-template>\n\n<div class=\"book-content-container\">\n  <ng-template\n    [ngTemplateOutlet]=\"listTemplateRef\"\n    [ngTemplateOutletContext]=\"{ $implicit: toc }\"\n  ></ng-template>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport * as screenfull from 'screenfull';\nimport { ConfigService } from 'src/app/config/config.service';\nimport { NavigationComponent } from '../navigation/navigation.component';\nimport { ReaderService } from '../reader.service';\nimport { SettingsComponent } from '../settings/settings.component';\n\n@Component({\n  selector: 'app-reader-buttons',\n  templateUrl: './buttons.component.html',\n  styleUrls: ['./buttons.component.scss']\n})\nexport class ButtonsComponent implements OnInit {\n  public isFullscreen = false;\n\n  constructor(\n    private router: Router,\n    public dialog: MatDialog,\n    private configService: ConfigService,\n    private readerService: ReaderService,\n  ) {\n    (screenfull as screenfull.Screenfull).on('change', (e) => {\n      this.isFullscreen = (screenfull as screenfull.Screenfull).isFullscreen;\n    });\n  }\n\n  ngOnInit(): void {}\n\n  openNavigation() {\n    this.dialog.open(NavigationComponent, {\n      autoFocus: false,\n      position: {\n        top: '40px',\n        left: '20px'\n      },\n      panelClass: ['reading-navigation-dialog-panel'],\n      backdropClass: 'reading-navigation-dialog-backdrop', // disable default backgroup styles\n      width: '340px',\n      height: 'calc(100vh - 60px)',\n      data: {}\n    });\n  }\n\n  async openSettings() {\n    this.dialog.open(SettingsComponent, {\n      autoFocus: false,\n      position: {\n        top: '40px',\n        right: '20px',\n      },\n      panelClass: ['reading-settings-dialog-panel'],\n      backdropClass: 'reading-settings-dialog-backdrop', // disable default backgroup styles\n      width: '300px',\n      data: {\n        theme: this.configService.getItem('reader.theme'),\n        pageMode: this.configService.getItem('reader.pageMode'),\n        pageScale: this.configService.getItem('reader.pageScale'),\n        fontFamily: this.configService.getItem('reader.fontFamily'),\n        fontSize: this.configService.getItem('reader.fontSize'),\n        lineHeight: this.configService.getItem('reader.lineHeight'),\n      }\n    });\n  }\n\n  goLibrary() {\n    this.router.navigate(['/']);\n  }\n\n  toggleFullscreen() {\n    (screenfull as screenfull.Screenfull).toggle();\n  }\n\n  previous() {\n    this.readerService.prev(this.configService.getItem('reader.pageMode') as string);\n  }\n\n  next() {\n    this.readerService.next(this.configService.getItem('reader.pageMode') as string);\n  }\n\n}\n","<div class=\"reader-buttons\">\n  <div class=\"buttons-top-left\">\n    <button mat-icon-button (click)=\"goLibrary()\">\n      <mat-icon>local_library</mat-icon>\n    </button>\n    <button mat-icon-button (click)=\"openNavigation()\">\n      <mat-icon>toc</mat-icon>\n    </button>\n    <button mat-icon-button (click)=\"openNavigation()\">\n      <mat-icon>notes</mat-icon>\n    </button>\n  </div>\n\n  <div class=\"buttons-top-right\">\n    <button mat-icon-button (click)=\"toggleFullscreen()\">\n      <mat-icon>{{isFullscreen ? 'fullscreen_exit' : 'fullscreen'}}</mat-icon>\n    </button>\n    <button mat-icon-button (click)=\"openSettings()\">\n      <mat-icon>settings</mat-icon>\n    </button>\n  </div>\n\n  <div class=\"buttons-next-previous\">\n    <button mat-fab (click)=\"previous()\" class=\"button-previous\">\n      <mat-icon>navigate_before</mat-icon>\n    </button>\n    <button mat-fab (click)=\"next()\" class=\"button-next\">\n      <mat-icon>navigate_next</mat-icon>\n    </button>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ReadingLocationService {\n\n  constructor() { }\n\n  public recordCfi(bookKey: string, cfi: string, percentage: number) {\n    const json = localStorage.getItem('readingLocation');\n    const obj = JSON.parse(json!) || {};\n    obj[bookKey] = { cfi, percentage };\n    localStorage.setItem('readingLocation', JSON.stringify(obj));\n  }\n\n  public getCfi(bookKey: string) {\n    const json = localStorage.getItem('readingLocation');\n    const obj = JSON.parse(json!) || {};\n    return obj[bookKey] || {};\n  }\n\n  public clear(bookKey: string) {\n    const json = localStorage.getItem('readingLocation');\n    const obj = JSON.parse(json!) || {};\n    delete obj[bookKey];\n    localStorage.setItem('readingLocation', JSON.stringify(obj));\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Book } from '../models/Book';\nimport { LibraryService } from './services/library.service';\nimport { ReaderService } from '../reader/reader.service';\n\n@Component({\n  selector: 'app-library',\n  templateUrl: './library.component.html',\n  styleUrls: ['./library.component.scss']\n})\nexport class LibraryComponent implements OnInit {\n  public books: Book[] = [];\n\n  constructor(\n    private libraryService: LibraryService,\n  ) {\n    this.libraryService.booksSubject.subscribe(books => {\n      this.books = books;\n      console.log('books', books);\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"library\">\n  <app-lib-book-cards [books]=\"books\"></app-lib-book-cards>\n  <app-lib-buttons></app-lib-buttons>\n  <app-lib-filters></app-lib-filters>\n</div>\n","import { Injectable, ChangeDetectorRef, NgZone } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n\n  spinnerSubject = new BehaviorSubject(false);\n\n  constructor(private snackBar: MatSnackBar, private ngZone: NgZone) { }\n\n  message(msg: string) {\n    console.log('MSG::', msg);\n    this.ngZone.run(() => {\n      this.snackBar.open(msg, '', {\n        duration: 500,\n        horizontalPosition: 'right',\n        verticalPosition: 'bottom'\n      });\n    });\n  }\n\n  startSpinner(msg?: string) {\n    console.log('START SPINNER::', msg);\n    this.spinnerSubject.next(true);\n  }\n\n  stopSpinner() {\n    console.log('STOP SPINNER::');\n    this.ngZone.run(() => {\n      this.spinnerSubject.next(false);\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { MessageService } from './message.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'immerse';\n  showSpinner = false;\n\n  constructor(private msgService: MessageService) {\n    this.msgService.spinnerSubject.subscribe(show => {\n      this.showSpinner = show;\n    });\n  }\n}\n","<router-outlet></router-outlet>\n<div class=\"app-spinner\" *ngIf=\"showSpinner\">\n  <mat-spinner strokeWidth=\"2\"></mat-spinner>\n</div>\n","import { Injectable } from '@angular/core';\nimport * as localforage from 'localforage';\nimport { BehaviorSubject } from 'rxjs';\nimport * as SparkMD5 from 'spark-md5';\nimport { MessageService } from 'src/app/message.service';\nimport { Book } from 'src/app/models/Book';\nimport { skip } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LibraryService {\n  private ePub = (window as any).ePub;\n\n  private booksIsLoaded = false;\n  private books: Book[] = [];\n  public booksSubject = new BehaviorSubject([]);\n\n  constructor(\n    private msgService: MessageService\n  ) {\n    this.loadBooks();\n  }\n\n  public addBook(book: Book) {\n    this.books = (this.books || []).concat([book]);\n    this.booksSubject.next(this.books);\n    localforage.setItem('books', this.books);\n  }\n\n  public getBooks() {\n    return this.books;\n  }\n\n  public async getBook(key: string) {\n    if (this.booksIsLoaded) {\n      return this.books.find(book => book.key === key);\n    } else {\n      const books = await this.loadBooks() || [];\n      return books.find(book => book.key === key);\n    }\n  }\n\n  public bookExists(md5: string|Book): boolean {\n    if (typeof md5 !== 'string') {\n      md5 = (md5 as Book).md5;\n    }\n    return this.books.some(book => book.md5 === md5);\n  }\n\n  public async loadBooks() {\n    this.msgService.startSpinner();\n    this.books = await localforage.getItem('books') || [];\n    this.booksSubject.next(this.books);\n    this.booksIsLoaded = true;\n    this.msgService.stopSpinner();\n    return this.books;\n  }\n\n  public async importBookFile(file: File, progressCallback: (percent: number) => void = (p) => {}): Promise<[any, Book]> {\n    return await this.doIncrementalTest(file, progressCallback);\n  }\n\n  // 获取书籍md5\n  private doIncrementalTest(file: any, progressCallback: (percent: number) => void): Promise<[any, Book]> {\n    return new Promise((resolve, reject) => {\n      // 这里假设直接将文件选择框的dom引用传入\n      // 这里需要用到File的slice( )方法，以下是兼容写法\n      const fileName = file.name.split('.');\n      const extension = fileName[fileName.length - 1];\n      if (extension === 'epub') {\n        const blobSlice =\n            (File as any).prototype.slice ||\n            (File as any).prototype.mozSlice ||\n            (File as any).prototype.webkitSlice;\n\n        const chunkSize = 2097152; // 以每片2MB大小来逐次读取\n        const chunks = Math.ceil(file.size / chunkSize);\n        let currentChunk = 0;\n        const spark = new SparkMD5(); // 创建SparkMD5的实例\n        const fileReader = new FileReader();\n\n        fileReader.onload = async (e) => {\n          if (!e.target) {\n            reject();\n            throw new Error();\n          }\n          spark.appendBinary((e.target as any).result as any); // append array buffer\n          currentChunk += 1;\n          if (currentChunk < chunks) {\n            progressCallback(currentChunk / chunks);\n            loadNext();\n          } else {\n            const md5 = spark.end(); // 完成计算，返回结果\n            progressCallback(100);\n            resolve(await this.storeFileAndCreateBook(file, md5));\n          }\n        };\n\n        const loadNext = () => {\n          const start = currentChunk * chunkSize;\n          const end = start + chunkSize >= file.size ? file.size : start + chunkSize;\n\n          fileReader.readAsBinaryString(blobSlice.call(file, start, end));\n        };\n\n        loadNext();\n      } else {\n        this.msgService.message('Import Failed: not epub file');\n        reject();\n      }\n    });\n  }\n\n  private storeFileAndCreateBook(file: any, md5: string): Promise<[any, Book]> {\n    return new Promise((resolve, reject) => {\n      // md5 重复不导入\n      if (this.bookExists(md5)) {\n        this.msgService.message('Duplicate Book');\n        return resolve([null, null]);\n      }\n      // 解析图书，获取图书数据\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onload = (e) => {\n        if (!e.target) {\n          this.msgService.message('Import Failed');\n          reject();\n          throw new Error();\n        }\n        const epub = this.ePub((e.target as any).result);\n        epub.loaded.metadata\n          .then((metadata: any) => {\n            if (!e.target) {\n              this.msgService.message('Import Failed: no metadata');\n              reject();\n              throw new Error();\n            }\n\n            epub\n              .coverUrl()\n              .then(async (url: string) => {\n                const createBook = async (cover: string) => {\n                  const [name, author, description] = [\n                    metadata.title,\n                    metadata.creator,\n                    metadata.description,\n                  ];\n                  const key = new Date().getTime() + '';\n                  const book = new Book(\n                    key,\n                    name,\n                    author,\n                    description,\n                    md5,\n                    cover\n                  );\n                  // await this.handleAddBook(book);\n                  this.addBook(book);\n\n                  localforage.setItem(key, (e.target as any).result);\n                  resolve([epub, book]);\n                };\n\n                if (url) {\n                  const coverReader = new FileReader();\n                  const blob = await fetch(url).then((r) => r.blob());\n                  coverReader.readAsDataURL(blob);\n                  console.log(url, 'url');\n                  coverReader.onloadend = async () => {\n                    await createBook(coverReader.result as string);\n                  };\n                } else {\n                  await createBook('noCover');\n                }\n\n              })\n              .catch((err: any) => {\n                console.log(err, 'err');\n                reject();\n              });\n          })\n          .catch(() => {\n            this.msgService.message('Import Failed');\n            // this.props.handleMessageBox(true);\n            reject();\n          });\n      };\n\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { LibraryModule } from './library/library.module';\nimport { ReaderModule } from './reader/reader.module';\n\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    MatSnackBarModule,\n    MatProgressSpinnerModule,\n    LibraryModule,\n    ReaderModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { ConfigService } from 'src/app/config/config.service';\nimport { ReaderService } from '../reader.service';\n\n@Component({\n  selector: 'app-reader-background',\n  templateUrl: './background.component.html',\n  styleUrls: ['./background.component.scss']\n})\nexport class BackgroundComponent implements OnInit {\n  public backgroundColor = '';\n\n  public bookName = '';\n  public chapter = '';\n  public leftPage = '';\n  public rightPage = '';\n\n  private pageMode: string;\n  public get isSingleMode() {\n    return this.pageMode !== 'double';\n  }\n\n  constructor(\n    private configService: ConfigService,\n    private readerService: ReaderService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) { }\n\n  ngOnInit() {\n    this.watchSettings();\n    this.watchInfo();\n\n    this.backgroundColor = this.configService.getItem('reader.theme') as string;\n    this.pageMode = this.configService.getItem('reader.pageMode') as string;\n   }\n\n   watchSettings() {\n    this.configService.listen('reader.theme').subscribe((theme: string) => {\n      this.backgroundColor = theme;\n    });\n\n    this.configService.listen('reader.pageMode').subscribe((pageMode: string) => {\n      this.pageMode = pageMode;\n    });\n  }\n\n  watchInfo() {\n    this.readerService.bookSubject.subscribe(book => {\n      this.bookName = book.name;\n    });\n\n    this.readerService.chapterSubject.subscribe(chapter => {\n      this.chapter = chapter;\n      // see: https://zhuanlan.zhihu.com/p/100038957\n      this.changeDetectorRef.detectChanges();\n    });\n    this.readerService.leftPageSubject.subscribe(leftPage => {\n      this.leftPage = leftPage;\n    });\n    this.readerService.rightPageSubject.subscribe(rightPage => {\n      this.rightPage = rightPage;\n      document.documentElement.click();\n    });\n  }\n\n}\n","<div\n  class=\"reader-background\"\n  [ngClass]=\"isSingleMode ? 'single' : ''\"\n  [ngStyle]=\"{'background-color': backgroundColor}\"\n>\n  <p class=\"progress-chapter-name\" [ngClass]=\"chapter\">{{chapter}}</p>\n  <p *ngIf=\"!isSingleMode\" class=\"progress-book-name\">{{bookName}}</p>\n  <p class=\"background-page-left\">第 {{leftPage}} 页</p>\n  <p *ngIf=\"!isSingleMode\" class=\"background-page-right\">第 {{rightPage}} 页</p>\n  <!-- <div class=\"background-box2\"></div>\n  <div class=\"background-box3\"></div> -->\n  <div class=\"background-box1\"></div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LibraryComponent } from './library.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LibraryComponent\n  }\n]\n\n\n@NgModule({\n  imports: [CommonModule, RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LibraryRoutingModule { }\n","import { Injectable } from '@angular/core';\nimport * as localforage from 'localforage';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { LibraryService } from '../library/services/library.service';\nimport { Book } from '../models/Book';\nimport { distinct } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ReaderService {\n  private ePub = (window as any).ePub;\n\n  public bookSubject: Subject<Book> = new Subject();\n  public currentBook: Book = null;\n\n  public currentEpub = null;\n\n  public tocSubject = new BehaviorSubject([]);\n  public flattenedToc = null;\n  public notes = [];\n  public bookmarks = [];\n\n  public chapterSubject = new BehaviorSubject('');\n  public leftPageSubject = new BehaviorSubject('');\n  public rightPageSubject = new BehaviorSubject('');\n\n  constructor(\n    private libraryService: LibraryService\n  ) {\n    this.bookSubject.pipe(distinct()).subscribe((book) => {\n      this.currentBook = book;\n    });\n  }\n\n  public async openBook(key: string);\n  public async openBook(url: string);\n  public async openBook(file: any) {\n    if (typeof file === 'string') {\n      this.currentEpub = this.ePub(await localforage.getItem(file));\n      this.bookSubject.next(await this.libraryService.getBook(file));\n    } else {\n      [this.currentEpub, this.currentBook] = await this.libraryService.importBookFile(file);\n      this.bookSubject.next(this.currentBook);\n    }\n    this.fetchChapters(this.currentEpub);\n    return this.currentEpub;\n  }\n\n  /* rendition utils */\n  public jump(href: string) {\n    this.currentEpub.rendition.display(href);\n  }\n\n  public prev(pageMode: string) {\n    if (pageMode === 'single' || pageMode === 'double') {\n      this.currentEpub.rendition.prev();\n    } else {\n      this.nextChapter(-1);\n    }\n  }\n\n  public next(pageMode: string) {\n    if (pageMode === 'single' || pageMode === 'double') {\n      this.currentEpub.rendition.next();\n    } else {\n      this.nextChapter();\n    }\n  }\n\n  public previousChapter() {\n    this.nextChapter(-1);\n  }\n\n  public nextChapter(step: number = 1) {\n    const currentLocation = this.currentEpub.rendition.currentLocation();\n    if (!currentLocation.start) {\n      return;\n    }\n    const chapterIndex = currentLocation.start.index;\n    const section = this.currentEpub.section(chapterIndex + step);\n    if (section && section.href) {\n      this.currentEpub.rendition.display(section.href);\n    }\n  }\n\n  /**\n   * navigation informations\n   * incluces: [chapters, bookmarks, notes]\n   */\n  private async fetchChapters(epub) {\n    epub.loaded.navigation\n      .then((chapters: any) => {\n        // this.toc = chapters.toc;\n        this.tocSubject.next(chapters.toc);\n        this.flattenedToc = flatChapter(chapters.toc);\n      })\n      .catch(() => {\n        console.log('Error occurs');\n      });\n  }\n\n  public touchCurrentChapter(epub) {\n    const currentLocation = epub.rendition.currentLocation();\n    if (!currentLocation.start) {\n      return;\n    }\n\n    this.leftPageSubject.next(currentLocation.start.displayed.page);\n    this.rightPageSubject.next(currentLocation.end.displayed.page);\n\n    const chapterHref = currentLocation.start.href;\n    let chapter = 'Unknown Chapter';\n    const chapterSbj = this.flattenedToc.filter(\n      (item: any) => item.href.split('#')[0] === chapterHref\n    )[0];\n    if (chapterSbj) {\n      chapter = chapterSbj.label.trim();\n    }\n    this.chapterSubject.next(chapter);\n  }\n\n  // settings\n\n  // public setPageMode(mode: 'single' | 'double' | 'scroll' | 'continuous') {\n  public setPageMode(mode: string) {\n    // todo\n    // const rendition = this.currentEpub.rendition;\n    // rendition.viewManager = rendition.requireManager(\n    //   mode === 'continuous' ? 'continuous' : 'default'\n    // );\n\n    // rendition.View = rendition.requireView(rendition.settings.view);\n\n    // rendition.manager = new rendition.ViewManager({\n    //   view: rendition.View,\n    //   queue: rendition.q,\n    //   request: rendition.book.load.bind(rendition.book),\n    //   settings: rendition.settings\n    // });\n\n    // const flow = mode === 'scroll'\n    //   ? 'scrolled-doc'\n    //   : mode === 'continuous'\n    //   ? 'scrolled'\n    //   : 'auto';\n    // // this.currentEpub.rendition.setManager(manager);\n    // this.currentEpub.rendition.flow(flow);\n  }\n\n  public setTheme(theme: string) { // backgorund color\n    // todo: 使用 inherit 后，使一些元素(比如 a, 链接和目录项)失去了原本的颜色\n    console.log('themes', this.currentEpub.rendition.themes);\n    this.currentEpub.rendition.themes.default({\n      'a, article, cite, code, div, li, p, pre, span, table': {\n        color: `${theme === 'rgba(44,47,49,1)' ? 'white' : 'inherit'} !important`,\n        // color: `${theme === 'rgba(44,47,49,1)' ? 'white!important' : 'inherit'}`,\n      },\n    });\n  }\n\n  public setFontSize(size: number) {\n    this.currentEpub.rendition.themes.default({\n      'a, article, cite, code, div, li, p, pre, span, table': {\n      'font-size': `${size || 17}px !important`,\n      },\n    });\n  }\n\n  public setFontFamily(fontFamily: string) {\n    this.currentEpub.rendition.themes.default({\n      'a, article, cite, code, div, li, p, pre, span, table': {\n        'font-family': `${fontFamily || 'Helvetica'} !important`,\n      },\n    });\n  }\n\n  public setLineHeight(lineHeight: number) {\n    this.currentEpub.rendition.themes.default({\n      'a, article, cite, code, div, li, p, pre, span, table': {\n        'line-height': `${lineHeight || '1.25'} !important`,\n      },\n    });\n  }\n\n  public setScale(scale: number) {\n    // todo\n  }\n\n  applySettings(epub, settings) {\n    const isUseFont = false;\n\n    epub.rendition.themes.default({\n      'a, article, cite, code, div, li, p, pre, span, table': {\n        'font-size': `${\n          // OtherUtil.getReaderConfig(\"isUseFont\") === \"yes\"\n          isUseFont\n            ? ''\n            : settings.fontSize || 17\n        }px !important`,\n        'line-height': `${\n          // OtherUtil.getReaderConfig(\"isUseFont\") === \"yes\"\n          isUseFont\n            ? ''\n            : settings.lineHeight || '1.25'\n        } !important`,\n        'font-family': `${\n          // OtherUtil.getReaderConfig(\"isUseFont\") === \"yes\"\n          isUseFont\n            ? ''\n            : settings.fontFamily || 'Helvetica'\n        } !important`,\n        color: `${\n          // OtherUtil.getReaderConfig(\"theme\") === \"rgba(44,47,49,1)\"\n          settings.theme === 'rgba(44,47,49,1)'\n            ? 'white'\n            : ''\n        } !important`,\n      },\n    });\n  }\n\n}\n\nfunction flatChapter(chapters: any) {\n  let newChapter: any = [];\n  for (const chapter of chapters) {\n    if (chapter.subitems[0]) {\n      newChapter.push(chapter);\n      newChapter = newChapter.concat(flatChapter(chapter.subitems));\n    } else {\n      newChapter.push(chapter);\n    }\n  }\n  return newChapter;\n}\n","import { Injectable } from '@angular/core';\nimport { ReaderService } from './reader.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MouseService {\n  private unbindEvent: () => void;\n\n  constructor(private readerService: ReaderService) { }\n\n  bind(epub: any, isScrollMode: boolean) {\n    const isFirefox = navigator.userAgent.indexOf('Firefox') !== -1;\n    let lock = false; // 暂时锁住翻页快捷键，避免快速点击产生的Bug\n    const arrowKeys = (event: any) => {\n      // event.preventDefault();\n      if (lock) {\n        return;\n      }\n\n      if (event.keyCode === 37 || (event.keyCode === 38 && !isScrollMode)) {\n        epub.rendition.prev();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n      if (event.keyCode === 39 || (event.keyCode === 40 && !isScrollMode)) {\n        epub.rendition.next();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n    const mouseFirefox = (event: any) => {\n      event.preventDefault();\n      if (lock) {\n        return;\n      }\n      if (event.detail < 0) {\n        epub.rendition.prev();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n      if (event.detail > 0) {\n        epub.rendition.next();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    const mouseChrome = (event: any) => {\n      if (lock) {\n        return;\n      }\n      if (event.wheelDelta > 0) {\n        epub.rendition.prev();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n      if (event.wheelDelta < 0) {\n        epub.rendition.next();\n        lock = true;\n        setTimeout(() => {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    // const gesture = (event: any) => {\n    //   if (lock) {\n    //     return;\n    //   }\n    //   if (event.type === 'panleft' || event.type === 'panup') {\n    //     epub.rendition.next();\n    //     lock = true;\n    //     setTimeout(() => {\n    //       lock = false;\n    //     }, 100);\n    //     return false;\n    //   }\n    //   if (event.type === 'panright' || event.type === 'pandown') {\n    //     epub.rendition.prev();\n    //     lock = true;\n    //     setTimeout(() => {\n    //       lock = false;\n    //     }, 100);\n    //     return false;\n    //   }\n    // };\n\n    const bindEvent = (doc: any) => {\n      window.addEventListener('keydown', arrowKeys);\n      doc.addEventListener('keydown', arrowKeys); // 箭头按键翻页\n      // 鼠标滚轮翻页\n      if (!isScrollMode) {\n        if (isFirefox) {\n          doc.addEventListener('DOMMouseScroll', mouseFirefox, false);\n        } else {\n          doc.addEventListener('mousewheel', mouseChrome, false);\n        }\n      }\n\n      this.unbindEvent = () => {\n        window.removeEventListener('keydown', arrowKeys);\n        doc.removeEventListener('keydown', arrowKeys); // 箭头按键翻页\n        // 鼠标滚轮翻页\n        if (isFirefox) {\n          doc.removeEventListener('DOMMouseScroll', mouseFirefox, false);\n        } else {\n          doc.removeEventListener('mousewheel', mouseChrome, false);\n        }\n      };\n    };\n\n    epub.rendition.on('rendered', () => {\n      const iframe = document.getElementsByTagName('iframe')[0];\n      if (!iframe){\n        return;\n      }\n      const doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n\n      // if (OtherUtil.getReaderConfig('isTouch') === 'yes') {\n      //   const mc = new Hammer(doc);\n      //   mc.on('panleft panright panup pandown', (event: any) => {\n      //     gesture(event);\n      //   });\n      // }\n\n      if (this.unbindEvent) {\n        this.unbindEvent();\n      }\n      bindEvent(doc);\n    });\n  }\n\n  unbind() {\n    if (this.unbindEvent) {\n      this.unbindEvent();\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ImportBooksComponent } from '../import-books/import-books.component';\n\n@Component({\n  selector: 'app-lib-buttons',\n  templateUrl: './buttons.component.html',\n  styleUrls: ['./buttons.component.scss']\n})\nexport class ButtonsComponent implements OnInit {\n\n  constructor(\n    private dialog: MatDialog,\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  openImportDialog() {\n    this.dialog.open(ImportBooksComponent, {\n      hasBackdrop: false,\n      autoFocus: false,\n      width: 'calc(100vw - 460px)',\n      height: 'calc(100vh - 200px)',\n      maxWidth: '1000px',\n      maxHeight: '600px',\n    });\n  }\n}\n","<div class=\"lib-buttons\">\n  <div class=\"app-name\">Immerse</div>\n  <div class=\"buttons-right\">\n    <button mat-icon-button color=\"accent\" (click)=\"openImportDialog()\">\n      <mat-icon>note_add</mat-icon>\n    </button>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ReaderService } from '../reader.service';\nimport { ConfigService } from 'src/app/config/config.service';\n\n@Component({\n  selector: 'app-reader-navigation',\n  templateUrl: './navigation.component.html',\n  styleUrls: ['./navigation.component.scss']\n})\nexport class NavigationComponent implements OnInit {\n  // public backgroundColor = '';\n  public isSearch = false;\n  public currentTab = 'contents';\n\n  public get bookName () { return this.readerService.currentBook ? this.readerService.currentBook.name : ''; }\n  public get author () { return this.readerService.currentBook ? this.readerService.currentBook.author : ''; }\n\n  constructor(\n    // private configService: ConfigService,\n    public readerService: ReaderService\n  ) { }\n\n  ngOnInit(): void {\n    // this.backgroundColor = this.configService.getItem('reader.theme') as string;\n    // this.configService.listen('reader.theme').subscribe((theme: string) => {\n    //   this.backgroundColor = theme;\n    // });\n  }\n\n  changeTab(tab: string) {}\n\n}\n","<div class=\"reader-navigation\">\n  <ng-template [ngIf]=\"isSearch\" [ngIfElse]=\"nav\">\n    <span\n      class=\"icon-close nav-close-icon\"\n    ></span>\n    <div\n      class=\"header-search-container\"\n      [ngStyle]=\"isSearch ? { left: 40 } : {}\"\n    >\n      <div\n        class=\"navigation-search-title\"\n        [ngStyle]=\"{height: '20px', margin: '0px 25px 13px'}\"\n      >\n        Search the book\n      </div>\n      <!-- <SearchBox {...searchProps} /> -->\n    </div>\n    <ul class=\"nav-search-list\">\n      <!-- {this.state.searchList ? this.renderSearchList() : null} -->\n    </ul>\n    <ul class=\"nav-search-page\">\n      <!-- {this.state.searchList ? this.renderSearchPage() : null} -->\n    </ul>\n  </ng-template>\n\n  <ng-template #nav>\n    <div class=\"navigation-header\">\n      <!-- <img class=\"book-cover\" src={this.state.cover} alt=\"\" /> -->\n      <p class=\"book-title\">{{bookName}}</p>\n      <p class=\"book-arthur\">\n        Author: {{author}}\n        <!-- <Trans>\n        </Trans> -->\n      </p>\n      <span class=\"reading-duration\">\n        <!-- <Trans>Reading Time</Trans>: {Math.floor(this.props.time / 60)}\n        &nbsp;\n        <Trans>Minute</Trans> -->\n      </span>\n      <div class=\"navigation-search-box\">\n        <!-- <SearchBox {...searchProps} /> -->\n      </div>\n\n      <div class=\"navigation-navigation\">\n        <span\n          class=\"book-content-title\"\n          [ngStyle]=\"currentTab === 'contents' ? { color: 'rgba(112, 112, 112, 1)' } : { color: 'rgba(217, 217, 217, 1)' }\"\n          (click)=\"changeTab('contents')\"\n        >\n          <!-- <Trans>Content</Trans> -->\n          Contents\n        </span>\n        <span\n          class=\"book-bookmark-title\"\n          [ngStyle]=\"currentTab === 'bookmarks' ? { color: 'rgba(112, 112, 112, 1)' } : { color: 'rgba(217, 217, 217, 1)' }\"\n          (click)=\"changeTab('bookmarks')\"\n        >\n          <!-- <Trans>Bookmark</Trans> -->\n          Bookmark\n        </span>\n        <span\n          class=\"book-bookmark-title\"\n          [ngStyle]=\"currentTab === 'notes' ? { color: 'rgba(112, 112, 112, 1)' } : { color: 'rgba(217, 217, 217, 1)' }\"\n          (click)=\"changeTab('notes')\"\n        >\n          <!-- <Trans>Note</Trans> -->\n          Notes\n        </span>\n        <span\n          class=\"book-bookmark-title\"\n          [ngStyle]=\"currentTab === 'digest' ? { color: 'rgba(112, 112, 112, 1)' } : { color: 'rgba(217, 217, 217, 1)' }\"\n          (click)=\"changeTab('digest')\"\n        >\n          <!-- <Trans>Digest</Trans> -->\n          Digests\n        </span>\n      </div>\n    </div>\n    <div class=\"navigation-body-parent\">\n      <div class=\"navigation-body\">\n        <app-reader-toc></app-reader-toc>\n        <!-- {this.state.currentTab === \"contents\" ? (\n          <ContentList />\n        ) : (\n          <BookNavList {...bookmarkProps} />\n        )} -->\n      </div>\n    </div>\n  </ng-template>\n</div>\n\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LibraryRoutingModule } from './library/library-routing.module';\nimport { ReaderRoutingModule } from './reader/reader-routing.module';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes),\n    LibraryRoutingModule,\n    ReaderRoutingModule\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LibraryComponent } from './library.component';\nimport { BookCardsComponent } from './book-cards/book-cards.component';\nimport { FiltersComponent } from './filters/filters.component';\nimport { ButtonsComponent } from './buttons/buttons.component';\nimport { ImportBooksComponent } from './import-books/import-books.component';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { NgxFileDropModule } from 'ngx-file-drop';\n\n@NgModule({\n  declarations: [LibraryComponent, BookCardsComponent, ButtonsComponent, FiltersComponent, ImportBooksComponent],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    MatDialogModule,\n    MatProgressBarModule,\n    NgxFileDropModule\n  ]\n})\nexport class LibraryModule { }\n","import { ReadingLocationService } from '../reader/reading-location.service';\n\nexport class ReadingProgress {\n  constructor(\n    public percentage: number = null,\n    public locations: any = null\n  ) {}\n\n  restorePercentage(rlService: ReadingLocationService, book: { key: string }) {\n    this.percentage = rlService.getCfi(book.key).percentage;\n  }\n\n  fetchLocations(epub: any) {\n    epub.locations\n      .generate()\n      .then(() => {\n        this.locations = epub.locations;\n      })\n      .catch(() => {\n        console.log('Error occurs');\n      });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ReaderComponent } from './reader.component';\n\nconst routes: Routes = [\n  {\n    path: 'reader/:key',\n    component: ReaderComponent\n  }\n];\n\n@NgModule({\n  imports: [CommonModule, RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ReaderRoutingModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}